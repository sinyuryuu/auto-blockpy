"use strict";
var $jscomp = $jscomp || {};
$jscomp.scope = {};
var COMPILED = !0,
  goog = goog || {};
(goog.global = this || self),
  (goog.isDef = function (t) {
    return void 0 !== t;
  }),
  (goog.isString = function (t) {
    return "string" == typeof t;
  }),
  (goog.isBoolean = function (t) {
    return "boolean" == typeof t;
  }),
  (goog.isNumber = function (t) {
    return "number" == typeof t;
  }),
  (goog.exportPath_ = function (t, e, o) {
    (t = t.split(".")),
      (o = o || goog.global),
      t[0] in o || void 0 === o.execScript || o.execScript("var " + t[0]);
    for (var i; t.length && (i = t.shift()); )
      t.length || void 0 === e
        ? (o = o[i] && o[i] !== Object.prototype[i] ? o[i] : (o[i] = {}))
        : (o[i] = e);
  }),
  (goog.define = function (t, e) {
    if (!COMPILED) {
      var o = goog.global.CLOSURE_UNCOMPILED_DEFINES,
        i = goog.global.CLOSURE_DEFINES;
      o && void 0 === o.nodeType && Object.prototype.hasOwnProperty.call(o, t)
        ? (e = o[t])
        : i &&
          void 0 === i.nodeType &&
          Object.prototype.hasOwnProperty.call(i, t) &&
          (e = i[t]);
    }
    return e;
  }),
  (goog.FEATURESET_YEAR = 2012),
  (goog.DEBUG = !0),
  (goog.LOCALE = "en"),
  (goog.TRUSTED_SITE = !0),
  (goog.STRICT_MODE_COMPATIBLE = !1),
  (goog.DISALLOW_TEST_ONLY_CODE = COMPILED && !goog.DEBUG),
  (goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING = !1),
  (goog.provide = function (t) {
    if (goog.isInModuleLoader_())
      throw Error("goog.provide cannot be used within a module.");
    if (!COMPILED && goog.isProvided_(t))
      throw Error('Namespace "' + t + '" already declared.');
    goog.constructNamespace_(t);
  }),
  (goog.constructNamespace_ = function (t, e) {
    if (!COMPILED) {
      delete goog.implicitNamespaces_[t];
      for (
        var o = t;
        (o = o.substring(0, o.lastIndexOf("."))) && !goog.getObjectByName(o);

      )
        goog.implicitNamespaces_[o] = !0;
    }
    goog.exportPath_(t, e);
  }),
  (goog.getScriptNonce = function (t) {
    return t && t != goog.global
      ? goog.getScriptNonce_(t.document)
      : (null === goog.cspNonce_ &&
          (goog.cspNonce_ = goog.getScriptNonce_(goog.global.document)),
        goog.cspNonce_);
  }),
  (goog.NONCE_PATTERN_ = /^[\w+/_-]+[=]{0,2}$/),
  (goog.cspNonce_ = null),
  (goog.getScriptNonce_ = function (t) {
    return (t = t.querySelector && t.querySelector("script[nonce]")) &&
      (t = t.nonce || t.getAttribute("nonce")) &&
      goog.NONCE_PATTERN_.test(t)
      ? t
      : "";
  }),
  (goog.VALID_MODULE_RE_ = /^[a-zA-Z_$][a-zA-Z0-9._$]*$/),
  (goog.module = function (t) {
    if ("string" != typeof t || !t || -1 == t.search(goog.VALID_MODULE_RE_))
      throw Error("Invalid module identifier");
    if (!goog.isInGoogModuleLoader_())
      throw Error(
        "Module " +
          t +
          " has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide."
      );
    if (goog.moduleLoaderState_.moduleName)
      throw Error("goog.module may only be called once per module.");
    if (((goog.moduleLoaderState_.moduleName = t), !COMPILED)) {
      if (goog.isProvided_(t))
        throw Error('Namespace "' + t + '" already declared.');
      delete goog.implicitNamespaces_[t];
    }
  }),
  (goog.module.get = function (t) {
    return goog.module.getInternal_(t);
  }),
  (goog.module.getInternal_ = function (t) {
    if (!COMPILED) {
      if (t in goog.loadedModules_) return goog.loadedModules_[t].exports;
      if (!goog.implicitNamespaces_[t])
        return null != (t = goog.getObjectByName(t)) ? t : null;
    }
    return null;
  }),
  (goog.ModuleType = { ES6: "es6", GOOG: "goog" }),
  (goog.moduleLoaderState_ = null),
  (goog.isInModuleLoader_ = function () {
    return goog.isInGoogModuleLoader_() || goog.isInEs6ModuleLoader_();
  }),
  (goog.isInGoogModuleLoader_ = function () {
    return (
      !!goog.moduleLoaderState_ &&
      goog.moduleLoaderState_.type == goog.ModuleType.GOOG
    );
  }),
  (goog.isInEs6ModuleLoader_ = function () {
    if (
      goog.moduleLoaderState_ &&
      goog.moduleLoaderState_.type == goog.ModuleType.ES6
    )
      return !0;
    var t = goog.global.$jscomp;
    return (
      !!t &&
      "function" == typeof t.getCurrentModulePath &&
      !!t.getCurrentModulePath()
    );
  }),
  (goog.module.declareLegacyNamespace = function () {
    if (!COMPILED && !goog.isInGoogModuleLoader_())
      throw Error(
        "goog.module.declareLegacyNamespace must be called from within a goog.module"
      );
    if (!COMPILED && !goog.moduleLoaderState_.moduleName)
      throw Error(
        "goog.module must be called prior to goog.module.declareLegacyNamespace."
      );
    goog.moduleLoaderState_.declareLegacyNamespace = !0;
  }),
  (goog.declareModuleId = function (t) {
    if (!COMPILED) {
      if (!goog.isInEs6ModuleLoader_())
        throw Error(
          "goog.declareModuleId may only be called from within an ES6 module"
        );
      if (goog.moduleLoaderState_ && goog.moduleLoaderState_.moduleName)
        throw Error("goog.declareModuleId may only be called once per module.");
      if (t in goog.loadedModules_)
        throw Error('Module with namespace "' + t + '" already exists.');
    }
    if (goog.moduleLoaderState_) goog.moduleLoaderState_.moduleName = t;
    else {
      var e = goog.global.$jscomp;
      if (!e || "function" != typeof e.getCurrentModulePath)
        throw Error(
          'Module with namespace "' + t + '" has been loaded incorrectly.'
        );
      (e = e.require(e.getCurrentModulePath())),
        (goog.loadedModules_[t] = {
          exports: e,
          type: goog.ModuleType.ES6,
          moduleId: t,
        });
    }
  }),
  (goog.setTestOnly = function (t) {
    if (goog.DISALLOW_TEST_ONLY_CODE)
      throw (
        ((t = t || ""),
        Error(
          "Importing test-only code into non-debug environment" +
            (t ? ": " + t : ".")
        ))
      );
  }),
  (goog.forwardDeclare = function (t) {}),
  COMPILED ||
    ((goog.isProvided_ = function (t) {
      return (
        t in goog.loadedModules_ ||
        (!goog.implicitNamespaces_[t] && null != goog.getObjectByName(t))
      );
    }),
    (goog.implicitNamespaces_ = { "goog.module": !0 })),
  (goog.getObjectByName = function (t, e) {
    (t = t.split(".")), (e = e || goog.global);
    for (var o = 0; o < t.length; o++) if (null == (e = e[t[o]])) return null;
    return e;
  }),
  (goog.globalize = function (t, e) {
    for (var o in ((e = e || goog.global), t)) e[o] = t[o];
  }),
  (goog.addDependency = function (t, e, o, i) {
    !COMPILED &&
      goog.DEPENDENCIES_ENABLED &&
      goog.debugLoader_.addDependency(t, e, o, i);
  }),
  (goog.ENABLE_DEBUG_LOADER = !0),
  (goog.logToConsole_ = function (t) {
    goog.global.console && goog.global.console.error(t);
  }),
  (goog.require = function (t) {
    if (!COMPILED) {
      if (
        (goog.ENABLE_DEBUG_LOADER && goog.debugLoader_.requested(t),
        goog.isProvided_(t))
      ) {
        if (goog.isInModuleLoader_()) return goog.module.getInternal_(t);
      } else if (goog.ENABLE_DEBUG_LOADER) {
        var e = goog.moduleLoaderState_;
        goog.moduleLoaderState_ = null;
        try {
          goog.debugLoader_.load_(t);
        } finally {
          goog.moduleLoaderState_ = e;
        }
      }
      return null;
    }
  }),
  (goog.requireType = function (t) {
    return {};
  }),
  (goog.basePath = ""),
  (goog.nullFunction = function () {}),
  (goog.abstractMethod = function () {
    throw Error("unimplemented abstract method");
  }),
  (goog.addSingletonGetter = function (t) {
    (t.instance_ = void 0),
      (t.getInstance = function () {
        return t.instance_
          ? t.instance_
          : (goog.DEBUG &&
              (goog.instantiatedSingletons_[
                goog.instantiatedSingletons_.length
              ] = t),
            (t.instance_ = new t()));
      });
  }),
  (goog.instantiatedSingletons_ = []),
  (goog.LOAD_MODULE_USING_EVAL = !0),
  (goog.SEAL_MODULE_EXPORTS = goog.DEBUG),
  (goog.loadedModules_ = {}),
  (goog.DEPENDENCIES_ENABLED = !COMPILED && goog.ENABLE_DEBUG_LOADER),
  (goog.TRANSPILE = "detect"),
  (goog.ASSUME_ES_MODULES_TRANSPILED = !1),
  (goog.TRANSPILE_TO_LANGUAGE = ""),
  (goog.TRANSPILER = "transpile.js"),
  (goog.hasBadLetScoping = null),
  (goog.useSafari10Workaround = function () {
    if (null == goog.hasBadLetScoping) {
      try {
        var a = !eval(
          '"use strict";let x = 1; function f() { return typeof x; };f() == "number";'
        );
      } catch (t) {
        a = !1;
      }
      goog.hasBadLetScoping = a;
    }
    return goog.hasBadLetScoping;
  }),
  (goog.workaroundSafari10EvalBug = function (t) {
    return "(function(){" + t + "\n;})();\n";
  }),
  (goog.loadModule = function (t) {
    var e = goog.moduleLoaderState_;
    try {
      if (
        ((goog.moduleLoaderState_ = {
          moduleName: "",
          declareLegacyNamespace: !1,
          type: goog.ModuleType.GOOG,
        }),
        goog.isFunction(t))
      )
        var o = t.call(void 0, {});
      else {
        if ("string" != typeof t) throw Error("Invalid module definition");
        goog.useSafari10Workaround() && (t = goog.workaroundSafari10EvalBug(t)),
          (o = goog.loadModuleFromSource_.call(void 0, t));
      }
      var i = goog.moduleLoaderState_.moduleName;
      if ("string" != typeof i || !i)
        throw Error('Invalid module name "' + i + '"');
      goog.moduleLoaderState_.declareLegacyNamespace
        ? goog.constructNamespace_(i, o)
        : goog.SEAL_MODULE_EXPORTS &&
          Object.seal &&
          "object" == typeof o &&
          null != o &&
          Object.seal(o),
        (goog.loadedModules_[i] = {
          exports: o,
          type: goog.ModuleType.GOOG,
          moduleId: goog.moduleLoaderState_.moduleName,
        });
    } finally {
      goog.moduleLoaderState_ = e;
    }
  }),
  (goog.loadModuleFromSource_ = function (a) {
    return eval(a), {};
  }),
  (goog.normalizePath_ = function (t) {
    t = t.split("/");
    for (var e = 0; e < t.length; )
      "." == t[e]
        ? t.splice(e, 1)
        : e && ".." == t[e] && t[e - 1] && ".." != t[e - 1]
        ? t.splice(--e, 2)
        : e++;
    return t.join("/");
  }),
  (goog.loadFileSync_ = function (t) {
    if (goog.global.CLOSURE_LOAD_FILE_SYNC)
      return goog.global.CLOSURE_LOAD_FILE_SYNC(t);
    try {
      var e = new goog.global.XMLHttpRequest();
      return (
        e.open("get", t, !1),
        e.send(),
        0 == e.status || 200 == e.status ? e.responseText : null
      );
    } catch (t) {
      return null;
    }
  }),
  (goog.transpile_ = function (t, e, o) {
    var i = goog.global.$jscomp;
    i || (goog.global.$jscomp = i = {});
    var n = i.transpile;
    if (!n) {
      var l = goog.basePath + goog.TRANSPILER,
        r = goog.loadFileSync_(l);
      if (r) {
        if (
          (function () {
            (0, eval)(r + "\n//# sourceURL=" + l);
          }.call(goog.global),
          goog.global.$gwtExport &&
            goog.global.$gwtExport.$jscomp &&
            !goog.global.$gwtExport.$jscomp.transpile)
        )
          throw Error(
            'The transpiler did not properly export the "transpile" method. $gwtExport: ' +
              JSON.stringify(goog.global.$gwtExport)
          );
        (goog.global.$jscomp.transpile =
          goog.global.$gwtExport.$jscomp.transpile),
          (n = (i = goog.global.$jscomp).transpile);
      }
    }
    return (
      n ||
        (n = i.transpile =
          function (t, e) {
            return (
              goog.logToConsole_(
                e + " requires transpilation but no transpiler was found."
              ),
              t
            );
          }),
      n(t, e, o)
    );
  }),
  (goog.typeOf = function (t) {
    var e = typeof t;
    if ("object" == e) {
      if (!t) return "null";
      if (t instanceof Array) return "array";
      if (t instanceof Object) return e;
      var o = Object.prototype.toString.call(t);
      if ("[object Window]" == o) return "object";
      if (
        "[object Array]" == o ||
        ("number" == typeof t.length &&
          void 0 !== t.splice &&
          void 0 !== t.propertyIsEnumerable &&
          !t.propertyIsEnumerable("splice"))
      )
        return "array";
      if (
        "[object Function]" == o ||
        (void 0 !== t.call &&
          void 0 !== t.propertyIsEnumerable &&
          !t.propertyIsEnumerable("call"))
      )
        return "function";
    } else if ("function" == e && void 0 === t.call) return "object";
    return e;
  }),
  (goog.isNull = function (t) {
    return null === t;
  }),
  (goog.isDefAndNotNull = function (t) {
    return null != t;
  }),
  (goog.isArray = function (t) {
    return "array" == goog.typeOf(t);
  }),
  (goog.isArrayLike = function (t) {
    var e = goog.typeOf(t);
    return "array" == e || ("object" == e && "number" == typeof t.length);
  }),
  (goog.isDateLike = function (t) {
    return goog.isObject(t) && "function" == typeof t.getFullYear;
  }),
  (goog.isFunction = function (t) {
    return "function" == goog.typeOf(t);
  }),
  (goog.isObject = function (t) {
    var e = typeof t;
    return ("object" == e && null != t) || "function" == e;
  }),
  (goog.getUid = function (t) {
    return (
      t[goog.UID_PROPERTY_] || (t[goog.UID_PROPERTY_] = ++goog.uidCounter_)
    );
  }),
  (goog.hasUid = function (t) {
    return !!t[goog.UID_PROPERTY_];
  }),
  (goog.removeUid = function (t) {
    null !== t &&
      "removeAttribute" in t &&
      t.removeAttribute(goog.UID_PROPERTY_);
    try {
      delete t[goog.UID_PROPERTY_];
    } catch (t) {}
  }),
  (goog.UID_PROPERTY_ = "closure_uid_" + ((1e9 * Math.random()) >>> 0)),
  (goog.uidCounter_ = 0),
  (goog.getHashCode = goog.getUid),
  (goog.removeHashCode = goog.removeUid),
  (goog.cloneObject = function (t) {
    var e = goog.typeOf(t);
    if ("object" == e || "array" == e) {
      if ("function" == typeof t.clone) return t.clone();
      for (var o in ((e = "array" == e ? [] : {}), t))
        e[o] = goog.cloneObject(t[o]);
      return e;
    }
    return t;
  }),
  (goog.bindNative_ = function (t, e, o) {
    return t.call.apply(t.bind, arguments);
  }),
  (goog.bindJs_ = function (t, e, o) {
    if (!t) throw Error();
    if (2 < arguments.length) {
      var i = Array.prototype.slice.call(arguments, 2);
      return function () {
        var o = Array.prototype.slice.call(arguments);
        return Array.prototype.unshift.apply(o, i), t.apply(e, o);
      };
    }
    return function () {
      return t.apply(e, arguments);
    };
  }),
  (goog.bind = function (t, e, o) {
    return (
      Function.prototype.bind &&
      -1 != Function.prototype.bind.toString().indexOf("native code")
        ? (goog.bind = goog.bindNative_)
        : (goog.bind = goog.bindJs_),
      goog.bind.apply(null, arguments)
    );
  }),
  (goog.partial = function (t, e) {
    var o = Array.prototype.slice.call(arguments, 1);
    return function () {
      var e = o.slice();
      return e.push.apply(e, arguments), t.apply(this, e);
    };
  }),
  (goog.mixin = function (t, e) {
    for (var o in e) t[o] = e[o];
  }),
  (goog.now =
    (goog.TRUSTED_SITE && Date.now) ||
    function () {
      return +new Date();
    }),
  (goog.globalEval = function (t) {
    if (goog.global.execScript) goog.global.execScript(t, "JavaScript");
    else {
      if (!goog.global.eval) throw Error("goog.globalEval not available");
      if (null == goog.evalWorksForGlobals_) {
        try {
          goog.global.eval("var _evalTest_ = 1;");
        } catch (t) {}
        if (void 0 !== goog.global._evalTest_) {
          try {
            delete goog.global._evalTest_;
          } catch (t) {}
          goog.evalWorksForGlobals_ = !0;
        } else goog.evalWorksForGlobals_ = !1;
      }
      if (goog.evalWorksForGlobals_) goog.global.eval(t);
      else {
        var e = goog.global.document,
          o = e.createElement("script");
        (o.type = "text/javascript"),
          (o.defer = !1),
          o.appendChild(e.createTextNode(t)),
          e.head.appendChild(o),
          e.head.removeChild(o);
      }
    }
  }),
  (goog.evalWorksForGlobals_ = null),
  (goog.getCssName = function (t, e) {
    if ("." == String(t).charAt(0))
      throw Error(
        'className passed in goog.getCssName must not start with ".". You passed: ' +
          t
      );
    var o = function (t) {
        return goog.cssNameMapping_[t] || t;
      },
      i = function (t) {
        t = t.split("-");
        for (var e = [], i = 0; i < t.length; i++) e.push(o(t[i]));
        return e.join("-");
      };
    return (
      (i = goog.cssNameMapping_
        ? "BY_WHOLE" == goog.cssNameMappingStyle_
          ? o
          : i
        : function (t) {
            return t;
          }),
      (t = e ? t + "-" + i(e) : i(t)),
      goog.global.CLOSURE_CSS_NAME_MAP_FN
        ? goog.global.CLOSURE_CSS_NAME_MAP_FN(t)
        : t
    );
  }),
  (goog.setCssNameMapping = function (t, e) {
    (goog.cssNameMapping_ = t), (goog.cssNameMappingStyle_ = e);
  }),
  !COMPILED &&
    goog.global.CLOSURE_CSS_NAME_MAPPING &&
    (goog.cssNameMapping_ = goog.global.CLOSURE_CSS_NAME_MAPPING),
  (goog.getMsg = function (t, e, o) {
    return (
      o && o.html && (t = t.replace(/</g, "&lt;")),
      e &&
        (t = t.replace(/\{\$([^}]+)}/g, function (t, o) {
          return null != e && o in e ? e[o] : t;
        })),
      t
    );
  }),
  (goog.getMsgWithFallback = function (t, e) {
    return t;
  }),
  (goog.exportSymbol = function (t, e, o) {
    goog.exportPath_(t, e, o);
  }),
  (goog.exportProperty = function (t, e, o) {
    t[e] = o;
  }),
  (goog.inherits = function (t, e) {
    function o() {}
    (o.prototype = e.prototype),
      (t.superClass_ = e.prototype),
      (t.prototype = new o()),
      (t.prototype.constructor = t),
      (t.base = function (t, o, i) {
        for (
          var n = Array(arguments.length - 2), l = 2;
          l < arguments.length;
          l++
        )
          n[l - 2] = arguments[l];
        return e.prototype[o].apply(t, n);
      });
  }),
  (goog.base = function (t, e, o) {
    var i = arguments.callee.caller;
    if (goog.STRICT_MODE_COMPATIBLE || (goog.DEBUG && !i))
      throw Error(
        "arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C"
      );
    if (void 0 !== i.superClass_) {
      for (
        var n = Array(arguments.length - 1), l = 1;
        l < arguments.length;
        l++
      )
        n[l - 1] = arguments[l];
      return i.superClass_.constructor.apply(t, n);
    }
    if ("string" != typeof e && "symbol" != typeof e)
      throw Error(
        "method names provided to goog.base must be a string or a symbol"
      );
    for (n = Array(arguments.length - 2), l = 2; l < arguments.length; l++)
      n[l - 2] = arguments[l];
    l = !1;
    for (var r = t.constructor.prototype; r; r = Object.getPrototypeOf(r))
      if (r[e] === i) l = !0;
      else if (l) return r[e].apply(t, n);
    if (t[e] === i) return t.constructor.prototype[e].apply(t, n);
    throw Error(
      "goog.base called from a method of one name to a method of a different name"
    );
  }),
  (goog.scope = function (t) {
    if (goog.isInModuleLoader_())
      throw Error("goog.scope is not supported within a module.");
    t.call(goog.global);
  }),
  COMPILED || (goog.global.COMPILED = COMPILED),
  (goog.defineClass = function (t, e) {
    var o = e.constructor,
      i = e.statics;
    return (
      (o && o != Object.prototype.constructor) ||
        (o = function () {
          throw Error(
            "cannot instantiate an interface (no constructor defined)."
          );
        }),
      (o = goog.defineClass.createSealingConstructor_(o, t)),
      t && goog.inherits(o, t),
      delete e.constructor,
      delete e.statics,
      goog.defineClass.applyProperties_(o.prototype, e),
      null != i &&
        (i instanceof Function
          ? i(o)
          : goog.defineClass.applyProperties_(o, i)),
      o
    );
  }),
  (goog.defineClass.SEAL_CLASS_INSTANCES = goog.DEBUG),
  (goog.defineClass.createSealingConstructor_ = function (t, e) {
    if (!goog.defineClass.SEAL_CLASS_INSTANCES) return t;
    var o = !goog.defineClass.isUnsealable_(e),
      i = function () {
        var e = t.apply(this, arguments) || this;
        return (
          (e[goog.UID_PROPERTY_] = e[goog.UID_PROPERTY_]),
          this.constructor === i &&
            o &&
            Object.seal instanceof Function &&
            Object.seal(e),
          e
        );
      };
    return i;
  }),
  (goog.defineClass.isUnsealable_ = function (t) {
    return (
      t && t.prototype && t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]
    );
  }),
  (goog.defineClass.OBJECT_PROTOTYPE_FIELDS_ =
    "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(
      " "
    )),
  (goog.defineClass.applyProperties_ = function (t, e) {
    for (var o in e)
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    for (var i = 0; i < goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length; i++)
      (o = goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i]),
        Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
  }),
  (goog.tagUnsealableClass = function (t) {
    !COMPILED &&
      goog.defineClass.SEAL_CLASS_INSTANCES &&
      (t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_] = !0);
  }),
  (goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_ =
    "goog_defineClass_legacy_unsealable"),
  !COMPILED &&
    goog.DEPENDENCIES_ENABLED &&
    ((goog.inHtmlDocument_ = function () {
      var t = goog.global.document;
      return null != t && "write" in t;
    }),
    (goog.isDocumentLoading_ = function () {
      var t = goog.global.document;
      return t.attachEvent
        ? "complete" != t.readyState
        : "loading" == t.readyState;
    }),
    (goog.findBasePath_ = function () {
      if (
        null != goog.global.CLOSURE_BASE_PATH &&
        "string" == typeof goog.global.CLOSURE_BASE_PATH
      )
        goog.basePath = goog.global.CLOSURE_BASE_PATH;
      else if (goog.inHtmlDocument_()) {
        var t = goog.global.document,
          e = t.currentScript;
        for (
          e = (t = e ? [e] : t.getElementsByTagName("SCRIPT")).length - 1;
          0 <= e;
          --e
        ) {
          var o = t[e].src,
            i = o.lastIndexOf("?");
          if (((i = -1 == i ? o.length : i), "base.js" == o.substr(i - 7, 7))) {
            goog.basePath = o.substr(0, i - 7);
            break;
          }
        }
      }
    }),
    goog.findBasePath_(),
    (goog.Transpiler = function () {
      (this.requiresTranspilation_ = null),
        (this.transpilationTarget_ = goog.TRANSPILE_TO_LANGUAGE);
    }),
    (goog.Transpiler.prototype.createRequiresTranspilation_ = function () {
      function a(t, o) {
        e ? (d[t] = !0) : o() ? ((c = t), (d[t] = !1)) : (e = d[t] = !0);
      }
      function b(a) {
        try {
          return !!eval(a);
        } catch (t) {
          return !1;
        }
      }
      var c = "es3",
        d = { es3: !1 },
        e = !1,
        f =
          goog.global.navigator && goog.global.navigator.userAgent
            ? goog.global.navigator.userAgent
            : "";
      return (
        a("es5", function () {
          return b("[1,].length==1");
        }),
        a("es6", function () {
          return (
            !f.match(/Edge\/(\d+)(\.\d)*/i) &&
            b(
              '(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()'
            )
          );
        }),
        a("es7", function () {
          return b("2 ** 2 == 4");
        }),
        a("es8", function () {
          return b("async () => 1, true");
        }),
        a("es9", function () {
          return b("({...rest} = {}), true");
        }),
        a("es_next", function () {
          return !1;
        }),
        { target: c, map: d }
      );
    }),
    (goog.Transpiler.prototype.needsTranspile = function (t, e) {
      if ("always" == goog.TRANSPILE) return !0;
      if ("never" == goog.TRANSPILE) return !1;
      if (!this.requiresTranspilation_) {
        var o = this.createRequiresTranspilation_();
        (this.requiresTranspilation_ = o.map),
          (this.transpilationTarget_ = this.transpilationTarget_ || o.target);
      }
      if (t in this.requiresTranspilation_)
        return (
          !!this.requiresTranspilation_[t] ||
          !(
            !goog.inHtmlDocument_() ||
            "es6" != e ||
            "noModule" in goog.global.document.createElement("script")
          )
        );
      throw Error("Unknown language mode: " + t);
    }),
    (goog.Transpiler.prototype.transpile = function (t, e) {
      return goog.transpile_(t, e, this.transpilationTarget_);
    }),
    (goog.transpiler_ = new goog.Transpiler()),
    (goog.protectScriptTag_ = function (t) {
      return t.replace(/<\/(SCRIPT)/gi, "\\x3c/$1");
    }),
    (goog.DebugLoader_ = function () {
      (this.dependencies_ = {}),
        (this.idToPath_ = {}),
        (this.written_ = {}),
        (this.loadingDeps_ = []),
        (this.depsToLoad_ = []),
        (this.paused_ = !1),
        (this.factory_ = new goog.DependencyFactory(goog.transpiler_)),
        (this.deferredCallbacks_ = {}),
        (this.deferredQueue_ = []);
    }),
    (goog.DebugLoader_.prototype.bootstrap = function (t, e) {
      function o() {
        i && (goog.global.setTimeout(i, 0), (i = null));
      }
      var i = e;
      if (t.length) {
        e = [];
        for (var n = 0; n < t.length; n++) {
          var l = this.getPathFromDeps_(t[n]);
          if (!l) throw Error("Unregonized namespace: " + t[n]);
          e.push(this.dependencies_[l]);
        }
        l = goog.require;
        var r = 0;
        for (n = 0; n < t.length; n++)
          l(t[n]),
            e[n].onLoad(function () {
              ++r == t.length && o();
            });
      } else o();
    }),
    (goog.DebugLoader_.prototype.loadClosureDeps = function () {
      this.depsToLoad_.push(
        this.factory_.createDependency(
          goog.normalizePath_(goog.basePath + "deps.js"),
          "deps.js",
          [],
          [],
          {},
          !1
        )
      ),
        this.loadDeps_();
    }),
    (goog.DebugLoader_.prototype.requested = function (t, e) {
      (t = this.getPathFromDeps_(t)) &&
        (e || this.areDepsLoaded_(this.dependencies_[t].requires)) &&
        (e = this.deferredCallbacks_[t]) &&
        (delete this.deferredCallbacks_[t], e());
    }),
    (goog.DebugLoader_.prototype.setDependencyFactory = function (t) {
      this.factory_ = t;
    }),
    (goog.DebugLoader_.prototype.load_ = function (t) {
      if (!this.getPathFromDeps_(t))
        throw (
          ((t = "goog.require could not find: " + t),
          goog.logToConsole_(t),
          Error(t))
        );
      var e = this,
        o = [],
        i = function (t) {
          var n = e.getPathFromDeps_(t);
          if (!n) throw Error("Bad dependency path or symbol: " + t);
          if (!e.written_[n]) {
            for (
              e.written_[n] = !0, t = e.dependencies_[n], n = 0;
              n < t.requires.length;
              n++
            )
              goog.isProvided_(t.requires[n]) || i(t.requires[n]);
            o.push(t);
          }
        };
      i(t),
        (t = !!this.depsToLoad_.length),
        (this.depsToLoad_ = this.depsToLoad_.concat(o)),
        this.paused_ || t || this.loadDeps_();
    }),
    (goog.DebugLoader_.prototype.loadDeps_ = function () {
      for (var t = this, e = this.paused_; this.depsToLoad_.length && !e; )
        !(function () {
          var o = !1,
            i = t.depsToLoad_.shift(),
            n = !1;
          t.loading_(i);
          var l = {
            pause: function () {
              if (o) throw Error("Cannot call pause after the call to load.");
              e = !0;
            },
            resume: function () {
              o ? t.resume_() : (e = !1);
            },
            loaded: function () {
              if (n) throw Error("Double call to loaded.");
              (n = !0), t.loaded_(i);
            },
            pending: function () {
              for (var e = [], o = 0; o < t.loadingDeps_.length; o++)
                e.push(t.loadingDeps_[o]);
              return e;
            },
            setModuleState: function (t) {
              goog.moduleLoaderState_ = {
                type: t,
                moduleName: "",
                declareLegacyNamespace: !1,
              };
            },
            registerEs6ModuleExports: function (t, e, o) {
              o &&
                (goog.loadedModules_[o] = {
                  exports: e,
                  type: goog.ModuleType.ES6,
                  moduleId: o || "",
                });
            },
            registerGoogModuleExports: function (t, e) {
              goog.loadedModules_[t] = {
                exports: e,
                type: goog.ModuleType.GOOG,
                moduleId: t,
              };
            },
            clearModuleState: function () {
              goog.moduleLoaderState_ = null;
            },
            defer: function (e) {
              if (o)
                throw Error(
                  "Cannot register with defer after the call to load."
                );
              t.defer_(i, e);
            },
            areDepsLoaded: function () {
              return t.areDepsLoaded_(i.requires);
            },
          };
          try {
            i.load(l);
          } finally {
            o = !0;
          }
        })();
      e && this.pause_();
    }),
    (goog.DebugLoader_.prototype.pause_ = function () {
      this.paused_ = !0;
    }),
    (goog.DebugLoader_.prototype.resume_ = function () {
      this.paused_ && ((this.paused_ = !1), this.loadDeps_());
    }),
    (goog.DebugLoader_.prototype.loading_ = function (t) {
      this.loadingDeps_.push(t);
    }),
    (goog.DebugLoader_.prototype.loaded_ = function (t) {
      for (var e = 0; e < this.loadingDeps_.length; e++)
        if (this.loadingDeps_[e] == t) {
          this.loadingDeps_.splice(e, 1);
          break;
        }
      for (e = 0; e < this.deferredQueue_.length; e++)
        if (this.deferredQueue_[e] == t.path) {
          this.deferredQueue_.splice(e, 1);
          break;
        }
      if (
        this.loadingDeps_.length == this.deferredQueue_.length &&
        !this.depsToLoad_.length
      )
        for (; this.deferredQueue_.length; )
          this.requested(this.deferredQueue_.shift(), !0);
      t.loaded();
    }),
    (goog.DebugLoader_.prototype.areDepsLoaded_ = function (t) {
      for (var e = 0; e < t.length; e++) {
        var o = this.getPathFromDeps_(t[e]);
        if (!o || (!(o in this.deferredCallbacks_) && !goog.isProvided_(t[e])))
          return !1;
      }
      return !0;
    }),
    (goog.DebugLoader_.prototype.getPathFromDeps_ = function (t) {
      return t in this.idToPath_
        ? this.idToPath_[t]
        : t in this.dependencies_
        ? t
        : null;
    }),
    (goog.DebugLoader_.prototype.defer_ = function (t, e) {
      (this.deferredCallbacks_[t.path] = e), this.deferredQueue_.push(t.path);
    }),
    (goog.LoadController = function () {}),
    (goog.LoadController.prototype.pause = function () {}),
    (goog.LoadController.prototype.resume = function () {}),
    (goog.LoadController.prototype.loaded = function () {}),
    (goog.LoadController.prototype.pending = function () {}),
    (goog.LoadController.prototype.registerEs6ModuleExports = function (
      t,
      e,
      o
    ) {}),
    (goog.LoadController.prototype.setModuleState = function (t) {}),
    (goog.LoadController.prototype.clearModuleState = function () {}),
    (goog.LoadController.prototype.defer = function (t) {}),
    (goog.LoadController.prototype.areDepsLoaded = function () {}),
    (goog.Dependency = function (t, e, o, i, n) {
      (this.path = t),
        (this.relativePath = e),
        (this.provides = o),
        (this.requires = i),
        (this.loadFlags = n),
        (this.loaded_ = !1),
        (this.loadCallbacks_ = []);
    }),
    (goog.Dependency.prototype.getPathName = function () {
      var t = this.path,
        e = t.indexOf("://");
      return (
        0 <= e &&
          0 <= (e = (t = t.substring(e + 3)).indexOf("/")) &&
          (t = t.substring(e + 1)),
        t
      );
    }),
    (goog.Dependency.prototype.onLoad = function (t) {
      this.loaded_ ? t() : this.loadCallbacks_.push(t);
    }),
    (goog.Dependency.prototype.loaded = function () {
      this.loaded_ = !0;
      var t = this.loadCallbacks_;
      this.loadCallbacks_ = [];
      for (var e = 0; e < t.length; e++) t[e]();
    }),
    (goog.Dependency.defer_ = !1),
    (goog.Dependency.callbackMap_ = {}),
    (goog.Dependency.registerCallback_ = function (t) {
      var e = Math.random().toString(32);
      return (goog.Dependency.callbackMap_[e] = t), e;
    }),
    (goog.Dependency.unregisterCallback_ = function (t) {
      delete goog.Dependency.callbackMap_[t];
    }),
    (goog.Dependency.callback_ = function (t, e) {
      if (!(t in goog.Dependency.callbackMap_))
        throw Error(
          "Callback key " +
            t +
            " does not exist (was base.js loaded more than once?)."
        );
      for (
        var o = goog.Dependency.callbackMap_[t], i = [], n = 1;
        n < arguments.length;
        n++
      )
        i.push(arguments[n]);
      o.apply(void 0, i);
    }),
    (goog.Dependency.prototype.load = function (t) {
      if (goog.global.CLOSURE_IMPORT_SCRIPT)
        goog.global.CLOSURE_IMPORT_SCRIPT(this.path) ? t.loaded() : t.pause();
      else if (goog.inHtmlDocument_()) {
        var e = goog.global.document;
        if (
          "complete" == e.readyState &&
          !goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING
        ) {
          if (/\bdeps.js$/.test(this.path)) return void t.loaded();
          throw Error('Cannot write "' + this.path + '" after document load');
        }
        if (
          !goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING &&
          goog.isDocumentLoading_()
        ) {
          var o = goog.Dependency.registerCallback_(function (e) {
              (goog.DebugLoader_.IS_OLD_IE_ && "complete" != e.readyState) ||
                (goog.Dependency.unregisterCallback_(o), t.loaded());
            }),
            i =
              !goog.DebugLoader_.IS_OLD_IE_ && goog.getScriptNonce()
                ? ' nonce="' + goog.getScriptNonce() + '"'
                : "";
          (i =
            '<script src="' +
            this.path +
            '" ' +
            (goog.DebugLoader_.IS_OLD_IE_ ? "onreadystatechange" : "onload") +
            "=\"goog.Dependency.callback_('" +
            o +
            '\', this)" type="text/javascript" ' +
            (goog.Dependency.defer_ ? "defer" : "") +
            i +
            "></script>"),
            e.write(
              goog.TRUSTED_TYPES_POLICY_
                ? goog.TRUSTED_TYPES_POLICY_.createHTML(i)
                : i
            );
        } else {
          var n = e.createElement("script");
          (n.defer = goog.Dependency.defer_),
            (n.async = !1),
            (n.type = "text/javascript"),
            (i = goog.getScriptNonce()) && n.setAttribute("nonce", i),
            goog.DebugLoader_.IS_OLD_IE_
              ? (t.pause(),
                (n.onreadystatechange = function () {
                  ("loaded" != n.readyState && "complete" != n.readyState) ||
                    (t.loaded(), t.resume());
                }))
              : (n.onload = function () {
                  (n.onload = null), t.loaded();
                }),
            (n.src = goog.TRUSTED_TYPES_POLICY_
              ? goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path)
              : this.path),
            e.head.appendChild(n);
        }
      } else
        goog.logToConsole_(
          "Cannot use default debug loader outside of HTML documents."
        ),
          "deps.js" == this.relativePath
            ? (goog.logToConsole_(
                "Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."
              ),
              t.loaded())
            : t.pause();
    }),
    (goog.Es6ModuleDependency = function (t, e, o, i, n) {
      goog.Dependency.call(this, t, e, o, i, n);
    }),
    goog.inherits(goog.Es6ModuleDependency, goog.Dependency),
    (goog.Es6ModuleDependency.prototype.load = function (t) {
      if (goog.global.CLOSURE_IMPORT_SCRIPT)
        goog.global.CLOSURE_IMPORT_SCRIPT(this.path) ? t.loaded() : t.pause();
      else if (goog.inHtmlDocument_()) {
        var e = goog.global.document,
          o = this;
        if (goog.isDocumentLoading_()) {
          var i = function (t, o) {
            (t = o
              ? '<script type="module" crossorigin>' + o + "</script>"
              : '<script type="module" crossorigin src="' + t + '"></script>'),
              e.write(
                goog.TRUSTED_TYPES_POLICY_
                  ? goog.TRUSTED_TYPES_POLICY_.createHTML(t)
                  : t
              );
          };
          goog.Dependency.defer_ = !0;
        } else
          i = function (t, o) {
            var i = e.createElement("script");
            (i.defer = !0),
              (i.async = !1),
              (i.type = "module"),
              i.setAttribute("crossorigin", !0);
            var n = goog.getScriptNonce();
            n && i.setAttribute("nonce", n),
              o
                ? (i.textContent = goog.TRUSTED_TYPES_POLICY_
                    ? goog.TRUSTED_TYPES_POLICY_.createScript(o)
                    : o)
                : (i.src = goog.TRUSTED_TYPES_POLICY_
                    ? goog.TRUSTED_TYPES_POLICY_.createScriptURL(t)
                    : t),
              e.head.appendChild(i);
          };
        var n = goog.Dependency.registerCallback_(function () {
          goog.Dependency.unregisterCallback_(n),
            t.setModuleState(goog.ModuleType.ES6);
        });
        i(void 0, 'goog.Dependency.callback_("' + n + '")'),
          i(this.path, void 0);
        var l = goog.Dependency.registerCallback_(function (e) {
          goog.Dependency.unregisterCallback_(l),
            t.registerEs6ModuleExports(
              o.path,
              e,
              goog.moduleLoaderState_.moduleName
            );
        });
        i(
          void 0,
          'import * as m from "' +
            this.path +
            '"; goog.Dependency.callback_("' +
            l +
            '", m)'
        );
        var r = goog.Dependency.registerCallback_(function () {
          goog.Dependency.unregisterCallback_(r),
            t.clearModuleState(),
            t.loaded();
        });
        i(void 0, 'goog.Dependency.callback_("' + r + '")');
      } else
        goog.logToConsole_(
          "Cannot use default debug loader outside of HTML documents."
        ),
          t.pause();
    }),
    (goog.TransformedDependency = function (t, e, o, i, n) {
      goog.Dependency.call(this, t, e, o, i, n),
        (this.contents_ = null),
        (this.lazyFetch_ = !(
          goog.inHtmlDocument_() &&
          "noModule" in goog.global.document.createElement("script")
        ));
    }),
    goog.inherits(goog.TransformedDependency, goog.Dependency),
    (goog.TransformedDependency.prototype.load = function (t) {
      function e() {
        (i.contents_ = goog.loadFileSync_(i.path)),
          i.contents_ &&
            ((i.contents_ = i.transform(i.contents_)),
            i.contents_ && (i.contents_ += "\n//# sourceURL=" + i.path));
      }
      function o() {
        if ((i.lazyFetch_ && e(), i.contents_)) {
          n && t.setModuleState(goog.ModuleType.ES6);
          try {
            var o = i.contents_;
            if (((i.contents_ = null), goog.globalEval(o), n))
              var l = goog.moduleLoaderState_.moduleName;
          } finally {
            n && t.clearModuleState();
          }
          n &&
            goog.global.$jscomp.require.ensure([i.getPathName()], function () {
              t.registerEs6ModuleExports(
                i.path,
                goog.global.$jscomp.require(i.getPathName()),
                l
              );
            }),
            t.loaded();
        }
      }
      var i = this;
      if (goog.global.CLOSURE_IMPORT_SCRIPT)
        e(),
          this.contents_ &&
          goog.global.CLOSURE_IMPORT_SCRIPT("", this.contents_)
            ? ((this.contents_ = null), t.loaded())
            : t.pause();
      else {
        var n = this.loadFlags.module == goog.ModuleType.ES6;
        this.lazyFetch_ || e();
        var l = 1 < t.pending().length,
          r = l && goog.DebugLoader_.IS_OLD_IE_;
        if (
          ((l = goog.Dependency.defer_ && (l || goog.isDocumentLoading_())),
          r || l)
        )
          t.defer(function () {
            o();
          });
        else {
          var s = goog.global.document;
          if (
            ((r = goog.inHtmlDocument_() && "ActiveXObject" in goog.global),
            n && goog.inHtmlDocument_() && goog.isDocumentLoading_() && !r)
          ) {
            (goog.Dependency.defer_ = !0), t.pause();
            var a = s.onreadystatechange;
            s.onreadystatechange = function () {
              "interactive" == s.readyState &&
                ((s.onreadystatechange = a), o(), t.resume()),
                goog.isFunction(a) && a.apply(void 0, arguments);
            };
          } else
            !goog.DebugLoader_.IS_OLD_IE_ &&
            goog.inHtmlDocument_() &&
            goog.isDocumentLoading_()
              ? (function () {
                  var t = goog.global.document,
                    e = goog.Dependency.registerCallback_(function () {
                      goog.Dependency.unregisterCallback_(e), o();
                    }),
                    i =
                      '<script type="text/javascript">' +
                      goog.protectScriptTag_(
                        'goog.Dependency.callback_("' + e + '");'
                      ) +
                      "</script>";
                  t.write(
                    goog.TRUSTED_TYPES_POLICY_
                      ? goog.TRUSTED_TYPES_POLICY_.createHTML(i)
                      : i
                  );
                })()
              : o();
        }
      }
    }),
    (goog.TransformedDependency.prototype.transform = function (t) {}),
    (goog.TranspiledDependency = function (t, e, o, i, n, l) {
      goog.TransformedDependency.call(this, t, e, o, i, n),
        (this.transpiler = l);
    }),
    goog.inherits(goog.TranspiledDependency, goog.TransformedDependency),
    (goog.TranspiledDependency.prototype.transform = function (t) {
      return this.transpiler.transpile(t, this.getPathName());
    }),
    (goog.PreTranspiledEs6ModuleDependency = function (t, e, o, i, n) {
      goog.TransformedDependency.call(this, t, e, o, i, n);
    }),
    goog.inherits(
      goog.PreTranspiledEs6ModuleDependency,
      goog.TransformedDependency
    ),
    (goog.PreTranspiledEs6ModuleDependency.prototype.transform = function (t) {
      return t;
    }),
    (goog.GoogModuleDependency = function (t, e, o, i, n, l, r) {
      goog.TransformedDependency.call(this, t, e, o, i, n),
        (this.needsTranspile_ = l),
        (this.transpiler_ = r);
    }),
    goog.inherits(goog.GoogModuleDependency, goog.TransformedDependency),
    (goog.GoogModuleDependency.prototype.transform = function (t) {
      return (
        this.needsTranspile_ &&
          (t = this.transpiler_.transpile(t, this.getPathName())),
        goog.LOAD_MODULE_USING_EVAL && void 0 !== goog.global.JSON
          ? "goog.loadModule(" +
            goog.global.JSON.stringify(
              t + "\n//# sourceURL=" + this.path + "\n"
            ) +
            ");"
          : 'goog.loadModule(function(exports) {"use strict";' +
            t +
            "\n;return exports});\n//# sourceURL=" +
            this.path +
            "\n"
      );
    }),
    (goog.DebugLoader_.IS_OLD_IE_ = !(
      goog.global.atob ||
      !goog.global.document ||
      !goog.global.document.all
    )),
    (goog.DebugLoader_.prototype.addDependency = function (t, e, o, i) {
      (e = e || []), (t = t.replace(/\\/g, "/"));
      var n = goog.normalizePath_(goog.basePath + t);
      for (
        (i && "boolean" != typeof i) ||
          (i = i ? { module: goog.ModuleType.GOOG } : {}),
          o = this.factory_.createDependency(
            n,
            t,
            e,
            o,
            i,
            goog.transpiler_.needsTranspile(i.lang || "es3", i.module)
          ),
          this.dependencies_[n] = o,
          o = 0;
        o < e.length;
        o++
      )
        this.idToPath_[e[o]] = n;
      this.idToPath_[t] = n;
    }),
    (goog.DependencyFactory = function (t) {
      this.transpiler = t;
    }),
    (goog.DependencyFactory.prototype.createDependency = function (
      t,
      e,
      o,
      i,
      n,
      l
    ) {
      return n.module == goog.ModuleType.GOOG
        ? new goog.GoogModuleDependency(t, e, o, i, n, l, this.transpiler)
        : l
        ? new goog.TranspiledDependency(t, e, o, i, n, this.transpiler)
        : n.module == goog.ModuleType.ES6
        ? "never" == goog.TRANSPILE && goog.ASSUME_ES_MODULES_TRANSPILED
          ? new goog.PreTranspiledEs6ModuleDependency(t, e, o, i, n)
          : new goog.Es6ModuleDependency(t, e, o, i, n)
        : new goog.Dependency(t, e, o, i, n);
    }),
    (goog.debugLoader_ = new goog.DebugLoader_()),
    (goog.loadClosureDeps = function () {
      goog.debugLoader_.loadClosureDeps();
    }),
    (goog.setDependencyFactory = function (t) {
      goog.debugLoader_.setDependencyFactory(t);
    }),
    goog.global.CLOSURE_NO_DEPS || goog.debugLoader_.loadClosureDeps(),
    (goog.bootstrap = function (t, e) {
      goog.debugLoader_.bootstrap(t, e);
    })),
  (goog.TRUSTED_TYPES_POLICY_NAME = ""),
  (goog.identity_ = function (t) {
    return t;
  }),
  (goog.createTrustedTypesPolicy = function (t) {
    var e = null,
      o = goog.global.trustedTypes || goog.global.TrustedTypes;
    if (!o || !o.createPolicy) return e;
    try {
      e = o.createPolicy(t, {
        createHTML: goog.identity_,
        createScript: goog.identity_,
        createScriptURL: goog.identity_,
        createURL: goog.identity_,
      });
    } catch (t) {
      goog.logToConsole_(t.message);
    }
    return e;
  }),
  (goog.TRUSTED_TYPES_POLICY_ = goog.TRUSTED_TYPES_POLICY_NAME
    ? goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME + "#base")
    : null);
var Blockly = {
  constants: {},
  LINE_MODE_MULTIPLIER: 40,
  PAGE_MODE_MULTIPLIER: 125,
  DRAG_RADIUS: 3,
  FLYOUT_DRAG_RADIUS: 10,
  SNAP_RADIUS: 48,
  CONNECTING_SNAP_RADIUS: 96,
  CONNECTION_INDICATOR_RADIUS: 9,
  CURRENT_CONNECTION_PREFERENCE: 20,
  BUMP_DELAY: 0,
  BUMP_RANDOMNESS: 10,
  COLLAPSE_CHARS: 30,
  LONGPRESS: 750,
  SOUND_LIMIT: 100,
  DRAG_STACK: !0,
  HSV_SATURATION: 0.45,
  HSV_VALUE: 0.65,
  SPRITE: { width: 96, height: 124, url: "sprites.png" },
  INPUT_VALUE: 1,
  OUTPUT_VALUE: 2,
  NEXT_STATEMENT: 3,
  PREVIOUS_STATEMENT: 4,
  DUMMY_INPUT: 5,
  ALIGN_LEFT: -1,
  ALIGN_CENTRE: 0,
  ALIGN_RIGHT: 1,
  DRAG_NONE: 0,
  DRAG_STICKY: 1,
  DRAG_BEGIN: 1,
  DRAG_FREE: 2,
  OPPOSITE_TYPE: [],
};
(Blockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE] = Blockly.OUTPUT_VALUE),
  (Blockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE] = Blockly.INPUT_VALUE),
  (Blockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT] = Blockly.PREVIOUS_STATEMENT),
  (Blockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT] = Blockly.NEXT_STATEMENT),
  (Blockly.TOOLBOX_AT_TOP = 0),
  (Blockly.TOOLBOX_AT_BOTTOM = 1),
  (Blockly.TOOLBOX_AT_LEFT = 2),
  (Blockly.TOOLBOX_AT_RIGHT = 3),
  (Blockly.OUTPUT_SHAPE_HEXAGONAL = 1),
  (Blockly.OUTPUT_SHAPE_ROUND = 2),
  (Blockly.OUTPUT_SHAPE_SQUARE = 3),
  (Blockly.DELETE_AREA_NONE = null),
  (Blockly.DELETE_AREA_TRASH = 1),
  (Blockly.DELETE_AREA_TOOLBOX = 2),
  (Blockly.VARIABLE_CATEGORY_NAME = "VARIABLE"),
  (Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME = "VARIABLE_DYNAMIC"),
  (Blockly.PROCEDURE_CATEGORY_NAME = "PROCEDURE"),
  (Blockly.CREATE_VARIABLE_ID = "CREATE_VARIABLE"),
  (Blockly.RENAME_VARIABLE_ID = "RENAME_VARIABLE_ID"),
  (Blockly.DELETE_VARIABLE_ID = "DELETE_VARIABLE_ID"),
  (Blockly.FUNCTION_DEFINITION_BLOCK_TYPE = "function_definition"),
  (Blockly.FUNCTION_DECLARATION_BLOCK_TYPE = "function_declaration"),
  (Blockly.FUNCTION_CALL_BLOCK_TYPE = "function_call"),
  (Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE = "function_call_output"),
  (Blockly.utils = {}),
  (Blockly.utils.global = (function () {
    return "object" == typeof self
      ? self
      : "object" == typeof window
      ? window
      : "object" == typeof global
      ? global
      : this;
  })()),
  (Blockly.Msg = {}),
  Blockly.utils.global.Blockly || (Blockly.utils.global.Blockly = {}),
  Blockly.utils.global.Blockly.Msg ||
    (Blockly.utils.global.Blockly.Msg = Blockly.Msg),
  (Blockly.utils.colour = {}),
  (Blockly.utils.colour.parse = function (t) {
    t = String(t).toLowerCase().trim();
    var e = Blockly.utils.colour.names[t];
    if (e) return e;
    if (
      ((e =
        "#" == (e = "0x" == t.substring(0, 2) ? "#" + t.substring(2) : t)[0]
          ? e
          : "#" + e),
      /^#[0-9a-f]{6}$/.test(e))
    )
      return e;
    if (/^#[0-9a-f]{3}$/.test(e))
      return ["#", e[1], e[1], e[2], e[2], e[3], e[3]].join("");
    var o = t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);
    return o &&
      ((t = Number(o[1])),
      (e = Number(o[2])),
      (o = Number(o[3])),
      0 <= t && 256 > t && 0 <= e && 256 > e && 0 <= o && 256 > o)
      ? Blockly.utils.colour.rgbToHex(t, e, o)
      : null;
  }),
  (Blockly.utils.colour.rgbToHex = function (t, e, o) {
    return (
      (e = (t << 16) | (e << 8) | o),
      16 > t
        ? "#" + (16777216 | e).toString(16).substr(1)
        : "#" + e.toString(16)
    );
  }),
  (Blockly.utils.colour.rgbArrayToHex = function (t) {
    return Blockly.utils.colour.rgbToHex(t[0], t[1], t[2]);
  }),
  (Blockly.utils.colour.hexToRgb = function (t) {
    return (t = Blockly.utils.colour.parse(t))
      ? [(t = parseInt(t.substr(1), 16)) >> 16, (t >> 8) & 255, 255 & t]
      : [0, 0, 0];
  }),
  (Blockly.utils.colour.hsvToHex = function (t, e, o) {
    var i = 0,
      n = 0,
      l = 0;
    if (0 == e) l = n = i = o;
    else {
      var r = Math.floor(t / 60),
        s = t / 60 - r;
      t = o * (1 - e);
      var a = o * (1 - e * s);
      switch (((e = o * (1 - e * (1 - s))), r)) {
        case 1:
          (i = a), (n = o), (l = t);
          break;
        case 2:
          (i = t), (n = o), (l = e);
          break;
        case 3:
          (i = t), (n = a), (l = o);
          break;
        case 4:
          (i = e), (n = t), (l = o);
          break;
        case 5:
          (i = o), (n = t), (l = a);
          break;
        case 6:
        case 0:
          (i = o), (n = e), (l = t);
      }
    }
    return Blockly.utils.colour.rgbToHex(
      Math.floor(i),
      Math.floor(n),
      Math.floor(l)
    );
  }),
  (Blockly.hueToRgb = function (t) {
    return Blockly.utils.colour.hsvToHex(
      t,
      Blockly.HSV_SATURATION,
      255 * Blockly.HSV_VALUE
    );
  }),
  (Blockly.utils.colour.blend = function (t, e, o) {
    return (t = Blockly.utils.colour.parse(t)) &&
      (e = Blockly.utils.colour.parse(e))
      ? ((t = Blockly.utils.colour.hexToRgb(t)),
        (e = Blockly.utils.colour.hexToRgb(e)),
        Blockly.utils.colour.rgbToHex(
          Math.round(e[0] + o * (t[0] - e[0])),
          Math.round(e[1] + o * (t[1] - e[1])),
          Math.round(e[2] + o * (t[2] - e[2]))
        ))
      : null;
  }),
  (Blockly.utils.colour.darken = function (t, e) {
    return Blockly.utils.colour.blend("#000000", t, e);
  }),
  (Blockly.utils.colour.lighten = function (t, e) {
    return Blockly.utils.colour.blend("#ffffff", t, e);
  }),
  (Blockly.utils.colour.luminance = function (t) {
    return (0.2126 * t[0] + 0.7152 * t[1] + 0.0722 * t[2]) / 255;
  }),
  (Blockly.utils.colour.names = {
    aqua: "#00ffff",
    black: "#000000",
    blue: "#0000ff",
    fuchsia: "#ff00ff",
    gray: "#808080",
    green: "#008000",
    lime: "#00ff00",
    maroon: "#800000",
    navy: "#000080",
    olive: "#808000",
    purple: "#800080",
    red: "#ff0000",
    silver: "#c0c0c0",
    teal: "#008080",
    white: "#ffffff",
    yellow: "#ffff00",
  }),
  (Blockly.utils.Coordinate = function (t, e) {
    (this.x = t), (this.y = e);
  }),
  (Blockly.utils.Coordinate.equals = function (t, e) {
    return t == e || (!(!t || !e) && t.x == e.x && t.y == e.y);
  }),
  (Blockly.utils.Coordinate.distance = function (t, e) {
    var o = t.x - e.x;
    return (t = t.y - e.y), Math.sqrt(o * o + t * t);
  }),
  (Blockly.utils.Coordinate.magnitude = function (t) {
    return Math.sqrt(t.x * t.x + t.y * t.y);
  }),
  (Blockly.utils.Coordinate.difference = function (t, e) {
    return new Blockly.utils.Coordinate(t.x - e.x, t.y - e.y);
  }),
  (Blockly.utils.Coordinate.sum = function (t, e) {
    return new Blockly.utils.Coordinate(t.x + e.x, t.y + e.y);
  }),
  (Blockly.utils.Coordinate.prototype.scale = function (t) {
    return (this.x *= t), (this.y *= t), this;
  }),
  (Blockly.utils.Coordinate.prototype.translate = function (t, e) {
    return (this.x += t), (this.y += e), this;
  }),
  (Blockly.utils.Coordinate.prototype.clone = function () {
    return new Blockly.utils.Coordinate(this.x, this.y);
  }),
  (Blockly.utils.string = {}),
  (Blockly.utils.string.startsWith = function (t, e) {
    return 0 == t.lastIndexOf(e, 0);
  }),
  (Blockly.utils.string.shortestStringLength = function (t) {
    return t.length
      ? t.reduce(function (t, e) {
          return t.length < e.length ? t : e;
        }).length
      : 0;
  }),
  (Blockly.utils.string.commonWordPrefix = function (t, e) {
    if (!t.length) return 0;
    if (1 == t.length) return t[0].length;
    var o = 0;
    e = e || Blockly.utils.string.shortestStringLength(t);
    for (var i = 0; i < e; i++) {
      for (var n = t[0][i], l = 1; l < t.length; l++)
        if (n != t[l][i]) return o;
      " " == n && (o = i + 1);
    }
    for (l = 1; l < t.length; l++) if ((n = t[l][i]) && " " != n) return o;
    return e;
  }),
  (Blockly.utils.string.commonWordSuffix = function (t, e) {
    if (!t.length) return 0;
    if (1 == t.length) return t[0].length;
    var o = 0;
    e = e || Blockly.utils.string.shortestStringLength(t);
    for (var i = 0; i < e; i++) {
      for (var n = t[0].substr(-i - 1, 1), l = 1; l < t.length; l++)
        if (n != t[l].substr(-i - 1, 1)) return o;
      " " == n && (o = i + 1);
    }
    for (l = 1; l < t.length; l++)
      if ((n = t[l].charAt(t[l].length - i - 1)) && " " != n) return o;
    return e;
  }),
  (Blockly.utils.string.wrap = function (t, e) {
    t = t.split("\n");
    for (var o = 0; o < t.length; o++)
      t[o] = Blockly.utils.string.wrapLine_(t[o], e);
    return t.join("\n");
  }),
  (Blockly.utils.string.wrapLine_ = function (t, e) {
    if (t.length <= e) return t;
    for (var o = t.trim().split(/\s+/), i = 0; i < o.length; i++)
      o[i].length > e && (e = o[i].length);
    i = -1 / 0;
    var n = 1;
    do {
      var l = i,
        r = t;
      t = [];
      var s = o.length / n,
        a = 1;
      for (i = 0; i < o.length - 1; i++)
        a < (i + 1.5) / s ? (a++, (t[i] = !0)) : (t[i] = !1);
      (t = Blockly.utils.string.wrapMutate_(o, t, e)),
        (i = Blockly.utils.string.wrapScore_(o, t, e)),
        (t = Blockly.utils.string.wrapToText_(o, t)),
        n++;
    } while (i > l);
    return r;
  }),
  (Blockly.utils.string.wrapScore_ = function (t, e, o) {
    for (var i = [0], n = [], l = 0; l < t.length; l++)
      (i[i.length - 1] += t[l].length),
        !0 === e[l]
          ? (i.push(0), n.push(t[l].charAt(t[l].length - 1)))
          : !1 === e[l] && i[i.length - 1]++;
    for (t = Math.max.apply(Math, i), l = e = 0; l < i.length; l++)
      (e -= 2 * Math.pow(Math.abs(o - i[l]), 1.5)),
        (e -= Math.pow(t - i[l], 1.5)),
        -1 != ".?!".indexOf(n[l])
          ? (e += o / 3)
          : -1 != ",;)]}".indexOf(n[l]) && (e += o / 4);
    return 1 < i.length && i[i.length - 1] <= i[i.length - 2] && (e += 0.5), e;
  }),
  (Blockly.utils.string.wrapMutate_ = function (t, e, o) {
    for (
      var i, n = Blockly.utils.string.wrapScore_(t, e, o), l = 0;
      l < e.length - 1;
      l++
    )
      if (e[l] != e[l + 1]) {
        var r = [].concat(e);
        (r[l] = !r[l]), (r[l + 1] = !r[l + 1]);
        var s = Blockly.utils.string.wrapScore_(t, r, o);
        s > n && ((n = s), (i = r));
      }
    return i ? Blockly.utils.string.wrapMutate_(t, i, o) : e;
  }),
  (Blockly.utils.string.wrapToText_ = function (t, e) {
    for (var o = [], i = 0; i < t.length; i++)
      o.push(t[i]), void 0 !== e[i] && o.push(e[i] ? "\n" : " ");
    return o.join("");
  }),
  (Blockly.utils.Size = function (t, e) {
    (this.width = t), (this.height = e);
  }),
  (Blockly.utils.Size.equals = function (t, e) {
    return (
      t == e || (!(!t || !e) && t.width == e.width && t.height == e.height)
    );
  }),
  (Blockly.utils.style = {}),
  (Blockly.utils.style.getSize = function (t) {
    if ("none" != Blockly.utils.style.getStyle_(t, "display"))
      return Blockly.utils.style.getSizeWithDisplay_(t);
    var e = t.style,
      o = e.display,
      i = e.visibility,
      n = e.position;
    (e.visibility = "hidden"),
      (e.position = "absolute"),
      (e.display = "inline");
    var l = t.offsetWidth;
    return (
      (t = t.offsetHeight),
      (e.display = o),
      (e.position = n),
      (e.visibility = i),
      new Blockly.utils.Size(l, t)
    );
  }),
  (Blockly.utils.style.getSizeWithDisplay_ = function (t) {
    return new Blockly.utils.Size(t.offsetWidth, t.offsetHeight);
  }),
  (Blockly.utils.style.getStyle_ = function (t, e) {
    return (
      Blockly.utils.style.getComputedStyle(t, e) ||
      Blockly.utils.style.getCascadedStyle(t, e) ||
      (t.style && t.style[e])
    );
  }),
  (Blockly.utils.style.getComputedStyle = function (t, e) {
    return (
      (document.defaultView &&
        document.defaultView.getComputedStyle &&
        (t = document.defaultView.getComputedStyle(t, null)) &&
        (t[e] || t.getPropertyValue(e))) ||
      ""
    );
  }),
  (Blockly.utils.style.getCascadedStyle = function (t, e) {
    return t.currentStyle ? t.currentStyle[e] : null;
  }),
  (Blockly.utils.style.getPageOffset = function (t) {
    var e = new Blockly.utils.Coordinate(0, 0);
    t = t.getBoundingClientRect();
    var o = document.documentElement;
    return (
      (o = new Blockly.utils.Coordinate(
        window.pageXOffset || o.scrollLeft,
        window.pageYOffset || o.scrollTop
      )),
      (e.x = t.left + o.x),
      (e.y = t.top + o.y),
      e
    );
  }),
  (Blockly.utils.style.getViewportPageOffset = function () {
    var t = document.body,
      e = document.documentElement;
    return new Blockly.utils.Coordinate(
      t.scrollLeft || e.scrollLeft,
      t.scrollTop || e.scrollTop
    );
  }),
  (Blockly.utils.style.setElementShown = function (t, e) {
    t.style.display = e ? "" : "none";
  }),
  (Blockly.utils.style.isRightToLeft = function (t) {
    return "rtl" == Blockly.utils.style.getStyle_(t, "direction");
  }),
  (Blockly.utils.style.getBorderBox = function (t) {
    var e = Blockly.utils.style.getComputedStyle(t, "borderLeftWidth"),
      o = Blockly.utils.style.getComputedStyle(t, "borderRightWidth"),
      i = Blockly.utils.style.getComputedStyle(t, "borderTopWidth");
    return (
      (t = Blockly.utils.style.getComputedStyle(t, "borderBottomWidth")),
      {
        top: parseFloat(i),
        right: parseFloat(o),
        bottom: parseFloat(t),
        left: parseFloat(e),
      }
    );
  }),
  (Blockly.utils.style.scrollIntoContainerView = function (t, e, o) {
    (t = Blockly.utils.style.getContainerOffsetToScrollInto(t, e, o)),
      (e.scrollLeft = t.x),
      (e.scrollTop = t.y);
  }),
  (Blockly.utils.style.getContainerOffsetToScrollInto = function (t, e, o) {
    var i = Blockly.utils.style.getPageOffset(t),
      n = Blockly.utils.style.getPageOffset(e),
      l = Blockly.utils.style.getBorderBox(e),
      r = i.x - n.x - l.left;
    return (
      (i = i.y - n.y - l.top),
      (n = Blockly.utils.style.getSizeWithDisplay_(t)),
      (t = e.clientWidth - n.width),
      (n = e.clientHeight - n.height),
      (l = e.scrollLeft),
      (e = e.scrollTop),
      o
        ? ((l += r - t / 2), (e += i - n / 2))
        : ((l += Math.min(r, Math.max(r - t, 0))),
          (e += Math.min(i, Math.max(i - n, 0)))),
      new Blockly.utils.Coordinate(l, e)
    );
  }),
  (Blockly.utils.userAgent = {}),
  (function (t) {
    function e(t) {
      return -1 != o.indexOf(t.toUpperCase());
    }
    Blockly.utils.userAgent.raw = t;
    var o = Blockly.utils.userAgent.raw.toUpperCase();
    (Blockly.utils.userAgent.IE = e("Trident") || e("MSIE")),
      (Blockly.utils.userAgent.EDGE = e("Edge")),
      (Blockly.utils.userAgent.EDGE_OR_IE =
        Blockly.utils.userAgent.EDGE || Blockly.utils.userAgent.IE),
      (Blockly.utils.userAgent.JAVA_FX = e("JavaFX")),
      (Blockly.utils.userAgent.CHROME =
        (e("Chrome") || e("CriOS")) && !Blockly.utils.userAgent.EDGE),
      (Blockly.utils.userAgent.WEBKIT =
        e("WebKit") && !Blockly.utils.userAgent.EDGE),
      (Blockly.utils.userAgent.GECKO =
        e("Gecko") &&
        !Blockly.utils.userAgent.WEBKIT &&
        !Blockly.utils.userAgent.IE &&
        !Blockly.utils.userAgent.EDGE),
      (Blockly.utils.userAgent.ANDROID = e("Android")),
      (Blockly.utils.userAgent.IPAD = e("iPad")),
      (Blockly.utils.userAgent.IPOD = e("iPod")),
      (Blockly.utils.userAgent.IPHONE =
        e("iPhone") &&
        !Blockly.utils.userAgent.IPAD &&
        !Blockly.utils.userAgent.IPOD),
      (Blockly.utils.userAgent.MAC = e("Macintosh")),
      (Blockly.utils.userAgent.TABLET =
        Blockly.utils.userAgent.IPAD ||
        (Blockly.utils.userAgent.ANDROID && !e("Mobile")) ||
        e("Silk")),
      (Blockly.utils.userAgent.MOBILE =
        !Blockly.utils.userAgent.TABLET &&
        (Blockly.utils.userAgent.IPOD ||
          Blockly.utils.userAgent.IPHONE ||
          Blockly.utils.userAgent.ANDROID ||
          e("IEMobile")));
  })(
    (Blockly.utils.global.navigator &&
      Blockly.utils.global.navigator.userAgent) ||
      ""
  ),
  (Blockly.utils.noEvent = function (t) {
    t.preventDefault(), t.stopPropagation();
  }),
  (Blockly.utils.isTargetInput = function (t) {
    return (
      "textarea" == t.target.type ||
      "text" == t.target.type ||
      "number" == t.target.type ||
      "email" == t.target.type ||
      "password" == t.target.type ||
      "search" == t.target.type ||
      "tel" == t.target.type ||
      "url" == t.target.type ||
      t.target.isContentEditable
    );
  }),
  (Blockly.utils.getRelativeXY = function (t) {
    var e = new Blockly.utils.Coordinate(0, 0),
      o = t.getAttribute("x");
    return (
      o && (e.x = parseInt(o, 10)),
      (o = t.getAttribute("y")) && (e.y = parseInt(o, 10)),
      (o =
        (o = t.getAttribute("transform")) &&
        o.match(Blockly.utils.getRelativeXY.XY_REGEX_)) &&
        ((e.x += Number(o[1])), o[3] && (e.y += Number(o[3]))),
      (t = t.getAttribute("style")) &&
        -1 < t.indexOf("translate") &&
        (t = t.match(Blockly.utils.getRelativeXY.XY_STYLE_REGEX_)) &&
        ((e.x += Number(t[1])), t[3] && (e.y += Number(t[3]))),
      e
    );
  }),
  (Blockly.utils.getInjectionDivXY_ = function (t) {
    for (var e = 0, o = 0; t; ) {
      var i = Blockly.utils.getRelativeXY(t);
      if (
        ((e += i.x),
        (o += i.y),
        -1 !=
          (" " + (t.getAttribute("class") || "") + " ").indexOf(
            " injectionDiv "
          ))
      )
        break;
      t = t.parentNode;
    }
    return new Blockly.utils.Coordinate(e, o);
  }),
  (Blockly.utils.getRelativeXY.XY_REGEX_ =
    /translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/),
  (Blockly.utils.getRelativeXY.XY_STYLE_REGEX_ =
    /transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/),
  (Blockly.utils.isRightButton = function (t) {
    return !(!t.ctrlKey || !Blockly.utils.userAgent.MAC) || 2 == t.button;
  }),
  (Blockly.utils.mouseToSvg = function (t, e, o) {
    var i = e.createSVGPoint();
    return (
      (i.x = t.clientX),
      (i.y = t.clientY),
      o || (o = e.getScreenCTM().inverse()),
      i.matrixTransform(o)
    );
  }),
  (Blockly.utils.getScrollDeltaPixels = function (t) {
    switch (t.deltaMode) {
      default:
        return { x: t.deltaX, y: t.deltaY };
      case 1:
        return {
          x: t.deltaX * Blockly.LINE_MODE_MULTIPLIER,
          y: t.deltaY * Blockly.LINE_MODE_MULTIPLIER,
        };
      case 2:
        return {
          x: t.deltaX * Blockly.PAGE_MODE_MULTIPLIER,
          y: t.deltaY * Blockly.PAGE_MODE_MULTIPLIER,
        };
    }
  }),
  (Blockly.utils.tokenizeInterpolation = function (t) {
    return Blockly.utils.tokenizeInterpolation_(t, !0);
  }),
  (Blockly.utils.replaceMessageReferences = function (t) {
    return "string" != typeof t
      ? t
      : (t = Blockly.utils.tokenizeInterpolation_(t, !1)).length
      ? String(t[0])
      : "";
  }),
  (Blockly.utils.checkMessageReferences = function (t) {
    var e = !0,
      o = Blockly.Msg;
    t = t.match(/%{BKY_[A-Z]\w*}/gi);
    for (var i = 0; i < t.length; i++)
      null == o[t[i].toUpperCase().slice(6, -1)] && (e = !1);
    return e;
  }),
  (Blockly.utils.tokenizeInterpolation_ = function (t, e) {
    var o = [],
      i = t.split("");
    i.push("");
    var n = 0;
    t = [];
    for (var l = null, r = 0; r < i.length; r++) {
      var s = i[r];
      0 == n
        ? "%" == s
          ? ((s = t.join("")) && o.push(s), (t.length = 0), (n = 1))
          : t.push(s)
        : 1 == n
        ? "%" == s
          ? (t.push(s), (n = 0))
          : e && "0" <= s && "9" >= s
          ? ((n = 2), (l = s), (s = t.join("")) && o.push(s), (t.length = 0))
          : "{" == s
          ? (n = 3)
          : (t.push("%", s), (n = 0))
        : 2 == n
        ? "0" <= s && "9" >= s
          ? (l += s)
          : (o.push(parseInt(l, 10)), r--, (n = 0))
        : 3 == n &&
          ("" == s
            ? (t.splice(0, 0, "%{"), r--, (n = 0))
            : "}" != s
            ? t.push(s)
            : ((n = t.join("")),
              /[A-Z]\w*/i.test(n)
                ? ((s = n.toUpperCase()),
                  (s = Blockly.utils.string.startsWith(s, "BKY_")
                    ? s.substring(4)
                    : null) && s in Blockly.Msg
                    ? "string" == typeof (n = Blockly.Msg[s])
                      ? Array.prototype.push.apply(
                          o,
                          Blockly.utils.tokenizeInterpolation_(n, e)
                        )
                      : e
                      ? o.push(String(n))
                      : o.push(n)
                    : o.push("%{" + n + "}"))
                : o.push("%{" + n + "}"),
              (n = t.length = 0)));
    }
    for (
      (s = t.join("")) && o.push(s), e = [], r = t.length = 0;
      r < o.length;
      ++r
    )
      "string" == typeof o[r]
        ? t.push(o[r])
        : ((s = t.join("")) && e.push(s), (t.length = 0), e.push(o[r]));
    return (s = t.join("")) && e.push(s), (t.length = 0), e;
  }),
  (Blockly.utils.genUid = function () {
    for (var t = Blockly.utils.genUid.soup_.length, e = [], o = 0; 20 > o; o++)
      e[o] = Blockly.utils.genUid.soup_.charAt(Math.random() * t);
    return e.join("");
  }),
  (Blockly.utils.genUid.soup_ =
    "!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"),
  (Blockly.utils.is3dSupported = function () {
    if (void 0 !== Blockly.utils.is3dSupported.cached_)
      return Blockly.utils.is3dSupported.cached_;
    if (!Blockly.utils.global.getComputedStyle) return !1;
    var t = document.createElement("p"),
      e = "none",
      o = {
        webkitTransform: "-webkit-transform",
        OTransform: "-o-transform",
        msTransform: "-ms-transform",
        MozTransform: "-moz-transform",
        transform: "transform",
      };
    for (var i in (document.body.insertBefore(t, null), o))
      if (void 0 !== t.style[i]) {
        if (
          ((t.style[i] = "translate3d(1px,1px,1px)"),
          !(e = Blockly.utils.global.getComputedStyle(t)))
        )
          return document.body.removeChild(t), !1;
        e = e.getPropertyValue(o[i]);
      }
    return (
      document.body.removeChild(t),
      (Blockly.utils.is3dSupported.cached_ = "none" !== e),
      Blockly.utils.is3dSupported.cached_
    );
  }),
  (Blockly.utils.runAfterPageLoad = function (t) {
    if ("object" != typeof document)
      throw Error(
        "Blockly.utils.runAfterPageLoad() requires browser document."
      );
    if ("complete" == document.readyState) t();
    else
      var e = setInterval(function () {
        "complete" == document.readyState && (clearInterval(e), t());
      }, 10);
  }),
  (Blockly.utils.getViewportBBox = function () {
    var t = Blockly.utils.style.getViewportPageOffset();
    return {
      right: document.documentElement.clientWidth + t.x,
      bottom: document.documentElement.clientHeight + t.y,
      top: t.y,
      left: t.x,
    };
  }),
  (Blockly.utils.arrayRemove = function (t, e) {
    return -1 != (e = t.indexOf(e)) && (t.splice(e, 1), !0);
  }),
  (Blockly.utils.getDocumentScroll = function () {
    var t = document.documentElement,
      e = window;
    return Blockly.utils.userAgent.IE && e.pageYOffset != t.scrollTop
      ? new Blockly.utils.Coordinate(t.scrollLeft, t.scrollTop)
      : new Blockly.utils.Coordinate(
          e.pageXOffset || t.scrollLeft,
          e.pageYOffset || t.scrollTop
        );
  }),
  (Blockly.utils.getBlockTypeCounts = function (t, e) {
    var o = Object.create(null),
      i = t.getDescendants(!0);
    for (
      e &&
        (t = t.getNextBlock()) &&
        ((t = i.indexOf(t)), i.splice(t, i.length - t)),
        t = 0;
      (e = i[t]);
      t++
    )
      o[e.type] ? o[e.type]++ : (o[e.type] = 1);
    return o;
  });
var resizeFromKeyboard = !0,
  initialWidth = 0,
  lastHeight = 0,
  debounceTimeout = null;
(Blockly.utils.resizeTracker = function (t) {
  debounceTimeout && clearTimeout(debounceTimeout),
    (debounceTimeout = setTimeout(function () {
      var e = t.getInjectionDiv();
      (resizeFromKeyboard = !0),
        e && ((initialWidth = e.clientWidth), (lastHeight = e.clientHeight));
    }, 1e3));
  var e = t.getInjectionDiv();
  if (
    e &&
    (0 == initialWidth &&
      ((resizeFromKeyboard = !0),
      (initialWidth = e.clientWidth),
      (lastHeight = e.clientHeight)),
    resizeFromKeyboard)
  ) {
    var o = e.clientHeight;
    e.clientWidth != initialWidth && (resizeFromKeyboard = !1),
      o > lastHeight ? (resizeFromKeyboard = !1) : (lastHeight = o);
  }
}),
  (Blockly.utils.isOnScreenKeyboardResize = function () {
    return !(
      !Blockly.utils.dom.hasClass(document.activeElement, "blocklyHtmlInput") ||
      !resizeFromKeyboard
    );
  }),
  (Blockly.utils.screenToWsCoordinates = function (t, e) {
    var o = e.x;
    e = e.y;
    var i = t.getInjectionDiv().getBoundingClientRect();
    return (
      (o = new Blockly.utils.Coordinate(o - i.left, e - i.top)),
      (e = t.getOriginOffsetInPixels()),
      Blockly.utils.Coordinate.difference(o, e).scale(1 / t.scale)
    );
  }),
  (Blockly.utils.parseBlockColour = function (t) {
    var e =
        "string" == typeof t ? Blockly.utils.replaceMessageReferences(t) : t,
      o = Number(e);
    if (!isNaN(o) && 0 <= o && 360 >= o)
      return {
        hue: o,
        hex: Blockly.utils.colour.hsvToHex(
          o,
          Blockly.HSV_SATURATION,
          255 * Blockly.HSV_VALUE
        ),
      };
    if ((o = Blockly.utils.colour.parse(e))) return { hue: null, hex: o };
    throw (
      ((o = 'Invalid colour: "' + e + '"'),
      t != e && (o += ' (from "' + t + '")'),
      Error(o))
    );
  }),
  (Blockly.Events = {}),
  (Blockly.Events.group_ = ""),
  (Blockly.Events.recordUndo = !0),
  (Blockly.Events.disabled_ = 0),
  (Blockly.Events.CREATE = "create"),
  (Blockly.Events.BLOCK_CREATE = Blockly.Events.CREATE),
  (Blockly.Events.DELETE = "delete"),
  (Blockly.Events.BLOCK_DELETE = Blockly.Events.DELETE),
  (Blockly.Events.CHANGE = "change"),
  (Blockly.Events.BLOCK_CHANGE = Blockly.Events.CHANGE),
  (Blockly.Events.MOVE = "move"),
  (Blockly.Events.BLOCK_MOVE = Blockly.Events.MOVE),
  (Blockly.Events.VAR_CREATE = "var_create"),
  (Blockly.Events.VAR_DELETE = "var_delete"),
  (Blockly.Events.VAR_RENAME = "var_rename"),
  (Blockly.Events.COMMENT_CREATE = "comment_create"),
  (Blockly.Events.COMMENT_DELETE = "comment_delete"),
  (Blockly.Events.COMMENT_CHANGE = "comment_change"),
  (Blockly.Events.COMMENT_MOVE = "comment_move"),
  (Blockly.Events.UI = "ui"),
  (Blockly.Events.END_DRAG = "end_drag"),
  (Blockly.Events.COMMENT_CREATE = "comment_create"),
  (Blockly.Events.COMMENT_DELETE = "comment_delete"),
  (Blockly.Events.COMMENT_CHANGE = "comment_change"),
  (Blockly.Events.COMMENT_MOVE = "comment_move"),
  (Blockly.Events.FINISHED_LOADING = "finished_loading"),
  (Blockly.Events.BUMP_EVENTS = [
    Blockly.Events.BLOCK_CREATE,
    Blockly.Events.BLOCK_MOVE,
    Blockly.Events.COMMENT_CREATE,
    Blockly.Events.COMMENT_MOVE,
  ]),
  (Blockly.Events.FIRE_QUEUE_ = []),
  (Blockly.Events.fire = function (t) {
    Blockly.Events.isEnabled() &&
      (Blockly.Events.FIRE_QUEUE_.length ||
        setTimeout(Blockly.Events.fireNow_, 0),
      Blockly.Events.FIRE_QUEUE_.push(t));
  }),
  (Blockly.Events.fireNow_ = function () {
    for (
      var t,
        e = Blockly.Events.filter(Blockly.Events.FIRE_QUEUE_, !0),
        o = (Blockly.Events.FIRE_QUEUE_.length = 0);
      (t = e[o]);
      o++
    )
      if (t.workspaceId) {
        var i = Blockly.Workspace.getById(t.workspaceId);
        i && i.fireChangeListener(t);
      }
  }),
  (Blockly.Events.filter = function (t, e) {
    (t = t.slice()), e || t.reverse();
    for (var o, i = [], n = Object.create(null), l = 0; (o = t[l]); l++)
      if (!o.isNull()) {
        var r = [o.type, o.blockId, o.workspaceId].join(" "),
          s = n[r],
          a = s ? s.event : null;
        s
          ? o.type == Blockly.Events.MOVE && s.index == l - 1
            ? ((a.newParentId = o.newParentId),
              (a.newInputName = o.newInputName),
              (a.newCoordinate = o.newCoordinate),
              (s.index = l))
            : o.type == Blockly.Events.CHANGE &&
              o.element == a.element &&
              o.name == a.name
            ? (a.newValue = o.newValue)
            : (o.type != Blockly.Events.UI ||
                "click" != o.element ||
                ("commentOpen" != a.element &&
                  "mutatorOpen" != a.element &&
                  "warningOpen" != a.element &&
                  "breakpointSet" != a.element)) &&
              ((n[r] = { event: o, index: 1 }), i.push(o))
          : ((n[r] = { event: o, index: l }), i.push(o));
      }
    for (
      t = i.filter(function (t) {
        return !t.isNull();
      }),
        e || t.reverse(),
        l = 1;
      (o = t[l]);
      l++
    )
      o.type == Blockly.Events.CHANGE &&
        "mutation" == o.element &&
        t.unshift(t.splice(l, 1)[0]);
    return t;
  }),
  (Blockly.Events.clearPendingUndo = function () {
    for (var t, e = 0; (t = Blockly.Events.FIRE_QUEUE_[e]); e++)
      t.recordUndo = !1;
  }),
  (Blockly.Events.disable = function () {
    Blockly.Events.disabled_++;
  }),
  (Blockly.Events.enable = function () {
    Blockly.Events.disabled_--;
  }),
  (Blockly.Events.isEnabled = function () {
    return 0 == Blockly.Events.disabled_;
  }),
  (Blockly.Events.getGroup = function () {
    return Blockly.Events.group_;
  }),
  (Blockly.Events.setGroup = function (t) {
    Blockly.Events.group_ =
      "boolean" == typeof t ? (t ? Blockly.utils.genUid() : "") : t;
  }),
  (Blockly.Events.getDescendantIds = function (t) {
    var e = [];
    t = t.getDescendants(!1);
    for (var o, i = 0; (o = t[i]); i++) e[i] = o.id;
    return e;
  }),
  (Blockly.Events.fromJson = function (t, e) {
    switch (t.type) {
      case Blockly.Events.CREATE:
        var o = new Blockly.Events.Create(null);
        break;
      case Blockly.Events.DELETE:
        o = new Blockly.Events.Delete(null);
        break;
      case Blockly.Events.CHANGE:
        o = new Blockly.Events.Change(null, "", "", "", "");
        break;
      case Blockly.Events.MOVE:
        o = new Blockly.Events.Move(null);
        break;
      case Blockly.Events.VAR_CREATE:
        o = new Blockly.Events.VarCreate(null);
        break;
      case Blockly.Events.VAR_DELETE:
        o = new Blockly.Events.VarDelete(null);
        break;
      case Blockly.Events.VAR_RENAME:
        o = new Blockly.Events.VarRename(null, "");
        break;
      case Blockly.Events.UI:
        o = new Blockly.Events.Ui(null, "", "", "");
        break;
      case Blockly.Events.COMMENT_CREATE:
        o = new Blockly.Events.CommentCreate(null);
        break;
      case Blockly.Events.COMMENT_CHANGE:
        o = new Blockly.Events.CommentChange(null, "", "");
        break;
      case Blockly.Events.COMMENT_MOVE:
        o = new Blockly.Events.CommentMove(null);
        break;
      case Blockly.Events.COMMENT_DELETE:
        new Blockly.Events.CommentDelete(null);
      case Blockly.Events.END_DRAG:
        o = new Blockly.Events.EndBlockDrag(null, !1);
        break;
      case Blockly.Events.FINISHED_LOADING:
        o = new Blockly.Events.FinishedLoading(e);
        break;
      default:
        throw Error("Unknown event type.");
    }
    return o.fromJson(t), (o.workspaceId = e.id), o;
  }),
  (Blockly.Events.disableOrphans = function (t) {
    if (
      (t.type == Blockly.Events.MOVE || t.type == Blockly.Events.CREATE) &&
      t.workspaceId
    ) {
      var e = Blockly.Workspace.getById(t.workspaceId);
      if ((t = e.getBlockById(t.blockId))) {
        var o = t.getParent();
        if (o && o.isEnabled())
          for (e = t.getDescendants(!1), t = 0; (o = e[t]); t++)
            o.setEnabled(!0);
        else if (
          (t.outputConnection || t.previousConnection) &&
          !e.isDragging()
        )
          do {
            t.setEnabled(!1), (t = t.getNextBlock());
          } while (t);
      }
    }
  }),
  (Blockly.Events.Abstract = function () {
    (this.workspaceId = void 0),
      (this.group = Blockly.Events.getGroup()),
      (this.recordUndo = Blockly.Events.recordUndo);
  }),
  (Blockly.Events.Abstract.prototype.toJson = function () {
    var t = { type: this.type };
    return this.group && (t.group = this.group), t;
  }),
  (Blockly.Events.Abstract.prototype.fromJson = function (t) {
    this.group = t.group;
  }),
  (Blockly.Events.Abstract.prototype.isNull = function () {
    return !1;
  }),
  (Blockly.Events.Abstract.prototype.run = function (t) {}),
  (Blockly.Events.Abstract.prototype.getEventWorkspace_ = function () {
    if (this.workspaceId) var t = Blockly.Workspace.getById(this.workspaceId);
    if (!t)
      throw Error(
        "Workspace is null. Event must have been generated from real Blockly events."
      );
    return t;
  }),
  (Blockly.utils.object = {}),
  (Blockly.utils.object.inherits = function (t, e) {
    (t.superClass_ = e.prototype),
      (t.prototype = Object.create(e.prototype)),
      (t.prototype.constructor = t);
  }),
  (Blockly.utils.object.mixin = function (t, e) {
    for (var o in e) t[o] = e[o];
  }),
  (Blockly.utils.object.values = function (t) {
    return Object.values
      ? Object.values(t)
      : Object.keys(t).map(function (e) {
          return t[e];
        });
  }),
  (Blockly.Events.Ui = function (t, e, o, i) {
    Blockly.Events.Ui.superClass_.constructor.call(this),
      (this.blockId = t ? t.id : null),
      (this.workspaceId = t && t.workspace ? t.workspace.id : void 0),
      (this.element = e),
      (this.oldValue = o),
      (this.newValue = i),
      (this.recordUndo = !1);
  }),
  Blockly.utils.object.inherits(Blockly.Events.Ui, Blockly.Events.Abstract),
  (Blockly.Events.Ui.prototype.type = Blockly.Events.UI),
  (Blockly.Events.Ui.prototype.toJson = function () {
    var t = Blockly.Events.Ui.superClass_.toJson.call(this);
    return (
      (t.element = this.element),
      void 0 !== this.newValue && (t.newValue = this.newValue),
      this.blockId && (t.blockId = this.blockId),
      t
    );
  }),
  (Blockly.Events.Ui.prototype.fromJson = function (t) {
    Blockly.Events.Ui.superClass_.fromJson.call(this, t),
      (this.element = t.element),
      (this.newValue = t.newValue),
      (this.blockId = t.blockId);
  }),
  (Blockly.utils.dom = {}),
  (Blockly.utils.dom.SVG_NS = "http://www.w3.org/2000/svg"),
  (Blockly.utils.dom.HTML_NS = "http://www.w3.org/1999/xhtml"),
  (Blockly.utils.dom.XLINK_NS = "http://www.w3.org/1999/xlink"),
  (Blockly.utils.dom.Node = {
    ELEMENT_NODE: 1,
    TEXT_NODE: 3,
    COMMENT_NODE: 8,
    DOCUMENT_POSITION_CONTAINED_BY: 16,
  }),
  (Blockly.utils.dom.cacheWidths_ = null),
  (Blockly.utils.dom.cacheReference_ = 0),
  (Blockly.utils.dom.canvasContext_ = null),
  (Blockly.utils.dom.createSvgElement = function (t, e, o) {
    for (var i in ((t = document.createElementNS(Blockly.utils.dom.SVG_NS, t)),
    e))
      t.setAttribute(i, e[i]);
    return (
      document.body.runtimeStyle && (t.runtimeStyle = t.currentStyle = t.style),
      o && o.appendChild(t),
      t
    );
  }),
  (Blockly.utils.dom.addClass = function (t, e) {
    var o = t.getAttribute("class") || "";
    return (
      -1 == (" " + o + " ").indexOf(" " + e + " ") &&
      (o && (o += " "), t.setAttribute("class", o + e), !0)
    );
  }),
  (Blockly.utils.dom.removeClass = function (t, e) {
    var o = t.getAttribute("class");
    if (-1 == (" " + o + " ").indexOf(" " + e + " ")) return !1;
    o = o.split(/\s+/);
    for (var i = 0; i < o.length; i++)
      (o[i] && o[i] != e) || (o.splice(i, 1), i--);
    return (
      o.length
        ? t.setAttribute("class", o.join(" "))
        : t.removeAttribute("class"),
      !0
    );
  }),
  (Blockly.utils.dom.hasClass = function (t, e) {
    return -1 != (" " + t.getAttribute("class") + " ").indexOf(" " + e + " ");
  }),
  (Blockly.utils.dom.removeNode = function (t) {
    return t && t.parentNode ? t.parentNode.removeChild(t) : null;
  }),
  (Blockly.utils.dom.insertAfter = function (t, e) {
    var o = e.nextSibling;
    if (!(e = e.parentNode)) throw Error("Reference node has no parent.");
    o ? e.insertBefore(t, o) : e.appendChild(t);
  }),
  (Blockly.utils.dom.containsNode = function (t, e) {
    return !!(
      t.compareDocumentPosition(e) &
      Blockly.utils.dom.Node.DOCUMENT_POSITION_CONTAINED_BY
    );
  }),
  (Blockly.utils.dom.setCssTransform = function (t, e) {
    (t.style.transform = e), (t.style["-webkit-transform"] = e);
  }),
  (Blockly.utils.dom.startTextWidthCache = function () {
    Blockly.utils.dom.cacheReference_++,
      Blockly.utils.dom.cacheWidths_ || (Blockly.utils.dom.cacheWidths_ = {});
  }),
  (Blockly.utils.dom.stopTextWidthCache = function () {
    Blockly.utils.dom.cacheReference_--,
      Blockly.utils.dom.cacheReference_ ||
        (Blockly.utils.dom.cacheWidths_ = null);
  }),
  (Blockly.utils.dom.getTextWidth = function (t) {
    var e,
      o = t.textContent + "\n" + t.className.baseVal;
    if (
      Blockly.utils.dom.cacheWidths_ &&
      (e = Blockly.utils.dom.cacheWidths_[o])
    )
      return e;
    try {
      e =
        Blockly.utils.userAgent.IE || Blockly.utils.userAgent.EDGE
          ? t.getBBox().width
          : t.getComputedTextLength();
    } catch (e) {
      return 8 * t.textContent.length;
    }
    return (
      Blockly.utils.dom.cacheWidths_ && (Blockly.utils.dom.cacheWidths_[o] = e),
      e
    );
  }),
  (Blockly.utils.dom.getFastTextWidth = function (t, e, o, i) {
    var n,
      l = t.textContent;
    return (
      (t = l + "\n" + t.className.baseVal),
      (Blockly.utils.dom.cacheWidths_ &&
        (n = Blockly.utils.dom.cacheWidths_[t])) ||
        (Blockly.utils.dom.canvasContext_ ||
          (((n = document.createElement("canvas")).className =
            "blocklyComputeCanvas"),
          document.body.appendChild(n),
          (Blockly.utils.dom.canvasContext_ = n.getContext("2d"))),
        (Blockly.utils.dom.canvasContext_.font = o + " " + e + "pt " + i),
        (n = Blockly.utils.dom.canvasContext_.measureText(l).width),
        Blockly.utils.dom.cacheWidths_ &&
          (Blockly.utils.dom.cacheWidths_[t] = n)),
      n
    );
  }),
  (Blockly.BlockDragSurfaceSvg = function (t) {
    (this.container_ = t), this.createDom();
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.SVG_ = null),
  (Blockly.BlockDragSurfaceSvg.prototype.dragGroup_ = null),
  (Blockly.BlockDragSurfaceSvg.prototype.container_ = null),
  (Blockly.BlockDragSurfaceSvg.prototype.scale_ = 1),
  (Blockly.BlockDragSurfaceSvg.prototype.surfaceXY_ = null),
  (Blockly.BlockDragSurfaceSvg.prototype.dragShadowFilterId_ = ""),
  (Blockly.BlockDragSurfaceSvg.SHADOW_STD_DEVIATION = 6),
  (Blockly.BlockDragSurfaceSvg.prototype.createDom = function () {
    if (!this.SVG_) {
      this.SVG_ = Blockly.utils.dom.createSvgElement(
        "svg",
        {
          xmlns: Blockly.utils.dom.SVG_NS,
          "xmlns:html": Blockly.utils.dom.HTML_NS,
          "xmlns:xlink": Blockly.utils.dom.XLINK_NS,
          version: "1.1",
          class: "blocklyBlockDragSurface",
        },
        this.container_
      );
      var t = Blockly.utils.dom.createSvgElement("defs", {}, this.SVG_);
      (this.dragShadowFilterId_ = this.createDropShadowDom_(t)),
        (this.dragGroup_ = Blockly.utils.dom.createSvgElement(
          "g",
          {},
          this.SVG_
        )),
        this.dragGroup_.setAttribute(
          "filter",
          "url(#" + this.dragShadowFilterId_ + ")"
        );
    }
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.createDropShadowDom_ = function (t) {
    var e = String(Math.random()).substring(2);
    return (
      (t = Blockly.utils.dom.createSvgElement(
        "filter",
        {
          id: "blocklyDragShadowFilter" + e,
          height: "140%",
          width: "140%",
          y: "-20%",
          x: "-20%",
        },
        t
      )),
      Blockly.utils.dom.createSvgElement(
        "feGaussianBlur",
        {
          in: "SourceAlpha",
          stdDeviation: Blockly.BlockDragSurfaceSvg.SHADOW_STD_DEVIATION,
        },
        t
      ),
      (e = Blockly.utils.dom.createSvgElement(
        "feComponentTransfer",
        { result: "offsetBlur" },
        t
      )),
      Blockly.utils.dom.createSvgElement(
        "feFuncA",
        { type: "linear", slope: Blockly.Colours.dragShadowOpacity },
        e
      ),
      Blockly.utils.dom.createSvgElement(
        "feComposite",
        { in: "SourceGraphic", in2: "offsetBlur", operator: "over" },
        t
      ),
      t.id
    );
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.setBlocksAndShow = function (t) {
    if (this.dragGroup_.childNodes.length)
      throw Error("Already dragging a block.");
    this.dragGroup_.appendChild(t),
      (this.SVG_.style.display = "block"),
      (this.surfaceXY_ = new Blockly.utils.Coordinate(0, 0)),
      (document.getElementsByClassName("injectionDiv")[0].style.overflow =
        "visible");
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.translateAndScaleGroup = function (
    t,
    e,
    o
  ) {
    (this.scale_ = o),
      (t = t.toFixed(0)),
      (e = e.toFixed(0)),
      this.dragGroup_.setAttribute(
        "transform",
        "translate(" + t + "," + e + ") scale(" + o + ")"
      );
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_ =
    function () {
      var t = this.surfaceXY_.x,
        e = this.surfaceXY_.y;
      (t = t.toFixed(0)),
        (e = e.toFixed(0)),
        (this.SVG_.style.display = "block"),
        Blockly.utils.dom.setCssTransform(
          this.SVG_,
          "translate3d(" + t + "px, " + e + "px, 0px)"
        );
    }),
  (Blockly.BlockDragSurfaceSvg.prototype.translateSurface = function (t, e) {
    (this.surfaceXY_ = new Blockly.utils.Coordinate(
      t * this.scale_,
      e * this.scale_
    )),
      this.translateSurfaceInternal_();
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.getSurfaceTranslation = function () {
    var t = Blockly.utils.getRelativeXY(this.SVG_);
    return new Blockly.utils.Coordinate(t.x / this.scale_, t.y / this.scale_);
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.getGroup = function () {
    return this.dragGroup_;
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.getCurrentBlock = function () {
    return this.dragGroup_.firstChild;
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.clearAndHide = function (t) {
    if (
      (t
        ? this.getCurrentBlock() && t.appendChild(this.getCurrentBlock())
        : this.getCurrentBlock() &&
          this.dragGroup_.removeChild(this.getCurrentBlock()),
      (this.SVG_.style.display = "none"),
      this.dragGroup_.childNodes.length)
    )
      throw Error("Drag group was not cleared.");
    (this.surfaceXY_ = null),
      (document.getElementsByClassName("injectionDiv")[0].style.overflow =
        "hidden");
  }),
  (Blockly.BlockDragSurfaceSvg.prototype.setOpacity = function (t) {
    this.SVG_.setAttribute("opacity", t);
  }),
  (Blockly.utils.IdGenerator = {}),
  (Blockly.utils.IdGenerator.nextId_ = 0),
  (Blockly.utils.IdGenerator.getNextUniqueId = function () {
    return "blockly:" + (Blockly.utils.IdGenerator.nextId_++).toString(36);
  }),
  (Blockly.Component = function () {
    (this.rightToLeft_ = Blockly.Component.defaultRightToLeft),
      (this.id_ = null),
      (this.inDocument_ = !1),
      (this.parent_ = this.element_ = null),
      (this.children_ = []),
      (this.childIndex_ = {});
  }),
  (Blockly.Component.defaultRightToLeft = !1),
  (Blockly.Component.Error = {
    ALREADY_RENDERED: "Component already rendered",
    PARENT_UNABLE_TO_BE_SET: "Unable to set parent component",
    CHILD_INDEX_OUT_OF_BOUNDS: "Child component index out of bounds",
  }),
  (Blockly.Component.prototype.getId = function () {
    return this.id_ || (this.id_ = Blockly.utils.IdGenerator.getNextUniqueId());
  }),
  (Blockly.Component.prototype.getElement = function () {
    return this.element_;
  }),
  (Blockly.Component.prototype.setElementInternal = function (t) {
    this.element_ = t;
  }),
  (Blockly.Component.prototype.setParent = function (t) {
    if (this == t) throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);
    if (
      t &&
      this.parent_ &&
      this.id_ &&
      this.parent_.getChild(this.id_) &&
      this.parent_ != t
    )
      throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);
    this.parent_ = t;
  }),
  (Blockly.Component.prototype.getParent = function () {
    return this.parent_;
  }),
  (Blockly.Component.prototype.isInDocument = function () {
    return this.inDocument_;
  }),
  (Blockly.Component.prototype.createDom = function () {
    this.element_ = document.createElement("div");
  }),
  (Blockly.Component.prototype.render = function (t) {
    this.render_(t);
  }),
  (Blockly.Component.prototype.renderBefore = function (t) {
    this.render_(t.parentNode, t);
  }),
  (Blockly.Component.prototype.render_ = function (t, e) {
    if (this.inDocument_) throw Error(Blockly.Component.Error.ALREADY_RENDERED);
    this.element_ || this.createDom(),
      t
        ? t.insertBefore(this.element_, e || null)
        : document.body.appendChild(this.element_),
      (this.parent_ && !this.parent_.isInDocument()) || this.enterDocument();
  }),
  (Blockly.Component.prototype.enterDocument = function () {
    (this.inDocument_ = !0),
      this.forEachChild(function (t) {
        !t.isInDocument() && t.getElement() && t.enterDocument();
      });
  }),
  (Blockly.Component.prototype.exitDocument = function () {
    this.forEachChild(function (t) {
      t.isInDocument() && t.exitDocument();
    }),
      (this.inDocument_ = !1);
  }),
  (Blockly.Component.prototype.dispose = function () {
    this.disposed_ || ((this.disposed_ = !0), this.disposeInternal());
  }),
  (Blockly.Component.prototype.disposeInternal = function () {
    this.inDocument_ && this.exitDocument(),
      this.forEachChild(function (t) {
        t.dispose();
      }),
      this.element_ && Blockly.utils.dom.removeNode(this.element_),
      (this.parent_ = this.element_ = this.childIndex_ = this.children_ = null);
  }),
  (Blockly.Component.prototype.addChild = function (t, e) {
    this.addChildAt(t, this.getChildCount(), e);
  }),
  (Blockly.Component.prototype.addChildAt = function (t, e, o) {
    if (t.inDocument_ && (o || !this.inDocument_))
      throw Error(Blockly.Component.Error.ALREADY_RENDERED);
    if (0 > e || e > this.getChildCount())
      throw Error(Blockly.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);
    if (((this.childIndex_[t.getId()] = t), t.getParent() == this)) {
      var i = this.children_.indexOf(t);
      -1 < i && this.children_.splice(i, 1);
    }
    t.setParent(this),
      this.children_.splice(e, 0, t),
      t.inDocument_ && this.inDocument_ && t.getParent() == this
        ? (e = (o = this.getContentElement()).childNodes[e] || null) !=
            t.getElement() && o.insertBefore(t.getElement(), e)
        : o
        ? (this.element_ || this.createDom(),
          (e = this.getChildAt(e + 1)),
          t.render_(this.getContentElement(), e ? e.element_ : null))
        : this.inDocument_ &&
          !t.inDocument_ &&
          t.element_ &&
          t.element_.parentNode &&
          t.element_.parentNode.nodeType ==
            Blockly.utils.dom.Node.ELEMENT_NODE &&
          t.enterDocument();
  }),
  (Blockly.Component.prototype.getContentElement = function () {
    return this.element_;
  }),
  (Blockly.Component.prototype.isRightToLeft = function () {
    return this.rightToLeft_;
  }),
  (Blockly.Component.prototype.setRightToLeft = function (t) {
    if (this.inDocument_) throw Error(Blockly.Component.Error.ALREADY_RENDERED);
    this.rightToLeft_ = t;
  }),
  (Blockly.Component.prototype.hasChildren = function () {
    return 0 != this.children_.length;
  }),
  (Blockly.Component.prototype.getChildCount = function () {
    return this.children_.length;
  }),
  (Blockly.Component.prototype.getChild = function (t) {
    return (t && this.childIndex_[t]) || null;
  }),
  (Blockly.Component.prototype.getChildAt = function (t) {
    return this.children_[t] || null;
  }),
  (Blockly.Component.prototype.forEachChild = function (t, e) {
    for (var o = 0; o < this.children_.length; o++)
      t.call(e, this.children_[o], o);
  }),
  (Blockly.Component.prototype.indexOfChild = function (t) {
    return this.children_.indexOf(t);
  }),
  (Blockly.Colours = {
    text: "#575E75",
    workspace: "#F9F9F9",
    toolboxHover: "#4C97FF",
    toolboxSelected: "#e9eef2",
    toolboxText: "#575E75",
    toolbox: "#FFFFFF",
    flyout: "#444",
    scrollbar: "#CECDCE",
    scrollbarHover: "#CECDCE",
    textField: "#FFFFFF",
    insertionMarker: "#000000",
    insertionMarkerOpacity: 0.2,
    dragShadowOpacity: 0.4,
    stackGlow: "#FFF200",
    stackGlowSize: 4,
    stackGlowOpacity: 1,
    replacementGlow: "#FFF200",
    replacementGlowSize: 2,
    replacementGlowOpacity: 1,
    highlightGlow: "#FFF200",
    highlightGlowSize: 1.1,
    highlightGlowOpacity: 1,
    selectedGlow: "#FFF200",
    selectedGlowSize: 0.4,
    warningGlow: "#E53D00",
    warningGlowSize: 1.1,
    warningGlowOpacity: 1,
    colourPickerStroke: "#FFFFFF",
    fieldShadow: "rgba(255, 255, 255, 0.2)",
    dropDownShadow: "rgba(0, 0, 0, .3)",
    numPadBackground: "#547AB2",
    numPadBorder: "#435F91",
    numPadActiveBackground: "#435F91",
    numPadText: "#FFFFFF",
    valueReportBackground: "#FFFFFF",
    valueReportBorder: "#AAAAAA",
    canvasTransitionLength: 500,
  }),
  (Blockly.Css = {}),
  (Blockly.Css.injected_ = !1),
  (Blockly.Css.register = function (t) {
    if (Blockly.Css.injected_) throw Error("CSS already injected");
    Array.prototype.push.apply(Blockly.Css.CONTENT, t), (t.length = 0);
  }),
  (Blockly.Css.inject = function (t, e) {
    if (!Blockly.Css.injected_) {
      Blockly.Css.injected_ = !0;
      var o = Blockly.Css.CONTENT.join("\n");
      if (t) {
        for (var i in ((t = e.replace(/[\\/]$/, "")),
        (o = o.replace(/<<<PATH>>>/g, t)),
        Blockly.Colours))
          Blockly.Colours.hasOwnProperty(i) &&
            (o = o.replace(
              new RegExp("\\$colour\\_" + i, "g"),
              Blockly.Colours[i]
            ));
        ((i = document.createElement("style")).id = "blockly-common-style"),
          (o = document.createTextNode(o)),
          i.appendChild(o),
          document.head.insertBefore(i, document.head.firstChild);
      }
    }
  }),
  (Blockly.Css.setCursor = function (t) {
    console.warn(
      "Deprecated call to Blockly.Css.setCursor. See https://github.com/google/blockly/issues/981 for context"
    );
  }),
  (Blockly.Css.CONTENT = [
    ".blocklySvg {",
    "background-color: $colour_workspace;",
    "outline: none;",
    "overflow: hidden;",
    "position: absolute;",
    "display: block;",
    "touch-action: none;",
    "}",
    ".blocklyRelativeWrapper {",
    "position: relative;",
    "width: 100%;",
    "height: 100%;",
    "}",
    ".blocklyWidgetDiv {",
    "display: none;",
    "position: absolute;",
    "z-index: 99999;",
    "}",
    ".injectionDiv {",
    "height: 100%;",
    "position: relative;",
    "overflow: hidden;",
    "touch-action: none;",
    "}",
    ".blocklyWidgetDiv.fieldTextInput {",
    "overflow: hidden;",
    "border: 1px solid;",
    "box-sizing: border-box;",
    "transform-origin: 0 0;",
    "-ms-transform-origin: 0 0;",
    "-moz-transform-origin: 0 0;",
    "-webkit-transform-origin: 0 0;",
    "}",
    ".blocklyTextDropDownArrow {",
    "position: absolute;",
    "}",
    ".blocklyNonSelectable {",
    "user-select: none;",
    "-ms-user-select: none;",
    "-webkit-user-select: none;",
    "}",
    ".blocklyWsDragSurface {",
    "display: none;",
    "position: absolute;",
    "top: 0;",
    "left: 0;",
    "touch-action: none;",
    "cursor: move;",
    "}",
    ".blocklyWsDragSurface.blocklyOverflowVisible {",
    "overflow: visible;",
    "}",
    ".blocklyWsDragSurface.blocklyOverflowVisible {",
    "overflow: visible;",
    "}",
    ".blocklyBlockDragSurface {",
    "display: none;",
    "position: absolute;",
    "top: 0;",
    "left: 0;",
    "right: 0;",
    "bottom: 0;",
    "overflow: visible !important;",
    "z-index: 50;",
    "}",
    ".blocklyBlockCanvas.blocklyTransitioning {",
    "transition: all 0.5s ease-in-out;",
    "}",
    ".blocklyBlockCanvas.blocklyCanvasTransitioning,",
    ".blocklyBubbleCanvas.blocklyCanvasTransitioning {",
    "transition: transform .5s;",
    "}",
    ".blocklyTooltipDiv {",
    "background-color: #ffffc7;",
    "border: 1px solid #ddc;",
    "box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);",
    "color: #000;",
    "display: none;",
    'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',
    "font-size: 9pt;",
    "opacity: .9;",
    "padding: 2px;",
    "position: absolute;",
    "z-index: 100000;",
    "}",
    ".blocklyDropDownDiv {",
    "position: absolute;",
    "left: 0;",
    "top: 0;",
    "z-index: 1000;",
    "display: none;",
    "border: 1px solid;",
    "border-color: #dadce0;",
    "background-color: #fff;",
    "border-radius: 2px;",
    "box-shadow: 0px 0px 8px 1px " + Blockly.Colours.dropDownShadow + ";",
    "padding: 4px;",
    "box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);",
    "}",
    ".blocklyDropDownDiv.focused {",
    "box-shadow: 0px 0px 6px 1px rgba(0,0,0,.3);",
    "}",
    ".blocklyDropDownContent {",
    "max-height: 300px;",
    "overflow: auto;",
    "overflow-x: hidden;",
    "}",
    ".blocklyDropDownArrow {",
    "position: absolute;",
    "left: 0;",
    "top: 0;",
    "width: 16px;",
    "height: 16px;",
    "z-index: -1;",
    "background-color: inherit;",
    "border-color: inherit;",
    "}",
    ".blocklyDropDownButton {",
    "display: inline-block;",
    "float: left;",
    "padding: 0;",
    "margin: 4px;",
    "border-radius: 4px;",
    "outline: none;",
    "border: 1px solid;",
    "transition: box-shadow .1s;",
    "cursor: pointer;",
    "}",
    ".blocklyDropDownButtonHover {",
    "box-shadow: 0px 0px 0px 4px " + Blockly.Colours.fieldShadow + ";",
    "}",
    ".blocklyDropDownButton:active {",
    "box-shadow: 0px 0px 0px 6px " + Blockly.Colours.fieldShadow + ";",
    "}",
    ".blocklyDropDownButton > img {",
    "width: 80%;",
    "height: 80%;",
    "margin-top: 5%",
    "}",
    ".blocklyDropDownPlaceholder {",
    "display: inline-block;",
    "float: left;",
    "padding: 0;",
    "margin: 4px;",
    "}",
    ".blocklyNumPadButton {",
    "display: inline-block;",
    "float: left;",
    "padding: 0;",
    "width: 48px;",
    "height: 48px;",
    "margin: 4px;",
    "border-radius: 4px;",
    "background: $colour_numPadBackground;",
    "color: $colour_numPadText;",
    "outline: none;",
    "border: 1px solid $colour_numPadBorder;",
    "cursor: pointer;",
    "font-weight: 600;",
    'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',
    "font-size: 12pt;",
    "-webkit-tap-highlight-color: rgba(0,0,0,0);",
    "}",
    ".blocklyNumPadButton > img {",
    "margin-top: 10%;",
    "width: 80%;",
    "height: 80%;",
    "}",
    ".blocklyNumPadButton:active {",
    "background: $colour_numPadActiveBackground;",
    "-webkit-tap-highlight-color: rgba(0,0,0,0);",
    "}",
    ".blocklyArrowTop {",
    "border-top: 1px solid;",
    "border-left: 1px solid;",
    "border-top-left-radius: 4px;",
    "border-color: inherit;",
    "}",
    ".blocklyArrowBottom {",
    "border-bottom: 1px solid;",
    "border-right: 1px solid;",
    "border-bottom-right-radius: 4px;",
    "border-color: inherit;",
    "}",
    ".valueReportBox {",
    "min-width: 50px;",
    "max-width: 300px;",
    "max-height: 200px;",
    "overflow: auto;",
    "word-wrap: break-word;",
    "text-align: center;",
    'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',
    "font-size: .8em;",
    "}",
    ".blocklyResizeSE {",
    "cursor: se-resize;",
    "fill: transparent;",
    "}",
    ".blocklyResizeSW {",
    "cursor: sw-resize;",
    "fill: transparent;",
    "}",
    ".blocklyResizeLine {",
    "stroke: #515A5A;",
    "stroke-width: 1;",
    "}",
    ".blocklyHighlightedConnectionPath {",
    "fill: none;",
    "stroke: #FFF200;",
    "stroke-width: 4px;",
    "}",
    ".blocklyPath {",
    "stroke-width: 1px;",
    "transition: stroke .4s;",
    "}",
    ".blocklyDraggable:not(.blocklySelected)>.blocklyPath.blocklyReporterHover {",
    "stroke-width: 2px;",
    "stroke: white;",
    "}",
    ".blocklyBlockBackground.blocklyFieldHover {",
    "stroke-width: 2px;",
    "stroke: white;",
    "}",
    ".blocklySelected>.blocklyPath {",
    "}",
    ".blocklyDraggable {",
    'cursor: url("<<<PATH>>>/handopen.cur"), auto;',
    "cursor: grab;",
    "cursor: -webkit-grab;",
    "touch-action: none;",
    "}",
    ".blocklyDragging {",
    'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',
    "cursor: grabbing;",
    "cursor: -webkit-grabbing;",
    "touch-action: none;",
    "}",
    ".blocklyDraggable:active {",
    'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',
    "cursor: grabbing;",
    "cursor: -webkit-grabbing;",
    "}",
    ".blocklyBlockDragSurface .blocklyDraggable {",
    'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',
    "cursor: grabbing;",
    "cursor: -webkit-grabbing;",
    "}",
    ".blocklyDragging.blocklyDraggingDelete {",
    'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',
    "}",
    ".blocklyDragging>.blocklyPath,",
    ".blocklyDragging>.blocklyPathLight {",
    "fill-opacity: .8;",
    "stroke-opacity: .8;",
    "}",
    ".blocklyDragging>.blocklyPath {",
    "}",
    ".blocklyDisabled>.blocklyPath {",
    "fill-opacity: .8;",
    "stroke-opacity: .8;",
    "}",
    ".blocklyDisabled .blocklyEditableText .blocklyBlockBackground,",
    ".blocklyDisabled .blocklyNonEditableText .blocklyBlockBackground,",
    '.blocklyDisabled g[data-argument-type="dropdown"] .blocklyBlockBackground {',
    "fill-opacity: 0.1 !important;",
    "}",
    ".blocklyInsertionMarker>.blocklyPath {",
    "stroke: none;",
    "}",
    ".blocklyInsertionMarker>.blocklyIconGroup {",
    "display: none;",
    "}",
    ".blocklyInsertionMarker>.blocklyPath,",
    ".blocklyInsertionMarker>.blocklyPathLight,",
    ".blocklyInsertionMarker>.blocklyPathDark {",
    "fill-opacity: .2;",
    "stroke: none",
    "}",
    ".blocklyReplaceable .blocklyPath {",
    "fill-opacity: 0.5;",
    "}",
    ".blocklyReplaceable .blocklyPathLight,",
    ".blocklyReplaceable .blocklyPathDark {",
    "display: none;",
    "}",
    ".blocklyText {",
    "cursor: default;",
    "fill: #fff;",
    'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',
    "font-size: 12pt;",
    "font-weight: bold;",
    "}",
    ".blocklyTextTruncated {",
    "font-size: 11pt;",
    "}",
    ".blocklyMultilineText {",
    "font-family: monospace;",
    "}",
    ".blocklyNonEditableText>g>text {",
    "pointer-events: none;",
    "}",
    ".blocklyNonEditableText>text,",
    ".blocklyEditableText>text,",
    ".blocklyNonEditableText>g>text,",
    ".blocklyEditableText>g>text {",
    "fill: $colour_text;",
    "}",
    ".blocklyDropdownText {",
    "fill: #fff !important;",
    "}",
    ".blocklyBubbleText {",
    "fill: #fff;",
    "}",
    ".blocklyBubbleCanvas {",
    "user-select: none;",
    "-moz-user-select: none;",
    "-ms-user-select: none;",
    "-webkit-user-select: none;",
    "}",
    ".blocklyFlyout {",
    "position: absolute;",
    "z-index: 20;",
    "}",
    ".blocklyFlyout {",
    "position: absolute;",
    "z-index: 20;",
    "}",
    ".blocklySvg text, .blocklyBlockDragSurface text, .blocklyFlyout text, .blocklyToolboxDiv text {",
    "user-select: none;",
    "-ms-user-select: none;",
    "-webkit-user-select: none;",
    "cursor: inherit;",
    "}",
    ".blocklyHidden {",
    "display: none;",
    "}",
    ".blocklyFieldDropdown:not(.blocklyHidden) {",
    "display: block;",
    "}",
    ".blocklyIconGroup,",
    ".blocklyBreakpointIconGroup {",
    "cursor: default;",
    "}",
    ".blocklyIconGroup:not(:hover),",
    ".blocklyIconGroupReadonly {",
    "opacity: .6;",
    "}",
    ".blocklyBreakpointIconGroup:hover,",
    ".blocklyBreakpointIconGroupReadonly {",
    "fill-opacity: .6;",
    "}",
    ".blocklyIconShape {",
    "fill: #000;",
    "stroke-width: 1px;",
    "stroke: #fff;",
    "cursor: pointer;",
    "}",
    ".blocklyIconSymbol {",
    "fill: #fff;",
    "}",
    ".blocklyMinimalBody {",
    "margin: 0;",
    "padding: 0;",
    "background-color: #FAF6BD;",
    "}",
    ".blocklyUneditableMinimalBody {",
    "fill: #FAF6BD;",
    "}",
    ".blocklyHtmlInput {",
    "border: none;",
    'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',
    "font-size: 12pt;",
    "height: 100%;",
    "margin: 0;",
    "outline: none;",
    "box-sizing: border-box;",
    "width: 100%;",
    "text-align: center;",
    "color: $colour_text;",
    "font-weight: bold;",
    "}",
    ".blocklyHtmlInput::-ms-clear {",
    "display: none;",
    "}",
    ".blocklyMainBackground {",
    "stroke-width: 1;",
    "stroke: #c6c6c6;",
    "touch-action: none;",
    "}",
    ".blocklyMutatorBackground {",
    "fill: #fff;",
    "stroke: #ddd;",
    "stroke-width: 1;",
    "}",
    ".blocklyFlyoutBackground {",
    "fill: $colour_flyout;",
    "fill-opacity: .8;",
    "}",
    ".blocklyMainWorkspaceScrollbar {",
    "z-index: 20;",
    "}",
    ".blocklyFlyoutScrollbar {",
    "z-index: 30;",
    "}",
    ".blocklyScrollbarHorizontal, .blocklyScrollbarVertical {",
    "position: absolute;",
    "outline: none;",
    "touch-action: none;",
    "}",
    ".blocklyScrollbarBackground {",
    "opacity: 0;",
    "}",
    ".blocklyScrollbarHandle {",
    "fill: $colour_scrollbar;",
    "}",
    ".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",
    ".blocklyScrollbarHandle:hover {",
    "fill: $colour_scrollbarHover;",
    "}",
    ".blocklyZoom>image {",
    "opacity: 1;",
    "}",
    ".blocklyFlyout .blocklyScrollbarHandle {",
    "fill: #bbb;",
    "}",
    ".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",
    ".blocklyFlyout .blocklyScrollbarHandle:hover {",
    "fill: #aaa;",
    "}",
    ".blocklyInvalidInput {",
    "background: #faa;",
    "}",
    ".blocklyContextMenu {",
    "border-radius: 4px;",
    "max-height: 100%;",
    "}",
    ".blocklyDropdownMenu {",
    "border-radius: 2px;",
    "padding: 0 !important;",
    "}",
    ".blocklyDropDownNumPad {",
    "background-color: $colour_numPadBackground;",
    "}",
    ".blocklyWidgetDiv .blocklyDropdownMenu .goog-menuitem,",
    ".blocklyDropDownDiv .blocklyDropdownMenu .goog-menuitem {",
    "padding-left: 28px;",
    "}",
    ".blocklyWidgetDiv .blocklyDropdownMenu .goog-menuitem.goog-menuitem-rtl,",
    ".blocklyDropDownDiv .blocklyDropdownMenu .goog-menuitem.goog-menuitem-rtl {",
    "padding-left: 5px;",
    "padding-right: 28px;",
    "}",
    ".blocklyVerticalMarker {",
    "stroke-width: 3px;",
    "fill: rgba(255,255,255,.5);",
    "}",
    ".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",
    ".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",
    ".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",
    ".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {",
    "background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;",
    "}",
    ".blocklyWidgetDiv .goog-menu {",
    "background: #fff;",
    "border-color: transparent;",
    "border-style: solid;",
    "border-width: 1px;",
    "cursor: default;",
    'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',
    "margin: 0;",
    "outline: none;",
    "padding: 4px 0;",
    "position: absolute;",
    "overflow-y: auto;",
    "overflow-x: hidden;",
    "max-height: 100%;",
    "z-index: 20000;",
    "box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);",
    "}",
    ".blocklyDropDownDiv .goog-menu {",
    "cursor: default;",
    'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',
    "outline: none;",
    "z-index: 20000;",
    "box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);",
    "}",
    ".blocklyWidgetDiv .goog-menu.focused {",
    "box-shadow: 0px 0px 6px 1px rgba(0,0,0,.3);",
    "}",
    ".blocklyDropDownDiv .goog-menu {",
    "cursor: default;",
    'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',
    "outline: none;",
    "z-index: 20000;",
    "}",
    ".blocklyWidgetDiv .goog-menuitem,",
    ".blocklyDropDownDiv .goog-menuitem {",
    "color: #000;",
    'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',
    "list-style: none;",
    "margin: 0;",
    "min-width: 7em;",
    "border: none;",
    "padding: 6px 15px;",
    "white-space: nowrap;",
    "cursor: pointer;",
    "}",
    ".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,",
    ".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem,",
    ".blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,",
    ".blocklyDropDownDiv .goog-menu-noicon .goog-menuitem {",
    "padding-left: 12px;",
    "}",
    ".blocklyWidgetDiv .goog-menuitem-content,",
    ".blocklyDropDownDiv .goog-menuitem-content {",
    "font-family: Arial, sans-serif;",
    "font-size: 13px;",
    "}",
    ".blocklyWidgetDiv .goog-menuitem-content {",
    "color: #000;",
    "}",
    ".blocklyDropDownDiv .goog-menuitem-content {",
    "color: #000;",
    "}",
    ".blocklyWidgetDiv .goog-menuitem-disabled,",
    ".blocklyDropDownDiv .goog-menuitem-disabled {",
    "cursor: inherit;",
    "}",
    ".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content,",
    ".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {",
    "color: #ccc !important;",
    "}",
    ".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon,",
    ".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {",
    "opacity: .3;",
    "filter: alpha(opacity=30);",
    "}",
    ".blocklyWidgetDiv .goog-menuitem-highlight ,",
    ".blocklyDropDownDiv .goog-menuitem-highlight {",
    "background-color: rgba(0,0,0,.1);",
    "}",
    ".blocklyWidgetDiv .goog-menuitem-checkbox,",
    ".blocklyWidgetDiv .goog-menuitem-icon,",
    ".blocklyDropDownDiv .goog-menuitem-checkbox,",
    ".blocklyDropDownDiv .goog-menuitem-icon {",
    "background-repeat: no-repeat;",
    "height: 16px;",
    "left: 6px;",
    "position: absolute;",
    "right: auto;",
    "vertical-align: middle;",
    "width: 16px;",
    "}",
    ".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",
    ".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",
    ".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",
    ".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {",
    "left: auto;",
    "right: 6px;",
    "}",
    ".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",
    ".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",
    ".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",
    ".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {",
    "background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;",
    "position: static;",
    "float: left;",
    "margin-left: -24px;",
    "}",
    ".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",
    ".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",
    ".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",
    ".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {",
    "float: right;",
    "margin-right: -24px;",
    "}",
    ".blocklyWidgetDiv .goog-menuseparator, ",
    ".blocklyDropDownDiv .goog-menuseparator {",
    "border-top: 1px solid #ccc;",
    "margin: 4px 0;",
    "padding: 0;",
    "}",
    ".blocklyComputeCanvas {",
    "position: absolute;",
    "width: 0;",
    "height: 0;",
    "}",
    ".blocklyNoPointerEvents {",
    "pointer-events: none;",
    "}",
    ".blocklyDropDownDiv .goog-slider-horizontal {",
    "margin: 8px;",
    "height: 22px;",
    "width: 150px;",
    "position: relative;",
    "outline: none;",
    "border-radius: 11px;",
    "margin-bottom: 20px;",
    "background: #547AB2",
    "}",
    ".blocklyDropDownDiv .goog-slider-horizontal .goog-slider-thumb {",
    "width: 26px;",
    "height: 26px;",
    "margin-top: -1px;",
    "position: absolute;",
    "background-color: white;",
    "border-radius: 100%;",
    "-webkit-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);",
    "-moz-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);",
    "box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);",
    "cursor: pointer",
    "}",
    ".blocklyFieldSliderLabel {",
    'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',
    "font-size: 0.65rem;",
    "color: $colour_toolboxText;",
    "margin: 8px;",
    "}",
    ".blocklyFieldSliderLabelText {",
    "font-weight: bold;",
    "}",
    ".blocklyFieldSliderReadout {",
    "margin-left: 10px;",
    "}",
    ".blocklyHighlighted>.blocklyPath {",
    "stroke: #ff8b27;",
    "stroke-width: 5px;",
    "}",
    ".argumentEditorRemoveIcon {",
    "position: absolute;",
    "width: 24px;",
    "height: 24px;",
    "top: -40px;",
    "left: 50%;",
    "margin-left: -12px;",
    "cursor: pointer;",
    "}",
    ".functioneditor i.argumentEditorTypeIcon {",
    "position: absolute;",
    "width: 24px;",
    "height: 24px;",
    "top: 40px;",
    "left: 50%;",
    "margin-left: -12px;",
    "}",
    ".blocklyWidgetDiv.fieldTextInput.argumentEditorInput {",
    "overflow: visible;",
    "}",
    ".functionNameText {",
    "font-weight: bold;",
    "}",
    ".field-text-quote {",
    "fill: #a31515 !important;",
    "}",
    "",
  ]),
  (Blockly.utils.math = {}),
  (Blockly.utils.math.toRadians = function (t) {
    return (t * Math.PI) / 180;
  }),
  (Blockly.utils.math.toDegrees = function (t) {
    return (180 * t) / Math.PI;
  }),
  (Blockly.utils.math.clamp = function (t, e, o) {
    if (o < t) {
      var i = o;
      (o = t), (t = i);
    }
    return Math.max(t, Math.min(e, o));
  }),
  (Blockly.DropDownDiv = function () {}),
  (Blockly.DropDownDiv.boundsElement_ = null),
  (Blockly.DropDownDiv.owner_ = null),
  (Blockly.DropDownDiv.positionToField_ = null),
  (Blockly.DropDownDiv.ARROW_SIZE = 16),
  (Blockly.DropDownDiv.BORDER_SIZE = 1),
  (Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING = 12),
  (Blockly.DropDownDiv.PADDING_Y = 20),
  (Blockly.DropDownDiv.ANIMATION_TIME = 0.25),
  (Blockly.DropDownDiv.animateOutTimer_ = null),
  (Blockly.DropDownDiv.onHide_ = null),
  (Blockly.DropDownDiv.rendererClassName_ = null),
  (Blockly.DropDownDiv.themeClassName_ = null),
  (Blockly.DropDownDiv.createDom = function () {
    if (!Blockly.DropDownDiv.DIV_) {
      var t = document.createElement("div");
      (t.className = "blocklyDropDownDiv"),
        document.body.appendChild(t),
        (Blockly.DropDownDiv.DIV_ = t);
      var e = document.createElement("div");
      (e.className = "blocklyDropDownContent"),
        t.appendChild(e),
        (Blockly.DropDownDiv.content_ = e),
        ((e = document.createElement("div")).className =
          "blocklyDropDownArrow"),
        t.appendChild(e),
        (Blockly.DropDownDiv.arrow_ = e),
        (Blockly.DropDownDiv.DIV_.style.opacity = 0),
        (Blockly.DropDownDiv.DIV_.style.transition =
          "transform " +
          Blockly.DropDownDiv.ANIMATION_TIME +
          "s, opacity " +
          Blockly.DropDownDiv.ANIMATION_TIME +
          "s"),
        t.addEventListener("focusin", function () {
          Blockly.utils.dom.addClass(t, "focused");
        }),
        t.addEventListener("focusout", function () {
          Blockly.utils.dom.removeClass(t, "focused");
        });
    }
  }),
  (Blockly.DropDownDiv.setBoundsElement = function (t) {
    Blockly.DropDownDiv.boundsElement_ = t;
  }),
  (Blockly.DropDownDiv.getContentDiv = function () {
    return Blockly.DropDownDiv.content_;
  }),
  (Blockly.DropDownDiv.clearContent = function () {
    (Blockly.DropDownDiv.content_.innerHTML = ""),
      (Blockly.DropDownDiv.content_.style.width = "");
  }),
  (Blockly.DropDownDiv.setColour = function (t, e) {
    (Blockly.DropDownDiv.DIV_.style.backgroundColor = t),
      (Blockly.DropDownDiv.DIV_.style.borderColor = e);
  }),
  (Blockly.DropDownDiv.showPositionedByBlock = function (t, e, o, i) {
    return Blockly.DropDownDiv.showPositionedByRect_(
      Blockly.DropDownDiv.getScaledBboxOfBlock_(e),
      t,
      o,
      i
    );
  }),
  (Blockly.DropDownDiv.showPositionedByField = function (t, e, o) {
    return (
      (Blockly.DropDownDiv.positionToField_ = !0),
      Blockly.DropDownDiv.showPositionedByRect_(
        Blockly.DropDownDiv.getScaledBboxOfField_(t),
        t,
        e,
        o
      )
    );
  }),
  (Blockly.DropDownDiv.getScaledBboxOfBlock_ = function (t) {
    var e = t.getSvgRoot(),
      o = e.getBBox(),
      i = t.workspace.scale;
    return (
      (t = o.height * i),
      (o = o.width * i),
      (e = Blockly.utils.style.getPageOffset(e)),
      new Blockly.utils.Rect(e.y, e.y + t, e.x, e.x + o)
    );
  }),
  (Blockly.DropDownDiv.getScaledBboxOfField_ = function (t) {
    return (
      (t = t.getScaledBBox()),
      new Blockly.utils.Rect(t.top, t.bottom, t.left, t.right)
    );
  }),
  (Blockly.DropDownDiv.showPositionedByRect_ = function (t, e, o, i) {
    var n = t.left + (t.right - t.left) / 2,
      l = t.bottom;
    return (
      (t = t.top),
      i && (t += i),
      (i = e.getSourceBlock()),
      Blockly.DropDownDiv.setBoundsElement(
        i.workspace.getParentSvg().parentNode
      ),
      Blockly.DropDownDiv.show(e, i.RTL, n, l, n, t, o)
    );
  }),
  (Blockly.DropDownDiv.show = function (t, e, o, i, n, l, r) {
    return (
      (Blockly.DropDownDiv.owner_ = t),
      (Blockly.DropDownDiv.onHide_ = r || null),
      ((t = Blockly.DropDownDiv.DIV_).style.direction = e ? "rtl" : "ltr"),
      (Blockly.DropDownDiv.rendererClassName_ =
        Blockly.getMainWorkspace().getRenderer().name + "-renderer"),
      (Blockly.DropDownDiv.themeClassName_ =
        Blockly.getMainWorkspace().getTheme().name + "-theme"),
      Blockly.utils.dom.addClass(t, Blockly.DropDownDiv.rendererClassName_),
      Blockly.utils.dom.addClass(t, Blockly.DropDownDiv.themeClassName_),
      Blockly.DropDownDiv.positionInternal_(o, i, n, l)
    );
  }),
  (Blockly.DropDownDiv.getBoundsInfo_ = function () {
    var t = Blockly.utils.style.getPageOffset(
        Blockly.DropDownDiv.boundsElement_
      ),
      e = Blockly.utils.style.getSize(Blockly.DropDownDiv.boundsElement_);
    return {
      left: t.x,
      right: t.x + e.width,
      top: t.y,
      bottom: t.y + e.height,
      width: e.width,
      height: e.height,
    };
  }),
  (Blockly.DropDownDiv.getPositionMetrics_ = function (t, e, o, i) {
    var n = Blockly.DropDownDiv.getBoundsInfo_(),
      l = Blockly.utils.style.getSize(Blockly.DropDownDiv.DIV_);
    return e + l.height < n.bottom
      ? Blockly.DropDownDiv.getPositionBelowMetrics_(t, e, n, l)
      : i - l.height > n.top
      ? Blockly.DropDownDiv.getPositionAboveMetrics_(o, i, n, l)
      : e + l.height < document.documentElement.clientHeight
      ? Blockly.DropDownDiv.getPositionBelowMetrics_(t, e, n, l)
      : i - l.height > document.documentElement.clientTop
      ? Blockly.DropDownDiv.getPositionAboveMetrics_(o, i, n, l)
      : Blockly.DropDownDiv.getPositionTopOfPageMetrics_(t, n, l);
  }),
  (Blockly.DropDownDiv.getPositionBelowMetrics_ = function (t, e, o, i) {
    return {
      initialX: (t = Blockly.DropDownDiv.getPositionX(
        t,
        o.left,
        o.right,
        i.width
      )).divX,
      initialY: e,
      finalX: t.divX,
      finalY: e + Blockly.DropDownDiv.PADDING_Y,
      arrowX: t.arrowX,
      arrowY: -(
        Blockly.DropDownDiv.ARROW_SIZE / 2 +
        Blockly.DropDownDiv.BORDER_SIZE
      ),
      arrowAtTop: !0,
      arrowVisible: !0,
    };
  }),
  (Blockly.DropDownDiv.getPositionAboveMetrics_ = function (t, e, o, i) {
    return {
      initialX: (t = Blockly.DropDownDiv.getPositionX(
        t,
        o.left,
        o.right,
        i.width
      )).divX,
      initialY: e - i.height,
      finalX: t.divX,
      finalY: e - i.height - Blockly.DropDownDiv.PADDING_Y,
      arrowX: t.arrowX,
      arrowY:
        i.height -
        2 * Blockly.DropDownDiv.BORDER_SIZE -
        Blockly.DropDownDiv.ARROW_SIZE / 2,
      arrowAtTop: !1,
      arrowVisible: !0,
    };
  }),
  (Blockly.DropDownDiv.getPositionTopOfPageMetrics_ = function (t, e, o) {
    return {
      initialX: (t = Blockly.DropDownDiv.getPositionX(
        t,
        e.left,
        e.right,
        o.width
      )).divX,
      initialY: 0,
      finalX: t.divX,
      finalY: 0,
      arrowVisible: !1,
    };
  }),
  (Blockly.DropDownDiv.getPositionX = function (t, e, o, i) {
    var n = t;
    return (
      (t = Blockly.utils.math.clamp(e, t - i / 2, o - i)),
      (n -= Blockly.DropDownDiv.ARROW_SIZE / 2),
      (e = Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING),
      {
        arrowX: (i = Blockly.utils.math.clamp(
          e,
          n - t,
          i - e - Blockly.DropDownDiv.ARROW_SIZE
        )),
        divX: t,
      }
    );
  }),
  (Blockly.DropDownDiv.isVisible = function () {
    return !!Blockly.DropDownDiv.owner_;
  }),
  (Blockly.DropDownDiv.isDisplayed = function () {
    return "none" != Blockly.DropDownDiv.DIV_.style.display;
  }),
  (Blockly.DropDownDiv.hideIfOwner = function (t, e) {
    return (
      Blockly.DropDownDiv.owner_ === t &&
      (e
        ? Blockly.DropDownDiv.hideWithoutAnimation()
        : Blockly.DropDownDiv.hide(),
      !0)
    );
  }),
  (Blockly.DropDownDiv.hide = function () {
    var t = Blockly.DropDownDiv.DIV_;
    (t.style.transform = "translate(0, 0)"),
      (t.style.opacity = 0),
      (Blockly.DropDownDiv.animateOutTimer_ = setTimeout(function () {
        Blockly.DropDownDiv.hideWithoutAnimation();
      }, 1e3 * Blockly.DropDownDiv.ANIMATION_TIME)),
      Blockly.DropDownDiv.onHide_ &&
        (Blockly.DropDownDiv.onHide_(), (Blockly.DropDownDiv.onHide_ = null));
  }),
  (Blockly.DropDownDiv.hideWithoutAnimation = function () {
    if (Blockly.DropDownDiv.isVisible()) {
      Blockly.DropDownDiv.animateOutTimer_ &&
        clearTimeout(Blockly.DropDownDiv.animateOutTimer_);
      var t = Blockly.DropDownDiv.DIV_;
      (t.style.transform = ""),
        (t.style.left = ""),
        (t.style.top = ""),
        (t.style.opacity = 0),
        (t.style.display = "none"),
        (t.style.backgroundColor = ""),
        (t.style.borderColor = ""),
        Blockly.DropDownDiv.onHide_ &&
          (Blockly.DropDownDiv.onHide_(), (Blockly.DropDownDiv.onHide_ = null)),
        Blockly.DropDownDiv.clearContent(),
        (Blockly.DropDownDiv.owner_ = null),
        Blockly.DropDownDiv.rendererClassName_ &&
          (Blockly.utils.dom.removeClass(
            t,
            Blockly.DropDownDiv.rendererClassName_
          ),
          (Blockly.DropDownDiv.rendererClassName_ = null)),
        Blockly.DropDownDiv.themeClassName_ &&
          (Blockly.utils.dom.removeClass(
            t,
            Blockly.DropDownDiv.themeClassName_
          ),
          (Blockly.DropDownDiv.themeClassName_ = null)),
        Blockly.getMainWorkspace().markFocused();
    }
  }),
  (Blockly.DropDownDiv.positionInternal_ = function (t, e, o, i) {
    (t = Blockly.DropDownDiv.getPositionMetrics_(t, e, o, i)).arrowVisible
      ? ((Blockly.DropDownDiv.arrow_.style.display = ""),
        (Blockly.DropDownDiv.arrow_.style.transform =
          "translate(" + t.arrowX + "px," + t.arrowY + "px) rotate(45deg)"),
        Blockly.DropDownDiv.arrow_.setAttribute(
          "class",
          t.arrowAtTop
            ? "blocklyDropDownArrow blocklyArrowTop"
            : "blocklyDropDownArrow blocklyArrowBottom"
        ))
      : (Blockly.DropDownDiv.arrow_.style.display = "none"),
      (e = Math.floor(t.initialX)),
      (o = Math.floor(t.initialY)),
      (i = Math.floor(t.finalX));
    var n = Math.floor(t.finalY),
      l = Blockly.DropDownDiv.DIV_;
    return (
      (l.style.left = e + "px"),
      (l.style.top = o + "px"),
      (l.style.display = "block"),
      (l.style.opacity = 1),
      (l.style.transform = "translate(" + (i - e) + "px," + (n - o) + "px)"),
      t.arrowAtTop
    );
  }),
  (Blockly.DropDownDiv.repositionForWindowResize = function () {
    if (Blockly.DropDownDiv.isVisible() && Blockly.DropDownDiv.isDisplayed()) {
      var t = Blockly.DropDownDiv.owner_,
        e = Blockly.DropDownDiv.owner_.getSourceBlock();
      (e =
        (t = Blockly.DropDownDiv.positionToField_
          ? Blockly.DropDownDiv.getScaledBboxOfField_(t)
          : Blockly.DropDownDiv.getScaledBboxOfBlock_(e)).left +
        (t.right - t.left) / 2),
        Blockly.DropDownDiv.positionInternal_(e, t.bottom, e, t.top);
    } else Blockly.DropDownDiv.hideWithoutAnimation();
  }),
  (Blockly.Grid = function (t, e) {
    (this.gridPattern_ = t),
      (this.spacing_ = e.spacing),
      (this.length_ = e.length),
      (this.line2_ = (this.line1_ = t.firstChild) && this.line1_.nextSibling),
      (this.snapToGrid_ = e.snap),
      (this.imageOptions_ = e.image);
  }),
  (Blockly.Grid.prototype.scale_ = 1),
  (Blockly.Grid.prototype.dispose = function () {
    this.gridPattern_ = null;
  }),
  (Blockly.Grid.prototype.shouldSnap = function () {
    return this.snapToGrid_;
  }),
  (Blockly.Grid.prototype.getSpacing = function () {
    return this.spacing_;
  }),
  (Blockly.Grid.prototype.getPatternId = function () {
    return this.gridPattern_.id;
  }),
  (Blockly.Grid.prototype.update = function (t) {
    this.scale_ = t;
    var e = this.spacing_ * t || 100;
    this.gridPattern_.setAttribute(
      "width",
      this.imageOptions_ && this.imageOptions_.width
        ? this.imageOptions_.width
        : e
    ),
      this.gridPattern_.setAttribute(
        "height",
        this.imageOptions_ && this.imageOptions_.height
          ? this.imageOptions_.height
          : e
      );
    var o = (e = Math.floor(this.spacing_ / 2) + 0.5) - this.length_ / 2,
      i = e + this.length_ / 2;
    (e *= t),
      (o *= t),
      (i *= t),
      this.imageOptions_
        ? this.gridPattern_.setAttribute("patternTransform", "scale(" + t + ")")
        : (this.setLineAttributes_(this.line1_, t, o, i, e, e),
          this.setLineAttributes_(this.line2_, t, e, e, o, i));
  }),
  (Blockly.Grid.prototype.setLineAttributes_ = function (t, e, o, i, n, l) {
    t &&
      (t.setAttribute("stroke-width", e),
      t.setAttribute("x1", o),
      t.setAttribute("y1", n),
      t.setAttribute("x2", i),
      t.setAttribute("y2", l));
  }),
  (Blockly.Grid.prototype.moveTo = function (t, e) {
    this.gridPattern_.setAttribute("x", t),
      this.gridPattern_.setAttribute("y", e),
      (Blockly.utils.userAgent.IE || Blockly.utils.userAgent.EDGE) &&
        this.update(this.scale_);
  }),
  (Blockly.Grid.createDom = function (t, e, o) {
    return (
      (t = Blockly.utils.dom.createSvgElement(
        "pattern",
        { id: "blocklyGridPattern" + t, patternUnits: "userSpaceOnUse" },
        o
      )),
      0 < e.length && 0 < e.spacing
        ? (Blockly.utils.dom.createSvgElement("line", { stroke: e.colour }, t),
          1 < e.length &&
            Blockly.utils.dom.createSvgElement("line", { stroke: e.colour }, t))
        : e.image && e.image.path
        ? ((e = e.image),
          delete (o = JSON.parse(JSON.stringify(e))).path,
          Blockly.utils.dom
            .createSvgElement("image", o, t)
            .setAttributeNS(
              "http://www.w3.org/1999/xlink",
              "xlink:href",
              e.path
            ),
          (this.imageOptions_ = e))
        : Blockly.utils.dom.createSvgElement("line", {}, t),
      t
    );
  }),
  (Blockly.Theme = function (t, e, o, i) {
    (this.name = t),
      (this.blockStyles = e),
      (this.categoryStyles = o),
      (this.componentStyles_ = i || Object.create(null));
  }),
  (Blockly.Theme.prototype.getComponentStyle = function (t) {
    return (t = this.componentStyles_[t]) &&
      "string" == typeof propertyValue &&
      this.getComponentStyle(t)
      ? this.getComponentStyle(t)
      : t
      ? String(t)
      : null;
  }),
  (Blockly.Theme.prototype.setComponentStyle = function (t, e) {
    this.componentStyles_[t] = e;
  }),
  (Blockly.Themes = {}),
  (Blockly.Themes.Classic = {}),
  (Blockly.Themes.Classic.defaultBlockStyles = {
    colour_blocks: { colourPrimary: "20" },
    field_blocks: {
      colourPrimary: Blockly.Colours.textField,
      colourSecondary: Blockly.Colours.textField,
      colourTertiary: Blockly.Colours.textField,
    },
    list_blocks: { colourPrimary: "260" },
    logic_blocks: { colourPrimary: "210" },
    loop_blocks: { colourPrimary: "120" },
    math_blocks: { colourPrimary: "230" },
    procedure_blocks: { colourPrimary: "290" },
    text_blocks: { colourPrimary: "160" },
    variable_blocks: { colourPrimary: "330" },
    variable_dynamic_blocks: { colourPrimary: "310" },
    hat_blocks: { colourPrimary: "330", hat: "cap" },
  }),
  (Blockly.Themes.Classic.categoryStyles = {
    colour_category: { colour: "20" },
    list_category: { colour: "260" },
    logic_category: { colour: "210" },
    loop_category: { colour: "120" },
    math_category: { colour: "230" },
    procedure_category: { colour: "290" },
    text_category: { colour: "160" },
    variable_category: { colour: "330" },
    variable_dynamic_category: { colour: "310" },
  }),
  (Blockly.Themes.Classic = new Blockly.Theme(
    "classic",
    Blockly.Themes.Classic.defaultBlockStyles,
    Blockly.Themes.Classic.categoryStyles
  )),
  (Blockly.utils.KeyCodes = {
    WIN_KEY_FF_LINUX: 0,
    MAC_ENTER: 3,
    BACKSPACE: 8,
    TAB: 9,
    NUM_CENTER: 12,
    ENTER: 13,
    SHIFT: 16,
    CTRL: 17,
    ALT: 18,
    PAUSE: 19,
    CAPS_LOCK: 20,
    ESC: 27,
    SPACE: 32,
    PAGE_UP: 33,
    PAGE_DOWN: 34,
    END: 35,
    HOME: 36,
    LEFT: 37,
    UP: 38,
    RIGHT: 39,
    DOWN: 40,
    PLUS_SIGN: 43,
    PRINT_SCREEN: 44,
    INSERT: 45,
    DELETE: 46,
    ZERO: 48,
    ONE: 49,
    TWO: 50,
    THREE: 51,
    FOUR: 52,
    FIVE: 53,
    SIX: 54,
    SEVEN: 55,
    EIGHT: 56,
    NINE: 57,
    FF_SEMICOLON: 59,
    FF_EQUALS: 61,
    FF_DASH: 173,
    FF_HASH: 163,
    QUESTION_MARK: 63,
    AT_SIGN: 64,
    A: 65,
    B: 66,
    C: 67,
    D: 68,
    E: 69,
    F: 70,
    G: 71,
    H: 72,
    I: 73,
    J: 74,
    K: 75,
    L: 76,
    M: 77,
    N: 78,
    O: 79,
    P: 80,
    Q: 81,
    R: 82,
    S: 83,
    T: 84,
    U: 85,
    V: 86,
    W: 87,
    X: 88,
    Y: 89,
    Z: 90,
    META: 91,
    WIN_KEY_RIGHT: 92,
    CONTEXT_MENU: 93,
    NUM_ZERO: 96,
    NUM_ONE: 97,
    NUM_TWO: 98,
    NUM_THREE: 99,
    NUM_FOUR: 100,
    NUM_FIVE: 101,
    NUM_SIX: 102,
    NUM_SEVEN: 103,
    NUM_EIGHT: 104,
    NUM_NINE: 105,
    NUM_MULTIPLY: 106,
    NUM_PLUS: 107,
    NUM_MINUS: 109,
    NUM_PERIOD: 110,
    NUM_DIVISION: 111,
    F1: 112,
    F2: 113,
    F3: 114,
    F4: 115,
    F5: 116,
    F6: 117,
    F7: 118,
    F8: 119,
    F9: 120,
    F10: 121,
    F11: 122,
    F12: 123,
    NUMLOCK: 144,
    SCROLL_LOCK: 145,
    FIRST_MEDIA_KEY: 166,
    LAST_MEDIA_KEY: 183,
    SEMICOLON: 186,
    DASH: 189,
    EQUALS: 187,
    COMMA: 188,
    PERIOD: 190,
    SLASH: 191,
    APOSTROPHE: 192,
    TILDE: 192,
    SINGLE_QUOTE: 222,
    OPEN_SQUARE_BRACKET: 219,
    BACKSLASH: 220,
    CLOSE_SQUARE_BRACKET: 221,
    WIN_KEY: 224,
    MAC_FF_META: 224,
    MAC_WK_CMD_LEFT: 91,
    MAC_WK_CMD_RIGHT: 93,
    WIN_IME: 229,
    VK_NONAME: 252,
    PHANTOM: 255,
  }),
  (Blockly.user = {}),
  (Blockly.user.keyMap = {}),
  (Blockly.user.keyMap.map_ = {}),
  (Blockly.user.keyMap.modifierKeys = {
    SHIFT: "Shift",
    CONTROL: "Control",
    ALT: "Alt",
    META: "Meta",
  }),
  (Blockly.user.keyMap.setActionForKey = function (t, e) {
    var o = Blockly.user.keyMap.getKeyByAction(e);
    o && delete Blockly.user.keyMap.map_[o], (Blockly.user.keyMap.map_[t] = e);
  }),
  (Blockly.user.keyMap.setKeyMap = function (t) {
    Blockly.user.keyMap.map_ = t;
  }),
  (Blockly.user.keyMap.getKeyMap = function () {
    var t = {};
    return Blockly.utils.object.mixin(t, Blockly.user.keyMap.map_), t;
  }),
  (Blockly.user.keyMap.getActionByKeyCode = function (t) {
    return Blockly.user.keyMap.map_[t];
  }),
  (Blockly.user.keyMap.getKeyByAction = function (t) {
    for (
      var e, o = Object.keys(Blockly.user.keyMap.map_), i = 0;
      (e = o[i]);
      i++
    )
      if (Blockly.user.keyMap.map_[e].name === t.name) return e;
    return null;
  }),
  (Blockly.user.keyMap.serializeKeyEvent = function (t) {
    for (
      var e,
        o = Blockly.utils.object.values(Blockly.user.keyMap.modifierKeys),
        i = "",
        n = 0;
      (e = o[n]);
      n++
    )
      t.getModifierState(e) && (i += e);
    return i + t.keyCode;
  }),
  (Blockly.user.keyMap.checkModifiers_ = function (t, e) {
    for (var o, i = 0; (o = t[i]); i++)
      if (0 > e.indexOf(o)) throw Error(o + " is not a valid modifier key.");
  }),
  (Blockly.user.keyMap.createSerializedKey = function (t, e) {
    var o = "",
      i = Blockly.utils.object.values(Blockly.user.keyMap.modifierKeys);
    Blockly.user.keyMap.checkModifiers_(e, i);
    for (var n, l = 0; (n = i[l]); l++) -1 < e.indexOf(n) && (o += n);
    return o + t;
  }),
  (Blockly.user.keyMap.createDefaultKeyMap = function () {
    var t = {},
      e = Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.K, [
        Blockly.user.keyMap.modifierKeys.CONTROL,
        Blockly.user.keyMap.modifierKeys.SHIFT,
      ]),
      o = Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.W, [
        Blockly.user.keyMap.modifierKeys.SHIFT,
      ]),
      i = Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.A, [
        Blockly.user.keyMap.modifierKeys.SHIFT,
      ]),
      n = Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.S, [
        Blockly.user.keyMap.modifierKeys.SHIFT,
      ]),
      l = Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.D, [
        Blockly.user.keyMap.modifierKeys.SHIFT,
      ]);
    return (
      (t[Blockly.utils.KeyCodes.W] = Blockly.navigation.ACTION_PREVIOUS),
      (t[Blockly.utils.KeyCodes.A] = Blockly.navigation.ACTION_OUT),
      (t[Blockly.utils.KeyCodes.S] = Blockly.navigation.ACTION_NEXT),
      (t[Blockly.utils.KeyCodes.D] = Blockly.navigation.ACTION_IN),
      (t[Blockly.utils.KeyCodes.I] = Blockly.navigation.ACTION_INSERT),
      (t[Blockly.utils.KeyCodes.ENTER] = Blockly.navigation.ACTION_MARK),
      (t[Blockly.utils.KeyCodes.X] = Blockly.navigation.ACTION_DISCONNECT),
      (t[Blockly.utils.KeyCodes.T] = Blockly.navigation.ACTION_TOOLBOX),
      (t[Blockly.utils.KeyCodes.E] = Blockly.navigation.ACTION_EXIT),
      (t[Blockly.utils.KeyCodes.ESC] = Blockly.navigation.ACTION_EXIT),
      (t[e] = Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV),
      (t[o] = Blockly.navigation.ACTION_MOVE_WS_CURSOR_UP),
      (t[i] = Blockly.navigation.ACTION_MOVE_WS_CURSOR_LEFT),
      (t[n] = Blockly.navigation.ACTION_MOVE_WS_CURSOR_DOWN),
      (t[l] = Blockly.navigation.ACTION_MOVE_WS_CURSOR_RIGHT),
      t
    );
  }),
  (Blockly.utils.xml = {}),
  (Blockly.utils.xml.NAME_SPACE = "https://developers.google.com/blockly/xml"),
  (Blockly.utils.xml.document = function () {
    return document;
  }),
  (Blockly.utils.xml.createElement = function (t) {
    return Blockly.utils.xml
      .document()
      .createElementNS(Blockly.utils.xml.NAME_SPACE, t);
  }),
  (Blockly.utils.xml.createTextNode = function (t) {
    return Blockly.utils.xml.document().createTextNode(t);
  }),
  (Blockly.utils.xml.textToDomDocument = function (t) {
    return new DOMParser().parseFromString(t, "text/xml");
  }),
  (Blockly.utils.xml.domToText = function (t) {
    return new XMLSerializer().serializeToString(t);
  }),
  (Blockly.Events.BlockBase = function (t) {
    Blockly.Events.BlockBase.superClass_.constructor.call(this),
      (this.blockId = t.id),
      (this.workspaceId = t.workspace.id);
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.BlockBase,
    Blockly.Events.Abstract
  ),
  (Blockly.Events.BlockBase.prototype.toJson = function () {
    var t = Blockly.Events.BlockBase.superClass_.toJson.call(this);
    return (t.blockId = this.blockId), t;
  }),
  (Blockly.Events.BlockBase.prototype.fromJson = function (t) {
    Blockly.Events.BlockBase.superClass_.fromJson.call(this, t),
      (this.blockId = t.blockId);
  }),
  (Blockly.Events.Change = function (t, e, o, i, n) {
    t &&
      (Blockly.Events.Change.superClass_.constructor.call(this, t),
      (this.element = e),
      (this.name = o),
      (this.oldValue = i),
      (this.newValue = n));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.Change,
    Blockly.Events.BlockBase
  ),
  (Blockly.Events.BlockChange = Blockly.Events.Change),
  (Blockly.Events.Change.prototype.type = Blockly.Events.CHANGE),
  (Blockly.Events.Change.prototype.toJson = function () {
    var t = Blockly.Events.Change.superClass_.toJson.call(this);
    return (
      (t.element = this.element),
      this.name && (t.name = this.name),
      (t.newValue = this.newValue),
      t
    );
  }),
  (Blockly.Events.Change.prototype.fromJson = function (t) {
    Blockly.Events.Change.superClass_.fromJson.call(this, t),
      (this.element = t.element),
      (this.name = t.name),
      (this.newValue = t.newValue);
  }),
  (Blockly.Events.Change.prototype.isNull = function () {
    return this.oldValue == this.newValue;
  }),
  (Blockly.Events.Change.prototype.run = function (t) {
    var e = this.getEventWorkspace_().getBlockById(this.blockId);
    if (e)
      switch (
        (e.mutator && e.mutator.setVisible(!1),
        (t = t ? this.newValue : this.oldValue),
        this.element)
      ) {
        case "field":
          (e = e.getField(this.name))
            ? e.setValue(t)
            : console.warn("Can't set non-existent field: " + this.name);
          break;
        case "breakpoint":
          e.enableBreakpoint(t);
          break;
        case "comment":
          e.setCommentText(t || null);
          break;
        case "collapsed":
          e.setCollapsed(!!t);
          break;
        case "disabled":
          e.setEnabled(!t);
          break;
        case "inline":
          e.setInputsInline(!!t);
          break;
        case "mutation":
          var o = "";
          if (
            (e.mutationToDom &&
              (o = (o = e.mutationToDom()) && Blockly.Xml.domToText(o)),
            e.domToMutation)
          ) {
            var i = Blockly.Xml.textToDom(t || "<mutation/>");
            e.domToMutation(i), e.initSvg(), e.rendered && e.render();
          }
          Blockly.Events.fire(
            new Blockly.Events.Change(e, "mutation", null, o, t)
          );
          break;
        default:
          console.warn("Unknown change type: " + this.element);
      }
    else console.warn("Can't change non-existent block: " + this.blockId);
  }),
  (Blockly.Events.Create = function (t) {
    t &&
      (Blockly.Events.Create.superClass_.constructor.call(this, t),
      (this.xml = t.workspace.rendered
        ? Blockly.Xml.blockToDomWithXY(t)
        : Blockly.Xml.blockToDom(t)),
      (this.ids = Blockly.Events.getDescendantIds(t)));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.Create,
    Blockly.Events.BlockBase
  ),
  (Blockly.Events.BlockCreate = Blockly.Events.Create),
  (Blockly.Events.Create.prototype.type = Blockly.Events.CREATE),
  (Blockly.Events.Create.prototype.toJson = function () {
    var t = Blockly.Events.Create.superClass_.toJson.call(this);
    return (t.xml = Blockly.Xml.domToText(this.xml)), (t.ids = this.ids), t;
  }),
  (Blockly.Events.Create.prototype.fromJson = function (t) {
    Blockly.Events.Create.superClass_.fromJson.call(this, t),
      (this.xml = Blockly.Xml.textToDom(t.xml)),
      (this.ids = t.ids);
  }),
  (Blockly.Events.Create.prototype.run = function (t) {
    var e = this.getEventWorkspace_();
    if (t)
      (t = Blockly.utils.xml.createElement("xml")).appendChild(this.xml),
        Blockly.Xml.domToWorkspace(t, e);
    else {
      t = 0;
      for (var o; (o = this.ids[t]); t++) {
        var i = e.getBlockById(o);
        i
          ? i.dispose(!1)
          : o == this.blockId &&
            console.warn("Can't uncreate non-existent block: " + o);
      }
    }
  }),
  (Blockly.Events.Delete = function (t) {
    if (t) {
      if (t.getParent()) throw Error("Connected blocks cannot be deleted.");
      Blockly.Events.Delete.superClass_.constructor.call(this, t),
        (this.oldXml = t.workspace.rendered
          ? Blockly.Xml.blockToDomWithXY(t)
          : Blockly.Xml.blockToDom(t)),
        (this.ids = Blockly.Events.getDescendantIds(t));
    }
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.Delete,
    Blockly.Events.BlockBase
  ),
  (Blockly.Events.BlockDelete = Blockly.Events.Delete),
  (Blockly.Events.Delete.prototype.type = Blockly.Events.DELETE),
  (Blockly.Events.Delete.prototype.toJson = function () {
    var t = Blockly.Events.Delete.superClass_.toJson.call(this);
    return (t.ids = this.ids), t;
  }),
  (Blockly.Events.Delete.prototype.fromJson = function (t) {
    Blockly.Events.Delete.superClass_.fromJson.call(this, t),
      (this.ids = t.ids);
  }),
  (Blockly.Events.Delete.prototype.run = function (t) {
    var e = this.getEventWorkspace_();
    if (t) {
      t = 0;
      for (var o; (o = this.ids[t]); t++) {
        var i = e.getBlockById(o);
        i
          ? i.dispose(!1)
          : o == this.blockId &&
            console.warn("Can't delete non-existent block: " + o);
      }
    } else
      (t = Blockly.utils.xml.createElement("xml")).appendChild(this.oldXml),
        Blockly.Xml.domToWorkspace(t, e);
  }),
  (Blockly.Events.Move = function (t) {
    t &&
      (Blockly.Events.Move.superClass_.constructor.call(this, t),
      (t = this.currentLocation_()),
      (this.oldParentId = t.parentId),
      (this.oldInputName = t.inputName),
      (this.oldCoordinate = t.coordinate));
  }),
  Blockly.utils.object.inherits(Blockly.Events.Move, Blockly.Events.BlockBase),
  (Blockly.Events.BlockMove = Blockly.Events.Move),
  (Blockly.Events.Move.prototype.type = Blockly.Events.MOVE),
  (Blockly.Events.Move.prototype.toJson = function () {
    var t = Blockly.Events.Move.superClass_.toJson.call(this);
    return (
      this.newParentId && (t.newParentId = this.newParentId),
      this.newInputName && (t.newInputName = this.newInputName),
      this.newCoordinate &&
        (t.newCoordinate =
          Math.round(this.newCoordinate.x) +
          "," +
          Math.round(this.newCoordinate.y)),
      t
    );
  }),
  (Blockly.Events.Move.prototype.fromJson = function (t) {
    Blockly.Events.Move.superClass_.fromJson.call(this, t),
      (this.newParentId = t.newParentId),
      (this.newInputName = t.newInputName),
      t.newCoordinate &&
        ((t = t.newCoordinate.split(",")),
        (this.newCoordinate = new Blockly.utils.Coordinate(
          Number(t[0]),
          Number(t[1])
        )));
  }),
  (Blockly.Events.Move.prototype.recordNew = function () {
    var t = this.currentLocation_();
    (this.newParentId = t.parentId),
      (this.newInputName = t.inputName),
      (this.newCoordinate = t.coordinate);
  }),
  (Blockly.Events.Move.prototype.currentLocation_ = function () {
    var t = this.getEventWorkspace_().getBlockById(this.blockId),
      e = {},
      o = t.getParent();
    return (
      o
        ? ((e.parentId = o.id),
          (t = o.getInputWithBlock(t)) && (e.inputName = t.name))
        : (e.coordinate = t.getRelativeToSurfaceXY()),
      e
    );
  }),
  (Blockly.Events.Move.prototype.isNull = function () {
    return (
      this.oldParentId == this.newParentId &&
      this.oldInputName == this.newInputName &&
      Blockly.utils.Coordinate.equals(this.oldCoordinate, this.newCoordinate)
    );
  }),
  (Blockly.Events.Move.prototype.run = function (t) {
    var e = this.getEventWorkspace_(),
      o = e.getBlockById(this.blockId);
    if (o) {
      var i = t ? this.newParentId : this.oldParentId,
        n = t ? this.newInputName : this.oldInputName;
      t = t ? this.newCoordinate : this.oldCoordinate;
      var l = null;
      if (i && !(l = e.getBlockById(i)))
        return void console.warn("Can't connect to non-existent block: " + i);
      if ((o.getParent() && o.unplug(), t))
        (n = o.getRelativeToSurfaceXY()), o.moveBy(t.x - n.x, t.y - n.y);
      else {
        if (((o = o.outputConnection || o.previousConnection), n)) {
          if ((e = l.getInput(n))) var r = e.connection;
        } else o.type == Blockly.PREVIOUS_STATEMENT && (r = l.nextConnection);
        r
          ? o.connect(r)
          : console.warn("Can't connect to non-existent input: " + n);
      }
    } else console.warn("Can't move non-existent block: " + this.blockId);
  }),
  (Blockly.Events.FinishedLoading = function (t) {
    (this.workspaceId = t.id),
      (this.group = Blockly.Events.getGroup()),
      (this.recordUndo = !1);
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.FinishedLoading,
    Blockly.Events.Ui
  ),
  (Blockly.Events.FinishedLoading.prototype.type =
    Blockly.Events.FINISHED_LOADING),
  (Blockly.Events.FinishedLoading.prototype.toJson = function () {
    var t = { type: this.type };
    return (
      this.group && (t.group = this.group),
      this.workspaceId && (t.workspaceId = this.workspaceId),
      t
    );
  }),
  (Blockly.Events.FinishedLoading.prototype.fromJson = function (t) {
    (this.workspaceId = t.workspaceId), (this.group = t.group);
  }),
  (Blockly.Events.VarBase = function (t) {
    Blockly.Events.VarBase.superClass_.constructor.call(this),
      (this.varId = t.getId()),
      (this.workspaceId = t.workspace.id);
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.VarBase,
    Blockly.Events.Abstract
  ),
  (Blockly.Events.VarBase.prototype.toJson = function () {
    var t = Blockly.Events.VarBase.superClass_.toJson.call(this);
    return (t.varId = this.varId), t;
  }),
  (Blockly.Events.VarBase.prototype.fromJson = function (t) {
    Blockly.Events.VarBase.superClass_.toJson.call(this),
      (this.varId = t.varId);
  }),
  (Blockly.Events.VarCreate = function (t) {
    t &&
      (Blockly.Events.VarCreate.superClass_.constructor.call(this, t),
      (this.varType = t.type),
      (this.varName = t.name));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.VarCreate,
    Blockly.Events.VarBase
  ),
  (Blockly.Events.VarCreate.prototype.type = Blockly.Events.VAR_CREATE),
  (Blockly.Events.VarCreate.prototype.toJson = function () {
    var t = Blockly.Events.VarCreate.superClass_.toJson.call(this);
    return (t.varType = this.varType), (t.varName = this.varName), t;
  }),
  (Blockly.Events.VarCreate.prototype.fromJson = function (t) {
    Blockly.Events.VarCreate.superClass_.fromJson.call(this, t),
      (this.varType = t.varType),
      (this.varName = t.varName);
  }),
  (Blockly.Events.VarCreate.prototype.run = function (t) {
    var e = this.getEventWorkspace_();
    t
      ? e.createVariable(this.varName, this.varType, this.varId)
      : e.deleteVariableById(this.varId);
  }),
  (Blockly.Events.VarDelete = function (t) {
    t &&
      (Blockly.Events.VarDelete.superClass_.constructor.call(this, t),
      (this.varType = t.type),
      (this.varName = t.name));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.VarDelete,
    Blockly.Events.VarBase
  ),
  (Blockly.Events.VarDelete.prototype.type = Blockly.Events.VAR_DELETE),
  (Blockly.Events.VarDelete.prototype.toJson = function () {
    var t = Blockly.Events.VarDelete.superClass_.toJson.call(this);
    return (t.varType = this.varType), (t.varName = this.varName), t;
  }),
  (Blockly.Events.VarDelete.prototype.fromJson = function (t) {
    Blockly.Events.VarDelete.superClass_.fromJson.call(this, t),
      (this.varType = t.varType),
      (this.varName = t.varName);
  }),
  (Blockly.Events.VarDelete.prototype.run = function (t) {
    var e = this.getEventWorkspace_();
    t
      ? e.deleteVariableById(this.varId)
      : e.createVariable(this.varName, this.varType, this.varId);
  }),
  (Blockly.Events.VarRename = function (t, e) {
    t &&
      (Blockly.Events.VarRename.superClass_.constructor.call(this, t),
      (this.oldName = t.name),
      (this.newName = e));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.VarRename,
    Blockly.Events.VarBase
  ),
  (Blockly.Events.VarRename.prototype.type = Blockly.Events.VAR_RENAME),
  (Blockly.Events.VarRename.prototype.toJson = function () {
    var t = Blockly.Events.VarRename.superClass_.toJson.call(this);
    return (t.oldName = this.oldName), (t.newName = this.newName), t;
  }),
  (Blockly.Events.VarRename.prototype.fromJson = function (t) {
    Blockly.Events.VarRename.superClass_.fromJson.call(this, t),
      (this.oldName = t.oldName),
      (this.newName = t.newName);
  }),
  (Blockly.Events.VarRename.prototype.run = function (t) {
    var e = this.getEventWorkspace_();
    t
      ? e.renameVariableById(this.varId, this.newName)
      : e.renameVariableById(this.varId, this.oldName);
  }),
  (Blockly.Xml = {}),
  (Blockly.Xml.workspaceToDom = function (t, e) {
    var o = Blockly.utils.xml.createElement("xml"),
      i = Blockly.Xml.variablesToDom(t.getAllVariables(t));
    i.hasChildNodes() && o.appendChild(i);
    var n,
      l = t.getTopComments(!0);
    for (i = 0; (n = l[i]); i++) o.appendChild(n.toXmlWithXY(e));
    for (t = t.getTopBlocks(!0), i = 0; (l = t[i]); i++)
      o.appendChild(Blockly.Xml.blockToDomWithXY(l, e));
    return o;
  }),
  (Blockly.Xml.variablesToDom = function (t) {
    for (
      var e, o = Blockly.utils.xml.createElement("variables"), i = 0;
      (e = t[i]);
      i++
    ) {
      var n = Blockly.utils.xml.createElement("variable");
      n.appendChild(Blockly.utils.xml.createTextNode(e.name)),
        e.type && n.setAttribute("type", e.type),
        (n.id = e.getId()),
        o.appendChild(n);
    }
    return o;
  }),
  (Blockly.Xml.blockToDomWithXY = function (t, e) {
    var o;
    t.workspace.RTL && (o = t.workspace.getWidth()),
      (e = Blockly.Xml.blockToDom(t, e));
    var i = t.getRelativeToSurfaceXY();
    return (
      e.setAttribute("x", Math.round(t.workspace.RTL ? o - i.x : i.x)),
      e.setAttribute("y", Math.round(i.y)),
      e
    );
  }),
  (Blockly.Xml.fieldToDom_ = function (t) {
    if (t.isSerializable()) {
      var e = Blockly.utils.xml.createElement("field");
      return e.setAttribute("name", t.name || ""), t.toXml(e);
    }
    return null;
  }),
  (Blockly.Xml.allFieldsToDom_ = function (t, e) {
    for (var o, i = 0; (o = t.inputList[i]); i++)
      for (var n, l = 0; (n = o.fieldRow[l]); l++)
        (n = Blockly.Xml.fieldToDom_(n)) && e.appendChild(n);
  }),
  (Blockly.Xml.blockToDom = function (t, e) {
    var o = Blockly.utils.xml.createElement(t.isShadow() ? "shadow" : "block");
    if (
      (o.setAttribute("type", t.type),
      e || o.setAttribute("id", t.id),
      t.mutationToDom)
    ) {
      var i = t.mutationToDom();
      i && (i.hasChildNodes() || i.hasAttributes()) && o.appendChild(i);
    }
    if (
      (Blockly.Xml.allFieldsToDom_(t, o),
      t.isBreakpointSet() &&
        ((i = Blockly.utils.xml.createElement("breakpoint")), o.appendChild(i)),
      (i = t.getCommentText()))
    ) {
      var n = t.commentModel.size,
        l = t.commentModel.pinned,
        r =
          t.getCommentIcon && t.getCommentIcon()
            ? t.getCommentIcon().getRelativePosition()
            : null,
        s = Blockly.utils.xml.createElement("comment");
      s.appendChild(Blockly.utils.xml.createTextNode(i)),
        "object" == typeof t.comment &&
          (s.setAttribute("pinned", l),
          s.setAttribute("h", n.height),
          s.setAttribute("w", n.width),
          r && (s.setAttribute("relx", r.x), s.setAttribute("rely", r.y))),
        o.appendChild(s);
    }
    for (
      t.data &&
        ((i = Blockly.utils.xml.createElement("data")).appendChild(
          Blockly.utils.xml.createTextNode(t.data)
        ),
        o.appendChild(i)),
        n = 0;
      (l = t.inputList[n]);
      n++
    ) {
      var a;
      (r = !0),
        l.type != Blockly.DUMMY_INPUT &&
          ((s = l.connection.targetBlock()),
          l.type == Blockly.INPUT_VALUE
            ? (a = Blockly.utils.xml.createElement("value"))
            : l.type == Blockly.NEXT_STATEMENT &&
              (a = Blockly.utils.xml.createElement("statement")),
          !(i = l.connection.getShadowDom()) ||
            (s && s.isShadow()) ||
            a.appendChild(Blockly.Xml.cloneShadow_(i, e)),
          s && (a.appendChild(Blockly.Xml.blockToDom(s, e)), (r = !1)),
          a.setAttribute("name", l.name),
          r || o.appendChild(a));
    }
    return (
      null != t.inputsInline &&
        t.inputsInline != t.inputsInlineDefault &&
        o.setAttribute("inline", t.inputsInline),
      t.isCollapsed() && o.setAttribute("collapsed", !0),
      t.isEnabled() || o.setAttribute("disabled", !0),
      t.isDeletable() || t.isShadow() || o.setAttribute("deletable", !1),
      t.isMovablePersisted() || t.isShadow() || o.setAttribute("movable", !1),
      t.isEditablePersisted() || o.setAttribute("editable", !1),
      (n = t.getNextBlock()) &&
        ((a = Blockly.utils.xml.createElement("next")).appendChild(
          Blockly.Xml.blockToDom(n, e)
        ),
        o.appendChild(a)),
      !(i = t.nextConnection && t.nextConnection.getShadowDom()) ||
        (n && n.isShadow()) ||
        a.appendChild(Blockly.Xml.cloneShadow_(i, e)),
      o
    );
  }),
  (Blockly.Xml.cloneShadow_ = function (t, e) {
    for (var o, i = (t = t.cloneNode(!0)); i; )
      if (
        (e && "shadow" == i.nodeName && i.removeAttribute("id"), i.firstChild)
      )
        i = i.firstChild;
      else {
        for (; i && !i.nextSibling; )
          (o = i),
            (i = i.parentNode),
            o.nodeType == Blockly.utils.dom.Node.TEXT_NODE &&
              "" == o.data.trim() &&
              i.firstChild != o &&
              Blockly.utils.dom.removeNode(o);
        i &&
          ((o = i),
          (i = i.nextSibling),
          o.nodeType == Blockly.utils.dom.Node.TEXT_NODE &&
            "" == o.data.trim() &&
            Blockly.utils.dom.removeNode(o));
      }
    return t;
  }),
  (Blockly.Xml.domToText = function (t) {
    return Blockly.utils.xml.domToText(t);
  }),
  (Blockly.Xml.domToPrettyText = function (t) {
    t = Blockly.Xml.domToText(t).split("<");
    for (var e = "", o = 1; o < t.length; o++) {
      var i = t[o];
      "/" == i[0] && (e = e.substring(2)),
        (t[o] = e + "<" + i),
        "/" != i[0] && "/>" != i.slice(-2) && (e += "  ");
    }
    return (t = (t = t.join("\n")).replace(
      /(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,
      "$1</$2>"
    )).replace(/^\n/, "");
  }),
  (Blockly.Xml.textToDom = function (t) {
    t = t.replace(
      /xmlns="(.*?)"/,
      'xmlns="' + Blockly.utils.xml.NAME_SPACE + '"'
    );
    var e = Blockly.utils.xml.textToDomDocument(t);
    if (
      !e ||
      !e.documentElement ||
      e.getElementsByTagName("parsererror").length
    )
      throw Error("textToDom was unable to parse: " + t);
    return e.documentElement;
  }),
  (Blockly.Xml.clearWorkspaceAndLoadFromXml = function (t, e) {
    return (
      e.setResizesEnabled(!1),
      e.clear(),
      (t = Blockly.Xml.domToWorkspace(t, e)),
      e.setResizesEnabled(!0),
      t
    );
  }),
  (Blockly.Xml.domToWorkspace = function (t, e) {
    if (t instanceof Blockly.Workspace) {
      var o = t;
      (t = e),
        (e = o),
        console.warn(
          "Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments."
        );
    }
    var i;
    (e.loadingEventsDisabled = !0),
      e.RTL && (i = e.getWidth()),
      (o = []),
      Blockly.utils.dom.startTextWidthCache();
    var n = Blockly.Events.getGroup();
    n || Blockly.Events.setGroup(!0),
      e.setResizesEnabled && e.setResizesEnabled(!1);
    var l = !0;
    try {
      for (var r, s = 0; (r = t.childNodes[s]); s++) {
        var a = r.nodeName.toLowerCase(),
          c = r;
        if ("block" == a || ("shadow" == a && !Blockly.Events.recordUndo)) {
          var g = Blockly.Xml.domToBlock(c, e);
          o.push(g.id);
          var u = c.hasAttribute("x") ? parseInt(c.getAttribute("x"), 10) : 10,
            h = c.hasAttribute("y") ? parseInt(c.getAttribute("y"), 10) : 10;
          isNaN(u) || isNaN(h) || g.moveBy(e.RTL ? i - u : u, h), (l = !1);
        } else {
          if ("shadow" == a)
            throw TypeError("Shadow block cannot be a top-level block.");
          if ("comment" == a)
            e.rendered
              ? Blockly.WorkspaceCommentSvg
                ? Blockly.WorkspaceCommentSvg.fromXml(c, e, i)
                : console.warn(
                    "Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."
                  )
              : Blockly.WorkspaceComment
              ? Blockly.WorkspaceComment.fromXml(c, e)
              : console.warn(
                  "Missing require for Blockly.WorkspaceComment, ignoring workspace comment."
                );
          else if ("variables" == a) {
            if (!l)
              throw Error(
                "'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location."
              );
            Blockly.Xml.domToVariables(c, e), (l = !1);
          }
        }
      }
    } finally {
      n || Blockly.Events.setGroup(!1), Blockly.utils.dom.stopTextWidthCache();
    }
    return (
      e.setResizesEnabled && e.setResizesEnabled(!0),
      (e.loadingEventsDisabled = !1),
      e.getAllBlocks(!1).forEach(function (t) {
        t.onLoadedIntoWorkspace();
      }),
      Blockly.Events.fire(new Blockly.Events.FinishedLoading(e)),
      o
    );
  }),
  (Blockly.Xml.appendDomToWorkspace = function (t, e) {
    var o;
    if (
      (e.hasOwnProperty("scale") && (o = e.getBlocksBoundingBox()),
      (t = Blockly.Xml.domToWorkspace(t, e)),
      o && o.top != o.bottom)
    ) {
      var i = o.bottom,
        n = e.RTL ? o.right : o.left,
        l = 1 / 0,
        r = -1 / 0,
        s = 1 / 0;
      for (o = 0; o < t.length; o++) {
        var a = e.getBlockById(t[o]).getRelativeToSurfaceXY();
        a.y < s && (s = a.y), a.x < l && (l = a.x), a.x > r && (r = a.x);
      }
      for (i = i - s + 10, n = e.RTL ? n - r : n - l, o = 0; o < t.length; o++)
        e.getBlockById(t[o]).moveBy(n, i);
    }
    return t;
  }),
  (Blockly.Xml.domToBlock = function (t, e) {
    if (t instanceof Blockly.Workspace) {
      var o = t;
      (t = e),
        (e = o),
        console.warn(
          "Deprecated call to Blockly.Xml.domToBlock, swap the arguments."
        );
    }
    Blockly.Events.disable(), (o = e.getAllVariables());
    try {
      var i = Blockly.Xml.domToBlockHeadless_(t, e),
        n = i.getDescendants(!1);
      if (e.rendered) {
        i.setConnectionTracking(!1);
        for (var l = n.length - 1; 0 <= l; l--) n[l].initSvg();
        for (l = n.length - 1; 0 <= l; l--) n[l].render(!1);
        setTimeout(function () {
          i.disposed || i.setConnectionTracking(!0);
        }, 1),
          i.updateDisabled(),
          e.resizeContents();
      } else for (l = n.length - 1; 0 <= l; l--) n[l].initModel();
    } finally {
      Blockly.Events.enable();
    }
    if (Blockly.Events.isEnabled()) {
      for (
        t = Blockly.Variables.getAddedVariables(e, o), l = 0;
        l < t.length;
        l++
      )
        Blockly.Events.fire(new Blockly.Events.VarCreate(t[l]));
      Blockly.Events.fire(new Blockly.Events.BlockCreate(i));
    }
    return i;
  }),
  (Blockly.Xml.domToVariables = function (t, e) {
    for (var o, i = 0; (o = t.childNodes[i]); i++)
      if (o.nodeType == Blockly.utils.dom.Node.ELEMENT_NODE) {
        var n = o.getAttribute("type"),
          l = o.getAttribute("id");
        e.createVariable(o.textContent, n, l);
      }
  }),
  (Blockly.Xml.domToBlockHeadless_ = function (t, e) {
    var o = null,
      i = t.getAttribute("type");
    if (!i) throw TypeError("Block type unspecified: " + t.outerHTML);
    var n = t.getAttribute("id");
    o = e.newBlock(i, n);
    var l,
      r = null;
    for (i = 0; (l = t.childNodes[i]); i++)
      if (l.nodeType != Blockly.utils.dom.Node.TEXT_NODE) {
        var s,
          a = (r = null);
        for (n = 0; (s = l.childNodes[n]); n++)
          s.nodeType == Blockly.utils.dom.Node.ELEMENT_NODE &&
            ("block" == s.nodeName.toLowerCase()
              ? (r = s)
              : "shadow" == s.nodeName.toLowerCase() && (a = s));
        switch (
          (!r && a && (r = a),
          (s = l.getAttribute("name")),
          (n = l),
          l.nodeName.toLowerCase())
        ) {
          case "mutation":
            o.domToMutation && (o.domToMutation(n), o.initSvg && o.initSvg());
            break;
          case "comment":
            if (!Blockly.Comment) {
              console.warn(
                "Missing require for Blockly.Comment, ignoring block comment."
              );
              break;
            }
            (r = n.textContent),
              (a = "true" == n.getAttribute("pinned")),
              (l = parseInt(n.getAttribute("w"), 10)),
              (s = parseInt(n.getAttribute("h"), 10));
            var c = parseInt(n.getAttribute("relx"), 10);
            (n = parseInt(n.getAttribute("rely"), 10)),
              o.setCommentText(r),
              (o.commentModel.pinned = a),
              isNaN(l) ||
                isNaN(s) ||
                (o.commentModel.size = new Blockly.utils.Size(l, s)),
              isNaN(c) ||
                isNaN(n) ||
                (o.commentModel.xy = new Blockly.utils.Coordinate(c, n)),
              a &&
                o.getCommentIcon &&
                !o.isInFlyout &&
                setTimeout(function () {
                  o.getCommentIcon().setVisible(!0);
                }, 1);
            break;
          case "data":
            o.data = l.textContent;
            break;
          case "title":
          case "field":
            Blockly.Xml.domToField_(o, s, n);
            break;
          case "value":
          case "statement":
            if (!(n = o.getInput(s))) break;
            if ((a && n.connection.setShadowDom(a), r))
              if ((r = Blockly.Xml.domToBlockHeadless_(r, e)).outputConnection)
                n.connection.connect(r.outputConnection);
              else {
                if (!r.previousConnection)
                  throw TypeError(
                    "Child block does not have output or previous statement."
                  );
                n.connection.connect(r.previousConnection);
              }
            break;
          case "next":
            if (
              (a && o.nextConnection && o.nextConnection.setShadowDom(a), r)
            ) {
              if (!o.nextConnection)
                throw TypeError("Next statement does not exist.");
              if (o.nextConnection.isConnected())
                throw TypeError("Next statement is already connected.");
              if (
                !(r = Blockly.Xml.domToBlockHeadless_(r, e)).previousConnection
              )
                throw TypeError("Next block does not have previous statement.");
              o.nextConnection.connect(r.previousConnection);
            }
            break;
          case "breakpoint":
            o.setBreakpoint(!0);
            break;
          default:
            console.warn("Ignoring unknown tag: " + l.nodeName);
        }
      }
    return (
      (e = t.getAttribute("inline")) && o.setInputsInline("true" == e),
      (e = t.getAttribute("disabled")) &&
        o.setEnabled("true" != e && "disabled" != e),
      (e = t.getAttribute("deletable")) && o.setDeletable("true" == e),
      (e = t.getAttribute("movable")) && o.setMovable("true" == e),
      (e = t.getAttribute("editable")) && o.setEditable("true" == e),
      (e = t.getAttribute("collapsed")) && o.setCollapsed("true" == e),
      "shadow" == t.nodeName.toLowerCase() && o.setShadow(!0),
      o
    );
  }),
  (Blockly.Xml.domToField_ = function (t, e, o) {
    var i = t.getField(e);
    i
      ? i.fromXml(o)
      : console.warn(
          "Ignoring non-existent field " + e + " in block " + t.type
        );
  }),
  (Blockly.Xml.deleteNext = function (t) {
    for (var e, o = 0; (e = t.childNodes[o]); o++)
      if ("next" == e.nodeName.toLowerCase()) {
        t.removeChild(e);
        break;
      }
  }),
  (Blockly.Options = function (t) {
    var e = !!t.readOnly;
    if (e)
      var o = null,
        i = !1,
        n = !1,
        l = !1,
        r = !1,
        s = !1,
        a = !1,
        c = !1;
    else {
      (o = Blockly.Options.parseToolboxTree(t.toolbox || null)),
        (i =
          null != t.hasCategories
            ? t.hasCategories
            : !(!o || !o.getElementsByTagName("category").length)),
        void 0 === (n = t.trashcan) && (n = i);
      var g = t.maxTrashcanContents;
      n ? void 0 === g && (g = 32) : (g = 0),
        void 0 === (l = t.collapse) && (l = i),
        void 0 === (r = t.comments) && (r = i),
        void 0 === (s = t.disable) && (s = i),
        void 0 === (a = t.sounds) && (a = !0);
      var u = t.inline;
      void 0 === u && (u = !1);
    }
    var h = !!t.rtl,
      p = t.horizontalLayout;
    void 0 === p && (p = !1);
    var d = t.toolboxPosition;
    d = "end" !== d;
    var y = p
        ? d
          ? Blockly.TOOLBOX_AT_TOP
          : Blockly.TOOLBOX_AT_BOTTOM
        : d == h
        ? Blockly.TOOLBOX_AT_RIGHT
        : Blockly.TOOLBOX_AT_LEFT,
      _ = t.css;
    void 0 === _ && (_ = !0);
    var k = "https://blockly-demo.appspot.com/static/media/";
    t.media ? (k = t.media) : t.path && (k = t.path + "media/");
    var m = void 0 === t.oneBasedIndex || !!t.oneBasedIndex;
    d = t.keyMap || Blockly.user.keyMap.createDefaultKeyMap();
    var f = t.renderer || "geras",
      B = t.colours;
    if (B)
      for (var E in B)
        B.hasOwnProperty(E) &&
          Blockly.Colours.hasOwnProperty(E) &&
          (Blockly.Colours[E] = B[E]);
    (this.RTL = h),
      (this.oneBasedIndex = m),
      (this.collapse = l),
      (this.comments = r),
      (this.debugMode = c),
      (this.disable = s),
      (this.readOnly = e),
      (this.maxBlocks = t.maxBlocks || 1 / 0),
      (this.maxInstances = t.maxInstances),
      (this.inline = u),
      (this.newFunctions = 1 == t.newFunctions),
      (this.pathToMedia = k),
      (this.hasCategories = i),
      (this.moveOptions = Blockly.Options.parseMoveOptions(t, i)),
      (this.hasScrollbars = this.moveOptions.scrollbars),
      (this.hasTrashcan = n),
      (this.maxTrashcanContents = g),
      (this.hasSounds = a),
      (this.hasCss = _),
      (this.horizontalLayout = p),
      (this.languageTree = o),
      (this.gridOptions = Blockly.Options.parseGridOptions_(t)),
      (this.zoomOptions = Blockly.Options.parseZoomOptions_(t)),
      (this.toolboxPosition = y),
      (e = t.toolboxOptions || {}),
      (this.toolboxOptions = {}),
      null == e.border && (e.border = !0),
      null == e.colour && (e.colour = !1),
      null == e.inverted && (e.inverted = !1),
      null == e.invertedMultiplier && (e.invertedMultiplier = 0.3),
      null == e.disabledOpacity && (e.disabledOpacity = 0.4),
      (this.toolboxOptions.border = e.border),
      (this.toolboxOptions.colour = e.colour),
      (this.toolboxOptions.inverted = e.inverted),
      (this.toolboxOptions.invertedMultiplier = e.invertedMultiplier),
      (this.toolboxOptions.disabledOpacity = e.disabledOpacity),
      (this.theme = Blockly.Options.parseThemeOptions_(t)),
      (this.keyMap = d),
      (this.renderer = f);
  }),
  (Blockly.BlocklyOptions = function () {}),
  (Blockly.Options.prototype.parentWorkspace = null),
  (Blockly.Options.parseMoveOptions = function (t, e) {
    var o = t.move || {},
      i = {};
    return (
      (i.scrollbars =
        void 0 === o.scrollbars && void 0 === t.scrollbars
          ? e
          : !!o.scrollbars || !!t.scrollbars),
      (i.wheel = !(!i.scrollbars || void 0 === o.wheel) && !!o.wheel),
      (i.drag = !!i.scrollbars && (void 0 === o.drag || !!o.drag)),
      i
    );
  }),
  (Blockly.Options.parseZoomOptions_ = function (t) {
    t = t.zoom || {};
    var e = {};
    return (
      (e.controls = void 0 !== t.controls && !!t.controls),
      (e.wheel = void 0 !== t.wheel && !!t.wheel),
      (e.startScale = void 0 === t.startScale ? 1 : Number(t.startScale)),
      (e.maxScale = void 0 === t.maxScale ? 3 : Number(t.maxScale)),
      (e.minScale = void 0 === t.minScale ? 0.3 : Number(t.minScale)),
      (e.scaleSpeed = void 0 === t.scaleSpeed ? 1.2 : Number(t.scaleSpeed)),
      (e.pinch = void 0 === t.pinch ? e.wheel || e.controls : !!t.pinch),
      e
    );
  }),
  (Blockly.Options.parseGridOptions_ = function (t) {
    t = t.grid || {};
    var e = {};
    return (
      (e.spacing = Number(t.spacing) || 0),
      (e.colour = t.colour || "#888"),
      (e.length = void 0 === t.length ? 1 : Number(t.length)),
      (e.snap = 0 < e.spacing && !!t.snap),
      (e.image = Blockly.Options.parseGridImageOptions_(t)),
      e
    );
  }),
  (Blockly.Options.parseGridImageOptions_ = function (t) {
    return (t = t.image) && t.path
      ? ((t.width = t.width || 100), (t.height = t.height || 100), t)
      : null;
  }),
  (Blockly.Options.parseThemeOptions_ = function (t) {
    return (t = t.theme || Blockly.Themes.Classic) instanceof Blockly.Theme
      ? t
      : new Blockly.Theme(
          "builtin",
          t.blockStyles,
          t.categoryStyles,
          t.componentStyles
        );
  }),
  (Blockly.Options.parseToolboxTree = function (t) {
    if (t) {
      if (
        ("string" != typeof t &&
          (Blockly.utils.userAgent.IE && t.outerHTML
            ? (t = t.outerHTML)
            : t instanceof Element || (t = null)),
        "string" == typeof t &&
          "xml" != (t = Blockly.Xml.textToDom(t)).nodeName.toLowerCase())
      )
        throw TypeError("Toolbox should be an <xml> document.");
    } else t = null;
    return t;
  }),
  (Blockly.Touch = {}),
  (Blockly.Touch.TOUCH_ENABLED =
    "ontouchstart" in Blockly.utils.global ||
    !!(
      Blockly.utils.global.document &&
      document.documentElement &&
      "ontouchstart" in document.documentElement
    ) ||
    !(
      !Blockly.utils.global.navigator ||
      (!Blockly.utils.global.navigator.maxTouchPoints &&
        !Blockly.utils.global.navigator.msMaxTouchPoints)
    )),
  (Blockly.Touch.touchIdentifier_ = null),
  (Blockly.Touch.TOUCH_MAP = {}),
  Blockly.utils.global.PointerEvent
    ? (Blockly.Touch.TOUCH_MAP = {
        mousedown: ["pointerdown"],
        mouseenter: ["pointerenter"],
        mouseleave: ["pointerleave"],
        mousemove: ["pointermove"],
        mouseout: ["pointerout"],
        mouseover: ["pointerover"],
        mouseup: ["pointerup", "pointercancel"],
        touchend: ["pointerup"],
        touchcancel: ["pointercancel"],
      })
    : Blockly.Touch.TOUCH_ENABLED &&
      (Blockly.Touch.TOUCH_MAP = {
        mousedown: ["touchstart"],
        mousemove: ["touchmove"],
        mouseup: ["touchend", "touchcancel"],
      }),
  (Blockly.longPid_ = 0),
  (Blockly.longStart = function (t, e) {
    Blockly.longStop_(),
      (t.changedTouches && 1 != t.changedTouches.length) ||
        (Blockly.longPid_ = setTimeout(function () {
          t.changedTouches &&
            ((t.button = 2),
            (t.clientX = t.changedTouches[0].clientX),
            (t.clientY = t.changedTouches[0].clientY)),
            e && e.handleRightClick(t);
        }, Blockly.LONGPRESS));
  }),
  (Blockly.longStop_ = function () {
    Blockly.longPid_ &&
      (clearTimeout(Blockly.longPid_), (Blockly.longPid_ = 0));
  }),
  (Blockly.Touch.clearTouchIdentifier = function () {
    Blockly.Touch.touchIdentifier_ = null;
  }),
  (Blockly.Touch.shouldHandleEvent = function (t) {
    return (
      !Blockly.Touch.isMouseOrTouchEvent(t) ||
      Blockly.Touch.checkTouchIdentifier(t)
    );
  }),
  (Blockly.Touch.getTouchIdentifierFromEvent = function (t) {
    return null != t.pointerId
      ? t.pointerId
      : t.changedTouches &&
        t.changedTouches[0] &&
        void 0 !== t.changedTouches[0].identifier &&
        null !== t.changedTouches[0].identifier
      ? t.changedTouches[0].identifier
      : "mouse";
  }),
  (Blockly.Touch.checkTouchIdentifier = function (t) {
    var e = Blockly.Touch.getTouchIdentifierFromEvent(t);
    return void 0 !== Blockly.Touch.touchIdentifier_ &&
      null !== Blockly.Touch.touchIdentifier_
      ? Blockly.Touch.touchIdentifier_ == e
      : ("mousedown" == t.type ||
          "touchstart" == t.type ||
          "pointerdown" == t.type) &&
          ((Blockly.Touch.touchIdentifier_ = e), !0);
  }),
  (Blockly.Touch.setClientFromTouch = function (t) {
    if (Blockly.utils.string.startsWith(t.type, "touch")) {
      var e = t.changedTouches[0];
      (t.clientX = e.clientX), (t.clientY = e.clientY);
    }
  }),
  (Blockly.Touch.isMouseOrTouchEvent = function (t) {
    return (
      Blockly.utils.string.startsWith(t.type, "touch") ||
      Blockly.utils.string.startsWith(t.type, "mouse") ||
      Blockly.utils.string.startsWith(t.type, "pointer")
    );
  }),
  (Blockly.Touch.isTouchEvent = function (t) {
    return (
      !(t instanceof PointerEvent && "mouse" == t.pointerType) &&
      (Blockly.utils.string.startsWith(t.type, "touch") ||
        Blockly.utils.string.startsWith(t.type, "pointer"))
    );
  }),
  (Blockly.Touch.splitEventByTouches = function (t) {
    var e = [];
    if (t.changedTouches)
      for (var o = 0; o < t.changedTouches.length; o++)
        e[o] = {
          type: t.type,
          changedTouches: [t.changedTouches[o]],
          target: t.target,
          stopPropagation: function () {
            t.stopPropagation();
          },
          preventDefault: function () {
            t.preventDefault();
          },
        };
    else e.push(t);
    return e;
  }),
  (Blockly.ScrollbarPair = function (t) {
    (this.workspace_ = t),
      (this.hScroll = new Blockly.Scrollbar(
        t,
        !0,
        !0,
        "blocklyMainWorkspaceScrollbar"
      )),
      (this.vScroll = new Blockly.Scrollbar(
        t,
        !1,
        !0,
        "blocklyMainWorkspaceScrollbar"
      )),
      (this.corner_ = Blockly.utils.dom.createSvgElement(
        "rect",
        {
          height: Blockly.Scrollbar.scrollbarThickness,
          width: Blockly.Scrollbar.scrollbarThickness,
          class: "blocklyScrollbarBackground",
        },
        null
      )),
      Blockly.utils.dom.insertAfter(this.corner_, t.getBubbleCanvas());
  }),
  (Blockly.ScrollbarPair.prototype.oldHostMetrics_ = null),
  (Blockly.ScrollbarPair.prototype.dispose = function () {
    Blockly.utils.dom.removeNode(this.corner_),
      (this.oldHostMetrics_ = this.workspace_ = this.corner_ = null),
      this.hScroll.dispose(),
      (this.hScroll = null),
      this.vScroll.dispose(),
      (this.vScroll = null);
  }),
  (Blockly.ScrollbarPair.prototype.resize = function () {
    var t = this.workspace_.getMetrics();
    if (t) {
      var e = !1,
        o = !1;
      this.oldHostMetrics_ &&
      this.oldHostMetrics_.viewWidth == t.viewWidth &&
      this.oldHostMetrics_.viewHeight == t.viewHeight &&
      this.oldHostMetrics_.absoluteTop == t.absoluteTop &&
      this.oldHostMetrics_.absoluteLeft == t.absoluteLeft
        ? ((this.oldHostMetrics_ &&
            this.oldHostMetrics_.contentWidth == t.contentWidth &&
            this.oldHostMetrics_.viewLeft == t.viewLeft &&
            this.oldHostMetrics_.contentLeft == t.contentLeft) ||
            (e = !0),
          (this.oldHostMetrics_ &&
            this.oldHostMetrics_.contentHeight == t.contentHeight &&
            this.oldHostMetrics_.viewTop == t.viewTop &&
            this.oldHostMetrics_.contentTop == t.contentTop) ||
            (o = !0))
        : (o = e = !0),
        e && this.hScroll.resize(t),
        o && this.vScroll.resize(t),
        (this.oldHostMetrics_ &&
          this.oldHostMetrics_.viewWidth == t.viewWidth &&
          this.oldHostMetrics_.absoluteLeft == t.absoluteLeft) ||
          this.corner_.setAttribute("x", this.vScroll.position_.x),
        (this.oldHostMetrics_ &&
          this.oldHostMetrics_.viewHeight == t.viewHeight &&
          this.oldHostMetrics_.absoluteTop == t.absoluteTop) ||
          this.corner_.setAttribute("y", this.hScroll.position_.y),
        (this.oldHostMetrics_ = t);
    }
  }),
  (Blockly.ScrollbarPair.prototype.set = function (t, e) {
    var o = {};
    (t *= this.hScroll.ratio_), (e *= this.vScroll.ratio_);
    var i = this.vScroll.scrollViewSize_;
    (o.x = this.getRatio_(t, this.hScroll.scrollViewSize_)),
      (o.y = this.getRatio_(e, i)),
      this.workspace_.setMetrics(o),
      this.hScroll.setHandlePosition(t),
      this.vScroll.setHandlePosition(e);
  }),
  (Blockly.ScrollbarPair.prototype.getRatio_ = function (t, e) {
    return (t /= e), isNaN(t) ? 0 : t;
  }),
  (Blockly.Scrollbar = function (t, e, o, i) {
    (this.workspace_ = t),
      (this.pair_ = o || !1),
      (this.horizontal_ = e),
      (this.svgGroup_ = this.oldHostMetrics_ = null),
      this.createDom_(i),
      (this.position_ = new Blockly.utils.Coordinate(0, 0)),
      (t = Blockly.Scrollbar.scrollbarThickness),
      e
        ? (this.svgBackground_.setAttribute("height", t),
          this.outerSvg_.setAttribute("height", t),
          this.svgHandle_.setAttribute("height", t - 5),
          this.svgHandle_.setAttribute("y", 2.5),
          (this.lengthAttribute_ = "width"),
          (this.positionAttribute_ = "x"))
        : (this.svgBackground_.setAttribute("width", t),
          this.outerSvg_.setAttribute("width", t),
          this.svgHandle_.setAttribute("width", t - 5),
          this.svgHandle_.setAttribute("x", 2.5),
          (this.lengthAttribute_ = "height"),
          (this.positionAttribute_ = "y")),
      (this.onMouseDownBarWrapper_ = Blockly.bindEventWithChecks_(
        this.svgBackground_,
        "mousedown",
        this,
        this.onMouseDownBar_
      )),
      (this.onMouseDownHandleWrapper_ = Blockly.bindEventWithChecks_(
        this.svgHandle_,
        "mousedown",
        this,
        this.onMouseDownHandle_
      ));
  }),
  (Blockly.Scrollbar.prototype.origin_ = new Blockly.utils.Coordinate(0, 0)),
  (Blockly.Scrollbar.prototype.originHasChanged_ = !0),
  (Blockly.Scrollbar.prototype.startDragMouse_ = 0),
  (Blockly.Scrollbar.prototype.scrollViewSize_ = 0),
  (Blockly.Scrollbar.prototype.handleLength_ = 0),
  (Blockly.Scrollbar.prototype.handlePosition_ = 0),
  (Blockly.Scrollbar.prototype.isVisible_ = !0),
  (Blockly.Scrollbar.prototype.containerVisible_ = !0),
  (Blockly.Scrollbar.scrollbarThickness = 15),
  Blockly.Touch.TOUCH_ENABLED && (Blockly.Scrollbar.scrollbarThickness = 25),
  (Blockly.Scrollbar.metricsAreEquivalent_ = function (t, e) {
    return !(
      !t ||
      !e ||
      t.viewWidth != e.viewWidth ||
      t.viewHeight != e.viewHeight ||
      t.viewLeft != e.viewLeft ||
      t.viewTop != e.viewTop ||
      t.absoluteTop != e.absoluteTop ||
      t.absoluteLeft != e.absoluteLeft ||
      t.contentWidth != e.contentWidth ||
      t.contentHeight != e.contentHeight ||
      t.contentLeft != e.contentLeft ||
      t.contentTop != e.contentTop
    );
  }),
  (Blockly.Scrollbar.prototype.dispose = function () {
    this.cleanUp_(),
      Blockly.unbindEvent_(this.onMouseDownBarWrapper_),
      (this.onMouseDownBarWrapper_ = null),
      Blockly.unbindEvent_(this.onMouseDownHandleWrapper_),
      (this.onMouseDownHandleWrapper_ = null),
      Blockly.utils.dom.removeNode(this.outerSvg_),
      (this.svgBackground_ = this.svgGroup_ = this.outerSvg_ = null),
      this.svgHandle_ &&
        (this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),
        (this.svgHandle_ = null)),
      (this.workspace_ = null);
  }),
  (Blockly.Scrollbar.prototype.setHandleLength_ = function (t) {
    (this.handleLength_ = t),
      this.svgHandle_.setAttribute(this.lengthAttribute_, this.handleLength_);
  }),
  (Blockly.Scrollbar.prototype.setHandlePosition = function (t) {
    (this.handlePosition_ = t),
      this.svgHandle_.setAttribute(
        this.positionAttribute_,
        this.handlePosition_
      );
  }),
  (Blockly.Scrollbar.prototype.setScrollViewSize_ = function (t) {
    (this.scrollViewSize_ = t),
      this.outerSvg_.setAttribute(this.lengthAttribute_, this.scrollViewSize_),
      this.svgBackground_.setAttribute(
        this.lengthAttribute_,
        this.scrollViewSize_
      );
  }),
  (Blockly.ScrollbarPair.prototype.setContainerVisible = function (t) {
    this.hScroll.setContainerVisible(t), this.vScroll.setContainerVisible(t);
  }),
  (Blockly.Scrollbar.prototype.setPosition_ = function (t, e) {
    (this.position_.x = t),
      (this.position_.y = e),
      Blockly.utils.dom.setCssTransform(
        this.outerSvg_,
        "translate(" +
          (this.position_.x + this.origin_.x) +
          "px," +
          (this.position_.y + this.origin_.y) +
          "px)"
      );
  }),
  (Blockly.Scrollbar.prototype.resize = function (t) {
    if (t || (t = this.workspace_.getMetrics())) {
      if (this.originHasChanged_) this.originHasChanged_ = !1;
      else if (Blockly.Scrollbar.metricsAreEquivalent_(t, this.oldHostMetrics_))
        return;
      (this.oldHostMetrics_ = t),
        this.horizontal_ ? this.resizeHorizontal_(t) : this.resizeVertical_(t),
        this.onScroll_();
    }
  }),
  (Blockly.Scrollbar.prototype.resizeHorizontal_ = function (t) {
    this.resizeViewHorizontal(t);
  }),
  (Blockly.Scrollbar.prototype.resizeViewHorizontal = function (t) {
    var e = t.viewWidth - 1;
    this.pair_ && (e -= Blockly.Scrollbar.scrollbarThickness),
      this.setScrollViewSize_(Math.max(0, e)),
      (e = t.absoluteLeft + 0.5),
      this.pair_ &&
        this.workspace_.RTL &&
        (e += Blockly.Scrollbar.scrollbarThickness),
      this.setPosition_(
        e,
        t.absoluteTop +
          t.viewHeight -
          Blockly.Scrollbar.scrollbarThickness -
          0.5
      ),
      this.resizeContentHorizontal(t);
  }),
  (Blockly.Scrollbar.prototype.resizeContentHorizontal = function (t) {
    this.pair_ || this.setVisible(this.scrollViewSize_ < t.contentWidth),
      (this.ratio_ = this.scrollViewSize_ / t.contentWidth),
      (-1 / 0 == this.ratio_ || 1 / 0 == this.ratio_ || isNaN(this.ratio_)) &&
        (this.ratio_ = 0),
      this.setHandleLength_(Math.max(0, t.viewWidth * this.ratio_)),
      this.setHandlePosition(
        this.constrainHandle_((t.viewLeft - t.contentLeft) * this.ratio_)
      );
  }),
  (Blockly.Scrollbar.prototype.resizeVertical_ = function (t) {
    this.resizeViewVertical(t);
  }),
  (Blockly.Scrollbar.prototype.resizeViewVertical = function (t) {
    var e = t.viewHeight - 1;
    this.pair_ && (e -= Blockly.Scrollbar.scrollbarThickness),
      this.setScrollViewSize_(Math.max(0, e)),
      (e = t.absoluteLeft + 0.5),
      this.workspace_.RTL ||
        (e += t.viewWidth - Blockly.Scrollbar.scrollbarThickness - 1),
      this.setPosition_(e, t.absoluteTop + 0.5),
      this.resizeContentVertical(t);
  }),
  (Blockly.Scrollbar.prototype.resizeContentVertical = function (t) {
    this.pair_ || this.setVisible(this.scrollViewSize_ < t.contentHeight),
      (this.ratio_ = this.scrollViewSize_ / t.contentHeight),
      (-1 / 0 == this.ratio_ || 1 / 0 == this.ratio_ || isNaN(this.ratio_)) &&
        (this.ratio_ = 0),
      this.setHandleLength_(Math.max(0, t.viewHeight * this.ratio_)),
      this.setHandlePosition(
        this.constrainHandle_((t.viewTop - t.contentTop) * this.ratio_)
      );
  }),
  (Blockly.Scrollbar.prototype.createDom_ = function (t) {
    var e = "blocklyScrollbar" + (this.horizontal_ ? "Horizontal" : "Vertical");
    t && (e += " " + t),
      (this.outerSvg_ = Blockly.utils.dom.createSvgElement(
        "svg",
        { class: e },
        null
      )),
      (this.svgGroup_ = Blockly.utils.dom.createSvgElement(
        "g",
        {},
        this.outerSvg_
      )),
      (this.svgBackground_ = Blockly.utils.dom.createSvgElement(
        "rect",
        { class: "blocklyScrollbarBackground" },
        this.svgGroup_
      )),
      (t = Math.floor((Blockly.Scrollbar.scrollbarThickness - 5) / 2)),
      (this.svgHandle_ = Blockly.utils.dom.createSvgElement(
        "rect",
        { class: "blocklyScrollbarHandle", rx: t, ry: t },
        this.svgGroup_
      )),
      this.workspace_
        .getThemeManager()
        .subscribe(this.svgHandle_, "scrollbarColour", "fill"),
      this.workspace_
        .getThemeManager()
        .subscribe(this.svgHandle_, "scrollbarOpacity", "fill-opacity"),
      Blockly.utils.dom.insertAfter(
        this.outerSvg_,
        this.workspace_.getParentSvg()
      );
  }),
  (Blockly.Scrollbar.prototype.isVisible = function () {
    return this.isVisible_;
  }),
  (Blockly.Scrollbar.prototype.setContainerVisible = function (t) {
    var e = t != this.containerVisible_;
    (this.containerVisible_ = t), e && this.updateDisplay_();
  }),
  (Blockly.Scrollbar.prototype.setVisible = function (t) {
    var e = t != this.isVisible();
    if (this.pair_)
      throw Error("Unable to toggle visibility of paired scrollbars.");
    (this.isVisible_ = t), e && this.updateDisplay_();
  }),
  (Blockly.Scrollbar.prototype.updateDisplay_ = function () {
    this.containerVisible_ && this.isVisible()
      ? this.outerSvg_.setAttribute("display", "block")
      : this.outerSvg_.setAttribute("display", "none");
  }),
  (Blockly.Scrollbar.prototype.onMouseDownBar_ = function (t) {
    if (
      (this.workspace_.markFocused(),
      Blockly.Touch.clearTouchIdentifier(),
      this.cleanUp_(),
      Blockly.utils.isRightButton(t))
    )
      t.stopPropagation();
    else {
      var e = Blockly.utils.mouseToSvg(
        t,
        this.workspace_.getParentSvg(),
        this.workspace_.getInverseScreenCTM()
      );
      e = this.horizontal_ ? e.x : e.y;
      var o = Blockly.utils.getInjectionDivXY_(this.svgHandle_);
      o = this.horizontal_ ? o.x : o.y;
      var i = this.handlePosition_,
        n = 0.95 * this.handleLength_;
      e <= o ? (i -= n) : e >= o + this.handleLength_ && (i += n),
        Blockly.WidgetDiv.hide(!0),
        Blockly.DropDownDiv.hideWithoutAnimation(),
        this.setHandlePosition(this.constrainHandle_(i)),
        this.onScroll_(),
        t.stopPropagation(),
        t.preventDefault();
    }
  }),
  (Blockly.Scrollbar.prototype.onMouseDownHandle_ = function (t) {
    this.workspace_.markFocused(),
      this.cleanUp_(),
      Blockly.utils.isRightButton(t)
        ? t.stopPropagation()
        : ((this.startDragHandle = this.handlePosition_),
          this.workspace_.setupDragSurface(),
          (this.startDragMouse_ = this.horizontal_ ? t.clientX : t.clientY),
          (Blockly.Scrollbar.onMouseUpWrapper_ = Blockly.bindEventWithChecks_(
            document,
            "mouseup",
            this,
            this.onMouseUpHandle_
          )),
          (Blockly.Scrollbar.onMouseMoveWrapper_ = Blockly.bindEventWithChecks_(
            document,
            "mousemove",
            this,
            this.onMouseMoveHandle_
          )),
          Blockly.WidgetDiv.hide(!0),
          Blockly.DropDownDiv.hideWithoutAnimation(),
          t.stopPropagation(),
          t.preventDefault());
  }),
  (Blockly.Scrollbar.prototype.onMouseMoveHandle_ = function (t) {
    this.setHandlePosition(
      this.constrainHandle_(
        this.startDragHandle +
          ((this.horizontal_ ? t.clientX : t.clientY) - this.startDragMouse_)
      )
    ),
      this.onScroll_();
  }),
  (Blockly.Scrollbar.prototype.onMouseUpHandle_ = function () {
    this.workspace_.resetDragSurface(),
      Blockly.Touch.clearTouchIdentifier(),
      this.cleanUp_();
  }),
  (Blockly.Scrollbar.prototype.cleanUp_ = function () {
    Blockly.hideChaff(!0),
      Blockly.Scrollbar.onMouseUpWrapper_ &&
        (Blockly.unbindEvent_(Blockly.Scrollbar.onMouseUpWrapper_),
        (Blockly.Scrollbar.onMouseUpWrapper_ = null)),
      Blockly.Scrollbar.onMouseMoveWrapper_ &&
        (Blockly.unbindEvent_(Blockly.Scrollbar.onMouseMoveWrapper_),
        (Blockly.Scrollbar.onMouseMoveWrapper_ = null));
  }),
  (Blockly.Scrollbar.prototype.constrainHandle_ = function (t) {
    return 0 >= t || isNaN(t) || this.scrollViewSize_ < this.handleLength_
      ? 0
      : Math.min(t, this.scrollViewSize_ - this.handleLength_);
  }),
  (Blockly.Scrollbar.prototype.onScroll_ = function () {
    var t = this.handlePosition_ / this.scrollViewSize_;
    isNaN(t) && (t = 0);
    var e = {};
    this.horizontal_ ? (e.x = t) : (e.y = t), this.workspace_.setMetrics(e);
  }),
  (Blockly.Scrollbar.prototype.set = function (t) {
    (t = this.constrainHandle_(t * this.ratio_)),
      this.handlePosition_ !== t &&
        (this.setHandlePosition(t), this.onScroll_());
  }),
  (Blockly.Scrollbar.prototype.setOrigin = function (t, e) {
    this.origin_ = new Blockly.utils.Coordinate(t, e);
  }),
  (Blockly.Tooltip = {}),
  (Blockly.Tooltip.visible = !1),
  (Blockly.Tooltip.blocked_ = !1),
  (Blockly.Tooltip.LIMIT = 50),
  (Blockly.Tooltip.mouseOutPid_ = 0),
  (Blockly.Tooltip.showPid_ = 0),
  (Blockly.Tooltip.lastX_ = 0),
  (Blockly.Tooltip.lastY_ = 0),
  (Blockly.Tooltip.element_ = null),
  (Blockly.Tooltip.poisonedElement_ = null),
  (Blockly.Tooltip.OFFSET_X = 0),
  (Blockly.Tooltip.OFFSET_Y = 10),
  (Blockly.Tooltip.RADIUS_OK = 10),
  (Blockly.Tooltip.HOVER_MS = 750),
  (Blockly.Tooltip.MARGINS = 5),
  (Blockly.Tooltip.DIV = null),
  (Blockly.Tooltip.createDom = function () {
    Blockly.Tooltip.DIV ||
      ((Blockly.Tooltip.DIV = document.createElement("div")),
      (Blockly.Tooltip.DIV.className = "blocklyTooltipDiv"),
      document.body.appendChild(Blockly.Tooltip.DIV));
  }),
  (Blockly.Tooltip.bindMouseEvents = function (t) {
    Blockly.bindEvent_(t, "mouseover", null, Blockly.Tooltip.onMouseOver_),
      Blockly.bindEvent_(t, "mouseout", null, Blockly.Tooltip.onMouseOut_),
      t.addEventListener("mousemove", Blockly.Tooltip.onMouseMove_, !1);
  }),
  (Blockly.Tooltip.onMouseOver_ = function (t) {
    if (!Blockly.Tooltip.blocked_) {
      for (
        t = t.currentTarget;
        "string" != typeof t.tooltip && "function" != typeof t.tooltip;

      )
        t = t.tooltip;
      Blockly.Tooltip.element_ != t &&
        (Blockly.Tooltip.hide(),
        (Blockly.Tooltip.poisonedElement_ = null),
        (Blockly.Tooltip.element_ = t)),
        clearTimeout(Blockly.Tooltip.mouseOutPid_);
    }
  }),
  (Blockly.Tooltip.onMouseOut_ = function (t) {
    Blockly.Tooltip.blocked_ ||
      ((Blockly.Tooltip.mouseOutPid_ = setTimeout(function () {
        (Blockly.Tooltip.element_ = null),
          (Blockly.Tooltip.poisonedElement_ = null),
          Blockly.Tooltip.hide();
      }, 1)),
      clearTimeout(Blockly.Tooltip.showPid_));
  }),
  (Blockly.Tooltip.onMouseMove_ = function (t) {
    if (
      Blockly.Tooltip.element_ &&
      Blockly.Tooltip.element_.tooltip &&
      !Blockly.Tooltip.blocked_
    )
      if (Blockly.Tooltip.visible) {
        var e = Blockly.Tooltip.lastX_ - t.pageX;
        (t = Blockly.Tooltip.lastY_ - t.pageY),
          Math.sqrt(e * e + t * t) > Blockly.Tooltip.RADIUS_OK &&
            Blockly.Tooltip.hide();
      } else
        Blockly.Tooltip.poisonedElement_ != Blockly.Tooltip.element_ &&
          (clearTimeout(Blockly.Tooltip.showPid_),
          (Blockly.Tooltip.lastX_ = t.pageX),
          (Blockly.Tooltip.lastY_ = t.pageY),
          (Blockly.Tooltip.showPid_ = setTimeout(
            Blockly.Tooltip.show_,
            Blockly.Tooltip.HOVER_MS
          )));
  }),
  (Blockly.Tooltip.hide = function () {
    Blockly.Tooltip.visible &&
      ((Blockly.Tooltip.visible = !1),
      Blockly.Tooltip.DIV && (Blockly.Tooltip.DIV.style.display = "none")),
      Blockly.Tooltip.showPid_ && clearTimeout(Blockly.Tooltip.showPid_);
  }),
  (Blockly.Tooltip.block = function () {
    Blockly.Tooltip.hide(), (Blockly.Tooltip.blocked_ = !0);
  }),
  (Blockly.Tooltip.unblock = function () {
    Blockly.Tooltip.blocked_ = !1;
  }),
  (Blockly.Tooltip.show_ = function () {
    if (
      !Blockly.Tooltip.blocked_ &&
      ((Blockly.Tooltip.poisonedElement_ = Blockly.Tooltip.element_),
      Blockly.Tooltip.DIV)
    ) {
      Blockly.Tooltip.DIV.innerHTML = "";
      for (var t = Blockly.Tooltip.element_.tooltip; "function" == typeof t; )
        t = t();
      t = (t = Blockly.utils.string.wrap(t, Blockly.Tooltip.LIMIT)).split("\n");
      for (var e = 0; e < t.length; e++) {
        var o = document.createElement("div");
        o.appendChild(document.createTextNode(t[e])),
          Blockly.Tooltip.DIV.appendChild(o);
      }
      (t = Blockly.Tooltip.element_.RTL),
        (e = document.documentElement.clientWidth),
        (o = document.documentElement.clientHeight),
        (Blockly.Tooltip.DIV.style.direction = t ? "rtl" : "ltr"),
        (Blockly.Tooltip.DIV.style.display = "block"),
        (Blockly.Tooltip.visible = !0);
      var i = Blockly.Tooltip.lastX_;
      i = t
        ? i - (Blockly.Tooltip.OFFSET_X + Blockly.Tooltip.DIV.offsetWidth)
        : i + Blockly.Tooltip.OFFSET_X;
      var n = Blockly.Tooltip.lastY_ + Blockly.Tooltip.OFFSET_Y;
      n + Blockly.Tooltip.DIV.offsetHeight > o + window.scrollY &&
        (n -= Blockly.Tooltip.DIV.offsetHeight + 2 * Blockly.Tooltip.OFFSET_Y),
        t
          ? (i = Math.max(Blockly.Tooltip.MARGINS - window.scrollX, i))
          : i + Blockly.Tooltip.DIV.offsetWidth >
              e + window.scrollX - 2 * Blockly.Tooltip.MARGINS &&
            (i =
              e -
              Blockly.Tooltip.DIV.offsetWidth -
              2 * Blockly.Tooltip.MARGINS),
        (Blockly.Tooltip.DIV.style.top = n + "px"),
        (Blockly.Tooltip.DIV.style.left = i + "px");
    }
  }),
  (Blockly.WorkspaceDragSurfaceSvg = function (t) {
    (this.container_ = t), this.createDom();
  }),
  (Blockly.WorkspaceDragSurfaceSvg.prototype.SVG_ = null),
  (Blockly.WorkspaceDragSurfaceSvg.prototype.dragGroup_ = null),
  (Blockly.WorkspaceDragSurfaceSvg.prototype.container_ = null),
  (Blockly.WorkspaceDragSurfaceSvg.prototype.createDom = function () {
    this.SVG_ ||
      ((this.SVG_ = Blockly.utils.dom.createSvgElement(
        "svg",
        {
          xmlns: Blockly.utils.dom.SVG_NS,
          "xmlns:html": Blockly.utils.dom.HTML_NS,
          "xmlns:xlink": Blockly.utils.dom.XLINK_NS,
          version: "1.1",
          class: "blocklyWsDragSurface blocklyOverflowVisible",
        },
        null
      )),
      this.container_.appendChild(this.SVG_));
  }),
  (Blockly.WorkspaceDragSurfaceSvg.prototype.translateSurface = function (
    t,
    e
  ) {
    (t = t.toFixed(0)),
      (e = e.toFixed(0)),
      (this.SVG_.style.display = "block"),
      Blockly.utils.dom.setCssTransform(
        this.SVG_,
        "translate3d(" + t + "px, " + e + "px, 0px)"
      );
  }),
  (Blockly.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation =
    function () {
      return Blockly.utils.getRelativeXY(this.SVG_);
    }),
  (Blockly.WorkspaceDragSurfaceSvg.prototype.clearAndHide = function (t) {
    if (!t)
      throw Error(
        "Couldn't clear and hide the drag surface: missing new surface."
      );
    var e = this.SVG_.childNodes[0],
      o = this.SVG_.childNodes[1];
    if (
      !(
        e &&
        o &&
        Blockly.utils.dom.hasClass(e, "blocklyBlockCanvas") &&
        Blockly.utils.dom.hasClass(o, "blocklyBubbleCanvas")
      )
    )
      throw Error(
        "Couldn't clear and hide the drag surface. A node was missing."
      );
    if (
      (null != this.previousSibling_
        ? Blockly.utils.dom.insertAfter(e, this.previousSibling_)
        : t.insertBefore(e, t.firstChild),
      Blockly.utils.dom.insertAfter(o, e),
      (this.SVG_.style.display = "none"),
      this.SVG_.childNodes.length)
    )
      throw Error("Drag surface was not cleared.");
    Blockly.utils.dom.setCssTransform(this.SVG_, ""),
      (this.previousSibling_ = null);
  }),
  (Blockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow = function (
    t,
    e,
    o,
    i,
    n,
    l
  ) {
    if (this.SVG_.childNodes.length) throw Error("Already dragging a block.");
    (this.previousSibling_ = o),
      t.setAttribute("transform", "translate(0, 0) scale(" + l + ")"),
      e.setAttribute("transform", "translate(0, 0) scale(" + l + ")"),
      this.SVG_.setAttribute("width", i),
      this.SVG_.setAttribute("height", n),
      this.SVG_.appendChild(t),
      this.SVG_.appendChild(e),
      (this.SVG_.style.display = "block");
  }),
  (Blockly.ASTNode = function (t, e, o) {
    if (!e) throw Error("Cannot create a node without a location.");
    (this.type_ = t),
      (this.isConnection_ = Blockly.ASTNode.isConnectionType_(t)),
      (this.location_ = e),
      this.processParams_(o || null);
  }),
  (Blockly.ASTNode.types = {
    FIELD: "field",
    BLOCK: "block",
    INPUT: "input",
    OUTPUT: "output",
    NEXT: "next",
    PREVIOUS: "previous",
    STACK: "stack",
    WORKSPACE: "workspace",
  }),
  (Blockly.ASTNode.NAVIGATE_ALL_FIELDS = !1),
  (Blockly.ASTNode.DEFAULT_OFFSET_Y = -20),
  (Blockly.ASTNode.isConnectionType_ = function (t) {
    switch (t) {
      case Blockly.ASTNode.types.PREVIOUS:
      case Blockly.ASTNode.types.NEXT:
      case Blockly.ASTNode.types.INPUT:
      case Blockly.ASTNode.types.OUTPUT:
        return !0;
    }
    return !1;
  }),
  (Blockly.ASTNode.createFieldNode = function (t) {
    return t ? new Blockly.ASTNode(Blockly.ASTNode.types.FIELD, t) : null;
  }),
  (Blockly.ASTNode.createConnectionNode = function (t) {
    return t
      ? t.type == Blockly.INPUT_VALUE ||
        (t.type == Blockly.NEXT_STATEMENT && t.getParentInput())
        ? Blockly.ASTNode.createInputNode(t.getParentInput())
        : t.type == Blockly.NEXT_STATEMENT
        ? new Blockly.ASTNode(Blockly.ASTNode.types.NEXT, t)
        : t.type == Blockly.OUTPUT_VALUE
        ? new Blockly.ASTNode(Blockly.ASTNode.types.OUTPUT, t)
        : t.type == Blockly.PREVIOUS_STATEMENT
        ? new Blockly.ASTNode(Blockly.ASTNode.types.PREVIOUS, t)
        : null
      : null;
  }),
  (Blockly.ASTNode.createInputNode = function (t) {
    return t && t.connection
      ? new Blockly.ASTNode(Blockly.ASTNode.types.INPUT, t.connection)
      : null;
  }),
  (Blockly.ASTNode.createBlockNode = function (t) {
    return t ? new Blockly.ASTNode(Blockly.ASTNode.types.BLOCK, t) : null;
  }),
  (Blockly.ASTNode.createStackNode = function (t) {
    return t ? new Blockly.ASTNode(Blockly.ASTNode.types.STACK, t) : null;
  }),
  (Blockly.ASTNode.createWorkspaceNode = function (t, e) {
    return e && t
      ? new Blockly.ASTNode(Blockly.ASTNode.types.WORKSPACE, t, {
          wsCoordinate: e,
        })
      : null;
  }),
  (Blockly.ASTNode.prototype.processParams_ = function (t) {
    t && t.wsCoordinate && (this.wsCoordinate_ = t.wsCoordinate);
  }),
  (Blockly.ASTNode.prototype.getLocation = function () {
    return this.location_;
  }),
  (Blockly.ASTNode.prototype.getType = function () {
    return this.type_;
  }),
  (Blockly.ASTNode.prototype.getWsCoordinate = function () {
    return this.wsCoordinate_;
  }),
  (Blockly.ASTNode.prototype.isConnection = function () {
    return this.isConnection_;
  }),
  (Blockly.ASTNode.prototype.findNextForInput_ = function () {
    var t,
      e = this.location_.getParentInput(),
      o = e.getSourceBlock();
    for (e = o.inputList.indexOf(e) + 1; (t = o.inputList[e]); e++) {
      for (var i, n = t.fieldRow, l = 0; (i = n[l]); l++)
        if (i.isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS)
          return Blockly.ASTNode.createFieldNode(i);
      if (t.connection) return Blockly.ASTNode.createInputNode(t);
    }
    return null;
  }),
  (Blockly.ASTNode.prototype.findNextForField_ = function () {
    var t = this.location_,
      e = t.getParentInput(),
      o = t.getSourceBlock(),
      i = o.inputList.indexOf(e);
    for (t = e.fieldRow.indexOf(t) + 1; (e = o.inputList[i]); i++) {
      for (var n = e.fieldRow; t < n.length; ) {
        if (n[t].isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS)
          return Blockly.ASTNode.createFieldNode(n[t]);
        t++;
      }
      if (((t = 0), e.connection)) return Blockly.ASTNode.createInputNode(e);
    }
    return null;
  }),
  (Blockly.ASTNode.prototype.findPrevForInput_ = function () {
    for (
      var t,
        e = this.location_.getParentInput(),
        o = e.getSourceBlock(),
        i = o.inputList.indexOf(e);
      (t = o.inputList[i]);
      i--
    ) {
      if (t.connection && t !== e) return Blockly.ASTNode.createInputNode(t);
      for (var n, l = (t = t.fieldRow).length - 1; (n = t[l]); l--)
        if (n.isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS)
          return Blockly.ASTNode.createFieldNode(n);
    }
    return null;
  }),
  (Blockly.ASTNode.prototype.findPrevForField_ = function () {
    var t,
      e = this.location_,
      o = e.getParentInput(),
      i = e.getSourceBlock(),
      n = i.inputList.indexOf(o);
    for (e = o.fieldRow.indexOf(e) - 1; (t = i.inputList[n]); n--) {
      if (t.connection && t !== o) return Blockly.ASTNode.createInputNode(t);
      for (t = t.fieldRow; -1 < e; ) {
        if (t[e].isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS)
          return Blockly.ASTNode.createFieldNode(t[e]);
        e--;
      }
      0 <= n - 1 && (e = i.inputList[n - 1].fieldRow.length - 1);
    }
    return null;
  }),
  (Blockly.ASTNode.prototype.navigateBetweenStacks_ = function (t) {
    var e = this.getLocation();
    if (
      (e instanceof Blockly.Block || (e = e.getSourceBlock()),
      !e || !e.workspace)
    )
      return null;
    var o = e.getRootBlock();
    e = o.workspace.getTopBlocks(!0);
    for (var i, n = 0; (i = e[n]); n++)
      if (o.id == i.id)
        return -1 == (t = n + (t ? 1 : -1)) || t == e.length
          ? null
          : Blockly.ASTNode.createStackNode(e[t]);
    throw Error("Couldn't find " + (t ? "next" : "previous") + " stack?!");
  }),
  (Blockly.ASTNode.prototype.findTopASTNodeForBlock_ = function (t) {
    var e = t.previousConnection || t.outputConnection;
    return e
      ? Blockly.ASTNode.createConnectionNode(e)
      : Blockly.ASTNode.createBlockNode(t);
  }),
  (Blockly.ASTNode.prototype.getOutAstNodeForBlock_ = function (t) {
    if (!t) return null;
    var e = (t = t.getTopStackBlock()).previousConnection || t.outputConnection;
    return e && e.targetConnection && e.targetConnection.getParentInput()
      ? Blockly.ASTNode.createInputNode(e.targetConnection.getParentInput())
      : Blockly.ASTNode.createStackNode(t);
  }),
  (Blockly.ASTNode.prototype.findFirstFieldOrInput_ = function (t) {
    t = t.inputList;
    for (var e, o = 0; (e = t[o]); o++) {
      for (var i, n = e.fieldRow, l = 0; (i = n[l]); l++)
        if (i.isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS)
          return Blockly.ASTNode.createFieldNode(i);
      if (e.connection) return Blockly.ASTNode.createInputNode(e);
    }
    return null;
  }),
  (Blockly.ASTNode.prototype.getSourceBlock = function () {
    return this.getType() === Blockly.ASTNode.types.BLOCK ||
      this.getType() === Blockly.ASTNode.types.STACK
      ? this.getLocation()
      : this.getType() === Blockly.ASTNode.types.WORKSPACE
      ? null
      : this.getLocation().getSourceBlock();
  }),
  (Blockly.ASTNode.prototype.next = function () {
    switch (this.type_) {
      case Blockly.ASTNode.types.STACK:
        return this.navigateBetweenStacks_(!0);
      case Blockly.ASTNode.types.OUTPUT:
        return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock());
      case Blockly.ASTNode.types.FIELD:
        return this.findNextForField_();
      case Blockly.ASTNode.types.INPUT:
        return this.findNextForInput_();
      case Blockly.ASTNode.types.BLOCK:
        return Blockly.ASTNode.createConnectionNode(
          this.location_.nextConnection
        );
      case Blockly.ASTNode.types.PREVIOUS:
        return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock());
      case Blockly.ASTNode.types.NEXT:
        return Blockly.ASTNode.createConnectionNode(
          this.location_.targetConnection
        );
    }
    return null;
  }),
  (Blockly.ASTNode.prototype.in = function () {
    switch (this.type_) {
      case Blockly.ASTNode.types.WORKSPACE:
        var t = this.location_.getTopBlocks(!0);
        if (0 < t.length) return Blockly.ASTNode.createStackNode(t[0]);
        break;
      case Blockly.ASTNode.types.STACK:
        return (t = this.location_), this.findTopASTNodeForBlock_(t);
      case Blockly.ASTNode.types.BLOCK:
        return (t = this.location_), this.findFirstFieldOrInput_(t);
      case Blockly.ASTNode.types.INPUT:
        return Blockly.ASTNode.createConnectionNode(
          this.location_.targetConnection
        );
    }
    return null;
  }),
  (Blockly.ASTNode.prototype.prev = function () {
    switch (this.type_) {
      case Blockly.ASTNode.types.STACK:
        return this.navigateBetweenStacks_(!1);
      case Blockly.ASTNode.types.FIELD:
        return this.findPrevForField_();
      case Blockly.ASTNode.types.INPUT:
        return this.findPrevForInput_();
      case Blockly.ASTNode.types.BLOCK:
        var t = this.location_;
        return Blockly.ASTNode.createConnectionNode(
          t.previousConnection || t.outputConnection
        );
      case Blockly.ASTNode.types.PREVIOUS:
        if ((t = this.location_.targetConnection) && !t.getParentInput())
          return Blockly.ASTNode.createConnectionNode(t);
        break;
      case Blockly.ASTNode.types.NEXT:
        return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock());
    }
    return null;
  }),
  (Blockly.ASTNode.prototype.out = function () {
    switch (this.type_) {
      case Blockly.ASTNode.types.STACK:
        var t = this.location_.getRelativeToSurfaceXY();
        return (
          (t = new Blockly.utils.Coordinate(
            t.x,
            t.y + Blockly.ASTNode.DEFAULT_OFFSET_Y
          )),
          Blockly.ASTNode.createWorkspaceNode(this.location_.workspace, t)
        );
      case Blockly.ASTNode.types.OUTPUT:
        return (t = this.location_.targetConnection)
          ? Blockly.ASTNode.createConnectionNode(t)
          : Blockly.ASTNode.createStackNode(this.location_.getSourceBlock());
      case Blockly.ASTNode.types.FIELD:
      case Blockly.ASTNode.types.INPUT:
        return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock());
      case Blockly.ASTNode.types.BLOCK:
        return this.getOutAstNodeForBlock_(this.location_);
      case Blockly.ASTNode.types.PREVIOUS:
      case Blockly.ASTNode.types.NEXT:
        return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());
    }
    return null;
  }),
  (Blockly.Blocks = {}),
  (Blockly.Icon = function (t) {
    this.block_ = t;
  }),
  (Blockly.Icon.prototype.collapseHidden = !0),
  (Blockly.Icon.prototype.SIZE = 25),
  (Blockly.Icon.prototype.bubble_ = null),
  (Blockly.Icon.prototype.iconXY_ = null),
  (Blockly.Icon.prototype.createIcon = function () {
    this.iconGroup_ ||
      ((this.iconGroup_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyIconGroup" },
        null
      )),
      this.block_.isInFlyout &&
        Blockly.utils.dom.addClass(this.iconGroup_, "blocklyIconGroupReadonly"),
      this.drawIcon_(this.iconGroup_),
      this.block_.getSvgRoot().appendChild(this.iconGroup_),
      Blockly.bindEventWithChecks_(
        this.iconGroup_,
        "mouseup",
        this,
        this.iconClick_
      ),
      this.updateEditable());
  }),
  (Blockly.Icon.prototype.dispose = function () {
    Blockly.utils.dom.removeNode(this.iconGroup_),
      (this.iconGroup_ = null),
      this.setVisible(!1),
      (this.block_ = null);
  }),
  (Blockly.Icon.prototype.updateEditable = function () {}),
  (Blockly.Icon.prototype.isVisible = function () {
    return !!this.bubble_;
  }),
  (Blockly.Icon.prototype.iconClick_ = function (t) {
    this.block_.workspace.isDragging() ||
      this.block_.isInFlyout ||
      Blockly.utils.isRightButton(t) ||
      this.setVisible(!this.isVisible());
  }),
  (Blockly.Icon.prototype.applyColour = function () {
    this.isVisible() &&
      this.bubble_.setColour(
        this.block_.style.colourPrimary,
        this.block_.style.colourSecondary
      );
  }),
  (Blockly.Icon.prototype.renderIcon = function (t) {
    if (
      (this.collapseHidden && this.block_.isCollapsed()) ||
      this.block_.isInsertionMarker()
    )
      return this.iconGroup_.setAttribute("display", "none"), t;
    this.iconGroup_.setAttribute("display", "block");
    var e = this.SIZE;
    return (
      this.block_.RTL && (t -= e),
      this.iconGroup_.setAttribute(
        "transform",
        "translate(" + t + ",9),scale(1.4)"
      ),
      this.computeIconLocation(),
      this.block_.RTL
        ? t - Blockly.BlockSvg.SEP_SPACE_X
        : t + (e + Blockly.BlockSvg.SEP_SPACE_X)
    );
  }),
  (Blockly.Icon.prototype.moveIcon = function (t, e) {
    var o = this.SIZE;
    return (
      this.block_.RTL && (t -= o),
      this.iconGroup_.setAttribute(
        "transform",
        "translate(" + t + "," + (9 + e) + "),scale(1.4)"
      ),
      this.block_.RTL
        ? t - Blockly.BlockSvg.SEP_SPACE_X
        : t + (o + Blockly.BlockSvg.SEP_SPACE_X)
    );
  }),
  (Blockly.Icon.prototype.setIconLocation = function (t) {
    (this.iconXY_ = t), this.isVisible() && this.bubble_.setAnchorLocation(t);
  }),
  (Blockly.Icon.prototype.computeIconLocation = function () {
    var t = this.block_.getRelativeToSurfaceXY(),
      e = Blockly.utils.getRelativeXY(this.iconGroup_);
    (t = new Blockly.utils.Coordinate(
      t.x + e.x + this.SIZE / 2,
      t.y + e.y + this.SIZE / 2
    )),
      Blockly.utils.Coordinate.equals(this.getIconLocation(), t) ||
        this.setIconLocation(t);
  }),
  (Blockly.Icon.prototype.getIconLocation = function () {
    return this.iconXY_;
  }),
  (Blockly.Icon.prototype.getCorrectedSize = function () {
    return new Blockly.utils.Size(
      Blockly.Icon.prototype.SIZE,
      Blockly.Icon.prototype.SIZE - 2
    );
  }),
  (Blockly.Breakpoint = function (t) {
    Blockly.Breakpoint.superClass_.constructor.call(this, t),
      this.createIcon(),
      (this.set_ = t.isBreakpointSet() || !1);
  }),
  Blockly.utils.object.inherits(Blockly.Breakpoint, Blockly.Icon),
  (Blockly.Breakpoint.prototype.collapseHidden = !1),
  (Blockly.Breakpoint.prototype.createIcon = function () {
    this.iconGroup_ ||
      ((this.iconGroup_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyBreakpointIconGroup" },
        null
      )),
      this.block_.isInFlyout &&
        Blockly.utils.dom.addClass(
          this.iconGroup_,
          "blocklyBreakpointIconGroupReadonly"
        ),
      this.drawIcon_(this.iconGroup_),
      this.block_.getSvgRoot().appendChild(this.iconGroup_),
      Blockly.bindEventWithChecks_(
        this.iconGroup_,
        "mouseup",
        this,
        this.iconClick_
      ),
      this.updateEditable());
  }),
  (Blockly.Breakpoint.prototype.drawIcon_ = function (t) {
    var e = this.block_.isBreakpointSet() ? "#f00" : "#ccc";
    this.bigDot = Blockly.utils.dom.createSvgElement(
      "circle",
      {
        class: "blocklyBreakpointSymbol",
        fill: e,
        stroke: "white",
        "stroke-width": 2,
        cx: 7,
        cy: 11.5,
        r: 8,
      },
      t
    );
  }),
  (Blockly.Breakpoint.prototype.enableBreakpoint = function () {
    this.setVisible(this.block_.isBreakpointSet());
  }),
  (Blockly.Breakpoint.prototype.dispose = function () {
    (this.block_.breakpoint = null),
      goog.dom.removeNode(this.iconGroup_),
      (this.block_ = this.iconGroup_ = null);
  }),
  (Blockly.Breakpoint.prototype.setVisible = function (t) {
    t != this.isVisible() &&
      (Blockly.Events.fire(
        new Blockly.Events.Ui(this.block_, "breakpointSet", !t, t)
      ),
      t
        ? this.bigDot.setAttribute("fill", "#f00")
        : this.bigDot.setAttribute("fill", "#ccc"),
      (this.set_ = !this.set_),
      this.block_.setBreakpoint(t));
  }),
  (Blockly.Breakpoint.prototype.isVisible = function () {
    return !!this.set_;
  }),
  (Blockly.Breakpoint.prototype.setIconLocation = function (t) {
    this.iconXY_ = t;
  }),
  (Blockly.Breakpoint.prototype.updateColour = function () {}),
  (Blockly.Breakpoint.prototype.applyColour = function () {}),
  (Blockly.Connection = function (t, e) {
    (this.sourceBlock_ = t), (this.type = e);
  }),
  (Blockly.Connection.CAN_CONNECT = 0),
  (Blockly.Connection.REASON_SELF_CONNECTION = 1),
  (Blockly.Connection.REASON_WRONG_TYPE = 2),
  (Blockly.Connection.REASON_TARGET_NULL = 3),
  (Blockly.Connection.REASON_CHECKS_FAILED = 4),
  (Blockly.Connection.REASON_DIFFERENT_WORKSPACES = 5),
  (Blockly.Connection.REASON_SHADOW_PARENT = 6),
  (Blockly.Connection.REASON_CUSTOM_PROCEDURE = 7),
  (Blockly.Connection.prototype.targetConnection = null),
  (Blockly.Connection.prototype.disposed = !1),
  (Blockly.Connection.prototype.check_ = null),
  (Blockly.Connection.prototype.shadowDom_ = null),
  (Blockly.Connection.prototype.x = 0),
  (Blockly.Connection.prototype.y = 0),
  (Blockly.Connection.prototype.connect_ = function (t) {
    var e,
      o = this,
      i = o.getSourceBlock(),
      n = t.getSourceBlock(),
      l = !1;
    if ((o == i.getFirstStatementConnection() && (l = !0), t.isConnected())) {
      if (l) var r = t.targetConnection;
      t.disconnect();
    }
    if (o.isConnected()) {
      var s = o.targetBlock(),
        a = o.getShadowDom();
      if ((o.setShadowDom(null), s.isShadow()))
        (a = Blockly.Xml.blockToDom(s)), s.dispose(!1), (s = null);
      else if (o.type == Blockly.NEXT_STATEMENT) {
        if (!s.previousConnection)
          throw Error("Orphan block does not have a previous connection.");
        for (var c = n; c.nextConnection; ) {
          var g = c.getNextBlock();
          if (!g || g.isShadow()) {
            s.previousConnection.checkType(c.nextConnection) &&
              (c.nextConnection.connect(s.previousConnection), (s = null));
            break;
          }
          c = g;
        }
      }
      if (s && (o.disconnect(), Blockly.Events.recordUndo)) {
        var u = Blockly.Events.getGroup();
        setTimeout(function () {
          s.workspace &&
            !s.getParent() &&
            (Blockly.Events.setGroup(u),
            s.outputConnection
              ? s.outputConnection.onFailedConnect(o)
              : s.previousConnection && s.previousConnection.onFailedConnect(o),
            Blockly.Events.setGroup(!1));
        }, Blockly.BUMP_DELAY);
      }
      o.setShadowDom(a);
    }
    l && r && r.connect(i.previousConnection),
      Blockly.Events.isEnabled() && (e = new Blockly.Events.BlockMove(n)),
      Blockly.Connection.connectReciprocally_(o, t),
      n.setParent(i),
      e && (e.recordNew(), Blockly.Events.fire(e));
  }),
  (Blockly.Connection.prototype.dispose = function () {
    if (this.isConnected()) {
      this.setShadowDom(null);
      var t = this.targetBlock();
      t.isShadow() ? t.dispose(!1) : t.unplug();
    }
    this.disposed = !0;
  }),
  (Blockly.Connection.prototype.isConnectedToNonInsertionMarker = function () {
    return this.targetConnection && !this.targetBlock().isInsertionMarker();
  }),
  (Blockly.Connection.prototype.getSourceBlock = function () {
    return this.sourceBlock_;
  }),
  (Blockly.Connection.prototype.isSuperior = function () {
    return (
      this.type == Blockly.INPUT_VALUE || this.type == Blockly.NEXT_STATEMENT
    );
  }),
  (Blockly.Connection.prototype.isConnected = function () {
    return !!this.targetConnection;
  }),
  (Blockly.Connection.prototype.canConnectWithReason = function (t) {
    if (!t) return Blockly.Connection.REASON_TARGET_NULL;
    if (this.isSuperior())
      var e = this.sourceBlock_,
        o = t.getSourceBlock();
    else (o = this.sourceBlock_), (e = t.getSourceBlock());
    return e && e == o
      ? Blockly.Connection.REASON_SELF_CONNECTION
      : t.type != Blockly.OPPOSITE_TYPE[this.type]
      ? Blockly.Connection.REASON_WRONG_TYPE
      : e && o && e.workspace !== o.workspace
      ? Blockly.Connection.REASON_DIFFERENT_WORKSPACES
      : this.checkType(t)
      ? Blockly.Connection.CAN_CONNECT
      : Blockly.Connection.REASON_CHECKS_FAILED;
  }),
  (Blockly.Connection.prototype.checkConnection = function (t) {
    switch (this.canConnectWithReason(t)) {
      case Blockly.Connection.CAN_CONNECT:
        break;
      case Blockly.Connection.REASON_SELF_CONNECTION:
        throw Error("Attempted to connect a block to itself.");
      case Blockly.Connection.REASON_DIFFERENT_WORKSPACES:
        throw Error("Blocks not on same workspace.");
      case Blockly.Connection.REASON_WRONG_TYPE:
        throw Error("Attempt to connect incompatible types.");
      case Blockly.Connection.REASON_TARGET_NULL:
        throw Error("Target connection is null.");
      case Blockly.Connection.REASON_CHECKS_FAILED:
        throw Error(
          "Connection checks failed. " +
            this +
            " expected " +
            this.check_ +
            ", found " +
            t.check_
        );
      case Blockly.Connection.REASON_SHADOW_PARENT:
        throw Error("Connecting non-shadow to shadow block.");
      case Blockly.Connection.REASON_CUSTOM_PROCEDURE:
        throw Error(
          "Trying to replace a shadow on a custom procedure definition."
        );
      default:
        throw Error("Unknown connection failure: this should never happen!");
    }
  }),
  (Blockly.Connection.prototype.canConnectToPrevious_ = function (t) {
    if (this.targetConnection || -1 != Blockly.draggingConnections.indexOf(t))
      return !1;
    var e = this.sourceBlock_.getFirstStatementConnection(),
      o = this == e,
      i = this == this.sourceBlock_.nextConnection;
    return (
      !(null != e && !o && !i) &&
      ((e = null != this.sourceBlock_.previousConnection),
      !!((o && e) || !t.targetConnection) ||
        (!!(t = t.targetBlock()).isInsertionMarker() && !t.getPreviousBlock()))
    );
  }),
  (Blockly.Connection.prototype.isConnectionAllowed = function (t) {
    if (
      t.sourceBlock_.isInsertionMarker() ||
      this.canConnectWithReason(t) != Blockly.Connection.CAN_CONNECT
    )
      return !1;
    switch ((this.sourceBlock_.getFirstStatementConnection(), t.type)) {
      case Blockly.PREVIOUS_STATEMENT:
        return this.canConnectToPrevious_(t);
      case Blockly.OUTPUT_VALUE:
        return !1;
      case Blockly.INPUT_VALUE:
        if (
          t.isConnected() &&
          !t.targetBlock().isMovable() &&
          !t.targetBlock().isShadow()
        )
          return !1;
        if (t.targetConnection) {
          var e = t.targetBlock();
          if (e.isShadow() && Blockly.Functions.isFunctionArgumentReporter(e))
            return !1;
        }
        if (
          Blockly.Functions.isFunctionArgumentReporter(this.sourceBlock_) &&
          (e = t.getSourceBlock().getRootBlock()).isEnabled() &&
          !Blockly.pxtBlocklyUtils.hasMatchingArgumentReporter(
            e,
            this.sourceBlock_
          )
        )
          return !1;
        break;
      case Blockly.NEXT_STATEMENT:
        if (
          t.isConnected() &&
          !this.sourceBlock_.nextConnection &&
          !t.targetBlock().isShadow() &&
          t.targetBlock().nextConnection
        )
          return !1;
        break;
      default:
        throw Error("Unknown connection type in isConnectionAllowed");
    }
    return -1 == Blockly.draggingConnections.indexOf(t);
  }),
  (Blockly.Connection.prototype.onFailedConnect = function (t) {}),
  (Blockly.Connection.prototype.connect = function (t) {
    if (this.targetConnection != t) {
      this.checkConnection(t);
      var e = Blockly.Events.getGroup();
      e || Blockly.Events.setGroup(!0),
        this.isSuperior() ? this.connect_(t) : t.connect_(this),
        e || Blockly.Events.setGroup(!1);
    }
  }),
  (Blockly.Connection.connectReciprocally_ = function (t, e) {
    if (!t || !e) throw Error("Cannot connect null connections.");
    (t.targetConnection = e), (e.targetConnection = t);
  }),
  (Blockly.Connection.singleConnection_ = function (t, e) {
    for (var o = null, i = 0; i < t.inputList.length; i++) {
      var n = t.inputList[i].connection;
      if (
        n &&
        n.type == Blockly.INPUT_VALUE &&
        e.outputConnection.checkType(n)
      ) {
        if (o) return null;
        o = n;
      }
    }
    return o;
  }),
  (Blockly.Connection.lastConnectionInRow = function (t, e) {
    for (var o; (o = Blockly.Connection.singleConnection_(t, e)); )
      if (!(t = o.targetBlock()) || t.isShadow()) return o;
    return null;
  }),
  (Blockly.Connection.prototype.disconnect = function () {
    var t = this.targetConnection;
    if (!t) throw Error("Source connection not connected.");
    if (t.targetConnection != this)
      throw Error("Target connection not connected to source connection.");
    if (this.isSuperior()) {
      var e = this.sourceBlock_,
        o = t.getSourceBlock();
      t = this;
    } else (e = t.getSourceBlock()), (o = this.sourceBlock_);
    var i = Blockly.Events.getGroup();
    i || Blockly.Events.setGroup(!0),
      this.disconnectInternal_(e, o),
      t.respawnShadow_(),
      i || Blockly.Events.setGroup(!1);
  }),
  (Blockly.Connection.prototype.disconnectInternal_ = function (t, e) {
    var o;
    Blockly.Events.isEnabled() && (o = new Blockly.Events.BlockMove(e)),
      (this.targetConnection = this.targetConnection.targetConnection = null),
      e.setParent(null),
      o && (o.recordNew(), Blockly.Events.fire(o));
  }),
  (Blockly.Connection.prototype.respawnShadow_ = function () {
    var t = this.getSourceBlock(),
      e = this.getShadowDom();
    if (t.workspace && e && Blockly.Events.recordUndo)
      if ((t = Blockly.Xml.domToBlock(e, t.workspace)).outputConnection)
        this.connect(t.outputConnection);
      else {
        if (!t.previousConnection)
          throw Error(
            "Child block does not have output or previous statement."
          );
        this.connect(t.previousConnection);
      }
  }),
  (Blockly.Connection.prototype.targetBlock = function () {
    return this.isConnected() ? this.targetConnection.getSourceBlock() : null;
  }),
  (Blockly.Connection.prototype.checkType = function (t) {
    if (!this.check_ || !t.check_) return !0;
    for (var e = 0; e < this.check_.length; e++)
      if (-1 != t.check_.indexOf(this.check_[e])) return !0;
    return !1;
  }),
  (Blockly.Connection.prototype.checkType_ = function (t) {
    return (
      console.warn(
        "Deprecated call to Blockly.Connection.prototype.checkType_, use Blockly.Connection.prototype.checkType instead."
      ),
      this.checkType(t)
    );
  }),
  (Blockly.Connection.prototype.onCheckChanged_ = function () {
    !this.isConnected() ||
      (this.targetConnection && this.checkType(this.targetConnection)) ||
      (this.isSuperior() ? this.targetBlock() : this.sourceBlock_).unplug();
  }),
  (Blockly.Connection.prototype.setCheck = function (t) {
    return (
      t
        ? (Array.isArray(t) || (t = [t]),
          (this.check_ = t),
          this.onCheckChanged_())
        : (this.check_ = null),
      this
    );
  }),
  (Blockly.Connection.prototype.getCheck = function () {
    return this.check_;
  }),
  (Blockly.Connection.prototype.getOutputShape = function () {
    return this.check_
      ? -1 !== this.check_.indexOf("Boolean")
        ? Blockly.OUTPUT_SHAPE_HEXAGONAL
        : (-1 !== this.check_.indexOf("Number") ||
            this.check_.indexOf("String"),
          Blockly.OUTPUT_SHAPE_ROUND)
      : Blockly.OUTPUT_SHAPE_ROUND;
  }),
  (Blockly.Connection.prototype.setShadowDom = function (t) {
    this.shadowDom_ = t;
  }),
  (Blockly.Connection.prototype.getShadowDom = function () {
    return this.shadowDom_;
  }),
  (Blockly.Connection.prototype.neighbours = function (t) {
    return [];
  }),
  (Blockly.Connection.prototype.getParentInput = function () {
    for (
      var t = null, e = this.sourceBlock_, o = e.inputList, i = 0;
      i < e.inputList.length;
      i++
    )
      if (o[i].connection === this) {
        t = o[i];
        break;
      }
    return t;
  }),
  (Blockly.Connection.prototype.toString = function () {
    var t = this.sourceBlock_;
    if (!t) return "Orphan Connection";
    if (t.outputConnection == this) var e = "Output Connection of ";
    else if (t.previousConnection == this) e = "Previous Connection of ";
    else if (t.nextConnection == this) e = "Next Connection of ";
    else {
      e = null;
      for (var o, i = 0; (o = t.inputList[i]); i++)
        if (o.connection == this) {
          e = o;
          break;
        }
      if (!e)
        return (
          console.warn("Connection not actually connected to sourceBlock_"),
          "Orphan Connection"
        );
      e = 'Input "' + e.name + '" connection on ';
    }
    return e + t.toDevString();
  }),
  (Blockly.Extensions = {}),
  (Blockly.Extensions.ALL_ = {}),
  (Blockly.Extensions.register = function (t, e) {
    if ("string" != typeof t || "" == t.trim())
      throw Error('Error: Invalid extension name "' + t + '"');
    if (Blockly.Extensions.ALL_[t])
      throw Error('Error: Extension "' + t + '" is already registered.');
    if ("function" != typeof e)
      throw Error('Error: Extension "' + t + '" must be a function');
    Blockly.Extensions.ALL_[t] = e;
  }),
  (Blockly.Extensions.registerMixin = function (t, e) {
    if (!e || "object" != typeof e)
      throw Error('Error: Mixin "' + t + '" must be a object');
    Blockly.Extensions.register(t, function () {
      this.mixin(e);
    });
  }),
  (Blockly.Extensions.registerMutator = function (t, e, o, i) {
    var n = 'Error when registering mutator "' + t + '": ';
    Blockly.Extensions.checkHasFunction_(n, e.domToMutation, "domToMutation"),
      Blockly.Extensions.checkHasFunction_(n, e.mutationToDom, "mutationToDom");
    var l = Blockly.Extensions.checkMutatorDialog_(e, n);
    if (o && "function" != typeof o)
      throw Error('Extension "' + t + '" is not a function');
    Blockly.Extensions.register(t, function () {
      if (l) {
        if (!Blockly.Mutator)
          throw Error(n + "Missing require for Blockly.Mutator");
        this.setMutator(new Blockly.Mutator(i || []));
      }
      this.mixin(e), o && o.apply(this);
    });
  }),
  (Blockly.Extensions.unregister = function (t) {
    Blockly.Extensions.ALL_[t]
      ? delete Blockly.Extensions.ALL_[t]
      : console.warn(
          'No extension mapping for name "' + t + '" found to unregister'
        );
  }),
  (Blockly.Extensions.apply = function (t, e, o) {
    var i = Blockly.Extensions.ALL_[t];
    if ("function" != typeof i)
      throw Error('Error: Extension "' + t + '" not found.');
    if (o) Blockly.Extensions.checkNoMutatorProperties_(t, e);
    else var n = Blockly.Extensions.getMutatorProperties_(e);
    if ((i.apply(e), o))
      Blockly.Extensions.checkBlockHasMutatorProperties_(
        'Error after applying mutator "' + t + '": ',
        e
      );
    else if (!Blockly.Extensions.mutatorPropertiesMatch_(n, e))
      throw Error(
        'Error when applying extension "' +
          t +
          '": mutation properties changed when applying a non-mutator extension.'
      );
  }),
  (Blockly.Extensions.checkHasFunction_ = function (t, e, o) {
    if (!e) throw Error(t + 'missing required property "' + o + '"');
    if ("function" != typeof e)
      throw Error(t + '" required property "' + o + '" must be a function');
  }),
  (Blockly.Extensions.checkNoMutatorProperties_ = function (t, e) {
    if (Blockly.Extensions.getMutatorProperties_(e).length)
      throw Error(
        'Error: tried to apply mutation "' +
          t +
          '" to a block that already has mutator functions.  Block id: ' +
          e.id
      );
  }),
  (Blockly.Extensions.checkMutatorDialog_ = function (t, e) {
    var o = void 0 !== t.compose,
      i = void 0 !== t.decompose;
    if (o && i) {
      if ("function" != typeof t.compose)
        throw Error(e + "compose must be a function.");
      if ("function" != typeof t.decompose)
        throw Error(e + "decompose must be a function.");
      return !0;
    }
    if (o || i)
      throw Error(e + 'Must have both or neither of "compose" and "decompose"');
    return !1;
  }),
  (Blockly.Extensions.checkBlockHasMutatorProperties_ = function (t, e) {
    if ("function" != typeof e.domToMutation)
      throw Error(t + 'Applying a mutator didn\'t add "domToMutation"');
    if ("function" != typeof e.mutationToDom)
      throw Error(t + 'Applying a mutator didn\'t add "mutationToDom"');
    Blockly.Extensions.checkMutatorDialog_(e, t);
  }),
  (Blockly.Extensions.getMutatorProperties_ = function (t) {
    var e = [];
    return (
      void 0 !== t.domToMutation && e.push(t.domToMutation),
      void 0 !== t.mutationToDom && e.push(t.mutationToDom),
      void 0 !== t.compose && e.push(t.compose),
      void 0 !== t.decompose && e.push(t.decompose),
      e
    );
  }),
  (Blockly.Extensions.mutatorPropertiesMatch_ = function (t, e) {
    if ((e = Blockly.Extensions.getMutatorProperties_(e)).length != t.length)
      return !1;
    for (var o = 0; o < e.length; o++) if (t[o] != e[o]) return !1;
    return !0;
  }),
  (Blockly.Extensions.buildTooltipForDropdown = function (t, e) {
    var o = [];
    return (
      "object" == typeof document &&
        Blockly.utils.runAfterPageLoad(function () {
          for (var t in e) Blockly.utils.checkMessageReferences(e[t]);
        }),
      function () {
        this.type &&
          -1 == o.indexOf(this.type) &&
          (Blockly.Extensions.checkDropdownOptionsInTable_(this, t, e),
          o.push(this.type)),
          this.setTooltip(
            function () {
              var i = String(this.getFieldValue(t)),
                n = e[i];
              return (
                null == n
                  ? -1 == o.indexOf(this.type) &&
                    ((i =
                      "No tooltip mapping for value " + i + " of field " + t),
                    null != this.type && (i += " of block type " + this.type),
                    console.warn(i + "."))
                  : (n = Blockly.utils.replaceMessageReferences(n)),
                n
              );
            }.bind(this)
          );
      }
    );
  }),
  (Blockly.Extensions.checkDropdownOptionsInTable_ = function (t, e, o) {
    var i = t.getField(e);
    if (!i.isOptionListDynamic()) {
      i = i.getOptions();
      for (var n = 0; n < i.length; ++n) {
        var l = i[n][1];
        null == o[l] &&
          console.warn(
            "No tooltip mapping for value " +
              l +
              " of field " +
              e +
              " of block type " +
              t.type
          );
      }
    }
  }),
  (Blockly.Extensions.buildTooltipWithFieldText = function (t, e) {
    return (
      "object" == typeof document &&
        Blockly.utils.runAfterPageLoad(function () {
          Blockly.utils.checkMessageReferences(t);
        }),
      function () {
        this.setTooltip(
          function () {
            var o = this.getField(e);
            return Blockly.utils
              .replaceMessageReferences(t)
              .replace("%1", o ? o.getText() : "");
          }.bind(this)
        );
      }
    );
  }),
  (Blockly.Extensions.extensionParentTooltip_ = function () {
    (this.tooltipWhenNotConnected_ = this.tooltip),
      this.setTooltip(
        function () {
          var t = this.getParent();
          return (
            (t && t.getInputsInline() && t.tooltip) ||
            this.tooltipWhenNotConnected_
          );
        }.bind(this)
      );
  }),
  Blockly.Extensions.register(
    "parent_tooltip_when_inline",
    Blockly.Extensions.extensionParentTooltip_
  ),
  (Blockly.blockAnimations = {}),
  (Blockly.blockAnimations.disconnectPid_ = 0),
  (Blockly.blockAnimations.disconnectGroup_ = null),
  (Blockly.blockAnimations.disposeUiEffect = function (t) {
    var e = t.workspace,
      o = t.getSvgRoot();
    e.getAudioManager().play("delete"),
      (t = e.getSvgXY(o)),
      ((o = o.cloneNode(!0)).translateX_ = t.x),
      (o.translateY_ = t.y),
      o.setAttribute("transform", "translate(" + t.x + "," + t.y + ")"),
      e.getParentSvg().appendChild(o),
      (o.bBox_ = o.getBBox()),
      Blockly.blockAnimations.disposeUiStep_(o, e.RTL, new Date(), e.scale);
  }),
  (Blockly.blockAnimations.disposeUiStep_ = function (t, e, o, i) {
    var n = (new Date() - o) / 150;
    1 < n
      ? Blockly.utils.dom.removeNode(t)
      : (t.setAttribute(
          "transform",
          "translate(" +
            (t.translateX_ + (((e ? -1 : 1) * t.bBox_.width * i) / 2) * n) +
            "," +
            (t.translateY_ + t.bBox_.height * i * n) +
            ") scale(" +
            (1 - n) * i +
            ")"
        ),
        setTimeout(Blockly.blockAnimations.disposeUiStep_, 10, t, e, o, i));
  }),
  (Blockly.blockAnimations.connectionUiEffect = function (t) {
    var e = t.workspace,
      o = e.scale;
    if ((e.getAudioManager().play("click"), !(1 > o))) {
      var i = e.getSvgXY(t.getSvgRoot());
      t.outputConnection
        ? ((i.x += (t.RTL ? 3 : -3) * o), (i.y += 13 * o))
        : t.previousConnection &&
          ((i.x += (t.RTL ? -23 : 23) * o), (i.y += 3 * o)),
        (t = Blockly.utils.dom.createSvgElement(
          "circle",
          {
            cx: i.x,
            cy: i.y,
            r: 0,
            fill: "none",
            stroke: "#888",
            "stroke-width": 10,
          },
          e.getParentSvg()
        )),
        Blockly.blockAnimations.connectionUiStep_(t, new Date(), o);
    }
  }),
  (Blockly.blockAnimations.connectionUiStep_ = function (t, e, o) {
    var i = (new Date() - e) / 150;
    1 < i
      ? Blockly.utils.dom.removeNode(t)
      : (t.setAttribute("r", 25 * i * o),
        (t.style.opacity = 1 - i),
        (Blockly.blockAnimations.disconnectPid_ = setTimeout(
          Blockly.blockAnimations.connectionUiStep_,
          10,
          t,
          e,
          o
        )));
  }),
  (Blockly.blockAnimations.disconnectUiEffect = function (t) {
    if (
      (t.workspace.getAudioManager().play("disconnect"),
      !(1 > t.workspace.scale))
    ) {
      var e = t.getHeightWidth().height;
      (e = (Math.atan(10 / e) / Math.PI) * 180),
        t.RTL || (e *= -1),
        Blockly.blockAnimations.disconnectUiStep_(
          t.getSvgRoot(),
          e,
          new Date()
        );
    }
  }),
  (Blockly.blockAnimations.disconnectUiStep_ = function (t, e, o) {
    var i = (new Date() - o) / 200;
    1 < i
      ? (t.skew_ = "")
      : ((t.skew_ =
          "skewX(" + Math.round(Math.sin(i * Math.PI * 3) * (1 - i) * e) + ")"),
        (Blockly.blockAnimations.disconnectGroup_ = t),
        (Blockly.blockAnimations.disconnectPid_ = setTimeout(
          Blockly.blockAnimations.disconnectUiStep_,
          10,
          t,
          e,
          o
        ))),
      t.setAttribute("transform", t.translate_ + t.skew_);
  }),
  (Blockly.blockAnimations.disconnectUiStop = function () {
    if (Blockly.blockAnimations.disconnectGroup_) {
      clearTimeout(Blockly.blockAnimations.disconnectPid_);
      var t = Blockly.blockAnimations.disconnectGroup_;
      (t.skew_ = ""),
        t.setAttribute("transform", t.translate_),
        (Blockly.blockAnimations.disconnectGroup_ = null);
    }
  }),
  (Blockly.Events.EndBlockDrag = function (t) {
    t &&
      (Blockly.Events.EndBlockDrag.superClass_.constructor.call(this, t),
      (this.recordUndo = !1),
      (this.blockId = t.id),
      (this.allNestedIds = t.getDescendants().map(function (t) {
        return t.id;
      })));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.EndBlockDrag,
    Blockly.Events.BlockBase
  ),
  (Blockly.Events.EndBlockDrag.prototype.type = Blockly.Events.END_DRAG),
  (Blockly.Events.EndBlockDrag.prototype.toJson = function () {
    var t = Blockly.Events.EndBlockDrag.superClass_.toJson.call(this);
    return (
      this.blockId && (t.blockId = this.blockId),
      this.allNestedIds && (t.allNestedIds = this.allNestedIds),
      t
    );
  }),
  (Blockly.Events.EndBlockDrag.prototype.fromJson = function (t) {
    Blockly.Events.EndBlockDrag.superClass_.fromJson.call(this, t),
      (this.blockId = t.blockId),
      (this.allNestedIds = t.allNestedIds);
  }),
  (Blockly.InsertionMarkerManager = function (t) {
    (this.topBlock_ = Blockly.selected = t),
      (this.workspace_ = t.workspace),
      (this.lastMarker_ = this.lastOnStack_ = null),
      (this.firstMarker_ = this.createMarkerBlock_(this.topBlock_)),
      (this.connectionIndicator_ =
        this.connectionLine_ =
        this.localConnection_ =
        this.closestConnection_ =
          null),
      (this.wouldDeleteBlock_ = !1),
      (this.markerConnection_ = null),
      (this.highlightingBlock_ = !1),
      (this.highlightedBlock_ = null),
      (this.availableConnections_ = this.initAvailableConnections_());
  }),
  (Blockly.InsertionMarkerManager.prototype.dispose = function () {
    (this.availableConnections_.length = 0), Blockly.Events.disable();
    try {
      this.firstMarker_ && this.firstMarker_.dispose(),
        this.lastMarker_ && this.lastMarker_.dispose();
    } finally {
      Blockly.Events.enable();
    }
  }),
  (Blockly.InsertionMarkerManager.prototype.wouldDeleteBlock = function () {
    return this.wouldDeleteBlock_;
  }),
  (Blockly.InsertionMarkerManager.prototype.wouldConnectBlock = function () {
    return !!this.closestConnection_;
  }),
  (Blockly.InsertionMarkerManager.prototype.applyConnections = function () {
    if (
      this.closestConnection_ &&
      (Blockly.Events.disable(),
      this.hidePreview_(),
      Blockly.Events.enable(),
      this.localConnection_.connect(this.closestConnection_),
      this.topBlock_.rendered)
    ) {
      var t = this.localConnection_.isSuperior()
        ? this.closestConnection_
        : this.localConnection_;
      Blockly.blockAnimations.connectionUiEffect(t.getSourceBlock()),
        this.topBlock_.getRootBlock().bringToFront();
    }
  }),
  (Blockly.InsertionMarkerManager.prototype.update = function (t, e) {
    var o = this.getCandidate_(t);
    ((this.wouldDeleteBlock_ = this.shouldDelete_(o, e)) ||
      this.shouldUpdatePreviews_(o, t)) &&
      (Blockly.Events.disable(),
      this.maybeHidePreview_(o),
      this.maybeShowPreview_(o),
      Blockly.Events.enable()),
      this.updateConnectionLine_(t);
  }),
  (Blockly.InsertionMarkerManager.prototype.createMarkerBlock_ = function (t) {
    var e = t.type;
    Blockly.Events.disable();
    try {
      this.workspace_.loadingEventsDisabled = !0;
      var o = this.workspace_.newBlock(e);
      if (
        ((this.workspace_.loadingEventsDisabled = !1),
        o.setInsertionMarker(!0),
        t.mutationToDom)
      ) {
        var i = t.mutationToDom();
        i && o.domToMutation(i);
      }
      for (
        o.setCollapsed(t.isCollapsed()), e = 0;
        e < t.inputList.length;
        e++
      ) {
        var n = t.inputList[e];
        if (n.isVisible()) {
          var l = o.inputList[e];
          for (i = 0; i < n.fieldRow.length; i++)
            l.fieldRow[i].setValue(n.fieldRow[i].getValue());
        }
      }
      o.initSvg(), o.getSvgRoot().setAttribute("visibility", "hidden");
    } finally {
      Blockly.Events.enable();
    }
    return o;
  }),
  (Blockly.InsertionMarkerManager.prototype.initAvailableConnections_ =
    function () {
      var t = this.topBlock_.getConnections_(!1),
        e = this.topBlock_.lastConnectionInStack();
      return (
        e &&
          e != this.topBlock_.nextConnection &&
          (t.push(e),
          (this.lastOnStack_ = e),
          (this.lastMarker_ = this.createMarkerBlock_(e.getSourceBlock()))),
        t
      );
    }),
  (Blockly.InsertionMarkerManager.prototype.shouldUpdatePreviews_ = function (
    t,
    e
  ) {
    var o = t.local,
      i = t.closest;
    return (
      (t = t.radius),
      o && i
        ? this.localConnection_ && this.closestConnection_
          ? (this.closestConnection_ != i || this.localConnection_ != o) &&
            ((o = this.localConnection_.x + e.x - this.closestConnection_.x),
            (e = this.localConnection_.y + e.y - this.closestConnection_.y),
            (e = Math.sqrt(o * o + e * e)),
            !(i && t > e - Blockly.CURRENT_CONNECTION_PREFERENCE))
          : (!this.localConnection_ && !this.closestConnection_) ||
            (console.error(
              "Only one of localConnection_ and closestConnection_ was set."
            ),
            console.error(
              "Returning true from shouldUpdatePreviews, but it's not clear why."
            ),
            !0)
        : !(!this.localConnection_ || !this.closestConnection_)
    );
  }),
  (Blockly.InsertionMarkerManager.prototype.getCandidate_ = function (t) {
    for (
      var e = this.getStartRadius_(), o = null, i = null, n = 0;
      n < this.availableConnections_.length;
      n++
    ) {
      var l = this.availableConnections_[n],
        r = l.closest(e, t);
      r.connection && ((o = r.connection), (i = l), (e = r.radius));
    }
    return { closest: o, local: i, radius: e };
  }),
  (Blockly.InsertionMarkerManager.prototype.getStartRadius_ = function () {
    return this.closestConnection_ && this.localConnection_
      ? Blockly.CONNECTING_SNAP_RADIUS
      : Blockly.SNAP_RADIUS;
  }),
  (Blockly.InsertionMarkerManager.prototype.shouldReplace_ = function () {
    var t = this.closestConnection_,
      e = this.localConnection_;
    return e.type == Blockly.OUTPUT_VALUE
      ? !t ||
          !this.workspace_
            .getRenderer()
            .shouldInsertDraggedBlock(this.topBlock_, t)
      : e != e.getSourceBlock().getFirstStatementConnection() &&
          !(
            this.topBlock_.nextConnection ||
            e.type != Blockly.PREVIOUS_STATEMENT ||
            !t.isConnected()
          );
  }),
  (Blockly.InsertionMarkerManager.prototype.shouldDelete_ = function (t, e) {
    return (
      (t = t && !!t.closest && e != Blockly.DELETE_AREA_TOOLBOX),
      !!e && !this.topBlock_.getParent() && this.topBlock_.isDeletable() && !t
    );
  }),
  (Blockly.InsertionMarkerManager.prototype.maybeShowPreview_ = function (t) {
    if (!this.wouldDeleteBlock_) {
      var e = t.closest;
      (t = t.local),
        e &&
          (e == this.closestConnection_ ||
          e.getSourceBlock().isInsertionMarker()
            ? console.log("Trying to connect to an insertion marker")
            : ((this.closestConnection_ = e),
              (this.localConnection_ = t),
              this.showPreview_()));
    }
  }),
  (Blockly.InsertionMarkerManager.prototype.showPreview_ = function () {
    this.shouldReplace_()
      ? (this.highlightBlock_(), this.createConnectionLine_())
      : this.connectMarker_(),
      this.closestConnection_ &&
        this.closestConnection_.targetBlock() &&
        this.workspace_
          .getRenderer()
          .shouldHighlightConnection(this.closestConnection_) &&
        this.closestConnection_.highlight();
  }),
  (Blockly.InsertionMarkerManager.prototype.createConnectionLine_ =
    function () {
      if (!this.connectionLine_) {
        (this.connectionLine_ = Blockly.utils.dom.createSvgElement(
          "line",
          { class: "blocklyConnectionLine", x1: 0, y1: 0, x2: 0, y2: 0 },
          this.localConnection_.sourceBlock_.getSvgRoot()
        )),
          (this.connectionIndicator_ = Blockly.utils.dom.createSvgElement(
            "g",
            { class: "blocklyInputConnectionIndicator" },
            this.closestConnection_.sourceBlock_.getSvgRoot()
          )),
          Blockly.utils.dom.createSvgElement(
            "circle",
            { r: Blockly.CONNECTION_INDICATOR_RADIUS },
            this.connectionIndicator_
          );
        var t = this.closestConnection_.offsetInBlock_;
        this.connectionIndicator_.setAttribute(
          "transform",
          "translate(" + t.x + "," + t.y + ")"
        );
      }
    }),
  (Blockly.InsertionMarkerManager.prototype.updateConnectionLine_ = function (
    t
  ) {
    if (
      this.closestConnection_ &&
      this.localConnection_ &&
      this.connectionLine_
    ) {
      var e = Blockly.CONNECTION_INDICATOR_RADIUS,
        o = this.localConnection_.offsetInBlock_,
        i = this.closestConnection_.x - this.localConnection_.x - t.x + o.x;
      t = this.closestConnection_.y - this.localConnection_.y - t.y + o.y;
      var n = Math.atan2(t - o.y, i - o.x);
      Math.sqrt(Math.pow(i - o.x, 2) + Math.pow(t - o.y, 2)) < 2 * e + 1
        ? Blockly.utils.dom.addClass(this.connectionLine_, "hidden")
        : (Blockly.utils.dom.removeClass(this.connectionLine_, "hidden"),
          this.connectionLine_.setAttribute("x1", o.x + Math.cos(n) * e),
          this.connectionLine_.setAttribute("y1", o.y + Math.sin(n) * e),
          this.connectionLine_.setAttribute("x2", i - Math.cos(n) * e),
          this.connectionLine_.setAttribute("y2", t - Math.sin(n) * e));
    }
  }),
  (Blockly.InsertionMarkerManager.prototype.hideConnectionLine_ = function () {
    this.localConnection_ &&
      this.connectionLine_ &&
      (this.localConnection_.sourceBlock_
        .getSvgRoot()
        .removeChild(this.connectionLine_),
      (this.connectionLine_ = null),
      this.closestConnection_.sourceBlock_
        .getSvgRoot()
        .removeChild(this.connectionIndicator_),
      (this.connectionIndicator_ = null));
  }),
  (Blockly.InsertionMarkerManager.prototype.maybeHidePreview_ = function (t) {
    if (t.closest) {
      var e = this.closestConnection_ != t.closest;
      (t = this.localConnection_ != t.local),
        this.closestConnection_ &&
          this.localConnection_ &&
          (e || t || this.wouldDeleteBlock_) &&
          this.hidePreview_();
    } else this.hidePreview_();
    this.localConnection_ =
      this.closestConnection_ =
      this.markerConnection_ =
        null;
  }),
  (Blockly.InsertionMarkerManager.prototype.hidePreview_ = function () {
    this.closestConnection_ &&
      this.closestConnection_.targetBlock() &&
      this.workspace_
        .getRenderer()
        .shouldHighlightConnection(this.closestConnection_) &&
      this.closestConnection_.unhighlight(),
      this.highlightingBlock_
        ? (this.unhighlightBlock_(), this.hideConnectionLine_())
        : this.markerConnection_ && this.disconnectMarker_();
  }),
  (Blockly.InsertionMarkerManager.prototype.highlightBlock_ = function () {
    var t = this.closestConnection_,
      e = this.localConnection_;
    t.targetBlock()
      ? ((this.highlightedBlock_ = t.targetBlock()),
        t.targetBlock().highlightForReplacement(!0))
      : e.type == Blockly.OUTPUT_VALUE &&
        ((this.highlightedBlock_ = t.getSourceBlock()),
        t.getSourceBlock().highlightShapeForInput(t, !0)),
      (this.highlightingBlock_ = !0);
  }),
  (Blockly.InsertionMarkerManager.prototype.unhighlightBlock_ = function () {
    var t = this.closestConnection_;
    t.type != Blockly.INPUT_VALUE || t.isConnected()
      ? this.highlightedBlock_.highlightForReplacement(!1)
      : this.highlightedBlock_.highlightShapeForInput(t, !1),
      (this.highlightedBlock_ = null),
      (this.highlightingBlock_ = !1);
  }),
  (Blockly.InsertionMarkerManager.prototype.disconnectMarker_ = function () {
    if (this.markerConnection_) {
      var t = this.markerConnection_,
        e = t.getSourceBlock(),
        o = e.nextConnection,
        i = e.previousConnection,
        n = e.outputConnection;
      if (
        ((n = t.type == Blockly.INPUT_VALUE && !(n && n.targetConnection)),
        !(t != o || (i && i.targetConnection)) || n
          ? t.targetBlock().unplug(!1)
          : t.type == Blockly.NEXT_STATEMENT && t != o
          ? ((o = t.targetConnection).getSourceBlock().unplug(!1),
            (i = i ? i.targetConnection : null),
            e.unplug(!0),
            i && i.connect(o))
          : e.unplug(!0),
        t.targetConnection)
      )
        throw Error(
          "markerConnection_ still connected at the end of disconnectInsertionMarker"
        );
      (this.markerConnection_ = null),
        e.getSvgRoot().setAttribute("visibility", "hidden");
    } else console.log("No insertion marker connection to disconnect");
  }),
  (Blockly.InsertionMarkerManager.prototype.connectMarker_ = function () {
    var t = this.localConnection_,
      e = this.closestConnection_,
      o =
        this.lastOnStack_ && t == this.lastOnStack_
          ? this.lastMarker_
          : this.firstMarker_;
    if (
      (t = o.getMatchingConnection(t.getSourceBlock(), t)) ==
      this.markerConnection_
    )
      throw Error(
        "Made it to connectMarker_ even though the marker isn't changing"
      );
    o.render(),
      (o.rendered = !0),
      o.getSvgRoot().setAttribute("visibility", "visible"),
      t && e && o.positionNearConnection(t, e),
      e && t.connect(e),
      (this.markerConnection_ = t);
  }),
  (Blockly.InsertionMarkerManager.prototype.getInsertionMarkers = function () {
    var t = [];
    return (
      this.firstMarker_ && t.push(this.firstMarker_),
      this.lastMarker_ && t.push(this.lastMarker_),
      t
    );
  }),
  (Blockly.BlockDragger = function (t, e, o) {
    (this.draggingBlock_ = t),
      (this.workspace_ = e),
      (this.draggedConnectionManager_ = new Blockly.InsertionMarkerManager(
        this.draggingBlock_,
        this.pixelsToWorkspaceUnits_(
          Blockly.utils.Coordinate.difference(
            o,
            this.workspaceOriginInPixels_()
          )
        )
      )),
      (this.deleteArea_ = null),
      (this.wouldDeleteBlock_ = !1),
      (this.startXY_ = this.draggingBlock_.getRelativeToSurfaceXY()),
      (this.dragIconData_ = Blockly.BlockDragger.initIconData_(t));
  }),
  (Blockly.BlockDragger.prototype.dispose = function () {
    (this.dragIconData_.length = 0),
      this.draggedConnectionManager_ &&
        this.draggedConnectionManager_.dispose();
  }),
  (Blockly.BlockDragger.initIconData_ = function (t) {
    var e = [];
    t = t.getDescendants(!1);
    for (var o, i = 0; (o = t[i]); i++) {
      o = o.getIcons();
      for (var n = 0; n < o.length; n++) {
        var l = { location: o[n].getIconLocation(), icon: o[n] };
        l.location && e.push(l);
      }
    }
    return e;
  }),
  (Blockly.BlockDragger.prototype.startBlockDrag = function (t, e) {
    var o = this;
    Blockly.Events.getGroup() || Blockly.Events.setGroup(!0),
      this.fireDragStartEvent_(),
      this.workspace_.isMutator && this.draggingBlock_.bringToFront(),
      e &&
        (this.dragIconData_ = this.dragIconData_.filter(function (t) {
          return t.icon.block_.id == o.draggingBlock_.id;
        })),
      Blockly.utils.dom.startTextWidthCache(),
      this.workspace_.setResizesEnabled(!1),
      Blockly.blockAnimations.disconnectUiStop(),
      (this.draggingBlock_.getParent() ||
        (e &&
          this.draggingBlock_.nextConnection &&
          this.draggingBlock_.nextConnection.targetBlock())) &&
        (this.draggingBlock_.unplug(e),
        (t = this.pixelsToWorkspaceUnits_(t)),
        (t = Blockly.utils.Coordinate.sum(this.startXY_, t)),
        this.draggingBlock_.translate(t.x, t.y),
        Blockly.blockAnimations.disconnectUiEffect(this.draggingBlock_)),
      this.draggingBlock_.setDragging(!0),
      this.draggingBlock_.moveToDragSurface(),
      (t = this.workspace_.getToolbox()) &&
        ((e = this.draggingBlock_.isDeletable()
          ? "blocklyToolboxDelete"
          : "blocklyToolboxGrab"),
        t.addStyle(e));
  }),
  (Blockly.BlockDragger.prototype.fireDragStartEvent_ = function () {
    var t = new Blockly.Events.Ui(
      this.draggingBlock_,
      "dragStart",
      null,
      this.draggingBlock_.getDescendants(!1)
    );
    Blockly.Events.fire(t);
  }),
  (Blockly.BlockDragger.prototype.dragBlock = function (t, e) {
    e = this.pixelsToWorkspaceUnits_(e);
    var o = Blockly.utils.Coordinate.sum(this.startXY_, e);
    this.draggingBlock_.moveDuringDrag(o),
      this.dragIcons_(e),
      (this.deleteArea_ = this.workspace_.isDeleteArea(t)),
      this.draggedConnectionManager_.update(e, this.deleteArea_),
      this.updateCursorDuringBlockDrag_();
  }),
  (Blockly.BlockDragger.prototype.endBlockDrag = function (t, e) {
    this.dragBlock(t, e),
      (this.dragIconData_ = []),
      this.fireDragEndEvent_(),
      Blockly.utils.dom.stopTextWidthCache(),
      Blockly.blockAnimations.disconnectUiStop(),
      (t = this.pixelsToWorkspaceUnits_(e)),
      (e = Blockly.utils.Coordinate.sum(this.startXY_, t)),
      this.draggingBlock_.moveOffDragSurface(e),
      this.maybeDeleteBlock_() ||
        (this.draggingBlock_.moveConnections(t.x, t.y),
        this.draggingBlock_.setDragging(!1),
        this.fireMoveEvent_(),
        this.draggedConnectionManager_.wouldConnectBlock()
          ? this.draggedConnectionManager_.applyConnections()
          : this.draggingBlock_.render(),
        this.draggingBlock_.scheduleSnapAndBump()),
      this.workspace_.setResizesEnabled(!0),
      (t = this.workspace_.getToolbox()) &&
        ((e = this.draggingBlock_.isDeletable()
          ? "blocklyToolboxDelete"
          : "blocklyToolboxGrab"),
        t.removeStyle(e)),
      Blockly.Events.setGroup(!1);
  }),
  (Blockly.BlockDragger.prototype.fireDragEndEvent_ = function () {
    var t = new Blockly.Events.EndBlockDrag(this.draggingBlock_);
    Blockly.Events.fire(t);
  }),
  (Blockly.BlockDragger.prototype.fireMoveEvent_ = function () {
    var t = new Blockly.Events.BlockMove(this.draggingBlock_);
    (t.oldCoordinate = this.startXY_), t.recordNew(), Blockly.Events.fire(t);
  }),
  (Blockly.BlockDragger.prototype.maybeDeleteBlock_ = function () {
    var t = this.workspace_.trashcan;
    return (
      this.wouldDeleteBlock_
        ? (t && setTimeout(t.close.bind(t), 100),
          this.fireMoveEvent_(),
          this.draggingBlock_.dispose(!1, !0))
        : t && t.close(),
      this.wouldDeleteBlock_
    );
  }),
  (Blockly.BlockDragger.prototype.updateCursorDuringBlockDrag_ = function () {
    this.wouldDeleteBlock_ = this.draggedConnectionManager_.wouldDeleteBlock();
    var t = this.workspace_.trashcan;
    this.wouldDeleteBlock_
      ? (this.draggingBlock_.setDeleteStyle(!0),
        this.deleteArea_ == Blockly.DELETE_AREA_TRASH && t && t.setOpen(!0))
      : (this.draggingBlock_.setDeleteStyle(!1), t && t.setOpen(!1));
  }),
  (Blockly.BlockDragger.prototype.pixelsToWorkspaceUnits_ = function (t) {
    return (
      (t = new Blockly.utils.Coordinate(
        t.x / this.workspace_.scale,
        t.y / this.workspace_.scale
      )),
      this.workspace_.isMutator &&
        t.scale(1 / this.workspace_.options.parentWorkspace.scale),
      t
    );
  }),
  (Blockly.BlockDragger.prototype.workspaceOriginInPixels_ = function () {
    var t = goog.style.getPageOffset(this.workspace_.getInjectionDiv()),
      e = this.workspace_.getOriginOffsetInPixels();
    return Blockly.utils.Coordinate.sum(t, e);
  }),
  (Blockly.BlockDragger.prototype.dragIcons_ = function (t) {
    for (var e = 0; e < this.dragIconData_.length; e++) {
      var o = this.dragIconData_[e];
      o.icon.setIconLocation(Blockly.utils.Coordinate.sum(o.location, t));
    }
  }),
  (Blockly.BlockDragger.prototype.getInsertionMarkers = function () {
    return this.draggedConnectionManager_ &&
      this.draggedConnectionManager_.getInsertionMarkers
      ? this.draggedConnectionManager_.getInsertionMarkers()
      : [];
  }),
  (Blockly.VariableMap = function (t) {
    (this.variableMap_ = Object.create(null)), (this.workspace = t);
  }),
  (Blockly.VariableMap.prototype.clear = function () {
    this.variableMap_ = Object.create(null);
  }),
  (Blockly.VariableMap.prototype.renameVariable = function (t, e) {
    var o = this.getVariable(e, t.type),
      i = this.workspace.getAllBlocks(!1);
    Blockly.Events.setGroup(!0);
    try {
      o && o.getId() != t.getId()
        ? this.renameVariableWithConflict_(t, e, o, i)
        : this.renameVariableAndUses_(t, e, i);
    } finally {
      Blockly.Events.setGroup(!1);
    }
  }),
  (Blockly.VariableMap.prototype.renameVariableById = function (t, e) {
    var o = this.getVariableById(t);
    if (!o)
      throw Error("Tried to rename a variable that didn't exist. ID: " + t);
    this.renameVariable(o, e);
  }),
  (Blockly.VariableMap.prototype.renameVariableAndUses_ = function (t, e, o) {
    for (
      Blockly.Events.fire(new Blockly.Events.VarRename(t, e)),
        t.name = e,
        e = 0;
      e < o.length;
      e++
    )
      o[e].updateVarName(t);
  }),
  (Blockly.VariableMap.prototype.renameVariableWithConflict_ = function (
    t,
    e,
    o,
    i
  ) {
    var n = t.type;
    for (
      e != o.name && this.renameVariableAndUses_(o, e, i), e = 0;
      e < i.length;
      e++
    )
      i[e].renameVarById(t.getId(), o.getId());
    Blockly.Events.fire(new Blockly.Events.VarDelete(t)),
      (t = this.getVariablesOfType(n).indexOf(t)),
      this.variableMap_[n].splice(t, 1);
  }),
  (Blockly.VariableMap.prototype.createVariable = function (t, e, o) {
    var i = this.getVariable(t, e);
    if (i) return i;
    if (o && this.getVariableById(o))
      throw Error('Variable id, "' + o + '", is already in use.');
    return (
      (i = o || Blockly.utils.genUid()),
      (e = e || ""),
      (i = new Blockly.VariableModel(this.workspace, t, e, i)),
      (t = this.variableMap_[e] || []).push(i),
      delete this.variableMap_[e],
      (this.variableMap_[e] = t),
      i
    );
  }),
  (Blockly.VariableMap.prototype.deleteVariable = function (t) {
    for (var e, o = this.variableMap_[t.type], i = 0; (e = o[i]); i++)
      if (e.getId() == t.getId()) {
        o.splice(i, 1), Blockly.Events.fire(new Blockly.Events.VarDelete(t));
        break;
      }
  }),
  (Blockly.VariableMap.prototype.deleteVariableById = function (t) {
    var e = this.getVariableById(t);
    if (e) {
      var o,
        i = e.name,
        n = this.getVariableUsesById(t);
      for (t = 0; (o = n[t]); t++)
        if (
          "procedures_defnoreturn" == o.type ||
          "procedures_defreturn" == o.type
        )
          return (
            (t = o.getFieldValue("NAME")),
            (i = Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace(
              "%1",
              i
            ).replace("%2", t)),
            void Blockly.alert(i)
          );
      var l = this;
      1 < n.length
        ? ((i = Blockly.Msg.DELETE_VARIABLE_CONFIRMATION.replace(
            "%1",
            String(n.length)
          ).replace("%2", i)),
          Blockly.confirm(i, function (t) {
            t && e && l.deleteVariableInternal(e, n);
          }))
        : l.deleteVariableInternal(e, n);
    } else console.warn("Can't delete non-existent variable: " + t);
  }),
  (Blockly.VariableMap.prototype.deleteVariableInternal = function (t, e) {
    var o = Blockly.Events.getGroup();
    o || Blockly.Events.setGroup(!0);
    try {
      for (var i = 0; i < e.length; i++) e[i].dispose(!0);
      this.deleteVariable(t);
    } finally {
      o || Blockly.Events.setGroup(!1);
    }
  }),
  (Blockly.VariableMap.prototype.getVariable = function (t, e) {
    if ((e = this.variableMap_[e || ""]))
      for (var o, i = 0; (o = e[i]); i++)
        if (Blockly.Names.equals(o.name, t)) return o;
    return null;
  }),
  (Blockly.VariableMap.prototype.getVariableById = function (t) {
    for (var e = Object.keys(this.variableMap_), o = 0; o < e.length; o++)
      for (var i, n = e[o], l = 0; (i = this.variableMap_[n][l]); l++)
        if (i.getId() == t) return i;
    return null;
  }),
  (Blockly.VariableMap.prototype.getVariablesOfType = function (t) {
    return (t = this.variableMap_[t || ""]) ? t.slice() : [];
  }),
  (Blockly.VariableMap.prototype.getVariableTypes = function (t) {
    var e = {};
    Blockly.utils.object.mixin(e, this.variableMap_),
      t &&
        t.getPotentialVariableMap() &&
        Blockly.utils.object.mixin(e, t.getPotentialVariableMap().variableMap_),
      (t = Object.keys(e)),
      (e = !1);
    for (var o = 0; o < t.length; o++) "" == t[o] && (e = !0);
    return e || t.push(""), t;
  }),
  (Blockly.VariableMap.prototype.getAllVariables = function () {
    var t,
      e = [];
    for (t in this.variableMap_) e = e.concat(this.variableMap_[t]);
    return e;
  }),
  (Blockly.VariableMap.prototype.getAllVariableNames = function () {
    var t,
      e = [];
    for (t in this.variableMap_)
      for (var o, i = this.variableMap_[t], n = 0; (o = i[n]); n++)
        e.push(o.name);
    return e;
  }),
  (Blockly.VariableMap.prototype.getVariableUsesById = function (t) {
    for (
      var e = [], o = this.workspace.getAllBlocks(!1), i = 0;
      i < o.length;
      i++
    ) {
      var n = o[i].getVarModels();
      if (n)
        for (var l = 0; l < n.length; l++) n[l].getId() == t && e.push(o[i]);
    }
    return e;
  }),
  (Blockly.Workspace = function (t) {
    (this.id = Blockly.utils.genUid()),
      (Blockly.Workspace.WorkspaceDB_[this.id] = this),
      (this.options = t || {}),
      (this.RTL = !!this.options.RTL),
      (this.horizontalLayout = !!this.options.horizontalLayout),
      (this.toolboxPosition = this.options.toolboxPosition),
      (this.loadingEventsDisabled = !1),
      (this.topBlocks_ = []),
      (this.topComments_ = []),
      (this.commentDB_ = Object.create(null)),
      (this.listeners_ = []),
      (this.tapListeners_ = []),
      (this.undoStack_ = []),
      (this.redoStack_ = []),
      (this.blockDB_ = Object.create(null)),
      (this.typedBlocksDB_ = Object.create(null)),
      (this.variableMap_ = new Blockly.VariableMap(this)),
      (this.potentialVariableMap_ = null);
  }),
  (Blockly.Workspace.prototype.rendered = !1),
  (Blockly.Workspace.prototype.isClearing = !1),
  (Blockly.Workspace.prototype.MAX_UNDO = 1024),
  (Blockly.Workspace.prototype.connectionDBList = null),
  (Blockly.Workspace.prototype.dispose = function () {
    (this.listeners_.length = 0),
      this.clear(),
      delete Blockly.Workspace.WorkspaceDB_[this.id];
  }),
  (Blockly.Workspace.SCAN_ANGLE = 3),
  (Blockly.Workspace.prototype.sortObjects_ = function (t, e) {
    return (
      (t = t.getRelativeToSurfaceXY()),
      (e = e.getRelativeToSurfaceXY()),
      t.y +
        Blockly.Workspace.prototype.sortObjects_.offset * t.x -
        (e.y + Blockly.Workspace.prototype.sortObjects_.offset * e.x)
    );
  }),
  (Blockly.Workspace.prototype.addTopBlock = function (t) {
    this.topBlocks_.push(t);
  }),
  (Blockly.Workspace.prototype.removeTopBlock = function (t) {
    if (!Blockly.utils.arrayRemove(this.topBlocks_, t))
      throw Error("Block not present in workspace's list of top-most blocks.");
  }),
  (Blockly.Workspace.prototype.getTopBlocks = function (t) {
    var e = [].concat(this.topBlocks_);
    return (
      t &&
        1 < e.length &&
        ((this.sortObjects_.offset = Math.sin(
          Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)
        )),
        this.RTL && (this.sortObjects_.offset *= -1),
        e.sort(this.sortObjects_)),
      e
    );
  }),
  (Blockly.Workspace.prototype.addTypedBlock = function (t) {
    this.typedBlocksDB_[t.type] || (this.typedBlocksDB_[t.type] = []),
      this.typedBlocksDB_[t.type].push(t);
  }),
  (Blockly.Workspace.prototype.removeTypedBlock = function (t) {
    this.typedBlocksDB_[t.type].splice(
      this.typedBlocksDB_[t.type].indexOf(t),
      1
    ),
      this.typedBlocksDB_[t.type].length || delete this.typedBlocksDB_[t.type];
  }),
  (Blockly.Workspace.prototype.getBlocksByType = function (t, e) {
    return this.typedBlocksDB_[t]
      ? ((t = this.typedBlocksDB_[t].slice(0)),
        e &&
          1 < t.length &&
          ((this.sortObjects_.offset = Math.sin(
            Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)
          )),
          this.RTL && (this.sortObjects_.offset *= -1),
          t.sort(this.sortObjects_)),
        t)
      : [];
  }),
  (Blockly.Workspace.prototype.addTopComment = function (t) {
    this.topComments_.push(t),
      this.commentDB_[t.id] &&
        console.warn(
          'Overriding an existing comment on this workspace, with id "' +
            t.id +
            '"'
        ),
      (this.commentDB_[t.id] = t);
  }),
  (Blockly.Workspace.prototype.removeTopComment = function (t) {
    if (!Blockly.utils.arrayRemove(this.topComments_, t))
      throw Error(
        "Comment not present in workspace's list of top-most comments."
      );
    delete this.commentDB_[t.id];
  }),
  (Blockly.Workspace.prototype.getTopComments = function (t) {
    var e = [].concat(this.topComments_);
    return (
      t &&
        1 < e.length &&
        ((this.sortObjects_.offset = Math.sin(
          Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)
        )),
        this.RTL && (this.sortObjects_.offset *= -1),
        e.sort(this.sortObjects_)),
      e
    );
  }),
  (Blockly.Workspace.prototype.getTopComments = function (t) {
    var e = [].concat(this.topComments_);
    if (t && 1 < e.length) {
      var o = Math.sin(goog.math.toRadians(Blockly.Workspace.SCAN_ANGLE));
      this.RTL && (o *= -1),
        e.sort(function (t, e) {
          return (
            (t = t.getRelativeToSurfaceXY()),
            (e = e.getRelativeToSurfaceXY()),
            t.y + o * t.x - (e.y + o * e.x)
          );
        });
    }
    return e;
  }),
  (Blockly.Workspace.prototype.getAllBlocks = function (t) {
    if (t) {
      t = this.getTopBlocks(!0);
      for (var e = [], o = 0; o < t.length; o++)
        e.push.apply(e, t[o].getDescendants(!0));
    } else
      for (e = this.getTopBlocks(!1), o = 0; o < e.length; o++)
        e.push.apply(e, e[o].getChildren(!1));
    return e.filter(function (t) {
      return !t.isInsertionMarker();
    });
  }),
  (Blockly.Workspace.prototype.clear = function () {
    this.isClearing = !0;
    try {
      var t = Blockly.Events.getGroup();
      for (t || Blockly.Events.setGroup(!0); this.topBlocks_.length; )
        this.topBlocks_[0].dispose(!1);
      for (; this.topComments_.length; )
        this.topComments_[this.topComments_.length - 1].dispose(!1);
      t || Blockly.Events.setGroup(!1),
        this.variableMap_.clear(),
        Blockly.DropDownDiv && Blockly.DropDownDiv.hideWithoutAnimation(),
        Blockly.WidgetDiv && Blockly.WidgetDiv.hide(!0),
        this.potentialVariableMap_ && this.potentialVariableMap_.clear();
    } finally {
      this.isClearing = !1;
    }
  }),
  (Blockly.Workspace.prototype.renameVariableById = function (t, e) {
    this.variableMap_.renameVariableById(t, e);
  }),
  (Blockly.Workspace.prototype.createVariable = function (t, e, o) {
    return this.variableMap_.createVariable(t, e, o);
  }),
  (Blockly.Workspace.prototype.getVariableUsesById = function (t) {
    return this.variableMap_.getVariableUsesById(t);
  }),
  (Blockly.Workspace.prototype.deleteVariableById = function (t) {
    this.variableMap_.deleteVariableById(t);
  }),
  (Blockly.Workspace.prototype.deleteVariableInternal_ = function (t, e) {
    this.variableMap_.deleteVariableInternal(t, e);
  }),
  (Blockly.Workspace.prototype.variableIndexOf = function (t) {
    return (
      console.warn(
        "Deprecated call to Blockly.Workspace.prototype.variableIndexOf"
      ),
      -1
    );
  }),
  (Blockly.Workspace.prototype.getVariable = function (t, e) {
    return this.variableMap_.getVariable(t, e);
  }),
  (Blockly.Workspace.prototype.getVariableById = function (t) {
    return this.variableMap_.getVariableById(t);
  }),
  (Blockly.Workspace.prototype.getVariablesOfType = function (t) {
    return this.variableMap_.getVariablesOfType(t);
  }),
  (Blockly.Workspace.prototype.getVariableTypes = function () {
    return this.variableMap_.getVariableTypes(this);
  }),
  (Blockly.Workspace.prototype.getAllVariables = function () {
    return this.variableMap_.getAllVariables();
  }),
  (Blockly.Workspace.prototype.getAllVariableNames = function () {
    return this.variableMap_.getAllVariableNames();
  }),
  (Blockly.Workspace.prototype.getWidth = function () {
    return 0;
  }),
  (Blockly.Workspace.prototype.newBlock = function (t, e) {
    return (
      (t = new Blockly.Block(this, t, e)),
      this.loadingEventsDisabled || t.onLoadedIntoWorkspace(),
      t
    );
  }),
  (Blockly.Workspace.prototype.remainingCapacity = function () {
    return isNaN(this.options.maxBlocks)
      ? 1 / 0
      : this.options.maxBlocks - this.getAllBlocks(!1).length;
  }),
  (Blockly.Workspace.prototype.remainingCapacityOfType = function (t) {
    return this.options.maxInstances
      ? (this.options.maxInstances[t] || 1 / 0) -
          this.getBlocksByType(t, !1).length
      : 1 / 0;
  }),
  (Blockly.Workspace.prototype.isCapacityAvailable = function (t) {
    if (!this.hasBlockLimits()) return !0;
    var e,
      o = 0;
    for (e in t) {
      if (t[e] > this.remainingCapacityOfType(e)) return !1;
      o += t[e];
    }
    return !(o > this.remainingCapacity());
  }),
  (Blockly.Workspace.prototype.hasBlockLimits = function () {
    return 1 / 0 != this.options.maxBlocks || !!this.options.maxInstances;
  }),
  (Blockly.Workspace.prototype.undo = function (t) {
    var e = t ? this.redoStack_ : this.undoStack_,
      o = t ? this.undoStack_ : this.redoStack_,
      i = e.pop();
    if (i) {
      for (
        var n = [i];
        e.length && i.group && i.group == e[e.length - 1].group;

      )
        n.push(e.pop());
      for (e = 0; (i = n[e]); e++) o.push(i);
      (n = Blockly.Events.filter(n, t)), (Blockly.Events.recordUndo = !1);
      try {
        for (e = 0; (i = n[e]); e++) i.run(t);
      } finally {
        Blockly.Events.recordUndo = !0;
      }
    }
  }),
  (Blockly.Workspace.prototype.clearUndo = function () {
    (this.undoStack_.length = 0),
      (this.redoStack_.length = 0),
      Blockly.Events.clearPendingUndo();
  }),
  (Blockly.Workspace.prototype.hasRedoStack = function () {
    return 0 != this.redoStack_.length;
  }),
  (Blockly.Workspace.prototype.hasUndoStack = function () {
    return 0 != this.undoStack_.length;
  }),
  (Blockly.Workspace.prototype.addChangeListener = function (t) {
    return this.listeners_.push(t), t;
  }),
  (Blockly.Workspace.prototype.removeChangeListener = function (t) {
    Blockly.utils.arrayRemove(this.listeners_, t);
  }),
  (Blockly.Workspace.prototype.fireChangeListener = function (t) {
    if (t.recordUndo)
      for (
        this.undoStack_.push(t), this.redoStack_.length = 0;
        this.undoStack_.length > this.MAX_UNDO && 0 <= this.MAX_UNDO;

      )
        this.undoStack_.shift();
    for (var e, o = 0; (e = this.listeners_[o]); o++) e(t);
  }),
  (Blockly.Workspace.prototype.getBlockById = function (t) {
    var e = this.blockDB_[t];
    return (
      !e &&
        this.getFlyout() &&
        this.getFlyout().getWorkspace() &&
        (e = this.getFlyout().getWorkspace().blockDB_[t]),
      e || null
    );
  }),
  (Blockly.Workspace.prototype.getFlyout = function () {
    return null;
  }),
  (Blockly.Workspace.prototype.getCommentById = function (t) {
    return this.commentDB_[t] || null;
  }),
  (Blockly.Workspace.prototype.addCommentById = function (t) {
    this.commentDB_[t.id] &&
      console.warn(
        'Overriding an existing comment on this workspace, with id "' +
          t.id +
          '"'
      ),
      (this.commentDB_[t.id] = t);
  }),
  (Blockly.Workspace.prototype.removeCommentById = function (t) {
    delete this.commentDB_[t];
  }),
  (Blockly.Workspace.prototype.setBlockById = function (t, e) {
    this.blockDB_[t] = e;
  }),
  (Blockly.Workspace.prototype.removeBlockById = function (t) {
    delete this.blockDB_[t];
  }),
  (Blockly.Workspace.prototype.getCommentById = function (t) {
    return this.commentDB_[t] || null;
  }),
  (Blockly.Workspace.prototype.allInputsFilled = function (t) {
    for (var e, o = this.getTopBlocks(!1), i = 0; (e = o[i]); i++)
      if (!e.allInputsFilled(t)) return !1;
    return !0;
  }),
  (Blockly.Workspace.prototype.getPotentialVariableMap = function () {
    return this.potentialVariableMap_;
  }),
  (Blockly.Workspace.prototype.createPotentialVariableMap = function () {
    this.potentialVariableMap_ = new Blockly.VariableMap(this);
  }),
  (Blockly.Workspace.prototype.getVariableMap = function () {
    return this.variableMap_;
  }),
  (Blockly.Workspace.prototype.setVariableMap = function (t) {
    this.variableMap_ = t;
  }),
  (Blockly.Workspace.WorkspaceDB_ = Object.create(null)),
  (Blockly.Workspace.getById = function (t) {
    return Blockly.Workspace.WorkspaceDB_[t] || null;
  }),
  (Blockly.Workspace.prototype.setDebugModeOption = function (t) {
    this.options.debugMode = t;
  }),
  (Blockly.Workspace.getAll = function () {
    var t,
      e = [];
    for (t in Blockly.Workspace.WorkspaceDB_)
      e.push(Blockly.Workspace.WorkspaceDB_[t]);
    return e;
  }),
  (Blockly.Bubble = function (t, e, o, i, n, l) {
    (this.workspace_ = t),
      (this.content_ = e),
      (this.shape_ = o),
      (this.onMouseDownResizeWrapper_ =
        this.onMouseDownBubbleWrapper_ =
        this.moveCallback_ =
        this.resizeCallback_ =
          null),
      (this.disposed = !1),
      (o = Blockly.Bubble.ARROW_ANGLE),
      this.workspace_.RTL && (o = -o),
      (this.arrow_radians_ = Blockly.utils.math.toRadians(o)),
      t.getBubbleCanvas().appendChild(this.createDom_(e, !(!n || !l))),
      this.setAnchorLocation(i),
      (n && l) ||
        ((n =
          (t = this.content_.getBBox()).width +
          2 * Blockly.Bubble.BORDER_WIDTH),
        (l = t.height + 2 * Blockly.Bubble.BORDER_WIDTH)),
      this.setBubbleSize(n, l),
      this.positionBubble_(),
      this.renderArrow_(),
      (this.rendered_ = !0);
  }),
  (Blockly.Bubble.BORDER_WIDTH = 1),
  (Blockly.Bubble.RESIZE_SIZE = 12 * Blockly.Bubble.BORDER_WIDTH),
  (Blockly.Bubble.ARROW_THICKNESS = 5),
  (Blockly.Bubble.ARROW_ANGLE = 20),
  (Blockly.Bubble.ARROW_BEND = 4),
  (Blockly.Bubble.ANCHOR_RADIUS = 8),
  (Blockly.Bubble.LINE_THICKNESS = 1),
  (Blockly.Bubble.onMouseUpWrapper_ = null),
  (Blockly.Bubble.onMouseMoveWrapper_ = null),
  (Blockly.Bubble.unbindDragEvents_ = function () {
    Blockly.Bubble.onMouseUpWrapper_ &&
      (Blockly.unbindEvent_(Blockly.Bubble.onMouseUpWrapper_),
      (Blockly.Bubble.onMouseUpWrapper_ = null)),
      Blockly.Bubble.onMouseMoveWrapper_ &&
        (Blockly.unbindEvent_(Blockly.Bubble.onMouseMoveWrapper_),
        (Blockly.Bubble.onMouseMoveWrapper_ = null));
  }),
  (Blockly.Bubble.bubbleMouseUp_ = function (t) {
    Blockly.Touch.clearTouchIdentifier(), Blockly.Bubble.unbindDragEvents_();
  }),
  (Blockly.Bubble.prototype.rendered_ = !1),
  (Blockly.Bubble.prototype.anchorXY_ = null),
  (Blockly.Bubble.prototype.relativeLeft_ = 0),
  (Blockly.Bubble.prototype.relativeTop_ = 0),
  (Blockly.Bubble.prototype.width_ = 0),
  (Blockly.Bubble.prototype.height_ = 0),
  (Blockly.Bubble.prototype.autoLayout_ = !0),
  (Blockly.Bubble.prototype.useArrow_ = !1),
  (Blockly.Bubble.prototype.createDom_ = function (t, e) {
    this.bubbleGroup_ = Blockly.utils.dom.createSvgElement("g", {}, null);
    var o = {
      filter:
        "url(#" +
        this.workspace_.getRenderer().getConstants().embossFilterId +
        ")",
    };
    return (
      (!Blockly.utils.userAgent.JAVA_FX && this.useArrow_) || (o = {}),
      (o = Blockly.utils.dom.createSvgElement("g", o, this.bubbleGroup_)),
      (this.bubbleArrow_ = Blockly.utils.dom.createSvgElement(
        this.useArrow_ ? "path" : "line",
        {},
        o
      )),
      (this.bubbleBack_ = Blockly.utils.dom.createSvgElement(
        "rect",
        {
          class: "blocklyDraggable",
          x: 0,
          y: 0,
          rx: Blockly.Bubble.BORDER_WIDTH,
          ry: Blockly.Bubble.BORDER_WIDTH,
        },
        o
      )),
      this.bubbleGroup_.appendChild(t),
      e
        ? ((this.resizeGroup_ = Blockly.utils.dom.createSvgElement(
            "g",
            {
              class: this.workspace_.RTL
                ? "blocklyResizeSW"
                : "blocklyResizeSE",
            },
            this.bubbleGroup_
          )),
          (t = Blockly.Bubble.RESIZE_SIZE),
          Blockly.utils.dom.createSvgElement(
            "polygon",
            { points: "0,x x,x x,0".replace(/x/g, t.toString()) },
            this.resizeGroup_
          ),
          Blockly.utils.dom.createSvgElement(
            "line",
            {
              class: "blocklyResizeLine",
              x1: t / 3,
              y1: t - 1,
              x2: t - 1,
              y2: t / 3,
            },
            this.resizeGroup_
          ),
          Blockly.utils.dom.createSvgElement(
            "line",
            {
              class: "blocklyResizeLine",
              x1: (2 * t) / 3,
              y1: t - 1,
              x2: t - 1,
              y2: (2 * t) / 3,
            },
            this.resizeGroup_
          ))
        : (this.resizeGroup_ = null),
      this.workspace_.options.readOnly ||
        ((this.onMouseDownBubbleWrapper_ = Blockly.bindEventWithChecks_(
          this.bubbleBack_,
          "mousedown",
          this,
          this.bubbleMouseDown_
        )),
        this.resizeGroup_ &&
          (this.onMouseDownResizeWrapper_ = Blockly.bindEventWithChecks_(
            this.resizeGroup_,
            "mousedown",
            this,
            this.resizeMouseDown_
          ))),
      this.bubbleGroup_
    );
  }),
  (Blockly.Bubble.prototype.getSvgRoot = function () {
    return this.bubbleGroup_;
  }),
  (Blockly.Bubble.prototype.setSvgId = function (t) {
    this.bubbleGroup_.dataset && (this.bubbleGroup_.dataset.blockId = t);
  }),
  (Blockly.Bubble.prototype.bubbleMouseDown_ = function (t) {
    var e = this.workspace_.getGesture(t);
    e && e.handleBubbleStart(t, this);
  }),
  (Blockly.Bubble.prototype.showContextMenu = function (t) {}),
  (Blockly.Bubble.prototype.isDeletable = function () {
    return !1;
  }),
  (Blockly.Bubble.prototype.resizeMouseDown_ = function (t) {
    this.promote(),
      Blockly.Bubble.unbindDragEvents_(),
      Blockly.utils.isRightButton(t) ||
        (this.workspace_.startDrag(
          t,
          new Blockly.utils.Coordinate(
            this.workspace_.RTL ? -this.width_ : this.width_,
            this.height_
          )
        ),
        (Blockly.Bubble.onMouseUpWrapper_ = Blockly.bindEventWithChecks_(
          document,
          "mouseup",
          this,
          Blockly.Bubble.bubbleMouseUp_
        )),
        (Blockly.Bubble.onMouseMoveWrapper_ = Blockly.bindEventWithChecks_(
          document,
          "mousemove",
          this,
          this.resizeMouseMove_
        )),
        Blockly.hideChaff()),
      t.stopPropagation();
  }),
  (Blockly.Bubble.prototype.resizeMouseMove_ = function (t) {
    (this.autoLayout_ = !1),
      (t = this.workspace_.moveDrag(t)),
      this.setBubbleSize(this.workspace_.RTL ? -t.x : t.x, t.y),
      this.workspace_.RTL && this.positionBubble_();
  }),
  (Blockly.Bubble.prototype.registerResizeEvent = function (t) {
    this.resizeCallback_ = t;
  }),
  (Blockly.Bubble.prototype.registerMoveEvent = function (t) {
    this.moveCallback_ = t;
  }),
  (Blockly.Bubble.prototype.promote = function () {
    var t = this.bubbleGroup_.parentNode;
    return (
      t.lastChild !== this.bubbleGroup_ &&
      (t.appendChild(this.bubbleGroup_), !0)
    );
  }),
  (Blockly.Bubble.prototype.setAnchorLocation = function (t) {
    (this.anchorXY_ = t), this.rendered_ && this.positionBubble_();
  }),
  (Blockly.Bubble.prototype.layoutBubble_ = function () {
    var t = this.workspace_.getMetrics();
    (t.viewLeft /= this.workspace_.scale),
      (t.viewWidth /= this.workspace_.scale),
      (t.viewTop /= this.workspace_.scale),
      (t.viewHeight /= this.workspace_.scale);
    var e = this.getOptimalRelativeLeft_(t),
      o = this.getOptimalRelativeTop_(t),
      i = this.shape_.getBBox(),
      n = {
        x: e,
        y:
          -this.height_ -
          this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT,
      },
      l = { x: -this.width_ - 30, y: o };
    o = { x: i.width, y: o };
    var r = { x: e, y: i.height };
    (e = i.width < i.height ? o : r),
      (i = i.width < i.height ? r : o),
      (o = this.getOverlap_(n, t)),
      (r = this.getOverlap_(l, t));
    var s = this.getOverlap_(e, t);
    (t = this.getOverlap_(i, t)),
      o == (t = Math.max(o, r, s, t))
        ? ((this.relativeLeft_ = n.x), (this.relativeTop_ = n.y))
        : r == t
        ? ((this.relativeLeft_ = l.x), (this.relativeTop_ = l.y))
        : s == t
        ? ((this.relativeLeft_ = e.x), (this.relativeTop_ = e.y))
        : ((this.relativeLeft_ = i.x), (this.relativeTop_ = i.y));
  }),
  (Blockly.Bubble.prototype.getOverlap_ = function (t, e) {
    var o = this.workspace_.RTL
      ? this.anchorXY_.x - t.x - this.width_
      : t.x + this.anchorXY_.x;
    return (
      (t = t.y + this.anchorXY_.y),
      Math.max(
        0,
        Math.min(
          1,
          ((Math.min(o + this.width_, e.viewLeft + e.viewWidth) -
            Math.max(o, e.viewLeft)) *
            (Math.min(t + this.height_, e.viewTop + e.viewHeight) -
              Math.max(t, e.viewTop))) /
            (this.width_ * this.height_)
        )
      )
    );
  }),
  (Blockly.Bubble.prototype.getOptimalRelativeLeft_ = function (t) {
    var e = -this.width_ / 4;
    if (this.width_ > t.viewWidth) return e;
    if (this.workspace_.RTL)
      var o = this.anchorXY_.x - e,
        i = o - this.width_,
        n = t.viewLeft + t.viewWidth,
        l =
          t.viewLeft +
          Blockly.Scrollbar.scrollbarThickness / this.workspace_.scale;
    else
      (o = (i = e + this.anchorXY_.x) + this.width_),
        (l = t.viewLeft),
        (n =
          t.viewLeft +
          t.viewWidth -
          Blockly.Scrollbar.scrollbarThickness / this.workspace_.scale);
    return (
      this.workspace_.RTL
        ? i < l
          ? (e = -(l - this.anchorXY_.x + this.width_))
          : o > n && (e = -(n - this.anchorXY_.x))
        : i < l
        ? (e = l - this.anchorXY_.x)
        : o > n && (e = n - this.anchorXY_.x - this.width_),
      e
    );
  }),
  (Blockly.Bubble.prototype.getOptimalRelativeTop_ = function (t) {
    var e = -this.height_ / 4;
    if (this.height_ > t.viewHeight) return e;
    var o = this.anchorXY_.y + e,
      i = o + this.height_,
      n = t.viewTop;
    t =
      t.viewTop +
      t.viewHeight -
      Blockly.Scrollbar.scrollbarThickness / this.workspace_.scale;
    var l = this.anchorXY_.y;
    return o < n ? (e = n - l) : i > t && (e = t - l - this.height_), e;
  }),
  (Blockly.Bubble.prototype.positionBubble_ = function () {
    var t = this.anchorXY_.x;
    (t = this.workspace_.RTL ? t - this.relativeLeft_ : t + this.relativeLeft_),
      this.moveTo(t, this.relativeTop_ + this.anchorXY_.y);
  }),
  (Blockly.Bubble.prototype.moveTo = function (t, e) {
    this.bubbleGroup_.setAttribute(
      "transform",
      "translate(" + t + "," + e + ")"
    );
  }),
  (Blockly.Bubble.prototype.setDragging = function (t) {
    !t && this.moveCallback_ && this.moveCallback_();
  }),
  (Blockly.Bubble.prototype.getBubbleSize = function () {
    return new Blockly.utils.Size(this.width_, this.height_);
  }),
  (Blockly.Bubble.prototype.setBubbleSize = function (t, e) {
    var o = 2 * Blockly.Bubble.BORDER_WIDTH;
    if (
      ((t = Math.max(t, o + 45)),
      (e = Math.max(e, o + 20)),
      (this.width_ = t),
      (this.height_ = e),
      this.bubbleBack_.setAttribute("width", t),
      this.bubbleBack_.setAttribute("height", e),
      this.resizeGroup_)
    ) {
      var i = Blockly.Bubble.RESIZE_SIZE;
      this.workspace_.RTL
        ? this.resizeGroup_.setAttribute(
            "transform",
            "translate(" + i + "," + (e - o) + ") scale(-1 1)"
          )
        : this.resizeGroup_.setAttribute(
            "transform",
            "translate(" + (t - i) + "," + (e - i) + ")"
          );
    }
    this.autoLayout_ && this.layoutBubble_(),
      this.positionBubble_(),
      this.renderArrow_(),
      this.resizeCallback_ && this.resizeCallback_();
  }),
  (Blockly.Bubble.prototype.renderArrow_ = function () {
    this.useArrow_ ? this.drawArrow_() : this.drawLine_();
  }),
  (Blockly.Bubble.prototype.drawArrow_ = function () {
    var t = [],
      e = this.width_ / 2,
      o = this.height_ / 2,
      i = -this.relativeLeft_,
      n = -this.relativeTop_;
    if (e == i && o == n) t.push("M " + e + "," + o);
    else {
      (n -= o), (i -= e), this.workspace_.RTL && (i *= -1);
      var l = Math.sqrt(n * n + i * i),
        r = Math.acos(i / l);
      0 > n && (r = 2 * Math.PI - r);
      var s = r + Math.PI / 2;
      s > 2 * Math.PI && (s -= 2 * Math.PI);
      var a = Math.sin(s),
        c = Math.cos(s),
        g = this.getBubbleSize();
      (s = (g.width + g.height) / Blockly.Bubble.ARROW_THICKNESS),
        (s = Math.min(s, g.width, g.height) / 4),
        (i = e + (g = 1 - Blockly.Bubble.ANCHOR_RADIUS / l) * i),
        (n = o + g * n),
        (g = e + s * c);
      var u = o + s * a;
      (e -= s * c),
        (o -= s * a),
        (a = r + this.arrow_radians_) > 2 * Math.PI && (a -= 2 * Math.PI),
        (r = (Math.sin(a) * l) / Blockly.Bubble.ARROW_BEND),
        (l = (Math.cos(a) * l) / Blockly.Bubble.ARROW_BEND),
        t.push("M" + g + "," + u),
        t.push(
          "C" + (g + l) + "," + (u + r) + " " + i + "," + n + " " + i + "," + n
        ),
        t.push(
          "C" + i + "," + n + " " + (e + l) + "," + (o + r) + " " + e + "," + o
        );
    }
    t.push("z"), this.bubbleArrow_.setAttribute("d", t.join(" "));
  }),
  (Blockly.Bubble.prototype.drawLine_ = function () {
    var t = this.width_ / 2,
      e = Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT / 2,
      o = -this.relativeLeft_,
      i = -this.relativeTop_;
    (t == o && e == i) ||
      ((i -= e),
      (o -= t),
      this.workspace_.RTL && (o = -1 * o - this.width_),
      this.bubbleArrow_.setAttribute("x1", t),
      this.bubbleArrow_.setAttribute("y1", e),
      this.bubbleArrow_.setAttribute("x2", t + o),
      this.bubbleArrow_.setAttribute("y2", e + i),
      this.bubbleArrow_.setAttribute(
        "stroke-width",
        Blockly.Bubble.LINE_THICKNESS
      ));
  }),
  (Blockly.Bubble.prototype.setColour = function (t, e) {
    this.bubbleBack_.setAttribute("fill", t),
      this.useArrow_
        ? this.bubbleArrow_.setAttribute("fill", t)
        : (this.bubbleBack_.setAttribute("stroke", e),
          this.bubbleArrow_.setAttribute("stroke", e));
  }),
  (Blockly.Bubble.prototype.dispose = function () {
    this.onMouseDownBubbleWrapper_ &&
      Blockly.unbindEvent_(this.onMouseDownBubbleWrapper_),
      this.onMouseDownResizeWrapper_ &&
        Blockly.unbindEvent_(this.onMouseDownResizeWrapper_),
      Blockly.Bubble.unbindDragEvents_(),
      Blockly.utils.dom.removeNode(this.bubbleGroup_),
      (this.disposed = !0);
  }),
  (Blockly.Bubble.prototype.moveDuringDrag = function (t, e) {
    t ? t.translateSurface(e.x, e.y) : this.moveTo(e.x, e.y),
      (this.relativeLeft_ = this.workspace_.RTL
        ? this.anchorXY_.x - e.x - this.width_
        : e.x - this.anchorXY_.x),
      (this.relativeTop_ = e.y - this.anchorXY_.y),
      this.renderArrow_();
  }),
  (Blockly.Bubble.prototype.getRelativeToSurfaceXY = function () {
    return new Blockly.utils.Coordinate(
      this.workspace_.RTL
        ? -this.relativeLeft_ + this.anchorXY_.x - this.width_
        : this.anchorXY_.x + this.relativeLeft_,
      this.anchorXY_.y + this.relativeTop_
    );
  }),
  (Blockly.Bubble.prototype.setAutoLayout = function (t) {
    this.autoLayout_ = t;
  }),
  (Blockly.Events.CommentBase = function (t) {
    (this.commentId = t.id),
      (this.workspaceId = t.workspace.id),
      (this.blockId = t.blockId || null),
      (this.group = Blockly.Events.getGroup()),
      (this.recordUndo = Blockly.Events.recordUndo);
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.CommentBase,
    Blockly.Events.Abstract
  ),
  (Blockly.Events.CommentBase.prototype.toJson = function () {
    var t = Blockly.Events.CommentBase.superClass_.toJson.call(this);
    return (
      this.commentId && (t.commentId = this.commentId),
      this.blockId && (t.blockId = this.blockId),
      t
    );
  }),
  (Blockly.Events.CommentBase.prototype.fromJson = function (t) {
    Blockly.Events.CommentBase.superClass_.fromJson.call(this, t),
      (this.commentId = t.commentId),
      (this.group = t.group),
      (this.blockId = t.blockId);
  }),
  (Blockly.Events.CommentBase.prototype.getComment_ = function () {
    return this.getEventWorkspace_().getCommentById(this.commentId);
  }),
  (Blockly.Events.CommentChange = function (t, e, o) {
    t &&
      (Blockly.Events.CommentChange.superClass_.constructor.call(this, t),
      (this.oldContents_ = e),
      (this.newContents_ = o));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.CommentChange,
    Blockly.Events.CommentBase
  ),
  (Blockly.Events.CommentChange.prototype.type = Blockly.Events.COMMENT_CHANGE),
  (Blockly.Events.CommentChange.prototype.toJson = function () {
    var t = Blockly.Events.CommentChange.superClass_.toJson.call(this);
    return (t.newContents = this.newContents_), t;
  }),
  (Blockly.Events.CommentChange.prototype.fromJson = function (t) {
    Blockly.Events.CommentChange.superClass_.fromJson.call(this, t),
      (this.newContents_ = t.newValue);
  }),
  (Blockly.Events.CommentChange.prototype.isNull = function () {
    return this.oldContents_ == this.newContents_;
  }),
  (Blockly.Events.CommentChange.prototype.run = function (t) {
    var e = this.getComment_();
    e
      ? ((t = t ? this.newContents_ : this.oldContents_).hasOwnProperty(
          "minimized"
        ) && e.setMinimized(t.minimized),
        t.hasOwnProperty("width") &&
          t.hasOwnProperty("height") &&
          e.setSize(t.width, t.height),
        t.hasOwnProperty("text") && e.setContent(t.text))
      : console.warn("Can't change non-existent comment: " + this.commentId);
  }),
  (Blockly.Events.CommentCreate = function (t) {
    t &&
      (Blockly.Events.CommentCreate.superClass_.constructor.call(this, t),
      (this.text = t.getContent()),
      (this.xy = t.getXY()),
      (this.width = t.getWidth()),
      (this.height = t.getHeight()),
      (this.minimized = t.isMinimized() || !1),
      (this.xml = t.toXmlWithXY()));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.CommentCreate,
    Blockly.Events.CommentBase
  ),
  (Blockly.Events.CommentCreate.prototype.type = Blockly.Events.COMMENT_CREATE),
  (Blockly.Events.CommentCreate.prototype.toJson = function () {
    var t = Blockly.Events.CommentCreate.superClass_.toJson.call(this);
    return (t.xml = Blockly.Xml.domToText(this.xml)), t;
  }),
  (Blockly.Events.CommentCreate.prototype.fromJson = function (t) {
    Blockly.Events.CommentCreate.superClass_.fromJson.call(this, t),
      (this.xml = Blockly.Xml.textToDom("<xml>" + t.xml + "</xml>").firstChild);
  }),
  (Blockly.Events.CommentCreate.prototype.run = function (t) {
    if (t)
      if (((t = this.getEventWorkspace_()), this.blockId))
        (t = t.getBlockById(this.blockId)) &&
          t.setCommentText(
            "",
            this.commentId,
            this.xy.x,
            this.xy.y,
            this.minimized
          );
      else {
        var e = Blockly.utils.xml.createElement("xml");
        e.appendChild(this.xml), Blockly.Xml.domToWorkspace(e, t);
      }
    else
      (t = this.getComment_())
        ? t.dispose(!1, !1)
        : console.warn(
            "Can't uncreate non-existent comment: " + this.commentId
          );
  }),
  (Blockly.Events.CommentDelete = function (t) {
    t &&
      (Blockly.Events.CommentDelete.superClass_.constructor.call(this, t),
      (this.xy = t.getXY()),
      (this.minimized = t.isMinimized() || !1),
      (this.text = t.getContent()),
      (this.height = t.getHeight()),
      (this.width = t.getWidth()),
      (this.xml = t.toXmlWithXY()));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.CommentDelete,
    Blockly.Events.CommentBase
  ),
  (Blockly.Events.CommentDelete.prototype.type = Blockly.Events.COMMENT_DELETE),
  (Blockly.Events.CommentDelete.prototype.toJson = function () {
    return Blockly.Events.CommentDelete.superClass_.toJson.call(this);
  }),
  (Blockly.Events.CommentDelete.prototype.fromJson = function (t) {
    Blockly.Events.CommentDelete.superClass_.fromJson.call(this, t);
  }),
  (Blockly.Events.CommentDelete.prototype.run = function (t) {
    if (t)
      (t = this.getComment_())
        ? t.dispose(!1, !1)
        : console.warn("Can't delete non-existent comment: " + this.commentId);
    else if (((t = this.getEventWorkspace_()), this.blockId))
      (t = t.getBlockById(this.blockId)).setCommentText(
        this.text,
        this.commentId,
        this.xy.x,
        this.xy.y,
        this.minimized
      ),
        t.comment.setSize(this.width, this.height);
    else {
      var e = Blockly.utils.xml.createElement("xml");
      e.appendChild(this.xml), Blockly.Xml.domToWorkspace(e, t);
    }
  }),
  (Blockly.Events.CommentMove = function (t) {
    t &&
      (Blockly.Events.CommentMove.superClass_.constructor.call(this, t),
      (this.comment_ = t),
      (this.workspaceWidth_ = t.workspace.getWidth()),
      (this.oldCoordinate_ = this.currentLocation_()),
      (this.newCoordinate_ = null));
  }),
  Blockly.utils.object.inherits(
    Blockly.Events.CommentMove,
    Blockly.Events.CommentBase
  ),
  (Blockly.Events.CommentMove.prototype.currentLocation_ = function () {
    var t = this.comment_.getXY();
    if (!this.comment_.workspace.RTL) return t;
    if (this.comment_ instanceof Blockly.ScratchBlockComment) {
      var e = this.comment_.getBubbleSize().width;
      e = this.workspaceWidth_ - t.x - e;
    } else e = this.workspaceWidth_ - t.x;
    return new Blockly.utils.Coordinate(e, t.y);
  }),
  (Blockly.Events.CommentMove.prototype.recordNew = function () {
    if (!this.comment_)
      throw Error(
        "Tried to record the new position of a comment on the same event twice."
      );
    (this.newCoordinate_ = this.currentLocation_()), (this.comment_ = null);
  }),
  (Blockly.Events.CommentMove.prototype.type = Blockly.Events.COMMENT_MOVE),
  (Blockly.Events.CommentMove.prototype.setOldCoordinate = function (t) {
    this.oldCoordinate_ = new Blockly.utils.Coordinate(
      this.comment_.workspace.RTL ? this.workspaceWidth_ - t.x : t.x,
      t.y
    );
  }),
  (Blockly.Events.CommentMove.prototype.toJson = function () {
    var t = Blockly.Events.CommentMove.superClass_.toJson.call(this);
    return (
      this.newCoordinate_ &&
        (t.newCoordinate =
          Math.round(this.newCoordinate_.x) +
          "," +
          Math.round(this.newCoordinate_.y)),
      t
    );
  }),
  (Blockly.Events.CommentMove.prototype.fromJson = function (t) {
    Blockly.Events.CommentMove.superClass_.fromJson.call(this, t),
      t.newCoordinate &&
        ((t = t.newCoordinate.split(",")),
        (this.newCoordinate_ = new Blockly.utils.Coordinate(
          Number(t[0]),
          Number(t[1])
        )));
  }),
  (Blockly.Events.CommentMove.prototype.isNull = function () {
    return Blockly.utils.Coordinate.equals(
      this.oldCoordinate_,
      this.newCoordinate_
    );
  }),
  (Blockly.Events.CommentMove.prototype.run = function (t) {
    var e = this.getComment_();
    if (e) {
      t = t ? this.newCoordinate_ : this.oldCoordinate_;
      var o = e.getXY();
      e.workspace.RTL
        ? e.moveBy(-(t.x - (this.workspaceWidth_ - o.x)), t.y - o.y)
        : e.moveBy(t.x - o.x, t.y - o.y);
    } else console.warn("Can't move non-existent comment: " + this.commentId);
  }),
  (Blockly.BubbleDragger = function (t, e) {
    (this.draggingBubble_ = t),
      (this.workspace_ = e),
      (this.deleteArea_ = null),
      (this.wouldDeleteBubble_ = !1),
      (this.startXY_ = this.draggingBubble_.getRelativeToSurfaceXY()),
      (this.dragSurface_ =
        Blockly.utils.is3dSupported() && e.getBlockDragSurface()
          ? e.getBlockDragSurface()
          : null);
  }),
  (Blockly.BubbleDragger.prototype.dispose = function () {
    this.dragSurface_ = this.workspace_ = this.draggingBubble_ = null;
  }),
  (Blockly.BubbleDragger.prototype.startBubbleDrag = function () {
    Blockly.Events.getGroup() || Blockly.Events.setGroup(!0),
      this.workspace_.setResizesEnabled(!1),
      this.draggingBubble_.setAutoLayout(!1),
      this.dragSurface_ && this.moveToDragSurface_(),
      this.draggingBubble_.setDragging && this.draggingBubble_.setDragging(!0);
    var t = this.workspace_.getToolbox();
    if (t) {
      var e = this.draggingBubble_.isDeletable()
        ? "blocklyToolboxDelete"
        : "blocklyToolboxGrab";
      t.addStyle(e);
    }
  }),
  (Blockly.BubbleDragger.prototype.dragBubble = function (t, e) {
    (e = this.pixelsToWorkspaceUnits_(e)),
      (e = Blockly.utils.Coordinate.sum(this.startXY_, e)),
      this.draggingBubble_.moveDuringDrag(this.dragSurface_, e),
      this.draggingBubble_.isDeletable() &&
        ((this.deleteArea_ = this.workspace_.isDeleteArea(t)),
        this.updateCursorDuringBubbleDrag_());
  }),
  (Blockly.BubbleDragger.prototype.maybeDeleteBubble_ = function () {
    var t = this.workspace_.trashcan;
    return (
      this.wouldDeleteBubble_
        ? (t && setTimeout(t.close.bind(t), 100),
          this.fireMoveEvent_(),
          this.draggingBubble_.dispose(!1, !0))
        : t && t.close(),
      this.wouldDeleteBubble_
    );
  }),
  (Blockly.BubbleDragger.prototype.updateCursorDuringBubbleDrag_ = function () {
    this.wouldDeleteBubble_ = this.deleteArea_ != Blockly.DELETE_AREA_NONE;
    var t = this.workspace_.trashcan;
    this.wouldDeleteBubble_
      ? (this.draggingBubble_.setDeleteStyle(!0),
        this.deleteArea_ == Blockly.DELETE_AREA_TRASH && t && t.setOpen(!0))
      : (this.draggingBubble_.setDeleteStyle(!1), t && t.setOpen(!1));
  }),
  (Blockly.BubbleDragger.prototype.endBubbleDrag = function (t, e) {
    this.dragBubble(t, e),
      (t = this.pixelsToWorkspaceUnits_(e)),
      (t = Blockly.utils.Coordinate.sum(this.startXY_, t)),
      this.draggingBubble_.moveTo(t.x, t.y),
      this.maybeDeleteBubble_() ||
        (this.dragSurface_ &&
          this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),
        this.draggingBubble_.setDragging &&
          this.draggingBubble_.setDragging(!1),
        this.fireMoveEvent_()),
      this.workspace_.setResizesEnabled(!0),
      this.workspace_.getToolbox() &&
        ((t = this.draggingBubble_.isDeletable()
          ? "blocklyToolboxDelete"
          : "blocklyToolboxGrab"),
        this.workspace_.getToolbox().removeStyle(t)),
      Blockly.Events.setGroup(!1);
  }),
  (Blockly.BubbleDragger.prototype.fireMoveEvent_ = function () {
    if (this.draggingBubble_.isComment) {
      var t = new Blockly.Events.CommentMove(this.draggingBubble_);
      t.setOldCoordinate(this.startXY_), t.recordNew(), Blockly.Events.fire(t);
    }
  }),
  (Blockly.BubbleDragger.prototype.pixelsToWorkspaceUnits_ = function (t) {
    return (
      (t = new Blockly.utils.Coordinate(
        t.x / this.workspace_.scale,
        t.y / this.workspace_.scale
      )),
      this.workspace_.isMutator &&
        t.scale(1 / this.workspace_.options.parentWorkspace.scale),
      t
    );
  }),
  (Blockly.BubbleDragger.prototype.moveToDragSurface_ = function () {
    this.draggingBubble_.moveTo(0, 0),
      this.dragSurface_.translateSurface(this.startXY_.x, this.startXY_.y),
      this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot());
  }),
  (Blockly.WorkspaceDragger = function (t) {
    (this.workspace_ = t),
      (this.startScrollXY_ = new Blockly.utils.Coordinate(
        t.scrollX,
        t.scrollY
      ));
  }),
  (Blockly.WorkspaceDragger.prototype.dispose = function () {
    this.workspace_ = null;
  }),
  (Blockly.WorkspaceDragger.prototype.startDrag = function () {
    Blockly.selected && Blockly.selected.unselect(),
      this.workspace_.setupDragSurface();
  }),
  (Blockly.WorkspaceDragger.prototype.endDrag = function (t) {
    this.drag(t), this.workspace_.resetDragSurface();
  }),
  (Blockly.WorkspaceDragger.prototype.drag = function (t) {
    (t = Blockly.utils.Coordinate.sum(this.startScrollXY_, t)),
      this.workspace_.scroll(t.x, t.y);
  }),
  (Blockly.FlyoutDragger = function (t) {
    Blockly.FlyoutDragger.superClass_.constructor.call(this, t.getWorkspace()),
      (this.scrollbar_ = t.scrollbar_),
      (this.horizontalLayout_ = t.horizontalLayout_);
  }),
  Blockly.utils.object.inherits(
    Blockly.FlyoutDragger,
    Blockly.WorkspaceDragger
  ),
  (Blockly.FlyoutDragger.prototype.drag = function (t) {
    (t = Blockly.utils.Coordinate.sum(this.startScrollXY_, t)),
      this.horizontalLayout_
        ? this.scrollbar_.set(-t.x)
        : this.scrollbar_.set(-t.y);
  }),
  (Blockly.Action = function (t, e) {
    (this.name = t), (this.desc = e);
  }),
  (Blockly.navigation = {}),
  (Blockly.navigation.loggingCallback = null),
  (Blockly.navigation.STATE_FLYOUT = 1),
  (Blockly.navigation.STATE_WS = 2),
  (Blockly.navigation.STATE_TOOLBOX = 3),
  (Blockly.navigation.WS_MOVE_DISTANCE = 40),
  (Blockly.navigation.currentState_ = Blockly.navigation.STATE_WS),
  (Blockly.navigation.actionNames = {
    PREVIOUS: "previous",
    NEXT: "next",
    IN: "in",
    OUT: "out",
    INSERT: "insert",
    MARK: "mark",
    DISCONNECT: "disconnect",
    TOOLBOX: "toolbox",
    EXIT: "exit",
    TOGGLE_KEYBOARD_NAV: "toggle_keyboard_nav",
    MOVE_WS_CURSOR_UP: "move workspace cursor up",
    MOVE_WS_CURSOR_DOWN: "move workspace cursor down",
    MOVE_WS_CURSOR_LEFT: "move workspace cursor left",
    MOVE_WS_CURSOR_RIGHT: "move workspace cursor right",
  }),
  (Blockly.navigation.MARKER_NAME = "local_marker_1"),
  (Blockly.navigation.getMarker = function () {
    return Blockly.getMainWorkspace().getMarker(Blockly.navigation.MARKER_NAME);
  }),
  (Blockly.navigation.focusToolbox_ = function () {
    var t = Blockly.getMainWorkspace().getToolbox();
    t &&
      ((Blockly.navigation.currentState_ = Blockly.navigation.STATE_TOOLBOX),
      Blockly.navigation.resetFlyout_(!1),
      Blockly.navigation.getMarker().getCurNode() ||
        Blockly.navigation.markAtCursor_(),
      t.selectFirstCategory());
  }),
  (Blockly.navigation.focusFlyout_ = function () {
    Blockly.navigation.currentState_ = Blockly.navigation.STATE_FLYOUT;
    var t = Blockly.getMainWorkspace(),
      e = t.getToolbox();
    (t = e ? e.flyout_ : t.getFlyout()),
      Blockly.navigation.getMarker().getCurNode() ||
        Blockly.navigation.markAtCursor_(),
      t &&
        t.getWorkspace() &&
        0 < (t = t.getWorkspace().getTopBlocks(!0)).length &&
        ((t = t[0]),
        (t = Blockly.ASTNode.createStackNode(t)),
        Blockly.navigation.getFlyoutCursor_().setCurNode(t));
  }),
  (Blockly.navigation.focusWorkspace_ = function () {
    Blockly.hideChaff();
    var t = Blockly.getMainWorkspace(),
      e = t.getCursor(),
      o = !!t.getToolbox(),
      i = t.getTopBlocks(!0);
    Blockly.navigation.resetFlyout_(o),
      (Blockly.navigation.currentState_ = Blockly.navigation.STATE_WS),
      0 < i.length
        ? e.setCurNode(Blockly.navigation.getTopNode(i[0]))
        : ((o = new Blockly.utils.Coordinate(100, 100)),
          (t = Blockly.ASTNode.createWorkspaceNode(t, o)),
          e.setCurNode(t));
  }),
  (Blockly.navigation.getFlyoutCursor_ = function () {
    var t = Blockly.getMainWorkspace(),
      e = null;
    return (
      t.rendered &&
        (e = (t = (e = t.getToolbox()) ? e.flyout_ : t.getFlyout())
          ? t.workspace_.getCursor()
          : null),
      e
    );
  }),
  (Blockly.navigation.insertFromFlyout = function () {
    var t = Blockly.getMainWorkspace(),
      e = t.getFlyout();
    if (e && e.isVisible()) {
      var o = Blockly.navigation.getFlyoutCursor_().getCurNode().getLocation();
      o.isEnabled()
        ? ((e = e.createBlock(o)).render(),
          e.setConnectionTracking(!0),
          t.getCursor().setCurNode(Blockly.ASTNode.createBlockNode(e)),
          Blockly.navigation.modify_() ||
            Blockly.navigation.warn_(
              "Something went wrong while inserting a block from the flyout."
            ),
          Blockly.navigation.focusWorkspace_(),
          t.getCursor().setCurNode(Blockly.navigation.getTopNode(e)),
          Blockly.navigation.removeMark_())
        : Blockly.navigation.warn_("Can't insert a disabled block.");
    } else
      Blockly.navigation.warn_(
        "Trying to insert from the flyout when the flyout does not  exist or is not visible"
      );
  }),
  (Blockly.navigation.resetFlyout_ = function (t) {
    Blockly.navigation.getFlyoutCursor_() &&
      (Blockly.navigation.getFlyoutCursor_().hide(),
      t && Blockly.getMainWorkspace().getFlyout().hide());
  }),
  (Blockly.navigation.modifyWarn_ = function () {
    var t = Blockly.navigation.getMarker().getCurNode(),
      e = Blockly.getMainWorkspace().getCursor().getCurNode();
    return t
      ? e
        ? ((t = t.getType()),
          (e = e.getType()),
          t == Blockly.ASTNode.types.FIELD
            ? (Blockly.navigation.warn_(
                "Should not have been able to mark a field."
              ),
              !1)
            : t == Blockly.ASTNode.types.BLOCK
            ? (Blockly.navigation.warn_(
                "Should not have been able to mark a block."
              ),
              !1)
            : t == Blockly.ASTNode.types.STACK
            ? (Blockly.navigation.warn_(
                "Should not have been able to mark a stack."
              ),
              !1)
            : e == Blockly.ASTNode.types.FIELD
            ? (Blockly.navigation.warn_(
                "Cannot attach a field to anything else."
              ),
              !1)
            : e != Blockly.ASTNode.types.WORKSPACE ||
              (Blockly.navigation.warn_(
                "Cannot attach a workspace to anything else."
              ),
              !1))
        : (Blockly.navigation.warn_("Cannot insert with no cursor node."), !1)
      : (Blockly.navigation.warn_("Cannot insert with no marked node."), !1);
  }),
  (Blockly.navigation.moveBlockToWorkspace_ = function (t, e) {
    return (
      !!t &&
      (t.isShadow()
        ? (Blockly.navigation.warn_(
            "Cannot move a shadow block to the workspace."
          ),
          !1)
        : (t.getParent() && t.unplug(!1), t.moveTo(e.getWsCoordinate()), !0))
    );
  }),
  (Blockly.navigation.modify_ = function () {
    var t = Blockly.navigation.getMarker().getCurNode(),
      e = Blockly.getMainWorkspace().getCursor().getCurNode();
    if (!Blockly.navigation.modifyWarn_()) return !1;
    var o = t.getType(),
      i = e.getType(),
      n = e.getLocation(),
      l = t.getLocation();
    return t.isConnection() && e.isConnection()
      ? Blockly.navigation.connect_(n, l)
      : !t.isConnection() ||
        (i != Blockly.ASTNode.types.BLOCK && i != Blockly.ASTNode.types.STACK)
      ? o == Blockly.ASTNode.types.WORKSPACE
        ? ((e = e ? e.getSourceBlock() : null),
          Blockly.navigation.moveBlockToWorkspace_(e, t))
        : (Blockly.navigation.warn_(
            "Unexpected state in Blockly.navigation.modify_."
          ),
          !1)
      : Blockly.navigation.insertBlock(n, l);
  }),
  (Blockly.navigation.disconnectChild_ = function (t, e) {
    var o = t.getSourceBlock(),
      i = e.getSourceBlock();
    o.getRootBlock() == i.getRootBlock() &&
      (-1 < o.getDescendants(!1).indexOf(i)
        ? Blockly.navigation.getInferiorConnection_(e).disconnect()
        : Blockly.navigation.getInferiorConnection_(t).disconnect());
  }),
  (Blockly.navigation.moveAndConnect_ = function (t, e) {
    if (!t || !e) return !1;
    var o = t.getSourceBlock();
    return (
      e.canConnectWithReason(t) == Blockly.Connection.CAN_CONNECT &&
      (Blockly.navigation.disconnectChild_(t, e),
      e.isSuperior() || o.getRootBlock().positionNearConnection(t, e),
      e.connect(t),
      !0)
    );
  }),
  (Blockly.navigation.getInferiorConnection_ = function (t) {
    var e = t.getSourceBlock();
    return t.isSuperior()
      ? e.previousConnection
        ? e.previousConnection
        : e.outputConnection
        ? e.outputConnection
        : null
      : t;
  }),
  (Blockly.navigation.getSuperiorConnection_ = function (t) {
    return t.isSuperior() ? t : t.targetConnection ? t.targetConnection : null;
  }),
  (Blockly.navigation.connect_ = function (t, e) {
    if (!t || !e) return !1;
    var o = Blockly.navigation.getInferiorConnection_(t),
      i = Blockly.navigation.getSuperiorConnection_(e),
      n = Blockly.navigation.getSuperiorConnection_(t),
      l = Blockly.navigation.getInferiorConnection_(e);
    if (
      (o && i && Blockly.navigation.moveAndConnect_(o, i)) ||
      (n && l && Blockly.navigation.moveAndConnect_(n, l)) ||
      Blockly.navigation.moveAndConnect_(t, e)
    )
      return !0;
    try {
      e.checkConnection(t);
    } catch (t) {
      Blockly.navigation.warn_("Connection failed with error: " + t);
    }
    return !1;
  }),
  (Blockly.navigation.insertBlock = function (t, e) {
    switch (e.type) {
      case Blockly.PREVIOUS_STATEMENT:
        if (Blockly.navigation.connect_(t.nextConnection, e)) return !0;
        break;
      case Blockly.NEXT_STATEMENT:
        if (Blockly.navigation.connect_(t.previousConnection, e)) return !0;
        break;
      case Blockly.INPUT_VALUE:
        if (Blockly.navigation.connect_(t.outputConnection, e)) return !0;
        break;
      case Blockly.OUTPUT_VALUE:
        for (var o = 0; o < t.inputList.length; o++) {
          var i = t.inputList[o].connection;
          if (
            i &&
            i.type === Blockly.INPUT_VALUE &&
            Blockly.navigation.connect_(i, e)
          )
            return !0;
        }
        if (
          t.outputConnection &&
          Blockly.navigation.connect_(t.outputConnection, e)
        )
          return !0;
    }
    return (
      Blockly.navigation.warn_(
        "This block can not be inserted at the marked location."
      ),
      !1
    );
  }),
  (Blockly.navigation.disconnectBlocks_ = function () {
    var t = Blockly.getMainWorkspace(),
      e = t.getCursor().getCurNode();
    if (e.isConnection()) {
      var o = e.getLocation();
      o.isConnected()
        ? ((e = o.isSuperior() ? o : o.targetConnection),
          (o = o.isSuperior() ? o.targetConnection : o)
            .getSourceBlock()
            .isShadow()
            ? Blockly.navigation.log_("Cannot disconnect a shadow block")
            : (e.disconnect(),
              o.bumpAwayFrom(e),
              e.getSourceBlock().getRootBlock().bringToFront(),
              (e = Blockly.ASTNode.createConnectionNode(e)),
              t.getCursor().setCurNode(e)))
        : Blockly.navigation.log_("Cannot disconnect unconnected connection");
    } else
      Blockly.navigation.log_(
        "Cannot disconnect blocks when the cursor is not on a connection"
      );
  }),
  (Blockly.navigation.markAtCursor_ = function () {
    Blockly.navigation
      .getMarker()
      .setCurNode(Blockly.getMainWorkspace().getCursor().getCurNode());
  }),
  (Blockly.navigation.removeMark_ = function () {
    var t = Blockly.navigation.getMarker();
    t.setCurNode(null), t.hide();
  }),
  (Blockly.navigation.setState = function (t) {
    Blockly.navigation.currentState_ = t;
  }),
  (Blockly.navigation.getTopNode = function (t) {
    var e = t.previousConnection || t.outputConnection;
    return e
      ? Blockly.ASTNode.createConnectionNode(e)
      : Blockly.ASTNode.createBlockNode(t);
  }),
  (Blockly.navigation.moveCursorOnBlockDelete = function (t) {
    var e = Blockly.getMainWorkspace();
    if (e && (e = e.getCursor())) {
      var o = e.getCurNode();
      (o = o ? o.getSourceBlock() : null) === t
        ? o.getParent()
          ? (t = o.previousConnection || o.outputConnection) &&
            e.setCurNode(
              Blockly.ASTNode.createConnectionNode(t.targetConnection)
            )
          : e.setCurNode(
              Blockly.ASTNode.createWorkspaceNode(
                o.workspace,
                o.getRelativeToSurfaceXY()
              )
            )
        : o &&
          -1 < t.getChildren(!1).indexOf(o) &&
          e.setCurNode(
            Blockly.ASTNode.createWorkspaceNode(
              o.workspace,
              o.getRelativeToSurfaceXY()
            )
          );
    }
  }),
  (Blockly.navigation.moveCursorOnBlockMutation = function (t) {
    var e = Blockly.getMainWorkspace().getCursor();
    if (e) {
      var o = e.getCurNode();
      (o = o ? o.getSourceBlock() : null) === t &&
        e.setCurNode(Blockly.ASTNode.createBlockNode(o));
    }
  }),
  (Blockly.navigation.enableKeyboardAccessibility = function () {
    Blockly.getMainWorkspace().keyboardAccessibilityMode ||
      ((Blockly.getMainWorkspace().keyboardAccessibilityMode = !0),
      Blockly.navigation.focusWorkspace_());
  }),
  (Blockly.navigation.disableKeyboardAccessibility = function () {
    if (Blockly.getMainWorkspace().keyboardAccessibilityMode) {
      var t = Blockly.getMainWorkspace();
      (Blockly.getMainWorkspace().keyboardAccessibilityMode = !1),
        t.getCursor().hide(),
        Blockly.navigation.getMarker().hide(),
        Blockly.navigation.getFlyoutCursor_() &&
          Blockly.navigation.getFlyoutCursor_().hide();
    }
  }),
  (Blockly.navigation.log_ = function (t) {
    Blockly.navigation.loggingCallback
      ? Blockly.navigation.loggingCallback("log", t)
      : console.log(t);
  }),
  (Blockly.navigation.warn_ = function (t) {
    Blockly.navigation.loggingCallback
      ? Blockly.navigation.loggingCallback("warn", t)
      : console.warn(t);
  }),
  (Blockly.navigation.error_ = function (t) {
    Blockly.navigation.loggingCallback
      ? Blockly.navigation.loggingCallback("error", t)
      : console.error(t);
  }),
  (Blockly.navigation.onKeyPress = function (t) {
    return (
      (t = Blockly.user.keyMap.serializeKeyEvent(t)),
      !!(t = Blockly.user.keyMap.getActionByKeyCode(t)) &&
        Blockly.navigation.onBlocklyAction(t)
    );
  }),
  (Blockly.navigation.onBlocklyAction = function (t) {
    var e = Blockly.getMainWorkspace().options.readOnly,
      o = !1;
    return (
      Blockly.getMainWorkspace().keyboardAccessibilityMode
        ? e
          ? -1 < Blockly.navigation.READONLY_ACTION_LIST.indexOf(t) &&
            (o = Blockly.navigation.handleActions_(t))
          : (o = Blockly.navigation.handleActions_(t))
        : t.name === Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV &&
          (Blockly.navigation.enableKeyboardAccessibility(), (o = !0)),
      o
    );
  }),
  (Blockly.navigation.handleActions_ = function (t) {
    return t.name == Blockly.navigation.actionNames.TOOLBOX ||
      Blockly.navigation.currentState_ == Blockly.navigation.STATE_TOOLBOX
      ? Blockly.navigation.toolboxOnAction_(t)
      : t.name == Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV
      ? (Blockly.navigation.disableKeyboardAccessibility(), !0)
      : Blockly.navigation.currentState_ == Blockly.navigation.STATE_WS
      ? Blockly.navigation.workspaceOnAction_(t)
      : Blockly.navigation.currentState_ == Blockly.navigation.STATE_FLYOUT &&
        Blockly.navigation.flyoutOnAction_(t);
  });
(Blockly.navigation.flyoutOnAction_ = function (t) {
  var e = Blockly.getMainWorkspace(),
    o = e.getToolbox();
  if ((e = o ? o.flyout_ : e.getFlyout()) && e.onBlocklyAction(t)) return !0;
  switch (t.name) {
    case Blockly.navigation.actionNames.OUT:
      return Blockly.navigation.focusToolbox_(), !0;
    case Blockly.navigation.actionNames.MARK:
      return Blockly.navigation.insertFromFlyout(), !0;
    case Blockly.navigation.actionNames.EXIT:
      return Blockly.navigation.focusWorkspace_(), !0;
    default:
      return !1;
  }
}),
  (Blockly.navigation.toolboxOnAction_ = function (t) {
    var e = Blockly.getMainWorkspace(),
      o = e.getToolbox();
    return (
      !(!o || !o.onBlocklyAction(t)) ||
      (t.name === Blockly.navigation.actionNames.TOOLBOX
        ? (e.getToolbox()
            ? Blockly.navigation.focusToolbox_()
            : Blockly.navigation.focusFlyout_(),
          !0)
        : t.name === Blockly.navigation.actionNames.IN
        ? (Blockly.navigation.focusFlyout_(), !0)
        : t.name === Blockly.navigation.actionNames.EXIT &&
          (Blockly.navigation.focusWorkspace_(), !0))
    );
  }),
  (Blockly.navigation.moveWSCursor_ = function (t, e) {
    var o = Blockly.getMainWorkspace().getCursor(),
      i = Blockly.getMainWorkspace().getCursor().getCurNode();
    return (
      i.getType() === Blockly.ASTNode.types.WORKSPACE &&
      ((i = i.getWsCoordinate()),
      (t = t * Blockly.navigation.WS_MOVE_DISTANCE + i.x),
      (e = e * Blockly.navigation.WS_MOVE_DISTANCE + i.y),
      o.setCurNode(
        Blockly.ASTNode.createWorkspaceNode(
          Blockly.getMainWorkspace(),
          new Blockly.utils.Coordinate(t, e)
        )
      ),
      !0)
    );
  }),
  (Blockly.navigation.workspaceOnAction_ = function (t) {
    if (Blockly.getMainWorkspace().getCursor().onBlocklyAction(t)) return !0;
    switch (t.name) {
      case Blockly.navigation.actionNames.INSERT:
        return Blockly.navigation.modify_(), !0;
      case Blockly.navigation.actionNames.MARK:
        return Blockly.navigation.handleEnterForWS_(), !0;
      case Blockly.navigation.actionNames.DISCONNECT:
        return Blockly.navigation.disconnectBlocks_(), !0;
      case Blockly.navigation.actionNames.MOVE_WS_CURSOR_UP:
        return Blockly.navigation.moveWSCursor_(0, -1);
      case Blockly.navigation.actionNames.MOVE_WS_CURSOR_DOWN:
        return Blockly.navigation.moveWSCursor_(0, 1);
      case Blockly.navigation.actionNames.MOVE_WS_CURSOR_LEFT:
        return Blockly.navigation.moveWSCursor_(-1, 0);
      case Blockly.navigation.actionNames.MOVE_WS_CURSOR_RIGHT:
        return Blockly.navigation.moveWSCursor_(1, 0);
      default:
        return !1;
    }
  }),
  (Blockly.navigation.handleEnterForWS_ = function () {
    var t = Blockly.getMainWorkspace().getCursor().getCurNode(),
      e = t.getType();
    e == Blockly.ASTNode.types.FIELD
      ? t.getLocation().showEditor()
      : t.isConnection() || e == Blockly.ASTNode.types.WORKSPACE
      ? Blockly.navigation.markAtCursor_()
      : e == Blockly.ASTNode.types.BLOCK
      ? Blockly.navigation.warn_("Cannot mark a block.")
      : e == Blockly.ASTNode.types.STACK &&
        Blockly.navigation.warn_("Cannot mark a stack.");
  }),
  (Blockly.navigation.ACTION_PREVIOUS = new Blockly.Action(
    Blockly.navigation.actionNames.PREVIOUS,
    "Go to the previous location."
  )),
  (Blockly.navigation.ACTION_OUT = new Blockly.Action(
    Blockly.navigation.actionNames.OUT,
    "Go to the parent of the current location."
  )),
  (Blockly.navigation.ACTION_NEXT = new Blockly.Action(
    Blockly.navigation.actionNames.NEXT,
    "Go to the next location."
  )),
  (Blockly.navigation.ACTION_IN = new Blockly.Action(
    Blockly.navigation.actionNames.IN,
    "Go to the first child of the current location."
  )),
  (Blockly.navigation.ACTION_INSERT = new Blockly.Action(
    Blockly.navigation.actionNames.INSERT,
    "Connect the current location to the marked location."
  )),
  (Blockly.navigation.ACTION_MARK = new Blockly.Action(
    Blockly.navigation.actionNames.MARK,
    "Mark the current location."
  )),
  (Blockly.navigation.ACTION_DISCONNECT = new Blockly.Action(
    Blockly.navigation.actionNames.DISCONNECT,
    "Disconnect the block at the current location from its parent."
  )),
  (Blockly.navigation.ACTION_TOOLBOX = new Blockly.Action(
    Blockly.navigation.actionNames.TOOLBOX,
    "Open the toolbox."
  )),
  (Blockly.navigation.ACTION_EXIT = new Blockly.Action(
    Blockly.navigation.actionNames.EXIT,
    "Close the current modal, such as a toolbox or field editor."
  )),
  (Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV = new Blockly.Action(
    Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV,
    "Turns on and off keyboard navigation."
  )),
  (Blockly.navigation.ACTION_MOVE_WS_CURSOR_LEFT = new Blockly.Action(
    Blockly.navigation.actionNames.MOVE_WS_CURSOR_LEFT,
    "Move the workspace cursor to the lefts."
  )),
  (Blockly.navigation.ACTION_MOVE_WS_CURSOR_RIGHT = new Blockly.Action(
    Blockly.navigation.actionNames.MOVE_WS_CURSOR_RIGHT,
    "Move the workspace cursor to the right."
  )),
  (Blockly.navigation.ACTION_MOVE_WS_CURSOR_UP = new Blockly.Action(
    Blockly.navigation.actionNames.MOVE_WS_CURSOR_UP,
    "Move the workspace cursor up."
  )),
  (Blockly.navigation.ACTION_MOVE_WS_CURSOR_DOWN = new Blockly.Action(
    Blockly.navigation.actionNames.MOVE_WS_CURSOR_DOWN,
    "Move the workspace cursor down."
  )),
  (Blockly.navigation.READONLY_ACTION_LIST = [
    Blockly.navigation.ACTION_PREVIOUS,
    Blockly.navigation.ACTION_OUT,
    Blockly.navigation.ACTION_IN,
    Blockly.navigation.ACTION_NEXT,
    Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV,
  ]),
  (Blockly.pxtBlocklyUtils = {}),
  (Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist = null),
  (Blockly.pxtBlocklyUtils.measureText = function (t, e, o, i) {
    var n = document.createElement("canvas").getContext("2d");
    return (n.font = o + " " + t + " " + e), n.measureText(i).width;
  }),
  (Blockly.pxtBlocklyUtils.isShadowArgumentReporter = function (t) {
    return (
      t.isShadow() &&
      ("variables_get_reporter" === t.type ||
        "argument_reporter_boolean" === t.type ||
        "argument_reporter_number" === t.type ||
        "argument_reporter_string" === t.type ||
        "argument_reporter_custom" === t.type ||
        (Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist &&
          -1 !==
            Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist.indexOf(t.type)))
    );
  }),
  (Blockly.pxtBlocklyUtils.whitelistDraggableBlockTypes = function (t) {
    Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist = t.slice();
  }),
  (Blockly.pxtBlocklyUtils.hasMatchingArgumentReporter = function (t, e) {
    for (
      var o = e.getFieldValue("VALUE"), i = e.getTypeName(), n = 0;
      n < t.inputList.length;
      ++n
    ) {
      var l = t.inputList[n];
      if (l.type == Blockly.INPUT_VALUE) {
        var r = l.connection.targetBlock();
        if (
          r &&
          r.type == e.type &&
          ((l = r.getFieldValue("VALUE")),
          (r = r.getTypeName()),
          l == o && i == r)
        )
          return !0;
      }
    }
    return !1;
  }),
  (Blockly.Gesture = function (t, e) {
    (this.mouseDownXY_ = null),
      (this.currentDragDeltaXY_ = new Blockly.utils.Coordinate(0, 0)),
      (this.startWorkspace_ =
        this.targetBlock_ =
        this.startBlock_ =
        this.startField_ =
        this.startBubble_ =
          null),
      (this.creatorWorkspace_ = e),
      (this.isDraggingBubble_ =
        this.isDraggingBlock_ =
        this.isDraggingWorkspace_ =
        this.hasExceededDragRadius_ =
          !1),
      (this.mostRecentEvent_ = t),
      (this.flyout_ =
        this.workspaceDragger_ =
        this.blockDragger_ =
        this.bubbleDragger_ =
        this.onUpWrapper_ =
        this.onMoveWrapper_ =
          null),
      (this.shouldDuplicateOnDrag_ =
        this.isEnding_ =
        this.hasStarted_ =
        this.calledUpdateIsDragging_ =
          !1),
      (this.healStack_ = !Blockly.DRAG_STACK);
  }),
  (Blockly.Gesture.prototype.dispose = function () {
    Blockly.Touch.clearTouchIdentifier(),
      Blockly.Tooltip.unblock(),
      this.creatorWorkspace_.clearGesture(),
      this.onMoveWrapper_ && Blockly.unbindEvent_(this.onMoveWrapper_),
      this.onUpWrapper_ && Blockly.unbindEvent_(this.onUpWrapper_),
      this.blockDragger_ && this.blockDragger_.dispose(),
      this.workspaceDragger_ && this.workspaceDragger_.dispose(),
      this.bubbleDragger_ && this.bubbleDragger_.dispose();
  }),
  (Blockly.Gesture.prototype.updateFromEvent_ = function (t) {
    var e = new Blockly.utils.Coordinate(t.clientX, t.clientY);
    this.updateDragDelta_(e) && (this.updateIsDragging_(), Blockly.longStop_()),
      (this.mostRecentEvent_ = t);
  }),
  (Blockly.Gesture.prototype.updateDragDelta_ = function (t) {
    return (
      (this.currentDragDeltaXY_ = Blockly.utils.Coordinate.difference(
        t,
        this.mouseDownXY_
      )),
      !this.hasExceededDragRadius_ &&
        (this.hasExceededDragRadius_ =
          Blockly.utils.Coordinate.magnitude(this.currentDragDeltaXY_) >
          (this.flyout_ ? Blockly.FLYOUT_DRAG_RADIUS : Blockly.DRAG_RADIUS))
    );
  }),
  (Blockly.Gesture.prototype.updateIsDraggingFromFlyout_ = function () {
    return (
      !(
        !this.targetBlock_ || !this.flyout_.isBlockCreatable_(this.targetBlock_)
      ) &&
      !(
        this.flyout_.isScrollable() &&
        !this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)
      ) &&
      ((this.startWorkspace_ = this.flyout_.targetWorkspace_),
      this.startWorkspace_.updateScreenCalculationsIfScrolled(),
      Blockly.Events.getGroup() || Blockly.Events.setGroup(!0),
      (this.startBlock_ = null),
      (this.targetBlock_ = this.flyout_.createBlock(this.targetBlock_)),
      this.targetBlock_.select(),
      !0)
    );
  }),
  (Blockly.Gesture.prototype.updateIsDraggingBubble_ = function () {
    return (
      !!this.startBubble_ &&
      ((this.isDraggingBubble_ = !0), this.startDraggingBubble_(), !0)
    );
  }),
  (Blockly.Gesture.prototype.updateIsDraggingBlock_ = function () {
    return (
      !!this.targetBlock_ &&
      (this.flyout_
        ? (this.isDraggingBlock_ = this.updateIsDraggingFromFlyout_())
        : (this.targetBlock_.isMovable() || this.shouldDuplicateOnDrag_) &&
          (this.isDraggingBlock_ = !0),
      !!this.isDraggingBlock_ && (this.startDraggingBlock_(), !0))
    );
  }),
  (Blockly.Gesture.prototype.updateIsDraggingWorkspace_ = function () {
    (this.flyout_
      ? this.flyout_.isScrollable()
      : this.startWorkspace_ && this.startWorkspace_.isDraggable()) &&
      ((this.workspaceDragger_ = this.flyout_
        ? new Blockly.FlyoutDragger(this.flyout_)
        : new Blockly.WorkspaceDragger(this.startWorkspace_)),
      (this.isDraggingWorkspace_ = !0),
      this.workspaceDragger_.startDrag());
  }),
  (Blockly.Gesture.prototype.updateIsDragging_ = function () {
    if (this.calledUpdateIsDragging_)
      throw Error("updateIsDragging_ should only be called once per gesture.");
    (this.calledUpdateIsDragging_ = !0),
      this.updateIsDraggingBubble_() ||
        this.updateIsDraggingBlock_() ||
        this.updateIsDraggingWorkspace_();
  }),
  (Blockly.Gesture.prototype.startDraggingBlock_ = function () {
    this.shouldDuplicateOnDrag_ && this.duplicateOnDrag_(),
      (this.blockDragger_ = new Blockly.BlockDragger(
        this.targetBlock_,
        this.startWorkspace_,
        this.mouseDownXY_
      )),
      this.blockDragger_.startBlockDrag(
        this.currentDragDeltaXY_,
        this.healStack_
      ),
      this.blockDragger_.dragBlock(
        this.mostRecentEvent_,
        this.currentDragDeltaXY_
      );
  }),
  (Blockly.Gesture.prototype.startDraggingBubble_ = function () {
    (this.bubbleDragger_ = new Blockly.BubbleDragger(
      this.startBubble_,
      this.startWorkspace_
    )),
      this.bubbleDragger_.startBubbleDrag(),
      this.bubbleDragger_.dragBubble(
        this.mostRecentEvent_,
        this.currentDragDeltaXY_
      );
  }),
  (Blockly.Gesture.prototype.doStart = function (t) {
    Blockly.utils.isTargetInput(t)
      ? this.cancel()
      : ((this.hasStarted_ = !0),
        Blockly.blockAnimations.disconnectUiStop(),
        this.startWorkspace_.updateScreenCalculationsIfScrolled(),
        this.startWorkspace_.isMutator && this.startWorkspace_.resize(),
        Blockly.hideChaff(!!this.flyout_),
        this.startWorkspace_.markFocused(),
        (this.mostRecentEvent_ = t),
        Blockly.Tooltip.block(),
        this.targetBlock_ &&
          (!this.targetBlock_.isInFlyout &&
          t.shiftKey &&
          this.targetBlock_.workspace.keyboardAccessibilityMode
            ? this.creatorWorkspace_
                .getCursor()
                .setCurNode(Blockly.navigation.getTopNode(this.targetBlock_))
            : this.targetBlock_.select()),
        Blockly.utils.isRightButton(t)
          ? this.handleRightClick(t)
          : (("touchstart" != t.type.toLowerCase() &&
              "pointerdown" != t.type.toLowerCase()) ||
              "mouse" == t.pointerType ||
              Blockly.longStart(t, this),
            (this.mouseDownXY_ = new Blockly.utils.Coordinate(
              t.clientX,
              t.clientY
            )),
            (this.healStack_ = t.altKey || t.ctrlKey || t.metaKey),
            this.bindMouseEvents(t)));
  }),
  (Blockly.Gesture.prototype.bindMouseEvents = function (t) {
    (this.onMoveWrapper_ = Blockly.bindEventWithChecks_(
      document,
      "mousemove",
      null,
      this.handleMove.bind(this)
    )),
      (this.onUpWrapper_ = Blockly.bindEventWithChecks_(
        document,
        "mouseup",
        null,
        this.handleUp.bind(this)
      )),
      t.preventDefault(),
      t.stopPropagation();
  }),
  (Blockly.Gesture.prototype.handleMove = function (t) {
    this.updateFromEvent_(t),
      this.isDraggingWorkspace_
        ? this.workspaceDragger_.drag(this.currentDragDeltaXY_)
        : this.isDraggingBlock_
        ? this.blockDragger_.dragBlock(
            this.mostRecentEvent_,
            this.currentDragDeltaXY_
          )
        : this.isDraggingBubble_ &&
          this.bubbleDragger_.dragBubble(
            this.mostRecentEvent_,
            this.currentDragDeltaXY_
          ),
      t.preventDefault(),
      t.stopPropagation();
  }),
  (Blockly.Gesture.prototype.handleUp = function (t) {
    this.updateFromEvent_(t),
      Blockly.longStop_(),
      this.isEnding_
        ? console.log("Trying to end a gesture recursively.")
        : ((this.isEnding_ = !0),
          this.isDraggingBubble_
            ? this.bubbleDragger_.endBubbleDrag(t, this.currentDragDeltaXY_)
            : this.isDraggingBlock_
            ? this.blockDragger_.endBlockDrag(t, this.currentDragDeltaXY_)
            : this.isDraggingWorkspace_
            ? this.workspaceDragger_.endDrag(this.currentDragDeltaXY_)
            : this.isBubbleClick_()
            ? this.doBubbleClick_()
            : this.isFieldClick_()
            ? this.doFieldClick_(t)
            : this.isBlockClick_()
            ? this.doBlockClick_()
            : this.isWorkspaceClick_() && this.doWorkspaceClick_(t),
          t.preventDefault(),
          t.stopPropagation(),
          this.dispose());
  }),
  (Blockly.Gesture.prototype.cancel = function () {
    this.isEnding_ ||
      ((this.isEnding_ = !0),
      Blockly.longStop_(),
      this.isDraggingBubble_
        ? this.bubbleDragger_.endBubbleDrag(
            this.mostRecentEvent_,
            this.currentDragDeltaXY_
          )
        : this.isDraggingBlock_
        ? this.blockDragger_.endBlockDrag(
            this.mostRecentEvent_,
            this.currentDragDeltaXY_
          )
        : this.isDraggingWorkspace_ &&
          this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),
      this.dispose());
  }),
  (Blockly.Gesture.prototype.handleRightClick = function (t) {
    this.targetBlock_
      ? (this.bringBlockToFront_(),
        Blockly.hideChaff(!!this.flyout_),
        this.targetBlock_.showContextMenu(t))
      : this.startBubble_
      ? this.startBubble_.showContextMenu(t)
      : this.startWorkspace_ &&
        !this.flyout_ &&
        (Blockly.hideChaff(), this.startWorkspace_.showContextMenu(t)),
      t.preventDefault(),
      t.stopPropagation(),
      this.dispose();
  }),
  (Blockly.Gesture.prototype.handleWsStart = function (t, e) {
    if (this.hasStarted_)
      throw Error(
        "Tried to call gesture.handleWsStart, but the gesture had already been started."
      );
    this.setStartWorkspace_(e),
      (this.mostRecentEvent_ = t),
      this.doStart(t),
      this.startWorkspace_.keyboardAccessibilityMode &&
        Blockly.navigation.setState(Blockly.navigation.STATE_WS);
  }),
  (Blockly.Gesture.prototype.handleFlyoutStart = function (t, e) {
    if (this.hasStarted_)
      throw Error(
        "Tried to call gesture.handleFlyoutStart, but the gesture had already been started."
      );
    this.setStartFlyout_(e), this.handleWsStart(t, e.getWorkspace());
  }),
  (Blockly.Gesture.prototype.handleBlockStart = function (t, e) {
    if (this.hasStarted_)
      throw Error(
        "Tried to call gesture.handleBlockStart, but the gesture had already been started."
      );
    this.setStartBlock(e), (this.mostRecentEvent_ = t);
  }),
  (Blockly.Gesture.prototype.handleBubbleStart = function (t, e) {
    if (this.hasStarted_)
      throw Error(
        "Tried to call gesture.handleBubbleStart, but the gesture had already been started."
      );
    this.setStartBubble(e), (this.mostRecentEvent_ = t);
  }),
  (Blockly.Gesture.prototype.doBubbleClick_ = function () {
    this.startBubble_.setFocus && this.startBubble_.setFocus(),
      this.startBubble_.select && this.startBubble_.select();
  }),
  (Blockly.Gesture.prototype.doFieldClick_ = function () {
    this.startField_.showEditor(this.mostRecentEvent_),
      this.bringBlockToFront_();
  }),
  (Blockly.Gesture.prototype.doBlockClick_ = function () {
    this.flyout_ && this.flyout_.autoClose
      ? this.targetBlock_.isEnabled() &&
        (Blockly.Events.getGroup() || Blockly.Events.setGroup(!0),
        this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())
      : Blockly.WidgetDiv.isVisible() ||
        Blockly.DropDownDiv.isVisible() ||
        Blockly.Events.fire(
          new Blockly.Events.Ui(this.startBlock_, "click", void 0, void 0)
        ),
      this.bringBlockToFront_(),
      Blockly.Events.setGroup(!1);
  }),
  (Blockly.Gesture.prototype.doWorkspaceClick_ = function (t) {
    var e = this.creatorWorkspace_;
    t.shiftKey && e.keyboardAccessibilityMode
      ? ((t = new Blockly.utils.Coordinate(t.clientX, t.clientY)),
        (t = Blockly.utils.screenToWsCoordinates(e, t)),
        (t = Blockly.ASTNode.createWorkspaceNode(e, t)),
        e.getCursor().setCurNode(t))
      : Blockly.selected && Blockly.selected.unselect();
  }),
  (Blockly.Gesture.prototype.bringBlockToFront_ = function () {
    this.targetBlock_ && !this.flyout_ && this.targetBlock_.bringToFront();
  }),
  (Blockly.Gesture.prototype.setStartField = function (t) {
    if (this.hasStarted_)
      throw Error(
        "Tried to call gesture.setStartField, but the gesture had already been started."
      );
    this.startField_ || (this.startField_ = t);
  }),
  (Blockly.Gesture.prototype.setStartBubble = function (t) {
    this.startBubble_ || (this.startBubble_ = t);
  }),
  (Blockly.Gesture.prototype.setStartBlock = function (t) {
    this.startBlock_ ||
      this.startBubble_ ||
      ((this.startBlock_ = t),
      (this.shouldDuplicateOnDrag_ =
        !t.disabled &&
        !t.getInheritedDisabled() &&
        !t.isInFlyout &&
        Blockly.pxtBlocklyUtils.isShadowArgumentReporter(t)),
      t.isInFlyout && t != t.getRootBlock()
        ? this.setTargetBlock_(t.getRootBlock())
        : this.setTargetBlock_(t));
  }),
  (Blockly.Gesture.prototype.setTargetBlock_ = function (t) {
    t.isShadow() && !this.shouldDuplicateOnDrag_
      ? this.setTargetBlock_(t.getParent())
      : (this.targetBlock_ = t);
  }),
  (Blockly.Gesture.prototype.setStartWorkspace_ = function (t) {
    this.startWorkspace_ || (this.startWorkspace_ = t);
  }),
  (Blockly.Gesture.prototype.setStartFlyout_ = function (t) {
    this.flyout_ || (this.flyout_ = t);
  }),
  (Blockly.Gesture.prototype.isBubbleClick_ = function () {
    return !!this.startBubble_ && !this.hasExceededDragRadius_;
  }),
  (Blockly.Gesture.prototype.isBlockClick_ = function () {
    return (
      !!this.startBlock_ &&
      !this.hasExceededDragRadius_ &&
      !this.isFieldClick_()
    );
  }),
  (Blockly.Gesture.prototype.isFieldClick_ = function () {
    return (
      !!this.startField_ &&
      this.startField_.isClickable() &&
      !this.hasExceededDragRadius_ &&
      (!this.flyout_ || !this.flyout_.autoClose)
    );
  }),
  (Blockly.Gesture.prototype.isWorkspaceClick_ = function () {
    return !(
      this.startBlock_ ||
      this.startBubble_ ||
      this.startField_ ||
      this.hasExceededDragRadius_
    );
  }),
  (Blockly.Gesture.prototype.isDragging = function () {
    return (
      this.isDraggingWorkspace_ ||
      this.isDraggingBlock_ ||
      this.isDraggingBubble_
    );
  }),
  (Blockly.Gesture.prototype.hasStarted = function () {
    return this.hasStarted_;
  }),
  (Blockly.Gesture.prototype.getInsertionMarkers = function () {
    return this.blockDragger_ ? this.blockDragger_.getInsertionMarkers() : [];
  }),
  (Blockly.Gesture.inProgress = function () {
    for (var t, e = Blockly.Workspace.getAll(), o = 0; (t = e[o]); o++)
      if (t.currentGesture_) return !0;
    return !1;
  }),
  (Blockly.Gesture.prototype.forceStartBlockDrag = function (t, e) {
    this.handleBlockStart(t, e),
      this.handleWsStart(t, e.workspace),
      (this.hasExceededDragRadius_ = this.isDraggingBlock_ = !0),
      this.startDraggingBlock_();
  }),
  (Blockly.Gesture.prototype.duplicateOnDrag_ = function () {
    var t = null;
    Blockly.Events.disable();
    try {
      this.startWorkspace_.setResizesEnabled(!1);
      var e = Blockly.Xml.blockToDom(this.targetBlock_);
      if ("variables_get_reporter" == e.getAttribute("type")) {
        var o = e.firstChild;
        if (!o)
          throw "unable to create a variable_get block from a variables_get_reporter block, block has no VAR field";
        var i = document.createElement("block");
        i.setAttribute("type", "variables_get");
        var n = document.createElement("field");
        n.setAttribute("name", o.getAttribute("name")),
          n.setAttribute("id", o.getAttribute("id")),
          (n.textContent = o.textContent),
          i.appendChild(n),
          (e = i);
      }
      this.targetBlock_.inputList[0] &&
        this.targetBlock_.inputList[0].fieldRow[0] &&
        this.targetBlock_.inputList[0].fieldRow[0].clearHover &&
        this.targetBlock_.inputList[0].fieldRow[0].clearHover(),
        (t = Blockly.Xml.domToBlock(e, this.startWorkspace_));
      var l = this.targetBlock_.getRelativeToSurfaceXY();
      t.moveBy(l.x, l.y), t.setShadow(!1), t.setMovable(!0);
    } finally {
      Blockly.Events.enable();
    }
    t
      ? (Blockly.Events.isEnabled() &&
          Blockly.Events.fire(new Blockly.Events.BlockCreate(t)),
        t.select(),
        (this.targetBlock_ = t))
      : console.error("Something went wrong while duplicating a block.");
  }),
  (Blockly.Field = function (t, e, o) {
    (this.tooltip_ = this.validator_ = this.value_ = null),
      (this.size_ = new Blockly.utils.Size(0, 0)),
      (this.constants_ =
        this.mouseDownWrapper_ =
        this.textContent_ =
        this.textElement_ =
        this.borderRect_ =
        this.fieldGroup_ =
        this.markerSvg_ =
        this.cursorSvg_ =
          null),
      o && this.configure_(o),
      this.setValue(t),
      e && this.setValidator(e);
  }),
  (Blockly.Field.prototype.name = void 0),
  (Blockly.Field.prototype.className_ = "blocklyText"),
  (Blockly.Field.prototype.disposed = !1),
  (Blockly.Field.prototype.maxDisplayLength = 1 / 0),
  (Blockly.Field.prototype.sourceBlock_ = null),
  (Blockly.Field.prototype.isDirty_ = !0),
  (Blockly.Field.prototype.visible_ = !0),
  (Blockly.Field.prototype.argType_ = null),
  (Blockly.Field.prototype.clickTarget_ = null),
  (Blockly.Field.NBSP = " "),
  (Blockly.Field.IE_TEXT_OFFSET = "0.3em"),
  (Blockly.Field.prototype.EDITABLE = !0),
  (Blockly.Field.prototype.SERIALIZABLE = !1),
  (Blockly.Field.prototype.configure_ = function (t) {
    var e = t.tooltip;
    "string" == typeof e &&
      (e = Blockly.utils.replaceMessageReferences(t.tooltip)),
      e && this.setTooltip(e);
  }),
  (Blockly.Field.prototype.setSourceBlock = function (t) {
    if (this.sourceBlock_) throw Error("Field already bound to a block.");
    (this.sourceBlock_ = t),
      t.workspace.rendered &&
        (this.constants_ = t.workspace.getRenderer().getConstants());
  }),
  (Blockly.Field.prototype.getSourceBlock = function () {
    return this.sourceBlock_;
  }),
  (Blockly.Field.prototype.init = function () {
    this.fieldGroup_ ||
      ((this.fieldGroup_ = Blockly.utils.dom.createSvgElement("g", {}, null)),
      this.isVisible() || (this.fieldGroup_.style.display = "none"),
      this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),
      this.initView(),
      this.setDataAttribute_(),
      this.updateEditable(),
      this.setTooltip(this.tooltip_),
      this.bindEvents_(),
      this.initModel());
  }),
  (Blockly.Field.prototype.initView = function () {
    this.createBorderRect_(), this.createTextElement_();
  }),
  (Blockly.Field.prototype.initModel = function () {}),
  (Blockly.Field.prototype.onLoadedIntoWorkspace = function () {}),
  (Blockly.Field.prototype.createBorderRect_ = function () {
    (this.size_.height = Math.max(
      this.size_.height,
      this.constants_.FIELD_BORDER_RECT_HEIGHT
    )),
      (this.size_.width = Math.max(
        this.size_.width,
        2 * this.constants_.FIELD_BORDER_RECT_X_PADDING
      )),
      (this.borderRect_ = Blockly.utils.dom.createSvgElement(
        "rect",
        {
          rx: this.constants_.FIELD_BORDER_RECT_RADIUS,
          ry: this.constants_.FIELD_BORDER_RECT_RADIUS,
          x: 0,
          y: 0,
          height: this.size_.height,
          width: this.size_.width,
          class: "blocklyFieldRect",
        },
        this.fieldGroup_
      ));
  }),
  (Blockly.Field.prototype.createTextElement_ = function () {
    var t = this.borderRect_ ? this.constants_.FIELD_BORDER_RECT_X_PADDING : 0,
      e = this.constants_.FIELD_TEXT_BASELINE_CENTER,
      o = this.constants_.FIELD_TEXT_BASELINE_Y;
    (this.size_.height = Math.max(
      this.size_.height,
      e ? this.constants_.FIELD_TEXT_HEIGHT : o
    )),
      this.size_.height > this.constants_.FIELD_TEXT_HEIGHT &&
        (o += (this.size_.height - o) / 2),
      (this.textElement_ = Blockly.utils.dom.createSvgElement(
        "text",
        {
          class: "blocklyText",
          y: e ? this.size_.height / 2 : o,
          dy: this.constants_.FIELD_TEXT_Y_OFFSET,
          x: t,
        },
        this.fieldGroup_
      )),
      e && this.textElement_.setAttribute("dominant-baseline", "central"),
      (this.textContent_ = document.createTextNode("")),
      this.textElement_.appendChild(this.textContent_);
  }),
  (Blockly.Field.prototype.setDataAttribute_ = function () {
    null !== this.getArgTypes() &&
      (this.sourceBlock_.isShadow()
        ? this.sourceBlock_.svgGroup_.setAttribute(
            "data-argument-type",
            this.getArgTypes()
          )
        : this.fieldGroup_.setAttribute(
            "data-argument-type",
            this.getArgTypes()
          ));
  }),
  (Blockly.Field.prototype.bindEvents_ = function () {
    Blockly.Tooltip.bindMouseEvents(this.getClickTarget_()),
      (this.mouseDownWrapper_ = Blockly.bindEventWithChecks_(
        this.getClickTarget_(),
        "mousedown",
        this,
        this.onMouseDown_
      ));
  }),
  (Blockly.Field.prototype.fromXml = function (t) {
    this.setValue(t.textContent);
  }),
  (Blockly.Field.prototype.toXml = function (t) {
    return (t.textContent = this.getValue()), t;
  }),
  (Blockly.Field.prototype.dispose = function () {
    Blockly.DropDownDiv.hideIfOwner(this),
      Blockly.WidgetDiv.hideIfOwner(this),
      this.mouseDownWrapper_ && Blockly.unbindEvent_(this.mouseDownWrapper_),
      Blockly.utils.dom.removeNode(this.fieldGroup_),
      (this.disposed = !0);
  }),
  (Blockly.Field.prototype.updateEditable = function () {
    var t = this.fieldGroup_;
    this.EDITABLE &&
      t &&
      (this.sourceBlock_.isEditable()
        ? (Blockly.utils.dom.addClass(t, "blocklyEditableText"),
          Blockly.utils.dom.removeClass(t, "blocklyNonEditableText"),
          (t.style.cursor = this.CURSOR))
        : (Blockly.utils.dom.addClass(t, "blocklyNonEditableText"),
          Blockly.utils.dom.removeClass(t, "blocklyEditableText"),
          (t.style.cursor = "")));
  }),
  (Blockly.Field.prototype.isClickable = function () {
    return (
      !!this.sourceBlock_ &&
      this.sourceBlock_.isEditable() &&
      !!this.showEditor_ &&
      "function" == typeof this.showEditor_
    );
  }),
  (Blockly.Field.prototype.isCurrentlyEditable = function () {
    return (
      this.EDITABLE && !!this.sourceBlock_ && this.sourceBlock_.isEditable()
    );
  }),
  (Blockly.Field.prototype.isSerializable = function () {
    var t = !1;
    return (
      this.name &&
        (this.SERIALIZABLE
          ? (t = !0)
          : this.EDITABLE &&
            (console.warn(
              "Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."
            ),
            (t = !0))),
      t
    );
  }),
  (Blockly.Field.prototype.isVisible = function () {
    return this.visible_;
  }),
  (Blockly.Field.prototype.setVisible = function (t) {
    if (this.visible_ != t) {
      this.visible_ = t;
      var e = this.getSvgRoot();
      e && (e.style.display = t ? "block" : "none");
    }
  }),
  (Blockly.Field.prototype.addArgType = function (t) {
    null == this.argType_ && (this.argType_ = []), this.argType_.push(t);
  }),
  (Blockly.Field.prototype.getArgTypes = function () {
    return null === this.argType_ || 0 === this.argType_.length
      ? null
      : this.argType_.join(" ");
  }),
  (Blockly.Field.prototype.setValidator = function (t) {
    this.validator_ = t;
  }),
  (Blockly.Field.prototype.getValidator = function () {
    return this.validator_;
  }),
  (Blockly.Field.prototype.classValidator = function (t) {
    return t;
  }),
  (Blockly.Field.prototype.callValidator = function (t) {
    var e = this.classValidator(t);
    if (null === e) return null;
    if ((void 0 !== e && (t = e), (e = this.getValidator()))) {
      if (null === (e = e.call(this, t))) return null;
      void 0 !== e && (t = e);
    }
    return t;
  }),
  (Blockly.Field.prototype.getSvgRoot = function () {
    return this.fieldGroup_;
  }),
  (Blockly.Field.prototype.applyColour = function () {}),
  (Blockly.Field.prototype.render_ = function () {
    this.textContent_ &&
      ((this.textContent_.nodeValue = this.getDisplayText_()),
      this.updateSize_());
  }),
  (Blockly.Field.prototype.showEditor = function (t) {
    this.isClickable() && this.showEditor_(t);
  }),
  (Blockly.Field.prototype.updateWidth = function () {
    console.warn(
      "Deprecated call to updateWidth, call Blockly.Field.updateSize_ to force an update to the size of the field, or Blockly.utils.dom.getTextWidth() to check the size of the field."
    ),
      this.updateSize_();
  }),
  (Blockly.Field.prototype.updateSize_ = function () {
    var t = Blockly.utils.dom.getFastTextWidth(
      this.textElement_,
      this.constants_.FIELD_TEXT_FONTSIZE,
      this.constants_.FIELD_TEXT_FONTWEIGHT,
      this.constants_.FIELD_TEXT_FONTFAMILY
    );
    this.borderRect_ &&
      ((t += 2 * this.constants_.FIELD_BORDER_RECT_X_PADDING),
      this.borderRect_.setAttribute("width", t)),
      (this.size_.width = t);
  }),
  (Blockly.Field.prototype.getSize = function () {
    return this.isVisible()
      ? (this.isDirty_
          ? (this.render_(), (this.isDirty_ = !1))
          : this.visible_ &&
            0 == this.size_.width &&
            !this.sourceBlock_.isInsertionMarker_ &&
            (console.warn(
              "Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."
            ),
            this.render_()),
        this.size_)
      : new Blockly.utils.Size(0, 0);
  }),
  (Blockly.Field.prototype.getScaledBBox = function () {
    if (this.borderRect_)
      (t = this.borderRect_.getBoundingClientRect()),
        (o = Blockly.utils.style.getPageOffset(this.borderRect_)),
        (i = t.width),
        (t = t.height);
    else {
      var t = this.sourceBlock_.getHeightWidth(),
        e = this.sourceBlock_.workspace.scale,
        o = this.getAbsoluteXY_(),
        i = t.width * e;
      (t = t.height * e),
        Blockly.utils.userAgent.GECKO
          ? ((o.x += 1.5 * e), (o.y += 1.5 * e))
          : Blockly.utils.userAgent.EDGE ||
            Blockly.utils.userAgent.IE ||
            ((o.x -= 0.5 * e), (o.y -= 0.5 * e)),
        (i += 1 * e),
        (t += 1 * e);
    }
    return { top: o.y, bottom: o.y + t, left: o.x, right: o.x + i };
  }),
  (Blockly.Field.prototype.getDisplayText_ = function () {
    var t = this.getText();
    return t
      ? (t.length > this.maxDisplayLength &&
          (t = t.substring(0, this.maxDisplayLength - 2) + "…"),
        (t = t.replace(/\s/g, Blockly.Field.NBSP)),
        this.sourceBlock_ && this.sourceBlock_.RTL && (t += "‏"),
        t)
      : Blockly.Field.NBSP;
  }),
  (Blockly.Field.prototype.getText = function () {
    if (this.getText_) {
      var t = this.getText_.call(this);
      if (null !== t) return String(t);
    }
    return String(this.getValue());
  }),
  (Blockly.Field.prototype.setText = function (t) {
    throw Error("setText method is deprecated");
  }),
  (Blockly.Field.prototype.markDirty = function () {
    this.isDirty_ = !0;
  }),
  (Blockly.Field.prototype.forceRerender = function () {
    (this.isDirty_ = !0),
      this.sourceBlock_ &&
        this.sourceBlock_.rendered &&
        (this.sourceBlock_.render(), this.sourceBlock_.bumpNeighbours());
  }),
  (Blockly.Field.prototype.setValue = function (t) {
    if (null !== t) {
      var e = this.doClassValidation_(t);
      if (!((t = this.processValidation_(t, e)) instanceof Error)) {
        if (
          (e = this.getValidator()) &&
          ((e = e.call(this, t)),
          (t = this.processValidation_(t, e)) instanceof Error)
        )
          return;
        (e = this.getValue()) !== t &&
          (this.sourceBlock_ &&
            Blockly.Events.isEnabled() &&
            Blockly.Events.fire(
              new Blockly.Events.BlockChange(
                this.sourceBlock_,
                "field",
                this.name || null,
                e,
                t
              )
            ),
          this.doValueUpdate_(t),
          this.isDirty_ && this.forceRerender());
      }
    }
  }),
  (Blockly.Field.prototype.processValidation_ = function (t, e) {
    return null === e
      ? (this.doValueInvalid_(t),
        this.isDirty_ && this.forceRerender(),
        Error())
      : (void 0 !== e && (t = e), t);
  }),
  (Blockly.Field.prototype.getValue = function () {
    return this.value_;
  }),
  (Blockly.Field.prototype.doClassValidation_ = function (t) {
    return null == t ? null : (t = this.classValidator(t));
  }),
  (Blockly.Field.prototype.doValueUpdate_ = function (t) {
    (this.value_ = t), (this.isDirty_ = !0);
  }),
  (Blockly.Field.prototype.doValueInvalid_ = function (t) {}),
  (Blockly.Field.prototype.onMouseDown_ = function (t) {
    this.sourceBlock_ &&
      this.sourceBlock_.workspace &&
      (t = this.sourceBlock_.workspace.getGesture(t)) &&
      t.setStartField(this);
  }),
  (Blockly.Field.prototype.setTooltip = function (t) {
    var e = this.getClickTarget_();
    e
      ? (e.tooltip = t || "" === t ? t : this.sourceBlock_)
      : (this.tooltip_ = t);
  }),
  (Blockly.Field.prototype.getClickTarget_ = function () {
    if (this.clickTarget_) return this.clickTarget_;
    if (!this.sourceBlock_) return null;
    for (
      var t, e = 0, o = 0, i = 0;
      (t = this.sourceBlock_.inputList[i]);
      i++
    ) {
      for (var n, l = 0; (n = t.fieldRow[l]); l++)
        n instanceof Blockly.FieldLabel || e++;
      t.connection && o++;
    }
    return (this.clickTarget_ =
      1 >= e && this.sourceBlock_.outputConnection && !o
        ? this.sourceBlock_.getSvgRoot()
        : this.getSvgRoot());
  }),
  (Blockly.Field.prototype.getTotalFields_ = function () {
    for (var t, e = 0, o = 0; (t = this.sourceBlock_.inputList[o]); o++)
      e += t.fieldRow.length;
    return e;
  }),
  (Blockly.Field.prototype.getAbsoluteXY_ = function () {
    return Blockly.utils.style.getPageOffset(this.getClickTarget_());
  }),
  (Blockly.Field.prototype.referencesVariables = function () {
    return !1;
  }),
  (Blockly.Field.prototype.getParentInput = function () {
    for (
      var t = null, e = this.sourceBlock_, o = e.inputList, i = 0;
      i < e.inputList.length;
      i++
    )
      for (var n = o[i], l = n.fieldRow, r = 0; r < l.length; r++)
        if (l[r] === this) {
          t = n;
          break;
        }
    return t;
  }),
  (Blockly.Field.prototype.getFlipRtl = function () {
    return !1;
  }),
  (Blockly.Field.prototype.isTabNavigable = function () {
    return !1;
  }),
  (Blockly.Field.prototype.onBlocklyAction = function (t) {
    return !1;
  }),
  (Blockly.Field.prototype.setCursorSvg = function (t) {
    t
      ? (this.fieldGroup_.appendChild(t), (this.cursorSvg_ = t))
      : (this.cursorSvg_ = null);
  }),
  (Blockly.Field.prototype.setMarkerSvg = function (t) {
    t
      ? (this.fieldGroup_.appendChild(t), (this.markerSvg_ = t))
      : (this.markerSvg_ = null);
  }),
  (Blockly.fieldRegistry = {}),
  (Blockly.fieldRegistry.typeMap_ = {}),
  (Blockly.fieldRegistry.register = function (t, e) {
    if ("string" != typeof t || "" == t.trim())
      throw Error(
        'Invalid field type "' + t + '". The type must be a non-empty string.'
      );
    if (Blockly.fieldRegistry.typeMap_[t])
      throw Error('Error: Field "' + t + '" is already registered.');
    if (!e || "function" != typeof e.fromJson)
      throw Error('Field "' + e + '" must have a fromJson function');
    (t = t.toLowerCase()), (Blockly.fieldRegistry.typeMap_[t] = e);
  }),
  (Blockly.fieldRegistry.unregister = function (t) {
    Blockly.fieldRegistry.typeMap_[t]
      ? delete Blockly.fieldRegistry.typeMap_[t]
      : console.warn(
          'No field mapping for type "' + t + '" found to unregister'
        );
  }),
  (Blockly.fieldRegistry.fromJson = function (t) {
    var e = t.type.toLowerCase();
    return (e = Blockly.fieldRegistry.typeMap_[e])
      ? e.fromJson(t)
      : (console.warn(
          "Blockly could not create a field of type " +
            t.type +
            ". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."
        ),
        null);
  }),
  (Blockly.FieldLabel = function (t, e, o) {
    (this.class_ = null),
      null == t && (t = ""),
      Blockly.FieldLabel.superClass_.constructor.call(this, t, null, o),
      o || (this.class_ = e || null);
  }),
  Blockly.utils.object.inherits(Blockly.FieldLabel, Blockly.Field),
  (Blockly.FieldLabel.fromJson = function (t) {
    var e = Blockly.utils.replaceMessageReferences(t.text);
    return new Blockly.FieldLabel(e, void 0, t);
  }),
  (Blockly.FieldLabel.prototype.EDITABLE = !1),
  (Blockly.FieldLabel.prototype.bindEvents_ = function () {}),
  (Blockly.FieldLabel.prototype.configure_ = function (t) {
    Blockly.FieldLabel.superClass_.configure_.call(this, t),
      (this.class_ = t.class);
  }),
  (Blockly.FieldLabel.prototype.initView = function () {
    this.createTextElement_(),
      this.class_ && Blockly.utils.dom.addClass(this.textElement_, this.class_);
  }),
  (Blockly.FieldLabel.prototype.doClassValidation_ = function (t) {
    return null == t ? null : String(t);
  }),
  (Blockly.FieldLabel.prototype.setClass = function (t) {
    this.textElement_ &&
      (this.class_ &&
        Blockly.utils.dom.removeClass(this.textElement_, this.class_),
      t && Blockly.utils.dom.addClass(this.textElement_, t)),
      (this.class_ = t);
  }),
  Blockly.fieldRegistry.register("field_label", Blockly.FieldLabel),
  (Blockly.FieldLabelHover = function (t, e) {
    Blockly.FieldLabelHover.superClass_.constructor.call(this, t, e),
      (this.arrowWidth_ = 0);
  }),
  Blockly.utils.object.inherits(Blockly.FieldLabelHover, Blockly.FieldLabel),
  (Blockly.FieldLabelHover.prototype.initView = function () {
    Blockly.FieldLabelHover.superClass_.initView.call(this),
      this.sourceBlock_.isEditable() &&
        ((this.mouseOverWrapper_ = Blockly.bindEvent_(
          this.getClickTarget_(),
          "mouseover",
          this,
          this.onMouseOver_
        )),
        (this.mouseOutWrapper_ = Blockly.bindEvent_(
          this.getClickTarget_(),
          "mouseout",
          this,
          this.onMouseOut_
        )));
  }),
  (Blockly.FieldLabelHover.fromJson = function (t) {
    var e = Blockly.utils.replaceMessageReferences(t.text);
    return new Blockly.FieldLabelHover(e, t.class);
  }),
  (Blockly.FieldLabelHover.prototype.EDITABLE = !1),
  (Blockly.FieldLabelHover.prototype.SERIALIZABLE = !0),
  (Blockly.FieldLabelHover.prototype.updateWidth = function () {
    this.size_.width = Blockly.utils.dom.getFastTextWidth(
      this.textElement_,
      this.constants_.FIELD_TEXT_FONTSIZE,
      this.constants_.FIELD_TEXT_FONTWEIGHT,
      this.constants_.FIELD_TEXT_FONTFAMILY
    );
  }),
  (Blockly.FieldLabelHover.prototype.onMouseOver_ = function (t) {
    !this.sourceBlock_.isInFlyout &&
      this.sourceBlock_.isShadow() &&
      (((t = this.sourceBlock_.workspace.getGesture(t)) && t.isDragging()) ||
        !this.sourceBlock_.pathObject.svgPath ||
        (Blockly.utils.dom.addClass(
          this.sourceBlock_.pathObject.svgPath,
          "blocklyFieldHover"
        ),
        (this.sourceBlock_.pathObject.svgPath.style.strokeDasharray = "2")));
  }),
  (Blockly.FieldLabelHover.prototype.clearHover = function () {
    this.sourceBlock_.pathObject.svgPath &&
      (Blockly.utils.dom.removeClass(
        this.sourceBlock_.pathObject.svgPath,
        "blocklyFieldHover"
      ),
      (this.sourceBlock_.pathObject.svgPath.style.strokeDasharray = ""));
  }),
  (Blockly.FieldLabelHover.prototype.onMouseOut_ = function (t) {
    !this.sourceBlock_.isInFlyout &&
      this.sourceBlock_.isShadow() &&
      (((t = this.sourceBlock_.workspace.getGesture(t)) && t.isDragging()) ||
        this.clearHover());
  }),
  (Blockly.FieldLabelHover.dispose = function () {
    this.mouseOverWrapper_ &&
      (Blockly.unbindEvent_(this.mouseOverWrapper_),
      (this.mouseOverWrapper_ = null)),
      this.mouseOutWrapper_ &&
        (Blockly.unbindEvent_(this.mouseOutWrapper_),
        (this.mouseOutWrapper_ = null)),
      Blockly.FieldLabelHover.superClass_.dispose.call(this),
      (this.variableMap_ = this.workspace_ = null);
  }),
  Blockly.fieldRegistry.register("field_label_hover", Blockly.FieldLabelHover),
  (Blockly.FieldVariableGetter = function (t, e, o, i, n) {
    (this.defaultVariableName = t || ""),
      (this.size_ = new Blockly.utils.Size(0, 0)),
      n && this.configure_(n),
      e && this.setValidator(e),
      n || this.setTypes_(o, i);
  }),
  Blockly.utils.object.inherits(Blockly.FieldVariableGetter, Blockly.Field),
  (Blockly.FieldVariableGetter.fromJson = function (t) {
    var e = Blockly.utils.replaceMessageReferences(t.variable);
    return new Blockly.FieldVariableGetter(
      e,
      null,
      t.variableTypes,
      t.defaultType
    );
  }),
  (Blockly.FieldVariableGetter.prototype.workspace_ = null),
  (Blockly.FieldVariableGetter.prototype.CURSOR = "copy"),
  (Blockly.FieldVariableGetter.prototype.EDITABLE = !1),
  (Blockly.FieldVariableGetter.prototype.SERIALIZABLE = !0),
  (Blockly.FieldVariableGetter.prototype.initView = function () {
    this.createTextElement_(),
      this.sourceBlock_.isEditable() &&
        ((this.mouseOverWrapper_ = Blockly.bindEvent_(
          this.getClickTarget_(),
          "mouseover",
          this,
          this.onMouseOver_
        )),
        (this.mouseOutWrapper_ = Blockly.bindEvent_(
          this.getClickTarget_(),
          "mouseout",
          this,
          this.onMouseOut_
        )));
  }),
  (Blockly.FieldVariableGetter.prototype.initModel = function () {
    if (!this.variable_) {
      var t = Blockly.Variables.getOrCreateVariablePackage(
        this.sourceBlock_.workspace,
        null,
        this.defaultVariableName,
        this.defaultType_
      );
      this.doValueUpdate_(t.getId());
    }
  }),
  (Blockly.FieldVariableGetter.prototype.onMouseOver_ = function (t) {
    this.sourceBlock_.isInFlyout ||
      ((t = this.sourceBlock_.workspace.getGesture(t)) && t.isDragging()) ||
      !(t = this.sourceBlock_.pathObject.svgPath) ||
      (Blockly.utils.dom.addClass(t, "blocklyFieldHover"),
      (t.style.strokeDasharray = "2"));
  }),
  (Blockly.FieldVariableGetter.prototype.clearHover = function () {
    var t = this.sourceBlock_.pathObject.svgPath;
    t &&
      (Blockly.utils.dom.removeClass(t, "blocklyFieldHover"),
      (t.style.strokeDasharray = ""));
  }),
  (Blockly.FieldVariableGetter.prototype.onMouseOut_ = function (t) {
    this.sourceBlock_.isInFlyout ||
      ((t = this.sourceBlock_.workspace.getGesture(t)) && t.isDragging()) ||
      this.clearHover();
  }),
  (Blockly.FieldVariableGetter.dispose = function () {
    this.mouseOverWrapper_ &&
      (Blockly.unbindEvent_(this.mouseOverWrapper_),
      (this.mouseOverWrapper_ = null)),
      this.mouseOutWrapper_ &&
        (Blockly.unbindEvent_(this.mouseOutWrapper_),
        (this.mouseOutWrapper_ = null)),
      Blockly.FieldVariableGetter.superClass_.dispose.call(this),
      (this.variableMap_ = this.workspace_ = null);
  }),
  (Blockly.FieldVariableGetter.prototype.fromXml = function (t) {
    t.getAttribute("id");
    var e = t.textContent,
      o =
        t.getAttribute("variabletype") || t.getAttribute("variableType") || "";
    if (
      ((e = Blockly.Variables.getOrCreateVariablePackage(
        this.sourceBlock_.workspace,
        null,
        e,
        o
      )),
      null != o && o !== e.type)
    )
      throw Error(
        "Serialized variable type with id '" +
          e.getId() +
          "' had type " +
          e.type +
          ", and does not match variable field that references it: " +
          Blockly.Xml.domToText(t) +
          "."
      );
    this.setValue(e.getId());
  }),
  (Blockly.FieldVariableGetter.prototype.toXml = function (t) {
    return (
      this.initModel(),
      (t.id = this.variable_.getId()),
      (t.textContent = this.variable_.name),
      this.variable_.type &&
        t.setAttribute("variabletype", this.variable_.type),
      t
    );
  }),
  (Blockly.FieldVariableGetter.prototype.setSourceBlock = function (t) {
    goog.asserts.assert(
      !t.isShadow(),
      "Variable fields are not allowed to exist on shadow blocks."
    ),
      Blockly.FieldVariableGetter.superClass_.setSourceBlock.call(this, t);
  }),
  (Blockly.FieldVariableGetter.prototype.getValue = function () {
    return this.variable_ ? this.variable_.getId() : null;
  }),
  (Blockly.FieldVariableGetter.prototype.getText = function () {
    return this.variable_ ? this.variable_.name : "";
  }),
  (Blockly.FieldVariableGetter.prototype.getVariable = function () {
    return this.variable_;
  }),
  (Blockly.FieldVariableGetter.prototype.doValueUpdate_ = function (t) {
    (this.variable_ = Blockly.Variables.getVariable(
      this.sourceBlock_.workspace,
      t
    )),
      Blockly.FieldVariableGetter.superClass_.doValueUpdate_.call(this, t);
  }),
  (Blockly.FieldVariableGetter.prototype.doClassValidation_ = function (t) {
    if (null === t) return null;
    var e = Blockly.Variables.getVariable(this.sourceBlock_.workspace, t);
    return e
      ? ((e = e.type),
        this.typeIsAllowed_(e)
          ? t
          : (console.warn(
              "Variable type doesn't match this field!  Type was " + e
            ),
            null))
      : (console.warn(
          "Variable id doesn't point to a real variable! ID was " + t
        ),
        null);
  }),
  (Blockly.FieldVariableGetter.prototype.typeIsAllowed_ = function (t) {
    var e = this.getVariableTypes_();
    if (!e) return !0;
    for (var o = 0; o < e.length; o++) if (t == e[o]) return !0;
    return !1;
  }),
  (Blockly.FieldVariableGetter.prototype.getVariableTypes_ = function () {
    var t = this.variableTypes;
    if (null === t && this.sourceBlock_)
      return this.sourceBlock_.workspace.getVariableTypes();
    if (0 == (t = t || [""]).length)
      throw (
        ((t = this.getText()),
        Error("'variableTypes' of field variable " + t + " was an empty list"))
      );
    return t;
  }),
  (Blockly.FieldVariableGetter.prototype.setTypes_ = function (t, e) {
    if (((e = e || ""), null == t || null == t)) t = null;
    else {
      if (!Array.isArray(t))
        throw Error(
          "'variableTypes' was not an array in the definition of a FieldVariable"
        );
      for (var o = !1, i = 0; i < t.length; i++) t[i] == e && (o = !0);
      if (!o)
        throw Error(
          "Invalid default type '" +
            e +
            "' in the definition of a FieldVariable"
        );
    }
    (this.defaultType_ = e), (this.variableTypes = t);
  }),
  (Blockly.FieldVariableGetter.prototype.showEditor_ = function () {}),
  (Blockly.FieldVariableGetter.prototype.updateEditable = function () {
    !this.sourceBlock_.isInFlyout &&
      this.sourceBlock_.isEditable() &&
      (this.sourceBlock_.pathObject.svgPath.style.cursor = this.CURSOR);
  }),
  (Blockly.FieldVariableGetter.prototype.referencesVariables = function () {
    return !0;
  }),
  Blockly.fieldRegistry.register(
    "field_variable_getter",
    Blockly.FieldVariableGetter
  ),
  (Blockly.Input = function (t, e, o, i) {
    if (t != Blockly.DUMMY_INPUT && !e)
      throw Error(
        "Value inputs and statement inputs must have non-empty name."
      );
    (this.type = t),
      (this.name = e),
      (this.sourceBlock_ = o),
      (this.connection = i),
      (this.fieldRow = []);
  }),
  (Blockly.Input.prototype.align = Blockly.ALIGN_LEFT),
  (Blockly.Input.prototype.visible_ = !0),
  (Blockly.Input.prototype.getSourceBlock = function () {
    return this.sourceBlock_;
  }),
  (Blockly.Input.prototype.appendField = function (t, e) {
    return this.insertFieldAt(this.fieldRow.length, t, e), this;
  }),
  (Blockly.Input.prototype.insertFieldAt = function (t, e, o) {
    if (0 > t || t > this.fieldRow.length)
      throw Error("index " + t + " out of bounds.");
    return e || ("" == e && o)
      ? ("string" == typeof e && (e = new Blockly.FieldLabel(e)),
        e.setSourceBlock(this.sourceBlock_),
        this.sourceBlock_.rendered && e.init(),
        (e.name = o),
        e.prefixField && (t = this.insertFieldAt(t, e.prefixField)),
        this.fieldRow.splice(t, 0, e),
        ++t,
        e.suffixField && (t = this.insertFieldAt(t, e.suffixField)),
        this.sourceBlock_.rendered &&
          (this.sourceBlock_.render(), this.sourceBlock_.bumpNeighbours()),
        t)
      : t;
  }),
  (Blockly.Input.prototype.removeField = function (t) {
    for (var e, o = 0; (e = this.fieldRow[o]); o++)
      if (e.name === t)
        return (
          e.dispose(),
          this.fieldRow.splice(o, 1),
          void (
            this.sourceBlock_.rendered &&
            (this.sourceBlock_.render(), this.sourceBlock_.bumpNeighbours())
          )
        );
    throw Error('Field "%s" not found.', t);
  }),
  (Blockly.Input.prototype.isVisible = function () {
    return this.visible_;
  }),
  (Blockly.Input.prototype.setVisible = function (t) {
    var e = [];
    if (this.visible_ == t) return e;
    for (
      var o, i = (this.visible_ = t) ? "block" : "none", n = 0;
      (o = this.fieldRow[n]);
      n++
    )
      o.setVisible(t);
    return (
      this.connection &&
        (t
          ? (e = this.connection.startTrackingAll())
          : this.connection.stopTrackingAll(),
        (n = this.connection.targetBlock())) &&
        ((n.getSvgRoot().style.display = i), t || (n.rendered = !1)),
      e
    );
  }),
  (Blockly.Input.prototype.markDirty = function () {
    for (var t, e = 0; (t = this.fieldRow[e]); e++) t.markDirty();
  }),
  (Blockly.Input.prototype.setCheck = function (t) {
    if (!this.connection) throw Error("This input does not have a connection.");
    return this.connection.setCheck(t), this;
  }),
  (Blockly.Input.prototype.setAlign = function (t) {
    return (
      (this.align = t),
      this.sourceBlock_.rendered && this.sourceBlock_.render(),
      this
    );
  }),
  (Blockly.Input.prototype.init = function () {
    if (this.sourceBlock_.workspace.rendered)
      for (var t = 0; t < this.fieldRow.length; t++)
        this.fieldRow[t].init(this.sourceBlock_);
  }),
  (Blockly.Input.prototype.dispose = function () {
    for (var t, e = 0; (t = this.fieldRow[e]); e++) t.dispose();
    this.connection && this.connection.dispose(), (this.sourceBlock_ = null);
  }),
  (Blockly.Block = function (t, e, o) {
    if (Blockly.Generator && void 0 !== Blockly.Generator.prototype[e])
      throw Error(
        'Block prototypeName "' +
          e +
          '" conflicts with Blockly.Generator members.'
      );
    var i =
      t && t.getFlyout && t.getFlyout() ? t.getFlyout().getWorkspace() : null;
    if (
      ((this.id =
        !o || t.getBlockById(o) || (i && i.getBlockById(o))
          ? Blockly.utils.genUid()
          : o),
      t.setBlockById(this.id, this),
      (this.previousConnection =
        this.nextConnection =
        this.outputConnection =
          null),
      (this.inputList = []),
      (this.inputsInline = void 0),
      (this.disabled = this.startHat = !1),
      (this.tooltip = ""),
      (this.contextMenu = !0),
      (this.parentBlock_ = null),
      (this.childBlocks_ = []),
      (this.editable_ = this.movable_ = this.deletable_ = !0),
      (this.collapsed_ = this.isShadow_ = !1),
      (this.comment = this.outputShape_ = null),
      (this.commentModel = {
        text: null,
        pinned: !1,
        size: new Blockly.utils.Size(160, 80),
        xy: new Blockly.utils.Coordinate(10, 10),
      }),
      (this.xy_ = new Blockly.utils.Coordinate(0, 0)),
      (this.workspace = t),
      (this.isInFlyout = t.isFlyout),
      (this.isInMutator = t.isMutator),
      (this.RTL = t.RTL),
      (this.isInsertionMarker_ = !1),
      (this.hat = void 0),
      e)
    ) {
      if (((this.type = e), !(o = Blockly.Blocks[e]) || "object" != typeof o))
        throw TypeError("Unknown block type: " + e);
      Blockly.utils.object.mixin(this, o);
    }
    if (
      (t.addTopBlock(this),
      t.addTypedBlock(this),
      "function" == typeof this.init && this.init(),
      (this.inputsInlineDefault = this.inputsInline),
      Blockly.Events.isEnabled())
    ) {
      (t = Blockly.Events.getGroup()) || Blockly.Events.setGroup(!0);
      try {
        Blockly.Events.fire(new Blockly.Events.BlockCreate(this));
      } finally {
        t || Blockly.Events.setGroup(!1);
      }
    }
    "function" == typeof this.onchange && this.setOnChange(this.onchange);
  }),
  (Blockly.Block.prototype.data = null),
  (Blockly.Block.prototype.disposed = !1),
  (Blockly.Block.prototype.hue_ = null),
  (Blockly.Block.prototype.colour_ = "#000000"),
  (Blockly.Block.prototype.styleName_ = null),
  (Blockly.Block.prototype.dispose = function (t) {
    if (this.workspace) {
      this.onchangeWrapper_ &&
        this.workspace.removeChangeListener(this.onchangeWrapper_),
        this.unplug(t),
        Blockly.Events.isEnabled() &&
          Blockly.Events.fire(new Blockly.Events.BlockDelete(this)),
        Blockly.Events.disable();
      try {
        this.workspace &&
          (this.workspace.removeTopBlock(this),
          this.workspace.removeTypedBlock(this),
          this.workspace.removeBlockById(this.id),
          (this.workspace = null)),
          Blockly.selected == this && (Blockly.selected = null);
        for (var e = this.childBlocks_.length - 1; 0 <= e; e--)
          this.childBlocks_[e].dispose(!1);
        e = 0;
        for (var o; (o = this.inputList[e]); e++) o.dispose();
        this.inputList.length = 0;
        var i,
          n = this.getConnections_(!0);
        for (e = 0; (i = n[e]); e++) i.dispose();
      } finally {
        Blockly.Events.enable(), (this.disposed = !0);
      }
    }
  }),
  (Blockly.Block.prototype.initModel = function () {
    for (var t, e = 0; (t = this.inputList[e]); e++)
      for (var o, i = 0; (o = t.fieldRow[i]); i++) o.initModel && o.initModel();
  }),
  (Blockly.Block.prototype.unplug = function (t) {
    this.outputConnection
      ? this.unplugFromRow_(t)
      : this.previousConnection && this.unplugFromStack_(t);
  }),
  (Blockly.Block.prototype.unplugFromRow_ = function (t) {
    var e = null;
    this.outputConnection.isConnected() &&
      ((e = this.outputConnection.targetConnection),
      this.outputConnection.disconnect()),
      e &&
        t &&
        (t = this.getOnlyValueConnection_()) &&
        t.isConnected() &&
        !t.targetBlock().isShadow() &&
        ((t = t.targetConnection).disconnect(),
        t.checkType(e) ? e.connect(t) : t.onFailedConnect(e));
  }),
  (Blockly.Block.prototype.getOnlyValueConnection_ = function () {
    for (var t = null, e = 0; e < this.inputList.length; e++) {
      var o = this.inputList[e].connection;
      if (o && o.type == Blockly.INPUT_VALUE && o.targetConnection) {
        if (t) return null;
        t = o;
      }
    }
    return t;
  }),
  (Blockly.Block.prototype.unplugFromStack_ = function (t) {
    var e = null;
    this.previousConnection.isConnected() &&
      ((e = this.previousConnection.targetConnection),
      this.previousConnection.disconnect());
    var o = this.getNextBlock();
    t &&
      o &&
      !o.isShadow() &&
      ((t = this.nextConnection.targetConnection).disconnect(),
      e && e.checkType(t) && e.connect(t));
  }),
  (Blockly.Block.prototype.getConnections_ = function (t) {
    (t = []),
      this.outputConnection && t.push(this.outputConnection),
      this.previousConnection && t.push(this.previousConnection),
      this.nextConnection && t.push(this.nextConnection);
    for (var e, o = 0; (e = this.inputList[o]); o++)
      e.connection && t.push(e.connection);
    return t;
  }),
  (Blockly.Block.prototype.lastConnectionInStack = function () {
    for (var t = this.nextConnection; t; ) {
      var e = t.targetBlock();
      if (!e) return t;
      t = e.nextConnection;
    }
    return null;
  }),
  (Blockly.Block.prototype.bumpNeighbours = function () {
    console.warn(
      "Not expected to reach Block.bumpNeighbours function. BlockSvg.bumpNeighbours was expected to be called instead."
    );
  }),
  (Blockly.Block.prototype.getParent = function () {
    return this.parentBlock_;
  }),
  (Blockly.Block.prototype.getInputWithBlock = function (t) {
    for (var e, o = 0; (e = this.inputList[o]); o++)
      if (e.connection && e.connection.targetBlock() == t) return e;
    return null;
  }),
  (Blockly.Block.prototype.getInputWithConnection = function (t) {
    for (var e, o = 0; (e = this.inputList[o]); o++)
      if (e.connection == t) return e;
    return null;
  }),
  (Blockly.Block.prototype.getSurroundParent = function () {
    var t = this;
    do {
      var e = t;
      if (!(t = t.getParent())) return null;
    } while (t.getNextBlock() == e);
    return t;
  }),
  (Blockly.Block.prototype.getNextBlock = function () {
    return this.nextConnection && this.nextConnection.targetBlock();
  }),
  (Blockly.Block.prototype.getPreviousBlock = function () {
    return this.previousConnection && this.previousConnection.targetBlock();
  }),
  (Blockly.Block.prototype.getFirstStatementConnection = function () {
    for (var t, e = 0; (t = this.inputList[e]); e++)
      if (t.connection && t.connection.type == Blockly.NEXT_STATEMENT)
        return t.connection;
    return null;
  }),
  (Blockly.Block.prototype.getRootBlock = function () {
    var t = this;
    do {
      var e = t;
      t = e.parentBlock_;
    } while (t);
    return e;
  }),
  (Blockly.Block.prototype.getTopStackBlock = function () {
    var t = this;
    do {
      var e = t.getPreviousBlock();
    } while (e && e.getNextBlock() == t && (t = e));
    return t;
  }),
  (Blockly.Block.prototype.getChildren = function (t) {
    if (!t) return this.childBlocks_;
    t = [];
    for (var e, o = 0; (e = this.inputList[o]); o++)
      e.connection && (e = e.connection.targetBlock()) && t.push(e);
    return (o = this.getNextBlock()) && t.push(o), t;
  }),
  (Blockly.Block.prototype.setParent = function (t) {
    if (t != this.parentBlock_) {
      if (this.parentBlock_) {
        if (
          (Blockly.utils.arrayRemove(this.parentBlock_.childBlocks_, this),
          this.previousConnection && this.previousConnection.isConnected())
        )
          throw Error("Still connected to previous block.");
        if (this.outputConnection && this.outputConnection.isConnected())
          throw Error("Still connected to parent block.");
        this.parentBlock_ = null;
      } else this.workspace.removeTopBlock(this);
      (this.parentBlock_ = t)
        ? t.childBlocks_.push(this)
        : this.workspace.addTopBlock(this);
    }
  }),
  (Blockly.Block.prototype.getDescendants = function (t, e) {
    for (var o, i = [this], n = this.getChildren(t), l = 0; (o = n[l]); l++)
      (e && o.isShadow()) || i.push.apply(i, o.getDescendants(t));
    return i;
  }),
  (Blockly.Block.prototype.isDeletable = function () {
    return (
      this.deletable_ &&
      !this.isShadow_ &&
      !(this.workspace && this.workspace.options.readOnly)
    );
  }),
  (Blockly.Block.prototype.setDeletable = function (t) {
    this.deletable_ = t;
  }),
  (Blockly.Block.prototype.isMovable = function () {
    return (
      this.isMovablePersisted() &&
      !(this.workspace && this.workspace.options.debugMode)
    );
  }),
  (Blockly.Block.prototype.isMovablePersisted = function () {
    return (
      this.movable_ &&
      !this.isShadow_ &&
      !(this.workspace && this.workspace.options.readOnly)
    );
  }),
  (Blockly.Block.prototype.setMovable = function (t) {
    this.movable_ = t;
  }),
  (Blockly.Block.prototype.isDuplicatable = function () {
    return (
      !this.workspace.hasBlockLimits() ||
      this.workspace.isCapacityAvailable(
        Blockly.utils.getBlockTypeCounts(this, !0)
      )
    );
  }),
  (Blockly.Block.prototype.isShadow = function () {
    return this.isShadow_;
  }),
  (Blockly.Block.prototype.setShadow = function (t) {
    this.isShadow_ = t;
  }),
  (Blockly.Block.prototype.isInsertionMarker = function () {
    return this.isInsertionMarker_;
  }),
  (Blockly.Block.prototype.setInsertionMarker = function (t) {
    this.isInsertionMarker_ != t &&
      (this.isInsertionMarker_ = t) &&
      (this.setColour(Blockly.Colours.insertionMarker),
      this.setOpacity(Blockly.Colours.insertionMarkerOpacity),
      Blockly.utils.dom.addClass(this.svgGroup_, "blocklyInsertionMarker"));
  }),
  (Blockly.Block.prototype.isEditable = function () {
    return (
      this.isEditablePersisted() &&
      !(this.workspace && this.workspace.options.debugMode)
    );
  }),
  (Blockly.Block.prototype.isEditablePersisted = function () {
    return (
      this.editable_ && !(this.workspace && this.workspace.options.readOnly)
    );
  }),
  (Blockly.Block.prototype.setEditable = function (t) {
    (this.editable_ = t), (t = 0);
    for (var e; (e = this.inputList[t]); t++)
      for (var o, i = 0; (o = e.fieldRow[i]); i++) o.updateEditable();
  }),
  (Blockly.Block.prototype.isDisposed = function () {
    return this.disposed;
  }),
  (Blockly.Block.prototype.getMatchingConnection = function (t, e) {
    var o = this.getConnections_(!0);
    if (((t = t.getConnections_(!0)), o.length != t.length))
      throw Error("Connection lists did not match in length.");
    for (var i = 0; i < t.length; i++) if (t[i] == e) return o[i];
    return null;
  }),
  (Blockly.Block.prototype.setHelpUrl = function (t) {
    this.helpUrl = t;
  }),
  (Blockly.Block.prototype.setTooltip = function (t) {
    this.tooltip = t;
  }),
  (Blockly.Block.prototype.getColour = function () {
    return this.colour_;
  }),
  (Blockly.Block.prototype.getStyleName = function () {
    return this.styleName_;
  }),
  (Blockly.Block.prototype.getHue = function () {
    return this.hue_;
  }),
  (Blockly.Block.prototype.setColour = function (t) {
    (t = Blockly.utils.parseBlockColour(t)),
      (this.hue_ = t.hue),
      (this.colour_ = t.hex);
  }),
  (Blockly.Block.prototype.setStyle = function (t) {
    this.styleName_ = t;
  }),
  (Blockly.Block.prototype.setOnChange = function (t) {
    if (t && "function" != typeof t)
      throw Error("onchange must be a function.");
    this.onchangeWrapper_ &&
      this.workspace.removeChangeListener(this.onchangeWrapper_),
      (this.onchange = t) &&
        ((this.onchangeWrapper_ = t.bind(this)),
        this.workspace.addChangeListener(this.onchangeWrapper_));
  }),
  (Blockly.Block.prototype.getField = function (t) {
    for (var e, o = 0; (e = this.inputList[o]); o++)
      for (var i, n = 0; (i = e.fieldRow[n]); n++) if (i.name == t) return i;
    return null;
  }),
  (Blockly.Block.prototype.getVars = function () {
    for (var t, e = [], o = 0; (t = this.inputList[o]); o++)
      for (var i, n = 0; (i = t.fieldRow[n]); n++)
        i.referencesVariables() && e.push(i.getValue());
    return e;
  }),
  (Blockly.Block.prototype.getVarModels = function () {
    for (var t, e = [], o = 0; (t = this.inputList[o]); o++)
      for (var i, n = 0; (i = t.fieldRow[n]); n++)
        i.referencesVariables() &&
          (i = this.workspace.getVariableById(i.getValue())) &&
          e.push(i);
    return e;
  }),
  (Blockly.Block.prototype.updateVarName = function (t) {
    for (var e, o = 0; (e = this.inputList[o]); o++)
      for (var i, n = 0; (i = e.fieldRow[n]); n++)
        i.referencesVariables() &&
          t.getId() == i.getValue() &&
          i.forceRerender();
  }),
  (Blockly.Block.prototype.renameVarById = function (t, e) {
    for (var o, i = 0; (o = this.inputList[i]); i++)
      for (var n, l = 0; (n = o.fieldRow[l]); l++)
        n.referencesVariables() && t == n.getValue() && n.setValue(e);
  }),
  (Blockly.Block.prototype.getFieldValue = function (t) {
    return (t = this.getField(t)) ? t.getValue() : null;
  }),
  (Blockly.Block.prototype.setFieldValue = function (t, e) {
    var o = this.getField(e);
    if (!o) throw Error('Field "' + e + '" not found.');
    o.setValue(t);
  }),
  (Blockly.Block.prototype.setPreviousStatement = function (t, e) {
    if (t) {
      if ((void 0 === e && (e = null), !this.previousConnection)) {
        if (this.outputConnection)
          throw Error(
            "Remove output connection prior to adding previous connection."
          );
        this.previousConnection = this.makeConnection_(
          Blockly.PREVIOUS_STATEMENT
        );
      }
      this.previousConnection.setCheck(e);
    } else if (this.previousConnection) {
      if (this.previousConnection.isConnected())
        throw Error(
          "Must disconnect previous statement before removing connection."
        );
      this.previousConnection.dispose(), (this.previousConnection = null);
    }
  }),
  (Blockly.Block.prototype.setNextStatement = function (t, e) {
    if (t)
      void 0 === e && (e = null),
        this.nextConnection ||
          (this.nextConnection = this.makeConnection_(Blockly.NEXT_STATEMENT)),
        this.nextConnection.setCheck(e);
    else if (this.nextConnection) {
      if (this.nextConnection.isConnected())
        throw Error(
          "Must disconnect next statement before removing connection."
        );
      this.nextConnection.dispose(), (this.nextConnection = null);
    }
  }),
  (Blockly.Block.prototype.setOutput = function (t, e) {
    if (t) {
      if ((void 0 === e && (e = null), !this.outputConnection)) {
        if (this.previousConnection)
          throw Error(
            "Remove previous connection prior to adding output connection."
          );
        this.outputConnection = this.makeConnection_(Blockly.OUTPUT_VALUE);
      }
      this.outputConnection.setCheck(e);
    } else if (this.outputConnection) {
      if (this.outputConnection.isConnected())
        throw Error("Must disconnect output value before removing connection.");
      this.outputConnection.dispose(), (this.outputConnection = null);
    }
  }),
  (Blockly.Block.prototype.setInputsInline = function (t) {
    this.inputsInline != t &&
      (Blockly.Events.fire(
        new Blockly.Events.BlockChange(
          this,
          "inline",
          null,
          this.inputsInline,
          t
        )
      ),
      (this.inputsInline = t));
  }),
  (Blockly.Block.prototype.getInputsInline = function () {
    if (null != this.inputsInline) return this.inputsInline;
    for (var t = 1; t < this.inputList.length; t++)
      if (
        this.inputList[t - 1].type == Blockly.DUMMY_INPUT &&
        this.inputList[t].type == Blockly.DUMMY_INPUT
      )
        return !1;
    for (t = 1; t < this.inputList.length; t++)
      if (
        this.inputList[t - 1].type == Blockly.INPUT_VALUE &&
        this.inputList[t].type == Blockly.DUMMY_INPUT
      )
        return !0;
    return !1;
  }),
  (Blockly.Block.prototype.setStartHat = function (t) {
    this.startHat != t && (this.startHat = t);
  }),
  (Blockly.Block.prototype.getStartHat = function () {
    return this.startHat;
  }),
  (Blockly.Block.prototype.setOutputShape = function (t) {
    this.outputShape_ = t;
  }),
  (Blockly.Block.prototype.getOutputShape = function () {
    return this.outputShape_;
  }),
  (Blockly.Block.prototype.setDisabled = function (t) {
    console.warn(
      "Deprecated call to Blockly.Block.prototype.setDisabled, use Blockly.Block.prototype.setEnabled instead."
    ),
      this.setEnabled(!t);
  }),
  (Blockly.Block.prototype.isEnabled = function () {
    return !this.disabled;
  }),
  (Blockly.Block.prototype.setEnabled = function (t) {
    this.isEnabled() != t &&
      (Blockly.Events.fire(
        new Blockly.Events.BlockChange(
          this,
          "disabled",
          null,
          this.disabled,
          !t
        )
      ),
      (this.disabled = !t));
  }),
  (Blockly.Block.prototype.getInheritedDisabled = function () {
    for (var t = this.getSurroundParent(); t; ) {
      if (t.disabled) return !0;
      t = t.getSurroundParent();
    }
    return !1;
  }),
  (Blockly.Block.prototype.isCollapsed = function () {
    return this.collapsed_;
  }),
  (Blockly.Block.prototype.setCollapsed = function (t) {
    this.collapsed_ != t &&
      (Blockly.Events.fire(
        new Blockly.Events.BlockChange(
          this,
          "collapsed",
          null,
          this.collapsed_,
          t
        )
      ),
      (this.collapsed_ = t));
  }),
  (Blockly.Block.prototype.toString = function (t, e, o) {
    var i = [],
      n = e || "?";
    if (this.collapsed_)
      i.push(this.getInput("_TEMP_COLLAPSED_INPUT").fieldRow[0].getText());
    else
      for (
        var l, r = 0;
        (l = this.inputList[r]) &&
        (!o ||
          (l.type != Blockly.NEXT_STATEMENT &&
            l.type != Blockly.PREVIOUS_STATEMENT));
        r++
      ) {
        for (var s, a = 0; (s = l.fieldRow[a]); a++) i.push(s.getText());
        l.connection &&
          ((l = l.connection.targetBlock())
            ? i.push(l.toString(void 0, e))
            : i.push(n));
      }
    return (
      (i = i.join(" ").trim() || "???"),
      t && i.length > t && (i = i.substring(0, t - 3) + "..."),
      i
    );
  }),
  (Blockly.Block.prototype.appendValueInput = function (t) {
    return this.appendInput_(Blockly.INPUT_VALUE, t);
  }),
  (Blockly.Block.prototype.appendStatementInput = function (t) {
    return this.appendInput_(Blockly.NEXT_STATEMENT, t);
  }),
  (Blockly.Block.prototype.appendDummyInput = function (t) {
    return this.appendInput_(Blockly.DUMMY_INPUT, t || "");
  }),
  (Blockly.Block.prototype.jsonInit = function (t) {
    var e = t.type ? 'Block "' + t.type + '": ' : "";
    if (t.output && t.previousStatement)
      throw Error(e + "Must not have both an output and a previousStatement.");
    if (
      (t.style && t.style.hat && ((this.hat = t.style.hat), (t.style = null)),
      t.style && t.colour)
    )
      throw Error(e + "Must not have both a colour and a style.");
    t.style ? this.jsonInitStyle_(t, e) : this.jsonInitColour_(t, e);
    for (var o = 0; void 0 !== t["message" + o]; )
      this.interpolate_(
        t["message" + o],
        t["args" + o] || [],
        t["lastDummyAlign" + o],
        e
      ),
        o++;
    if (
      (void 0 !== t.inputsInline && this.setInputsInline(t.inputsInline),
      void 0 !== t.startHat && this.setStartHat(t.startHat),
      void 0 !== t.output && this.setOutput(!0, t.output),
      void 0 !== t.outputShape && this.setOutputShape(t.outputShape),
      void 0 !== t.previousStatement &&
        this.setPreviousStatement(!0, t.previousStatement),
      void 0 !== t.nextStatement && this.setNextStatement(!0, t.nextStatement),
      void 0 !== t.tooltip &&
        ((o = t.tooltip),
        (o = Blockly.utils.replaceMessageReferences(o)),
        this.setTooltip(o)),
      void 0 !== t.enableContextMenu &&
        ((o = t.enableContextMenu), (this.contextMenu = !!o)),
      void 0 !== t.helpUrl &&
        ((o = t.helpUrl),
        (o = Blockly.utils.replaceMessageReferences(o)),
        this.setHelpUrl(o)),
      "string" == typeof t.extensions &&
        (console.warn(
          e +
            "JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '" +
            t.type +
            "' block."
        ),
        (t.extensions = [t.extensions])),
      void 0 !== t.mutator && Blockly.Extensions.apply(t.mutator, this, !0),
      Array.isArray(t.extensions))
    )
      for (e = t.extensions, o = 0; o < e.length; ++o)
        Blockly.Extensions.apply(e[o], this, !1);
    void 0 !== t.outputShape && this.setOutputShape(t.outputShape),
      void 0 !== t.category && this.setCategory(t.category);
  }),
  (Blockly.Block.prototype.setColourFromRawValues_ = function (t, e, o) {
    (t = goog.isString(t) ? Blockly.utils.replaceMessageReferences(t) : t),
      (e = goog.isString(e) ? Blockly.utils.replaceMessageReferences(e) : e),
      (o = goog.isString(o) ? Blockly.utils.replaceMessageReferences(o) : o),
      this.setColour(t, e, o);
  }),
  (Blockly.Block.prototype.jsonInitColour_ = function (t, e) {
    if ("colour" in t)
      if (void 0 === t.colour) console.warn(e + "Undefined colour value.");
      else {
        var o = t.colour;
        try {
          this.setColourFromRawValues_(o, t.colourSecondary, t.colourTertiary);
        } catch (t) {
          console.warn(e + "Illegal colour value: ", o);
        }
      }
  }),
  (Blockly.Block.prototype.jsonInitStyle_ = function (t, e) {
    t = t.style;
    try {
      this.setStyle(t);
    } catch (o) {
      console.warn(e + "Style does not exist: ", t);
    }
  }),
  (Blockly.Block.prototype.mixin = function (t, e) {
    if (void 0 !== e && "boolean" != typeof e)
      throw Error("opt_disableCheck must be a boolean if provided");
    if (!e) {
      for (var o in ((e = []), t)) void 0 !== this[o] && e.push(o);
      if (e.length)
        throw Error("Mixin will overwrite block members: " + JSON.stringify(e));
    }
    Blockly.utils.object.mixin(this, t);
  }),
  (Blockly.Block.prototype.interpolate_ = function (t, e, o, i) {
    var n = Blockly.utils.tokenizeInterpolation(t),
      l = [],
      r = 0;
    t = [];
    for (var s = 0; s < n.length; s++) {
      var a = n[s];
      if ("number" == typeof a) {
        if (0 >= a || a > e.length)
          throw Error(
            'Block "' + this.type + '": Message index %' + a + " out of range."
          );
        if (l[a])
          throw Error(
            'Block "' + this.type + '": Message index %' + a + " duplicated."
          );
        (l[a] = !0), r++, t.push(e[a - 1]);
      } else (a = a.trim()) && t.push(a);
    }
    if (r != e.length)
      throw Error(
        'Block "' +
          this.type +
          '": Message does not reference all ' +
          e.length +
          " arg(s)."
      );
    for (
      t.length &&
        ("string" == typeof t[t.length - 1] ||
          Blockly.utils.string.startsWith(t[t.length - 1].type, "field_")) &&
        ((s = { type: "input_dummy" }), o && (s.align = o), t.push(s)),
        o = {
          LEFT: Blockly.ALIGN_LEFT,
          RIGHT: Blockly.ALIGN_RIGHT,
          CENTRE: Blockly.ALIGN_CENTRE,
          CENTER: Blockly.ALIGN_CENTRE,
        },
        e = [],
        s = 0;
      s < t.length;
      s++
    )
      if ("string" == typeof (l = t[s])) e.push([l, void 0]);
      else {
        n = r = null;
        do {
          if (((a = !1), "string" == typeof l)) r = new Blockly.FieldLabel(l);
          else
            switch (l.type) {
              case "input_value":
                n = this.appendValueInput(l.name);
                break;
              case "input_statement":
                n = this.appendStatementInput(l.name);
                break;
              case "input_dummy":
                n = this.appendDummyInput(l.name);
                break;
              default:
                !(r = Blockly.fieldRegistry.fromJson(l)) &&
                  l.alt &&
                  ((l = l.alt), (a = !0));
            }
        } while (a);
        if (r) e.push([r, l.name]);
        else if (n) {
          for (
            l.check && n.setCheck(l.check),
              l.align &&
                (void 0 === (r = o[l.align.toUpperCase()])
                  ? console.warn(i + "Illegal align value: ", l.align)
                  : n.setAlign(r)),
              l = 0;
            l < e.length;
            l++
          )
            n.appendField(e[l][0], e[l][1]);
          e.length = 0;
        }
      }
  }),
  (Blockly.Block.prototype.appendInput_ = function (t, e) {
    var o = null;
    return (
      (t != Blockly.INPUT_VALUE && t != Blockly.NEXT_STATEMENT) ||
        (o = this.makeConnection_(t)),
      (t = new Blockly.Input(t, e, this, o)),
      this.inputList.push(t),
      t
    );
  }),
  (Blockly.Block.prototype.moveInputBefore = function (t, e) {
    if (t != e) {
      for (
        var o, i = -1, n = e ? -1 : this.inputList.length, l = 0;
        (o = this.inputList[l]);
        l++
      )
        if (o.name == t) {
          if (((i = l), -1 != n)) break;
        } else if (e && o.name == e && ((n = l), -1 != i)) break;
      if (-1 == i) throw Error('Named input "' + t + '" not found.');
      if (-1 == n) throw Error('Reference input "' + e + '" not found.');
      this.moveNumberedInputBefore(i, n);
    }
  }),
  (Blockly.Block.prototype.moveNumberedInputBefore = function (t, e) {
    if (t == e) throw Error("Can't move input to itself.");
    if (t >= this.inputList.length)
      throw RangeError("Input index " + t + " out of bounds.");
    if (e > this.inputList.length)
      throw RangeError("Reference input " + e + " out of bounds.");
    var o = this.inputList[t];
    this.inputList.splice(t, 1), t < e && e--, this.inputList.splice(e, 0, o);
  }),
  (Blockly.Block.prototype.removeInput = function (t, e) {
    for (var o, i = 0; (o = this.inputList[i]); i++)
      if (o.name == t) return o.dispose(), void this.inputList.splice(i, 1);
    if (!e) throw Error("Input not found: " + t);
  }),
  (Blockly.Block.prototype.getInput = function (t) {
    for (var e, o = 0; (e = this.inputList[o]); o++) if (e.name == t) return e;
    return null;
  }),
  (Blockly.Block.prototype.getInputTargetBlock = function (t) {
    return (t = this.getInput(t)) && t.connection && t.connection.targetBlock();
  }),
  (Blockly.Block.prototype.getCommentText = function () {
    return this.commentModel.text;
  }),
  (Blockly.Block.prototype.setCommentText = function (t) {
    this.commentModel.text != t &&
      (Blockly.Events.fire(
        new Blockly.Events.BlockChange(
          this,
          "comment",
          null,
          this.commentModel.text,
          t
        )
      ),
      (this.comment = this.commentModel.text = t));
  }),
  (Blockly.Block.prototype.enableBreakpoint = function (t) {
    var e = !1;
    t
      ? (this.breakpoint ||
          ((this.breakpoint = new Blockly.Breakpoint(this)), (e = !0)),
        this.breakpoint.setVisible(this.isBreakpointSet()))
      : this.breakpoint && (this.breakpoint.dispose(), (e = !0)),
      e &&
        Blockly.Events.fire(
          new Blockly.Events.BlockChange(this, "breakpoint", null, !t, t)
        );
  }),
  (Blockly.Block.prototype.isBreakpointSet = function () {
    return this.breakpointSet_ || !1;
  }),
  (Blockly.Block.prototype.setBreakpoint = function (t) {
    this.breakpointSet_ = t;
  }),
  (Blockly.Block.prototype.setOutputShape = function (t) {
    this.outputShape_ = t;
  }),
  (Blockly.Block.prototype.getOutputShape = function () {
    return this.outputShape_ || Blockly.OUTPUT_SHAPE_ROUND;
  }),
  (Blockly.Block.prototype.setCategory = function (t) {
    this.category_ = t;
  }),
  (Blockly.Block.prototype.getCategory = function () {
    return this.category_;
  }),
  (Blockly.Block.prototype.setWarningText = function (t, e) {}),
  (Blockly.Block.prototype.setMutator = function (t) {}),
  (Blockly.Block.prototype.getRelativeToSurfaceXY = function () {
    return this.xy_;
  }),
  (Blockly.Block.prototype.moveBy = function (t, e) {
    if (this.parentBlock_) throw Error("Block has parent.");
    var o = new Blockly.Events.BlockMove(this);
    this.xy_.translate(t, e), o.recordNew(), Blockly.Events.fire(o);
  }),
  (Blockly.Block.prototype.makeConnection_ = function (t) {
    return new Blockly.Connection(this, t);
  }),
  (Blockly.Block.prototype.allInputsFilled = function (t) {
    if ((void 0 === t && (t = !0), !t && this.isShadow())) return !1;
    for (var e, o = 0; (e = this.inputList[o]); o++)
      if (
        e.connection &&
        (!(e = e.connection.targetBlock()) || !e.allInputsFilled(t))
      )
        return !1;
    return !(o = this.getNextBlock()) || o.allInputsFilled(t);
  }),
  (Blockly.Block.prototype.toDevString = function () {
    var t = this.type ? '"' + this.type + '" block' : "Block";
    return this.id && (t += ' (id="' + this.id + '")'), t;
  }),
  (Blockly.Block.prototype.onLoadedIntoWorkspace = function () {
    for (var t, e = 0; (t = this.inputList[e]); e++)
      for (var o, i = 0; (o = t.fieldRow[i]); i++)
        o.onLoadedIntoWorkspace && o.onLoadedIntoWorkspace();
  }),
  (Blockly.blockRendering = {}),
  (Blockly.blockRendering.IPathObject = function (t, e) {}),
  (Blockly.utils.aria = {}),
  (Blockly.utils.aria.ARIA_PREFIX_ = "aria-"),
  (Blockly.utils.aria.ROLE_ATTRIBUTE_ = "role"),
  (Blockly.utils.aria.Role = {
    GRID: "grid",
    GRIDCELL: "gridcell",
    GROUP: "group",
    LISTBOX: "listbox",
    MENU: "menu",
    MENUITEM: "menuitem",
    MENUITEMCHECKBOX: "menuitemcheckbox",
    OPTION: "option",
    PRESENTATION: "presentation",
    ROW: "row",
    TREE: "tree",
    TREEITEM: "treeitem",
    SEPARATOR: "separator",
  }),
  (Blockly.utils.aria.State = {
    ACTIVEDESCENDANT: "activedescendant",
    COLCOUNT: "colcount",
    EXPANDED: "expanded",
    INVALID: "invalid",
    LABEL: "label",
    LABELLEDBY: "labelledby",
    LEVEL: "level",
    ORIENTATION: "orientation",
    POSINSET: "posinset",
    ROWCOUNT: "rowcount",
    SELECTED: "selected",
    SETSIZE: "setsize",
    VALUEMAX: "valuemax",
    VALUEMIN: "valuemin",
    DISABLED: "disabled",
  }),
  (Blockly.utils.aria.setRole = function (t, e) {
    t.setAttribute(Blockly.utils.aria.ROLE_ATTRIBUTE_, e);
  }),
  (Blockly.utils.aria.setState = function (t, e, o) {
    Array.isArray(o) && (o = o.join(" ")),
      t.setAttribute(Blockly.utils.aria.ARIA_PREFIX_ + e, o);
  }),
  (Blockly.Menu = function () {
    Blockly.Component.call(this),
      (this.openingCoords = null),
      (this.highlightedIndex_ = -1),
      (this.onKeyDownWrapper_ =
        this.mouseLeaveHandler_ =
        this.mouseEnterHandler_ =
        this.clickHandler_ =
        this.mouseOverHandler_ =
          null);
  }),
  Blockly.utils.object.inherits(Blockly.Menu, Blockly.Component),
  (Blockly.Menu.prototype.createDom = function () {
    var t = document.createElement("div");
    (t.id = this.getId()),
      this.setElementInternal(t),
      (t.className = "goog-menu goog-menu-vertical blocklyNonSelectable"),
      (t.tabIndex = 0),
      Blockly.utils.aria.setRole(
        t,
        this.roleName_ || Blockly.utils.aria.Role.MENU
      );
  }),
  (Blockly.Menu.prototype.focus = function () {
    var t = this.getElement();
    t &&
      (t.focus({ preventScroll: !0 }),
      Blockly.utils.dom.addClass(t, "focused"));
  }),
  (Blockly.Menu.prototype.blur = function () {
    var t = this.getElement();
    t && (t.blur(), Blockly.utils.dom.removeClass(t, "focused"));
  }),
  (Blockly.Menu.prototype.setRole = function (t) {
    this.roleName_ = t;
  }),
  (Blockly.Menu.prototype.enterDocument = function () {
    Blockly.Menu.superClass_.enterDocument.call(this),
      this.forEachChild(function (t) {
        t.isInDocument() && this.registerChildId_(t);
      }, this),
      this.attachEvents_();
  }),
  (Blockly.Menu.prototype.exitDocument = function () {
    this.setHighlightedIndex(-1),
      Blockly.Menu.superClass_.exitDocument.call(this);
  }),
  (Blockly.Menu.prototype.disposeInternal = function () {
    Blockly.Menu.superClass_.disposeInternal.call(this), this.detachEvents_();
  }),
  (Blockly.Menu.prototype.attachEvents_ = function () {
    var t = this.getElement();
    (this.mouseOverHandler_ = Blockly.bindEventWithChecks_(
      t,
      "mouseover",
      this,
      this.handleMouseOver_,
      !0
    )),
      (this.clickHandler_ = Blockly.bindEventWithChecks_(
        t,
        "click",
        this,
        this.handleClick_,
        !0
      )),
      (this.mouseEnterHandler_ = Blockly.bindEventWithChecks_(
        t,
        "mouseenter",
        this,
        this.handleMouseEnter_,
        !0
      )),
      (this.mouseLeaveHandler_ = Blockly.bindEventWithChecks_(
        t,
        "mouseleave",
        this,
        this.handleMouseLeave_,
        !0
      )),
      (this.onKeyDownWrapper_ = Blockly.bindEventWithChecks_(
        t,
        "keydown",
        this,
        this.handleKeyEvent
      ));
  }),
  (Blockly.Menu.prototype.detachEvents_ = function () {
    this.mouseOverHandler_ &&
      (Blockly.unbindEvent_(this.mouseOverHandler_),
      (this.mouseOverHandler_ = null)),
      this.clickHandler_ &&
        (Blockly.unbindEvent_(this.clickHandler_), (this.clickHandler_ = null)),
      this.mouseEnterHandler_ &&
        (Blockly.unbindEvent_(this.mouseEnterHandler_),
        (this.mouseEnterHandler_ = null)),
      this.mouseLeaveHandler_ &&
        (Blockly.unbindEvent_(this.mouseLeaveHandler_),
        (this.mouseLeaveHandler_ = null)),
      this.onKeyDownWrapper_ &&
        (Blockly.unbindEvent_(this.onKeyDownWrapper_),
        (this.onKeyDownWrapper_ = null));
  }),
  (Blockly.Menu.prototype.childElementIdMap_ = null),
  (Blockly.Menu.prototype.registerChildId_ = function (t) {
    var e = t.getElement();
    (e = e.id || (e.id = t.getId())),
      this.childElementIdMap_ || (this.childElementIdMap_ = {}),
      (this.childElementIdMap_[e] = t);
  }),
  (Blockly.Menu.prototype.getMenuItem = function (t) {
    if (this.childElementIdMap_)
      for (var e = this.getElement(); t && t !== e; ) {
        var o = t.id;
        if (o in this.childElementIdMap_) return this.childElementIdMap_[o];
        t = t.parentNode;
      }
    return null;
  }),
  (Blockly.Menu.prototype.unhighlightCurrent = function () {
    var t = this.getHighlighted();
    t && t.setHighlighted(!1);
  }),
  (Blockly.Menu.prototype.clearHighlighted = function () {
    this.unhighlightCurrent(), this.setHighlightedIndex(-1);
  }),
  (Blockly.Menu.prototype.getHighlighted = function () {
    return this.getChildAt(this.highlightedIndex_);
  }),
  (Blockly.Menu.prototype.setHighlightedIndex = function (t) {
    var e = this.getChildAt(t);
    e
      ? (e.setHighlighted(!0), (this.highlightedIndex_ = t))
      : -1 < this.highlightedIndex_ &&
        (this.getHighlighted().setHighlighted(!1),
        (this.highlightedIndex_ = -1)),
      e &&
        Blockly.utils.style.scrollIntoContainerView(
          e.getElement(),
          this.getElement()
        );
  }),
  (Blockly.Menu.prototype.setHighlighted = function (t) {
    this.setHighlightedIndex(this.indexOfChild(t));
  }),
  (Blockly.Menu.prototype.highlightNext = function () {
    this.unhighlightCurrent(),
      this.highlightHelper(function (t, e) {
        return (t + 1) % e;
      }, this.highlightedIndex_);
  }),
  (Blockly.Menu.prototype.highlightPrevious = function () {
    this.unhighlightCurrent(),
      this.highlightHelper(function (t, e) {
        return 0 > --t ? e - 1 : t;
      }, this.highlightedIndex_);
  }),
  (Blockly.Menu.prototype.highlightHelper = function (t, e) {
    e = 0 > e ? -1 : e;
    var o = this.getChildCount();
    e = t.call(this, e, o);
    for (var i = 0; i <= o; ) {
      var n = this.getChildAt(e);
      if (n && this.canHighlightItem(n)) return this.setHighlightedIndex(e), !0;
      i++, (e = t.call(this, e, o));
    }
    return !1;
  }),
  (Blockly.Menu.prototype.canHighlightItem = function (t) {
    return t.isEnabled();
  }),
  (Blockly.Menu.prototype.handleMouseOver_ = function (t) {
    (t = this.getMenuItem(t.target)) &&
      t.isEnabled() &&
      this.getHighlighted() !== t &&
      (this.unhighlightCurrent(), this.setHighlighted(t));
  }),
  (Blockly.Menu.prototype.handleClick_ = function (t) {
    var e = this.openingCoords;
    if (((this.openingCoords = null), e && "number" == typeof t.clientX)) {
      var o = new Blockly.utils.Coordinate(t.clientX, t.clientY);
      if (1 > Blockly.utils.Coordinate.distance(e, o)) return;
    }
    (e = this.getMenuItem(t.target)) && e.handleClick(t) && t.preventDefault();
  }),
  (Blockly.Menu.prototype.handleMouseEnter_ = function (t) {
    this.focus();
  }),
  (Blockly.Menu.prototype.handleMouseLeave_ = function (t) {
    this.getElement() && (this.blur(), this.clearHighlighted());
  }),
  (Blockly.Menu.prototype.handleKeyEvent = function (t) {
    return (
      !(0 == this.getChildCount() || !this.handleKeyEventInternal(t)) &&
      (t.preventDefault(), t.stopPropagation(), !0)
    );
  }),
  (Blockly.Menu.prototype.handleKeyEventInternal = function (t) {
    var e = this.getHighlighted();
    if (e && "function" == typeof e.handleKeyEvent && e.handleKeyEvent(t))
      return !0;
    if (t.shiftKey || t.ctrlKey || t.metaKey || t.altKey) return !1;
    switch (t.keyCode) {
      case Blockly.utils.KeyCodes.ENTER:
        e && e.performActionInternal(t);
        break;
      case Blockly.utils.KeyCodes.UP:
        this.highlightPrevious();
        break;
      case Blockly.utils.KeyCodes.DOWN:
        this.highlightNext();
        break;
      default:
        return !1;
    }
    return !0;
  }),
  (Blockly.MenuItem = function (t, e) {
    Blockly.Component.call(this),
      this.setContentInternal(t),
      this.setValue(e),
      (this.enabled_ = !0);
  }),
  Blockly.utils.object.inherits(Blockly.MenuItem, Blockly.Component),
  (Blockly.MenuItem.prototype.createDom = function () {
    var t = document.createElement("div");
    (t.id = this.getId()),
      this.setElementInternal(t),
      (t.className =
        "goog-menuitem goog-option " +
        (this.enabled_ ? "" : "goog-menuitem-disabled ") +
        (this.checked_ ? "goog-option-selected " : "") +
        (this.isRightToLeft() ? "goog-menuitem-rtl " : ""));
    var e = this.getContentWrapperDom();
    t.appendChild(e);
    var o = this.getCheckboxDom();
    o && e.appendChild(o),
      e.appendChild(this.getContentDom()),
      Blockly.utils.aria.setRole(
        t,
        this.roleName_ ||
          (this.checkable_
            ? Blockly.utils.aria.Role.MENUITEMCHECKBOX
            : Blockly.utils.aria.Role.MENUITEM)
      ),
      Blockly.utils.aria.setState(
        t,
        Blockly.utils.aria.State.SELECTED,
        (this.checkable_ && this.checked_) || !1
      );
  }),
  (Blockly.MenuItem.prototype.getCheckboxDom = function () {
    if (!this.checkable_) return null;
    var t = document.createElement("div");
    return (t.className = "goog-menuitem-checkbox"), t;
  }),
  (Blockly.MenuItem.prototype.getContentDom = function () {
    var t = this.content_;
    return "string" == typeof t && (t = document.createTextNode(t)), t;
  }),
  (Blockly.MenuItem.prototype.getContentWrapperDom = function () {
    var t = document.createElement("div");
    return (t.className = "goog-menuitem-content"), t;
  }),
  (Blockly.MenuItem.prototype.setContentInternal = function (t) {
    this.content_ = t;
  }),
  (Blockly.MenuItem.prototype.setValue = function (t) {
    this.value_ = t;
  }),
  (Blockly.MenuItem.prototype.getValue = function () {
    return this.value_;
  }),
  (Blockly.MenuItem.prototype.setRole = function (t) {
    this.roleName_ = t;
  }),
  (Blockly.MenuItem.prototype.setCheckable = function (t) {
    this.checkable_ = t;
  }),
  (Blockly.MenuItem.prototype.setChecked = function (t) {
    if (this.checkable_) {
      this.checked_ = t;
      var e = this.getElement();
      e &&
        this.isEnabled() &&
        (t
          ? (Blockly.utils.dom.addClass(e, "goog-option-selected"),
            Blockly.utils.aria.setState(
              e,
              Blockly.utils.aria.State.SELECTED,
              !0
            ))
          : (Blockly.utils.dom.removeClass(e, "goog-option-selected"),
            Blockly.utils.aria.setState(
              e,
              Blockly.utils.aria.State.SELECTED,
              !1
            )));
    }
  }),
  (Blockly.MenuItem.prototype.setHighlighted = function (t) {
    this.highlight_ = t;
    var e = this.getElement();
    e &&
      this.isEnabled() &&
      (t
        ? Blockly.utils.dom.addClass(e, "goog-menuitem-highlight")
        : Blockly.utils.dom.removeClass(e, "goog-menuitem-highlight"));
  }),
  (Blockly.MenuItem.prototype.isEnabled = function () {
    return this.enabled_;
  }),
  (Blockly.MenuItem.prototype.setEnabled = function (t) {
    (this.enabled_ = t),
      (t = this.getElement()) &&
        (this.enabled_
          ? Blockly.utils.dom.removeClass(t, "goog-menuitem-disabled")
          : Blockly.utils.dom.addClass(t, "goog-menuitem-disabled"));
  }),
  (Blockly.MenuItem.prototype.handleClick = function (t) {
    this.isEnabled() && (this.setHighlighted(!0), this.performActionInternal());
  }),
  (Blockly.MenuItem.prototype.performActionInternal = function () {
    this.checkable_ && this.setChecked(!this.checked_),
      this.actionHandler_ &&
        this.actionHandler_.call(this.actionHandlerObj_, this);
  }),
  (Blockly.MenuItem.prototype.onAction = function (t, e) {
    (this.actionHandler_ = t), (this.actionHandlerObj_ = e);
  }),
  (Blockly.utils.uiMenu = {}),
  (Blockly.utils.uiMenu.getSize = function (t) {
    t = t.getElement();
    var e = Blockly.utils.style.getSize(t),
      o = Blockly.utils.style.getBorderBox(t);
    return (e.height = t.scrollHeight + o.top + o.bottom + 1), e;
  }),
  (Blockly.utils.uiMenu.adjustBBoxesForRTL = function (t, e, o) {
    (e.left += o.width),
      (e.right += o.width),
      (t.left += o.width),
      (t.right += o.width);
  }),
  (goog.debug = {}),
  (goog.debug.Error = function (t) {
    if (Error.captureStackTrace)
      Error.captureStackTrace(this, goog.debug.Error);
    else {
      var e = Error().stack;
      e && (this.stack = e);
    }
    t && (this.message = String(t)), (this.reportErrorToServer = !0);
  }),
  goog.inherits(goog.debug.Error, Error),
  (goog.debug.Error.prototype.name = "CustomError"),
  (goog.dom = {}),
  (goog.dom.NodeType = {
    ELEMENT: 1,
    ATTRIBUTE: 2,
    TEXT: 3,
    CDATA_SECTION: 4,
    ENTITY_REFERENCE: 5,
    ENTITY: 6,
    PROCESSING_INSTRUCTION: 7,
    COMMENT: 8,
    DOCUMENT: 9,
    DOCUMENT_TYPE: 10,
    DOCUMENT_FRAGMENT: 11,
    NOTATION: 12,
  }),
  (goog.asserts = {}),
  (goog.asserts.ENABLE_ASSERTS = goog.DEBUG),
  (goog.asserts.AssertionError = function (t, e) {
    goog.debug.Error.call(this, goog.asserts.subs_(t, e)),
      (this.messagePattern = t);
  }),
  goog.inherits(goog.asserts.AssertionError, goog.debug.Error),
  (goog.asserts.AssertionError.prototype.name = "AssertionError"),
  (goog.asserts.DEFAULT_ERROR_HANDLER = function (t) {
    throw t;
  }),
  (goog.asserts.errorHandler_ = goog.asserts.DEFAULT_ERROR_HANDLER),
  (goog.asserts.subs_ = function (t, e) {
    for (var o = "", i = (t = t.split("%s")).length - 1, n = 0; n < i; n++)
      o += t[n] + (n < e.length ? e[n] : "%s");
    return o + t[i];
  }),
  (goog.asserts.doAssertFailure_ = function (t, e, o, i) {
    var n = "Assertion failed";
    if (o) {
      n += ": " + o;
      var l = i;
    } else t && ((n += ": " + t), (l = e));
    (t = new goog.asserts.AssertionError("" + n, l || [])),
      goog.asserts.errorHandler_(t);
  }),
  (goog.asserts.setErrorHandler = function (t) {
    goog.asserts.ENABLE_ASSERTS && (goog.asserts.errorHandler_ = t);
  }),
  (goog.asserts.assert = function (t, e, o) {
    return (
      goog.asserts.ENABLE_ASSERTS &&
        !t &&
        goog.asserts.doAssertFailure_(
          "",
          null,
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.assertExists = function (t, e, o) {
    return (
      goog.asserts.ENABLE_ASSERTS &&
        null == t &&
        goog.asserts.doAssertFailure_(
          "Expected to exist: %s.",
          [t],
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.fail = function (t, e) {
    goog.asserts.ENABLE_ASSERTS &&
      goog.asserts.errorHandler_(
        new goog.asserts.AssertionError(
          "Failure" + (t ? ": " + t : ""),
          Array.prototype.slice.call(arguments, 1)
        )
      );
  }),
  (goog.asserts.assertNumber = function (t, e, o) {
    return (
      goog.asserts.ENABLE_ASSERTS &&
        "number" != typeof t &&
        goog.asserts.doAssertFailure_(
          "Expected number but got %s: %s.",
          [goog.typeOf(t), t],
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.assertString = function (t, e, o) {
    return (
      goog.asserts.ENABLE_ASSERTS &&
        "string" != typeof t &&
        goog.asserts.doAssertFailure_(
          "Expected string but got %s: %s.",
          [goog.typeOf(t), t],
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.assertFunction = function (t, e, o) {
    return (
      goog.asserts.ENABLE_ASSERTS &&
        !goog.isFunction(t) &&
        goog.asserts.doAssertFailure_(
          "Expected function but got %s: %s.",
          [goog.typeOf(t), t],
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.assertObject = function (t, e, o) {
    return (
      goog.asserts.ENABLE_ASSERTS &&
        !goog.isObject(t) &&
        goog.asserts.doAssertFailure_(
          "Expected object but got %s: %s.",
          [goog.typeOf(t), t],
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.assertArray = function (t, e, o) {
    return (
      goog.asserts.ENABLE_ASSERTS &&
        !goog.isArray(t) &&
        goog.asserts.doAssertFailure_(
          "Expected array but got %s: %s.",
          [goog.typeOf(t), t],
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.assertBoolean = function (t, e, o) {
    return (
      goog.asserts.ENABLE_ASSERTS &&
        "boolean" != typeof t &&
        goog.asserts.doAssertFailure_(
          "Expected boolean but got %s: %s.",
          [goog.typeOf(t), t],
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.assertElement = function (t, e, o) {
    return (
      !goog.asserts.ENABLE_ASSERTS ||
        (goog.isObject(t) && t.nodeType == goog.dom.NodeType.ELEMENT) ||
        goog.asserts.doAssertFailure_(
          "Expected Element but got %s: %s.",
          [goog.typeOf(t), t],
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.assertInstanceof = function (t, e, o, i) {
    return (
      !goog.asserts.ENABLE_ASSERTS ||
        t instanceof e ||
        goog.asserts.doAssertFailure_(
          "Expected instanceof %s but got %s.",
          [goog.asserts.getType_(e), goog.asserts.getType_(t)],
          o,
          Array.prototype.slice.call(arguments, 3)
        ),
      t
    );
  }),
  (goog.asserts.assertFinite = function (t, e, o) {
    return (
      !goog.asserts.ENABLE_ASSERTS ||
        ("number" == typeof t && isFinite(t)) ||
        goog.asserts.doAssertFailure_(
          "Expected %s to be a finite number but it is not.",
          [t],
          e,
          Array.prototype.slice.call(arguments, 2)
        ),
      t
    );
  }),
  (goog.asserts.assertObjectPrototypeIsIntact = function () {
    for (var t in Object.prototype)
      goog.asserts.fail(t + " should not be enumerable in Object.prototype.");
  }),
  (goog.asserts.getType_ = function (t) {
    return t instanceof Function
      ? t.displayName || t.name || "unknown type name"
      : t instanceof Object
      ? t.constructor.displayName ||
        t.constructor.name ||
        Object.prototype.toString.call(t)
      : null === t
      ? "null"
      : typeof t;
  }),
  (goog.array = {}),
  (goog.NATIVE_ARRAY_PROTOTYPES = goog.TRUSTED_SITE),
  (goog.array.ASSUME_NATIVE_FUNCTIONS = 2012 < goog.FEATURESET_YEAR),
  (goog.array.peek = function (t) {
    return t[t.length - 1];
  }),
  (goog.array.last = goog.array.peek),
  (goog.array.indexOf =
    goog.NATIVE_ARRAY_PROTOTYPES &&
    (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.indexOf)
      ? function (t, e, o) {
          return (
            goog.asserts.assert(null != t.length),
            Array.prototype.indexOf.call(t, e, o)
          );
        }
      : function (t, e, o) {
          if (
            ((o = null == o ? 0 : 0 > o ? Math.max(0, t.length + o) : o),
            "string" == typeof t)
          )
            return "string" != typeof e || 1 != e.length ? -1 : t.indexOf(e, o);
          for (; o < t.length; o++) if (o in t && t[o] === e) return o;
          return -1;
        }),
  (goog.array.lastIndexOf =
    goog.NATIVE_ARRAY_PROTOTYPES &&
    (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.lastIndexOf)
      ? function (t, e, o) {
          return (
            goog.asserts.assert(null != t.length),
            Array.prototype.lastIndexOf.call(t, e, null == o ? t.length - 1 : o)
          );
        }
      : function (t, e, o) {
          if (
            (0 > (o = null == o ? t.length - 1 : o) &&
              (o = Math.max(0, t.length + o)),
            "string" == typeof t)
          )
            return "string" != typeof e || 1 != e.length
              ? -1
              : t.lastIndexOf(e, o);
          for (; 0 <= o; o--) if (o in t && t[o] === e) return o;
          return -1;
        }),
  (goog.array.forEach =
    goog.NATIVE_ARRAY_PROTOTYPES &&
    (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.forEach)
      ? function (t, e, o) {
          goog.asserts.assert(null != t.length),
            Array.prototype.forEach.call(t, e, o);
        }
      : function (t, e, o) {
          for (
            var i = t.length, n = "string" == typeof t ? t.split("") : t, l = 0;
            l < i;
            l++
          )
            l in n && e.call(o, n[l], l, t);
        }),
  (goog.array.forEachRight = function (t, e, o) {
    var i = t.length,
      n = "string" == typeof t ? t.split("") : t;
    for (--i; 0 <= i; --i) i in n && e.call(o, n[i], i, t);
  }),
  (goog.array.filter =
    goog.NATIVE_ARRAY_PROTOTYPES &&
    (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.filter)
      ? function (t, e, o) {
          return (
            goog.asserts.assert(null != t.length),
            Array.prototype.filter.call(t, e, o)
          );
        }
      : function (t, e, o) {
          for (
            var i = t.length,
              n = [],
              l = 0,
              r = "string" == typeof t ? t.split("") : t,
              s = 0;
            s < i;
            s++
          )
            if (s in r) {
              var a = r[s];
              e.call(o, a, s, t) && (n[l++] = a);
            }
          return n;
        }),
  (goog.array.map =
    goog.NATIVE_ARRAY_PROTOTYPES &&
    (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.map)
      ? function (t, e, o) {
          return (
            goog.asserts.assert(null != t.length),
            Array.prototype.map.call(t, e, o)
          );
        }
      : function (t, e, o) {
          for (
            var i = t.length,
              n = Array(i),
              l = "string" == typeof t ? t.split("") : t,
              r = 0;
            r < i;
            r++
          )
            r in l && (n[r] = e.call(o, l[r], r, t));
          return n;
        }),
  (goog.array.reduce =
    goog.NATIVE_ARRAY_PROTOTYPES &&
    (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.reduce)
      ? function (t, e, o, i) {
          return (
            goog.asserts.assert(null != t.length),
            i && (e = goog.bind(e, i)),
            Array.prototype.reduce.call(t, e, o)
          );
        }
      : function (t, e, o, i) {
          var n = o;
          return (
            goog.array.forEach(t, function (o, l) {
              n = e.call(i, n, o, l, t);
            }),
            n
          );
        }),
  (goog.array.reduceRight =
    goog.NATIVE_ARRAY_PROTOTYPES &&
    (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.reduceRight)
      ? function (t, e, o, i) {
          return (
            goog.asserts.assert(null != t.length),
            goog.asserts.assert(null != e),
            i && (e = goog.bind(e, i)),
            Array.prototype.reduceRight.call(t, e, o)
          );
        }
      : function (t, e, o, i) {
          var n = o;
          return (
            goog.array.forEachRight(t, function (o, l) {
              n = e.call(i, n, o, l, t);
            }),
            n
          );
        }),
  (goog.array.some =
    goog.NATIVE_ARRAY_PROTOTYPES &&
    (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.some)
      ? function (t, e, o) {
          return (
            goog.asserts.assert(null != t.length),
            Array.prototype.some.call(t, e, o)
          );
        }
      : function (t, e, o) {
          for (
            var i = t.length, n = "string" == typeof t ? t.split("") : t, l = 0;
            l < i;
            l++
          )
            if (l in n && e.call(o, n[l], l, t)) return !0;
          return !1;
        }),
  (goog.array.every =
    goog.NATIVE_ARRAY_PROTOTYPES &&
    (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.every)
      ? function (t, e, o) {
          return (
            goog.asserts.assert(null != t.length),
            Array.prototype.every.call(t, e, o)
          );
        }
      : function (t, e, o) {
          for (
            var i = t.length, n = "string" == typeof t ? t.split("") : t, l = 0;
            l < i;
            l++
          )
            if (l in n && !e.call(o, n[l], l, t)) return !1;
          return !0;
        }),
  (goog.array.count = function (t, e, o) {
    var i = 0;
    return (
      goog.array.forEach(
        t,
        function (t, n, l) {
          e.call(o, t, n, l) && ++i;
        },
        o
      ),
      i
    );
  }),
  (goog.array.find = function (t, e, o) {
    return 0 > (e = goog.array.findIndex(t, e, o))
      ? null
      : "string" == typeof t
      ? t.charAt(e)
      : t[e];
  }),
  (goog.array.findIndex = function (t, e, o) {
    for (
      var i = t.length, n = "string" == typeof t ? t.split("") : t, l = 0;
      l < i;
      l++
    )
      if (l in n && e.call(o, n[l], l, t)) return l;
    return -1;
  }),
  (goog.array.findRight = function (t, e, o) {
    return 0 > (e = goog.array.findIndexRight(t, e, o))
      ? null
      : "string" == typeof t
      ? t.charAt(e)
      : t[e];
  }),
  (goog.array.findIndexRight = function (t, e, o) {
    var i = t.length,
      n = "string" == typeof t ? t.split("") : t;
    for (--i; 0 <= i; i--) if (i in n && e.call(o, n[i], i, t)) return i;
    return -1;
  }),
  (goog.array.contains = function (t, e) {
    return 0 <= goog.array.indexOf(t, e);
  }),
  (goog.array.isEmpty = function (t) {
    return 0 == t.length;
  }),
  (goog.array.clear = function (t) {
    if (!goog.isArray(t)) for (var e = t.length - 1; 0 <= e; e--) delete t[e];
    t.length = 0;
  }),
  (goog.array.insert = function (t, e) {
    goog.array.contains(t, e) || t.push(e);
  }),
  (goog.array.insertAt = function (t, e, o) {
    goog.array.splice(t, o, 0, e);
  }),
  (goog.array.insertArrayAt = function (t, e, o) {
    goog.partial(goog.array.splice, t, o, 0).apply(null, e);
  }),
  (goog.array.insertBefore = function (t, e, o) {
    var i;
    2 == arguments.length || 0 > (i = goog.array.indexOf(t, o))
      ? t.push(e)
      : goog.array.insertAt(t, e, i);
  }),
  (goog.array.remove = function (t, e) {
    var o;
    return (
      (o = 0 <= (e = goog.array.indexOf(t, e))) && goog.array.removeAt(t, e), o
    );
  }),
  (goog.array.removeLast = function (t, e) {
    return (
      0 <= (e = goog.array.lastIndexOf(t, e)) && (goog.array.removeAt(t, e), !0)
    );
  }),
  (goog.array.removeAt = function (t, e) {
    return (
      goog.asserts.assert(null != t.length),
      1 == Array.prototype.splice.call(t, e, 1).length
    );
  }),
  (goog.array.removeIf = function (t, e, o) {
    return (
      0 <= (e = goog.array.findIndex(t, e, o)) &&
      (goog.array.removeAt(t, e), !0)
    );
  }),
  (goog.array.removeAllIf = function (t, e, o) {
    var i = 0;
    return (
      goog.array.forEachRight(t, function (n, l) {
        e.call(o, n, l, t) && goog.array.removeAt(t, l) && i++;
      }),
      i
    );
  }),
  (goog.array.concat = function (t) {
    return Array.prototype.concat.apply([], arguments);
  }),
  (goog.array.join = function (t) {
    return Array.prototype.concat.apply([], arguments);
  }),
  (goog.array.toArray = function (t) {
    var e = t.length;
    if (0 < e) {
      for (var o = Array(e), i = 0; i < e; i++) o[i] = t[i];
      return o;
    }
    return [];
  }),
  (goog.array.clone = goog.array.toArray),
  (goog.array.extend = function (t, e) {
    for (var o = 1; o < arguments.length; o++) {
      var i = arguments[o];
      if (goog.isArrayLike(i)) {
        var n = t.length || 0,
          l = i.length || 0;
        t.length = n + l;
        for (var r = 0; r < l; r++) t[n + r] = i[r];
      } else t.push(i);
    }
  }),
  (goog.array.splice = function (t, e, o, i) {
    return (
      goog.asserts.assert(null != t.length),
      Array.prototype.splice.apply(t, goog.array.slice(arguments, 1))
    );
  }),
  (goog.array.slice = function (t, e, o) {
    return (
      goog.asserts.assert(null != t.length),
      2 >= arguments.length
        ? Array.prototype.slice.call(t, e)
        : Array.prototype.slice.call(t, e, o)
    );
  }),
  (goog.array.removeDuplicates = function (t, e, o) {
    e = e || t;
    var i = function (t) {
      return goog.isObject(t) ? "o" + goog.getUid(t) : (typeof t).charAt(0) + t;
    };
    (o = o || i), (i = {});
    for (var n = 0, l = 0; l < t.length; ) {
      var r = t[l++],
        s = o(r);
      Object.prototype.hasOwnProperty.call(i, s) || ((i[s] = !0), (e[n++] = r));
    }
    e.length = n;
  }),
  (goog.array.binarySearch = function (t, e, o) {
    return goog.array.binarySearch_(t, o || goog.array.defaultCompare, !1, e);
  }),
  (goog.array.binarySelect = function (t, e, o) {
    return goog.array.binarySearch_(t, e, !0, void 0, o);
  }),
  (goog.array.binarySearch_ = function (t, e, o, i, n) {
    for (var l, r = 0, s = t.length; r < s; ) {
      var a = r + ((s - r) >>> 1),
        c = o ? e.call(n, t[a], a, t) : e(i, t[a]);
      0 < c ? (r = a + 1) : ((s = a), (l = !c));
    }
    return l ? r : -r - 1;
  }),
  (goog.array.sort = function (t, e) {
    t.sort(e || goog.array.defaultCompare);
  }),
  (goog.array.stableSort = function (t, e) {
    for (var o = Array(t.length), i = 0; i < t.length; i++)
      o[i] = { index: i, value: t[i] };
    var n = e || goog.array.defaultCompare;
    for (
      goog.array.sort(o, function (t, e) {
        return n(t.value, e.value) || t.index - e.index;
      }),
        i = 0;
      i < t.length;
      i++
    )
      t[i] = o[i].value;
  }),
  (goog.array.sortByKey = function (t, e, o) {
    var i = o || goog.array.defaultCompare;
    goog.array.sort(t, function (t, o) {
      return i(e(t), e(o));
    });
  }),
  (goog.array.sortObjectsByKey = function (t, e, o) {
    goog.array.sortByKey(
      t,
      function (t) {
        return t[e];
      },
      o
    );
  }),
  (goog.array.isSorted = function (t, e, o) {
    e = e || goog.array.defaultCompare;
    for (var i = 1; i < t.length; i++) {
      var n = e(t[i - 1], t[i]);
      if (0 < n || (0 == n && o)) return !1;
    }
    return !0;
  }),
  (goog.array.equals = function (t, e, o) {
    if (!goog.isArrayLike(t) || !goog.isArrayLike(e) || t.length != e.length)
      return !1;
    var i = t.length;
    o = o || goog.array.defaultCompareEquality;
    for (var n = 0; n < i; n++) if (!o(t[n], e[n])) return !1;
    return !0;
  }),
  (goog.array.compare3 = function (t, e, o) {
    o = o || goog.array.defaultCompare;
    for (var i = Math.min(t.length, e.length), n = 0; n < i; n++) {
      var l = o(t[n], e[n]);
      if (0 != l) return l;
    }
    return goog.array.defaultCompare(t.length, e.length);
  }),
  (goog.array.defaultCompare = function (t, e) {
    return t > e ? 1 : t < e ? -1 : 0;
  }),
  (goog.array.inverseDefaultCompare = function (t, e) {
    return -goog.array.defaultCompare(t, e);
  }),
  (goog.array.defaultCompareEquality = function (t, e) {
    return t === e;
  }),
  (goog.array.binaryInsert = function (t, e, o) {
    return (
      0 > (o = goog.array.binarySearch(t, e, o)) &&
      (goog.array.insertAt(t, e, -(o + 1)), !0)
    );
  }),
  (goog.array.binaryRemove = function (t, e, o) {
    return (
      0 <= (e = goog.array.binarySearch(t, e, o)) && goog.array.removeAt(t, e)
    );
  }),
  (goog.array.bucket = function (t, e, o) {
    for (var i = {}, n = 0; n < t.length; n++) {
      var l = t[n],
        r = e.call(o, l, n, t);
      void 0 !== r && (i[r] || (i[r] = [])).push(l);
    }
    return i;
  }),
  (goog.array.toObject = function (t, e, o) {
    var i = {};
    return (
      goog.array.forEach(t, function (n, l) {
        i[e.call(o, n, l, t)] = n;
      }),
      i
    );
  }),
  (goog.array.range = function (t, e, o) {
    var i = [],
      n = 0,
      l = t;
    if ((void 0 !== e && ((n = t), (l = e)), 0 > (o = o || 1) * (l - n)))
      return [];
    if (0 < o) for (t = n; t < l; t += o) i.push(t);
    else for (t = n; t > l; t += o) i.push(t);
    return i;
  }),
  (goog.array.repeat = function (t, e) {
    for (var o = [], i = 0; i < e; i++) o[i] = t;
    return o;
  }),
  (goog.array.flatten = function (t) {
    for (var e = [], o = 0; o < arguments.length; o++) {
      var i = arguments[o];
      if (goog.isArray(i))
        for (var n = 0; n < i.length; n += 8192) {
          var l = goog.array.slice(i, n, n + 8192);
          l = goog.array.flatten.apply(null, l);
          for (var r = 0; r < l.length; r++) e.push(l[r]);
        }
      else e.push(i);
    }
    return e;
  }),
  (goog.array.rotate = function (t, e) {
    return (
      goog.asserts.assert(null != t.length),
      t.length &&
        (0 < (e %= t.length)
          ? Array.prototype.unshift.apply(t, t.splice(-e, e))
          : 0 > e && Array.prototype.push.apply(t, t.splice(0, -e))),
      t
    );
  }),
  (goog.array.moveItem = function (t, e, o) {
    goog.asserts.assert(0 <= e && e < t.length),
      goog.asserts.assert(0 <= o && o < t.length),
      (e = Array.prototype.splice.call(t, e, 1)),
      Array.prototype.splice.call(t, o, 0, e[0]);
  }),
  (goog.array.zip = function (t) {
    if (!arguments.length) return [];
    for (var e = [], o = arguments[0].length, i = 1; i < arguments.length; i++)
      arguments[i].length < o && (o = arguments[i].length);
    for (i = 0; i < o; i++) {
      for (var n = [], l = 0; l < arguments.length; l++)
        n.push(arguments[l][i]);
      e.push(n);
    }
    return e;
  }),
  (goog.array.shuffle = function (t, e) {
    e = e || Math.random;
    for (var o = t.length - 1; 0 < o; o--) {
      var i = Math.floor(e() * (o + 1)),
        n = t[o];
      (t[o] = t[i]), (t[i] = n);
    }
  }),
  (goog.array.copyByIndex = function (t, e) {
    var o = [];
    return (
      goog.array.forEach(e, function (e) {
        o.push(t[e]);
      }),
      o
    );
  }),
  (goog.array.concatMap = function (t, e, o) {
    return goog.array.concat.apply([], goog.array.map(t, e, o));
  }),
  (goog.string = {}),
  (goog.string.internal = {}),
  (goog.string.internal.startsWith = function (t, e) {
    return 0 == t.lastIndexOf(e, 0);
  }),
  (goog.string.internal.endsWith = function (t, e) {
    var o = t.length - e.length;
    return 0 <= o && t.indexOf(e, o) == o;
  }),
  (goog.string.internal.caseInsensitiveStartsWith = function (t, e) {
    return (
      0 == goog.string.internal.caseInsensitiveCompare(e, t.substr(0, e.length))
    );
  }),
  (goog.string.internal.caseInsensitiveEndsWith = function (t, e) {
    return (
      0 ==
      goog.string.internal.caseInsensitiveCompare(
        e,
        t.substr(t.length - e.length, e.length)
      )
    );
  }),
  (goog.string.internal.caseInsensitiveEquals = function (t, e) {
    return t.toLowerCase() == e.toLowerCase();
  }),
  (goog.string.internal.isEmptyOrWhitespace = function (t) {
    return /^[\s\xa0]*$/.test(t);
  }),
  (goog.string.internal.trim =
    goog.TRUSTED_SITE && String.prototype.trim
      ? function (t) {
          return t.trim();
        }
      : function (t) {
          return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
        }),
  (goog.string.internal.caseInsensitiveCompare = function (t, e) {
    return (t = String(t).toLowerCase()) < (e = String(e).toLowerCase())
      ? -1
      : t == e
      ? 0
      : 1;
  }),
  (goog.string.internal.newLineToBr = function (t, e) {
    return t.replace(/(\r\n|\r|\n)/g, e ? "<br />" : "<br>");
  }),
  (goog.string.internal.htmlEscape = function (t, e) {
    if (e)
      t = t
        .replace(goog.string.internal.AMP_RE_, "&amp;")
        .replace(goog.string.internal.LT_RE_, "&lt;")
        .replace(goog.string.internal.GT_RE_, "&gt;")
        .replace(goog.string.internal.QUOT_RE_, "&quot;")
        .replace(goog.string.internal.SINGLE_QUOTE_RE_, "&#39;")
        .replace(goog.string.internal.NULL_RE_, "&#0;");
    else {
      if (!goog.string.internal.ALL_RE_.test(t)) return t;
      -1 != t.indexOf("&") &&
        (t = t.replace(goog.string.internal.AMP_RE_, "&amp;")),
        -1 != t.indexOf("<") &&
          (t = t.replace(goog.string.internal.LT_RE_, "&lt;")),
        -1 != t.indexOf(">") &&
          (t = t.replace(goog.string.internal.GT_RE_, "&gt;")),
        -1 != t.indexOf('"') &&
          (t = t.replace(goog.string.internal.QUOT_RE_, "&quot;")),
        -1 != t.indexOf("'") &&
          (t = t.replace(goog.string.internal.SINGLE_QUOTE_RE_, "&#39;")),
        -1 != t.indexOf("\0") &&
          (t = t.replace(goog.string.internal.NULL_RE_, "&#0;"));
    }
    return t;
  }),
  (goog.string.internal.AMP_RE_ = /&/g),
  (goog.string.internal.LT_RE_ = /</g),
  (goog.string.internal.GT_RE_ = />/g),
  (goog.string.internal.QUOT_RE_ = /"/g),
  (goog.string.internal.SINGLE_QUOTE_RE_ = /'/g),
  (goog.string.internal.NULL_RE_ = /\x00/g),
  (goog.string.internal.ALL_RE_ = /[\x00&<>"']/),
  (goog.string.internal.whitespaceEscape = function (t, e) {
    return goog.string.internal.newLineToBr(t.replace(/  /g, " &#160;"), e);
  }),
  (goog.string.internal.contains = function (t, e) {
    return -1 != t.indexOf(e);
  }),
  (goog.string.internal.caseInsensitiveContains = function (t, e) {
    return goog.string.internal.contains(t.toLowerCase(), e.toLowerCase());
  }),
  (goog.string.internal.compareVersions = function (t, e) {
    var o = 0;
    (t = goog.string.internal.trim(String(t)).split(".")),
      (e = goog.string.internal.trim(String(e)).split("."));
    for (var i = Math.max(t.length, e.length), n = 0; 0 == o && n < i; n++) {
      var l = t[n] || "",
        r = e[n] || "";
      do {
        if (
          ((l = /(\d*)(\D*)(.*)/.exec(l) || ["", "", "", ""]),
          (r = /(\d*)(\D*)(.*)/.exec(r) || ["", "", "", ""]),
          0 == l[0].length && 0 == r[0].length)
        )
          break;
        o = 0 == l[1].length ? 0 : parseInt(l[1], 10);
        var s = 0 == r[1].length ? 0 : parseInt(r[1], 10);
        (o =
          goog.string.internal.compareElements_(o, s) ||
          goog.string.internal.compareElements_(
            0 == l[2].length,
            0 == r[2].length
          ) ||
          goog.string.internal.compareElements_(l[2], r[2])),
          (l = l[3]),
          (r = r[3]);
      } while (0 == o);
    }
    return o;
  }),
  (goog.string.internal.compareElements_ = function (t, e) {
    return t < e ? -1 : t > e ? 1 : 0;
  }),
  (goog.labs = {}),
  (goog.labs.userAgent = {}),
  (goog.labs.userAgent.util = {}),
  (goog.labs.userAgent.util.getNativeUserAgentString_ = function () {
    var t = goog.labs.userAgent.util.getNavigator_();
    return t && (t = t.userAgent) ? t : "";
  }),
  (goog.labs.userAgent.util.getNavigator_ = function () {
    return goog.global.navigator;
  }),
  (goog.labs.userAgent.util.userAgent_ =
    goog.labs.userAgent.util.getNativeUserAgentString_()),
  (goog.labs.userAgent.util.setUserAgent = function (t) {
    goog.labs.userAgent.util.userAgent_ =
      t || goog.labs.userAgent.util.getNativeUserAgentString_();
  }),
  (goog.labs.userAgent.util.getUserAgent = function () {
    return goog.labs.userAgent.util.userAgent_;
  }),
  (goog.labs.userAgent.util.matchUserAgent = function (t) {
    var e = goog.labs.userAgent.util.getUserAgent();
    return goog.string.internal.contains(e, t);
  }),
  (goog.labs.userAgent.util.matchUserAgentIgnoreCase = function (t) {
    var e = goog.labs.userAgent.util.getUserAgent();
    return goog.string.internal.caseInsensitiveContains(e, t);
  }),
  (goog.labs.userAgent.util.extractVersionTuples = function (t) {
    for (
      var e, o = /(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g, i = [];
      (e = o.exec(t));

    )
      i.push([e[1], e[2], e[3] || void 0]);
    return i;
  }),
  (goog.object = {}),
  (goog.object.is = function (t, e) {
    return t === e ? 0 !== t || 1 / t == 1 / e : t != t && e != e;
  }),
  (goog.object.forEach = function (t, e, o) {
    for (var i in t) e.call(o, t[i], i, t);
  }),
  (goog.object.filter = function (t, e, o) {
    var i,
      n = {};
    for (i in t) e.call(o, t[i], i, t) && (n[i] = t[i]);
    return n;
  }),
  (goog.object.map = function (t, e, o) {
    var i,
      n = {};
    for (i in t) n[i] = e.call(o, t[i], i, t);
    return n;
  }),
  (goog.object.some = function (t, e, o) {
    for (var i in t) if (e.call(o, t[i], i, t)) return !0;
    return !1;
  }),
  (goog.object.every = function (t, e, o) {
    for (var i in t) if (!e.call(o, t[i], i, t)) return !1;
    return !0;
  }),
  (goog.object.getCount = function (t) {
    var e,
      o = 0;
    for (e in t) o++;
    return o;
  }),
  (goog.object.getAnyKey = function (t) {
    for (var e in t) return e;
  }),
  (goog.object.getAnyValue = function (t) {
    for (var e in t) return t[e];
  }),
  (goog.object.contains = function (t, e) {
    return goog.object.containsValue(t, e);
  }),
  (goog.object.getValues = function (t) {
    var e,
      o = [],
      i = 0;
    for (e in t) o[i++] = t[e];
    return o;
  }),
  (goog.object.getKeys = function (t) {
    var e,
      o = [],
      i = 0;
    for (e in t) o[i++] = e;
    return o;
  }),
  (goog.object.getValueByKeys = function (t, e) {
    var o = goog.isArrayLike(e),
      i = o ? e : arguments;
    for (o = o ? 0 : 1; o < i.length; o++) {
      if (null == t) return;
      t = t[i[o]];
    }
    return t;
  }),
  (goog.object.containsKey = function (t, e) {
    return null !== t && e in t;
  }),
  (goog.object.containsValue = function (t, e) {
    for (var o in t) if (t[o] == e) return !0;
    return !1;
  }),
  (goog.object.findKey = function (t, e, o) {
    for (var i in t) if (e.call(o, t[i], i, t)) return i;
  }),
  (goog.object.findValue = function (t, e, o) {
    return (e = goog.object.findKey(t, e, o)) && t[e];
  }),
  (goog.object.isEmpty = function (t) {
    for (var e in t) return !1;
    return !0;
  }),
  (goog.object.clear = function (t) {
    for (var e in t) delete t[e];
  }),
  (goog.object.remove = function (t, e) {
    var o;
    return (o = e in t) && delete t[e], o;
  }),
  (goog.object.add = function (t, e, o) {
    if (null !== t && e in t)
      throw Error('The object already contains the key "' + e + '"');
    goog.object.set(t, e, o);
  }),
  (goog.object.get = function (t, e, o) {
    return null !== t && e in t ? t[e] : o;
  }),
  (goog.object.set = function (t, e, o) {
    t[e] = o;
  }),
  (goog.object.setIfUndefined = function (t, e, o) {
    return e in t ? t[e] : (t[e] = o);
  }),
  (goog.object.setWithReturnValueIfNotSet = function (t, e, o) {
    return e in t ? t[e] : ((o = o()), (t[e] = o));
  }),
  (goog.object.equals = function (t, e) {
    for (var o in t) if (!(o in e) || t[o] !== e[o]) return !1;
    for (var i in e) if (!(i in t)) return !1;
    return !0;
  }),
  (goog.object.clone = function (t) {
    var e,
      o = {};
    for (e in t) o[e] = t[e];
    return o;
  }),
  (goog.object.unsafeClone = function (t) {
    var e = goog.typeOf(t);
    if ("object" == e || "array" == e) {
      if (goog.isFunction(t.clone)) return t.clone();
      for (var o in ((e = "array" == e ? [] : {}), t))
        e[o] = goog.object.unsafeClone(t[o]);
      return e;
    }
    return t;
  }),
  (goog.object.transpose = function (t) {
    var e,
      o = {};
    for (e in t) o[t[e]] = e;
    return o;
  }),
  (goog.object.PROTOTYPE_FIELDS_ =
    "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(
      " "
    )),
  (goog.object.extend = function (t, e) {
    for (var o, i, n = 1; n < arguments.length; n++) {
      for (o in (i = arguments[n])) t[o] = i[o];
      for (var l = 0; l < goog.object.PROTOTYPE_FIELDS_.length; l++)
        (o = goog.object.PROTOTYPE_FIELDS_[l]),
          Object.prototype.hasOwnProperty.call(i, o) && (t[o] = i[o]);
    }
  }),
  (goog.object.create = function (t) {
    var e = arguments.length;
    if (1 == e && goog.isArray(arguments[0]))
      return goog.object.create.apply(null, arguments[0]);
    if (e % 2) throw Error("Uneven number of arguments");
    for (var o = {}, i = 0; i < e; i += 2) o[arguments[i]] = arguments[i + 1];
    return o;
  }),
  (goog.object.createSet = function (t) {
    var e = arguments.length;
    if (1 == e && goog.isArray(arguments[0]))
      return goog.object.createSet.apply(null, arguments[0]);
    for (var o = {}, i = 0; i < e; i++) o[arguments[i]] = !0;
    return o;
  }),
  (goog.object.createImmutableView = function (t) {
    var e = t;
    return (
      Object.isFrozen &&
        !Object.isFrozen(t) &&
        ((e = Object.create(t)), Object.freeze(e)),
      e
    );
  }),
  (goog.object.isImmutableView = function (t) {
    return !!Object.isFrozen && Object.isFrozen(t);
  }),
  (goog.object.getAllPropertyNames = function (t, e, o) {
    if (!t) return [];
    if (!Object.getOwnPropertyNames || !Object.getPrototypeOf)
      return goog.object.getKeys(t);
    for (
      var i = {};
      t && (t !== Object.prototype || e) && (t !== Function.prototype || o);

    ) {
      for (var n = Object.getOwnPropertyNames(t), l = 0; l < n.length; l++)
        i[n[l]] = !0;
      t = Object.getPrototypeOf(t);
    }
    return goog.object.getKeys(i);
  }),
  (goog.object.getSuperClass = function (t) {
    return (t = Object.getPrototypeOf(t.prototype)) && t.constructor;
  }),
  (goog.labs.userAgent.browser = {}),
  (goog.labs.userAgent.browser.matchOpera_ = function () {
    return goog.labs.userAgent.util.matchUserAgent("Opera");
  }),
  (goog.labs.userAgent.browser.matchIE_ = function () {
    return (
      goog.labs.userAgent.util.matchUserAgent("Trident") ||
      goog.labs.userAgent.util.matchUserAgent("MSIE")
    );
  }),
  (goog.labs.userAgent.browser.matchEdgeHtml_ = function () {
    return goog.labs.userAgent.util.matchUserAgent("Edge");
  }),
  (goog.labs.userAgent.browser.matchEdgeChromium_ = function () {
    return goog.labs.userAgent.util.matchUserAgent("Edg/");
  }),
  (goog.labs.userAgent.browser.matchOperaChromium_ = function () {
    return goog.labs.userAgent.util.matchUserAgent("OPR");
  }),
  (goog.labs.userAgent.browser.matchFirefox_ = function () {
    return (
      goog.labs.userAgent.util.matchUserAgent("Firefox") ||
      goog.labs.userAgent.util.matchUserAgent("FxiOS")
    );
  }),
  (goog.labs.userAgent.browser.matchSafari_ = function () {
    return (
      goog.labs.userAgent.util.matchUserAgent("Safari") &&
      !(
        goog.labs.userAgent.browser.matchChrome_() ||
        goog.labs.userAgent.browser.matchCoast_() ||
        goog.labs.userAgent.browser.matchOpera_() ||
        goog.labs.userAgent.browser.matchEdgeHtml_() ||
        goog.labs.userAgent.browser.matchEdgeChromium_() ||
        goog.labs.userAgent.browser.matchOperaChromium_() ||
        goog.labs.userAgent.browser.matchFirefox_() ||
        goog.labs.userAgent.browser.isSilk() ||
        goog.labs.userAgent.util.matchUserAgent("Android")
      )
    );
  }),
  (goog.labs.userAgent.browser.matchCoast_ = function () {
    return goog.labs.userAgent.util.matchUserAgent("Coast");
  }),
  (goog.labs.userAgent.browser.matchIosWebview_ = function () {
    return (
      (goog.labs.userAgent.util.matchUserAgent("iPad") ||
        goog.labs.userAgent.util.matchUserAgent("iPhone")) &&
      !goog.labs.userAgent.browser.matchSafari_() &&
      !goog.labs.userAgent.browser.matchChrome_() &&
      !goog.labs.userAgent.browser.matchCoast_() &&
      !goog.labs.userAgent.browser.matchFirefox_() &&
      goog.labs.userAgent.util.matchUserAgent("AppleWebKit")
    );
  }),
  (goog.labs.userAgent.browser.matchChrome_ = function () {
    return (
      (goog.labs.userAgent.util.matchUserAgent("Chrome") ||
        goog.labs.userAgent.util.matchUserAgent("CriOS")) &&
      !goog.labs.userAgent.browser.matchEdgeHtml_()
    );
  }),
  (goog.labs.userAgent.browser.matchAndroidBrowser_ = function () {
    return (
      goog.labs.userAgent.util.matchUserAgent("Android") &&
      !(
        goog.labs.userAgent.browser.isChrome() ||
        goog.labs.userAgent.browser.isFirefox() ||
        goog.labs.userAgent.browser.isOpera() ||
        goog.labs.userAgent.browser.isSilk()
      )
    );
  }),
  (goog.labs.userAgent.browser.isOpera =
    goog.labs.userAgent.browser.matchOpera_),
  (goog.labs.userAgent.browser.isIE = goog.labs.userAgent.browser.matchIE_),
  (goog.labs.userAgent.browser.isEdge =
    goog.labs.userAgent.browser.matchEdgeHtml_),
  (goog.labs.userAgent.browser.isEdgeChromium =
    goog.labs.userAgent.browser.matchEdgeChromium_),
  (goog.labs.userAgent.browser.isOperaChromium =
    goog.labs.userAgent.browser.matchOperaChromium_),
  (goog.labs.userAgent.browser.isFirefox =
    goog.labs.userAgent.browser.matchFirefox_),
  (goog.labs.userAgent.browser.isSafari =
    goog.labs.userAgent.browser.matchSafari_),
  (goog.labs.userAgent.browser.isCoast =
    goog.labs.userAgent.browser.matchCoast_),
  (goog.labs.userAgent.browser.isIosWebview =
    goog.labs.userAgent.browser.matchIosWebview_),
  (goog.labs.userAgent.browser.isChrome =
    goog.labs.userAgent.browser.matchChrome_),
  (goog.labs.userAgent.browser.isAndroidBrowser =
    goog.labs.userAgent.browser.matchAndroidBrowser_),
  (goog.labs.userAgent.browser.isSilk = function () {
    return goog.labs.userAgent.util.matchUserAgent("Silk");
  }),
  (goog.labs.userAgent.browser.getVersion = function () {
    function t(t) {
      return (t = goog.array.find(t, i)), o[t] || "";
    }
    var e = goog.labs.userAgent.util.getUserAgent();
    if (goog.labs.userAgent.browser.isIE())
      return goog.labs.userAgent.browser.getIEVersion_(e);
    e = goog.labs.userAgent.util.extractVersionTuples(e);
    var o = {};
    goog.array.forEach(e, function (t) {
      o[t[0]] = t[1];
    });
    var i = goog.partial(goog.object.containsKey, o);
    return goog.labs.userAgent.browser.isOpera()
      ? t(["Version", "Opera"])
      : goog.labs.userAgent.browser.isEdge()
      ? t(["Edge"])
      : goog.labs.userAgent.browser.isEdgeChromium()
      ? t(["Edg"])
      : goog.labs.userAgent.browser.isChrome()
      ? t(["Chrome", "CriOS"])
      : ((e = e[2]) && e[1]) || "";
  }),
  (goog.labs.userAgent.browser.isVersionOrHigher = function (t) {
    return (
      0 <=
      goog.string.internal.compareVersions(
        goog.labs.userAgent.browser.getVersion(),
        t
      )
    );
  }),
  (goog.labs.userAgent.browser.getIEVersion_ = function (t) {
    var e = /rv: *([\d\.]*)/.exec(t);
    if (e && e[1]) return e[1];
    e = "";
    var o = /MSIE +([\d\.]+)/.exec(t);
    if (o && o[1])
      if (((t = /Trident\/(\d.\d)/.exec(t)), "7.0" == o[1]))
        if (t && t[1])
          switch (t[1]) {
            case "4.0":
              e = "8.0";
              break;
            case "5.0":
              e = "9.0";
              break;
            case "6.0":
              e = "10.0";
              break;
            case "7.0":
              e = "11.0";
          }
        else e = "7.0";
      else e = o[1];
    return e;
  }),
  (goog.dom.asserts = {}),
  (goog.dom.asserts.assertIsLocation = function (t) {
    if (goog.asserts.ENABLE_ASSERTS) {
      var e = goog.dom.asserts.getWindow_(t);
      e &&
        (!t || (!(t instanceof e.Location) && t instanceof e.Element)) &&
        goog.asserts.fail(
          "Argument is not a Location (or a non-Element mock); got: %s",
          goog.dom.asserts.debugStringForType_(t)
        );
    }
    return t;
  }),
  (goog.dom.asserts.assertIsElementType_ = function (t, e) {
    if (goog.asserts.ENABLE_ASSERTS) {
      var o = goog.dom.asserts.getWindow_(t);
      o &&
        void 0 !== o[e] &&
        ((t &&
          (t instanceof o[e] ||
            !(t instanceof o.Location || t instanceof o.Element))) ||
          goog.asserts.fail(
            "Argument is not a %s (or a non-Element, non-Location mock); got: %s",
            e,
            goog.dom.asserts.debugStringForType_(t)
          ));
    }
    return t;
  }),
  (goog.dom.asserts.assertIsHTMLAnchorElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLAnchorElement");
  }),
  (goog.dom.asserts.assertIsHTMLButtonElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLButtonElement");
  }),
  (goog.dom.asserts.assertIsHTMLLinkElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLLinkElement");
  }),
  (goog.dom.asserts.assertIsHTMLImageElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLImageElement");
  }),
  (goog.dom.asserts.assertIsHTMLAudioElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLAudioElement");
  }),
  (goog.dom.asserts.assertIsHTMLVideoElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLVideoElement");
  }),
  (goog.dom.asserts.assertIsHTMLInputElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLInputElement");
  }),
  (goog.dom.asserts.assertIsHTMLTextAreaElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLTextAreaElement");
  }),
  (goog.dom.asserts.assertIsHTMLCanvasElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLCanvasElement");
  }),
  (goog.dom.asserts.assertIsHTMLEmbedElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLEmbedElement");
  }),
  (goog.dom.asserts.assertIsHTMLFormElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLFormElement");
  }),
  (goog.dom.asserts.assertIsHTMLFrameElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLFrameElement");
  }),
  (goog.dom.asserts.assertIsHTMLIFrameElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLIFrameElement");
  }),
  (goog.dom.asserts.assertIsHTMLObjectElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLObjectElement");
  }),
  (goog.dom.asserts.assertIsHTMLScriptElement = function (t) {
    return goog.dom.asserts.assertIsElementType_(t, "HTMLScriptElement");
  }),
  (goog.dom.asserts.debugStringForType_ = function (t) {
    if (!goog.isObject(t))
      return void 0 === t ? "undefined" : null === t ? "null" : typeof t;
    try {
      return (
        t.constructor.displayName ||
        t.constructor.name ||
        Object.prototype.toString.call(t)
      );
    } catch (t) {
      return "<object could not be stringified>";
    }
  }),
  (goog.dom.asserts.getWindow_ = function (t) {
    try {
      var e = t && t.ownerDocument,
        o = e && (e.defaultView || e.parentWindow);
      if ((o = o || goog.global).Element && o.Location) return o;
    } catch (t) {}
    return null;
  }),
  (goog.functions = {}),
  (goog.functions.constant = function (t) {
    return function () {
      return t;
    };
  }),
  (goog.functions.FALSE = function () {
    return !1;
  }),
  (goog.functions.TRUE = function () {
    return !0;
  }),
  (goog.functions.NULL = function () {
    return null;
  }),
  (goog.functions.identity = function (t, e) {
    return t;
  }),
  (goog.functions.error = function (t) {
    return function () {
      throw Error(t);
    };
  }),
  (goog.functions.fail = function (t) {
    return function () {
      throw t;
    };
  }),
  (goog.functions.lock = function (t, e) {
    return (
      (e = e || 0),
      function () {
        return t.apply(this, Array.prototype.slice.call(arguments, 0, e));
      }
    );
  }),
  (goog.functions.nth = function (t) {
    return function () {
      return arguments[t];
    };
  }),
  (goog.functions.partialRight = function (t, e) {
    var o = Array.prototype.slice.call(arguments, 1);
    return function () {
      var e = Array.prototype.slice.call(arguments);
      return e.push.apply(e, o), t.apply(this, e);
    };
  }),
  (goog.functions.withReturnValue = function (t, e) {
    return goog.functions.sequence(t, goog.functions.constant(e));
  }),
  (goog.functions.equalTo = function (t, e) {
    return function (o) {
      return e ? t == o : t === o;
    };
  }),
  (goog.functions.compose = function (t, e) {
    var o = arguments,
      i = o.length;
    return function () {
      var t;
      i && (t = o[i - 1].apply(this, arguments));
      for (var e = i - 2; 0 <= e; e--) t = o[e].call(this, t);
      return t;
    };
  }),
  (goog.functions.sequence = function (t) {
    var e = arguments,
      o = e.length;
    return function () {
      for (var t, i = 0; i < o; i++) t = e[i].apply(this, arguments);
      return t;
    };
  }),
  (goog.functions.and = function (t) {
    var e = arguments,
      o = e.length;
    return function () {
      for (var t = 0; t < o; t++) if (!e[t].apply(this, arguments)) return !1;
      return !0;
    };
  }),
  (goog.functions.or = function (t) {
    var e = arguments,
      o = e.length;
    return function () {
      for (var t = 0; t < o; t++) if (e[t].apply(this, arguments)) return !0;
      return !1;
    };
  }),
  (goog.functions.not = function (t) {
    return function () {
      return !t.apply(this, arguments);
    };
  }),
  (goog.functions.create = function (t, e) {
    var o = function () {};
    return (
      (o.prototype = t.prototype),
      (o = new o()),
      t.apply(o, Array.prototype.slice.call(arguments, 1)),
      o
    );
  }),
  (goog.functions.CACHE_RETURN_VALUE = !0),
  (goog.functions.cacheReturnValue = function (t) {
    var e,
      o = !1;
    return function () {
      return goog.functions.CACHE_RETURN_VALUE
        ? (o || ((e = t()), (o = !0)), e)
        : t();
    };
  }),
  (goog.functions.once = function (t) {
    var e = t;
    return function () {
      if (e) {
        var t = e;
        (e = null), t();
      }
    };
  }),
  (goog.functions.debounce = function (t, e, o) {
    var i = 0;
    return function (n) {
      goog.global.clearTimeout(i);
      var l = arguments;
      i = goog.global.setTimeout(function () {
        t.apply(o, l);
      }, e);
    };
  }),
  (goog.functions.throttle = function (t, e, o) {
    var i = 0,
      n = !1,
      l = [],
      r = function () {
        (i = 0), n && ((n = !1), s());
      },
      s = function () {
        (i = goog.global.setTimeout(r, e)), t.apply(o, l);
      };
    return function (t) {
      (l = arguments), i ? (n = !0) : s();
    };
  }),
  (goog.functions.rateLimit = function (t, e, o) {
    var i = 0,
      n = function () {
        i = 0;
      };
    return function (l) {
      i || ((i = goog.global.setTimeout(n, e)), t.apply(o, arguments));
    };
  }),
  (goog.dom.HtmlElement = function () {}),
  (goog.dom.TagName = function (t) {
    this.tagName_ = t;
  }),
  (goog.dom.TagName.prototype.toString = function () {
    return this.tagName_;
  }),
  (goog.dom.TagName.A = new goog.dom.TagName("A")),
  (goog.dom.TagName.ABBR = new goog.dom.TagName("ABBR")),
  (goog.dom.TagName.ACRONYM = new goog.dom.TagName("ACRONYM")),
  (goog.dom.TagName.ADDRESS = new goog.dom.TagName("ADDRESS")),
  (goog.dom.TagName.APPLET = new goog.dom.TagName("APPLET")),
  (goog.dom.TagName.AREA = new goog.dom.TagName("AREA")),
  (goog.dom.TagName.ARTICLE = new goog.dom.TagName("ARTICLE")),
  (goog.dom.TagName.ASIDE = new goog.dom.TagName("ASIDE")),
  (goog.dom.TagName.AUDIO = new goog.dom.TagName("AUDIO")),
  (goog.dom.TagName.B = new goog.dom.TagName("B")),
  (goog.dom.TagName.BASE = new goog.dom.TagName("BASE")),
  (goog.dom.TagName.BASEFONT = new goog.dom.TagName("BASEFONT")),
  (goog.dom.TagName.BDI = new goog.dom.TagName("BDI")),
  (goog.dom.TagName.BDO = new goog.dom.TagName("BDO")),
  (goog.dom.TagName.BIG = new goog.dom.TagName("BIG")),
  (goog.dom.TagName.BLOCKQUOTE = new goog.dom.TagName("BLOCKQUOTE")),
  (goog.dom.TagName.BODY = new goog.dom.TagName("BODY")),
  (goog.dom.TagName.BR = new goog.dom.TagName("BR")),
  (goog.dom.TagName.BUTTON = new goog.dom.TagName("BUTTON")),
  (goog.dom.TagName.CANVAS = new goog.dom.TagName("CANVAS")),
  (goog.dom.TagName.CAPTION = new goog.dom.TagName("CAPTION")),
  (goog.dom.TagName.CENTER = new goog.dom.TagName("CENTER")),
  (goog.dom.TagName.CITE = new goog.dom.TagName("CITE")),
  (goog.dom.TagName.CODE = new goog.dom.TagName("CODE")),
  (goog.dom.TagName.COL = new goog.dom.TagName("COL")),
  (goog.dom.TagName.COLGROUP = new goog.dom.TagName("COLGROUP")),
  (goog.dom.TagName.COMMAND = new goog.dom.TagName("COMMAND")),
  (goog.dom.TagName.DATA = new goog.dom.TagName("DATA")),
  (goog.dom.TagName.DATALIST = new goog.dom.TagName("DATALIST")),
  (goog.dom.TagName.DD = new goog.dom.TagName("DD")),
  (goog.dom.TagName.DEL = new goog.dom.TagName("DEL")),
  (goog.dom.TagName.DETAILS = new goog.dom.TagName("DETAILS")),
  (goog.dom.TagName.DFN = new goog.dom.TagName("DFN")),
  (goog.dom.TagName.DIALOG = new goog.dom.TagName("DIALOG")),
  (goog.dom.TagName.DIR = new goog.dom.TagName("DIR")),
  (goog.dom.TagName.DIV = new goog.dom.TagName("DIV")),
  (goog.dom.TagName.DL = new goog.dom.TagName("DL")),
  (goog.dom.TagName.DT = new goog.dom.TagName("DT")),
  (goog.dom.TagName.EM = new goog.dom.TagName("EM")),
  (goog.dom.TagName.EMBED = new goog.dom.TagName("EMBED")),
  (goog.dom.TagName.FIELDSET = new goog.dom.TagName("FIELDSET")),
  (goog.dom.TagName.FIGCAPTION = new goog.dom.TagName("FIGCAPTION")),
  (goog.dom.TagName.FIGURE = new goog.dom.TagName("FIGURE")),
  (goog.dom.TagName.FONT = new goog.dom.TagName("FONT")),
  (goog.dom.TagName.FOOTER = new goog.dom.TagName("FOOTER")),
  (goog.dom.TagName.FORM = new goog.dom.TagName("FORM")),
  (goog.dom.TagName.FRAME = new goog.dom.TagName("FRAME")),
  (goog.dom.TagName.FRAMESET = new goog.dom.TagName("FRAMESET")),
  (goog.dom.TagName.H1 = new goog.dom.TagName("H1")),
  (goog.dom.TagName.H2 = new goog.dom.TagName("H2")),
  (goog.dom.TagName.H3 = new goog.dom.TagName("H3")),
  (goog.dom.TagName.H4 = new goog.dom.TagName("H4")),
  (goog.dom.TagName.H5 = new goog.dom.TagName("H5")),
  (goog.dom.TagName.H6 = new goog.dom.TagName("H6")),
  (goog.dom.TagName.HEAD = new goog.dom.TagName("HEAD")),
  (goog.dom.TagName.HEADER = new goog.dom.TagName("HEADER")),
  (goog.dom.TagName.HGROUP = new goog.dom.TagName("HGROUP")),
  (goog.dom.TagName.HR = new goog.dom.TagName("HR")),
  (goog.dom.TagName.HTML = new goog.dom.TagName("HTML")),
  (goog.dom.TagName.I = new goog.dom.TagName("I")),
  (goog.dom.TagName.IFRAME = new goog.dom.TagName("IFRAME")),
  (goog.dom.TagName.IMG = new goog.dom.TagName("IMG")),
  (goog.dom.TagName.INPUT = new goog.dom.TagName("INPUT")),
  (goog.dom.TagName.INS = new goog.dom.TagName("INS")),
  (goog.dom.TagName.ISINDEX = new goog.dom.TagName("ISINDEX")),
  (goog.dom.TagName.KBD = new goog.dom.TagName("KBD")),
  (goog.dom.TagName.KEYGEN = new goog.dom.TagName("KEYGEN")),
  (goog.dom.TagName.LABEL = new goog.dom.TagName("LABEL")),
  (goog.dom.TagName.LEGEND = new goog.dom.TagName("LEGEND")),
  (goog.dom.TagName.LI = new goog.dom.TagName("LI")),
  (goog.dom.TagName.LINK = new goog.dom.TagName("LINK")),
  (goog.dom.TagName.MAIN = new goog.dom.TagName("MAIN")),
  (goog.dom.TagName.MAP = new goog.dom.TagName("MAP")),
  (goog.dom.TagName.MARK = new goog.dom.TagName("MARK")),
  (goog.dom.TagName.MATH = new goog.dom.TagName("MATH")),
  (goog.dom.TagName.MENU = new goog.dom.TagName("MENU")),
  (goog.dom.TagName.MENUITEM = new goog.dom.TagName("MENUITEM")),
  (goog.dom.TagName.META = new goog.dom.TagName("META")),
  (goog.dom.TagName.METER = new goog.dom.TagName("METER")),
  (goog.dom.TagName.NAV = new goog.dom.TagName("NAV")),
  (goog.dom.TagName.NOFRAMES = new goog.dom.TagName("NOFRAMES")),
  (goog.dom.TagName.NOSCRIPT = new goog.dom.TagName("NOSCRIPT")),
  (goog.dom.TagName.OBJECT = new goog.dom.TagName("OBJECT")),
  (goog.dom.TagName.OL = new goog.dom.TagName("OL")),
  (goog.dom.TagName.OPTGROUP = new goog.dom.TagName("OPTGROUP")),
  (goog.dom.TagName.OPTION = new goog.dom.TagName("OPTION")),
  (goog.dom.TagName.OUTPUT = new goog.dom.TagName("OUTPUT")),
  (goog.dom.TagName.P = new goog.dom.TagName("P")),
  (goog.dom.TagName.PARAM = new goog.dom.TagName("PARAM")),
  (goog.dom.TagName.PICTURE = new goog.dom.TagName("PICTURE")),
  (goog.dom.TagName.PRE = new goog.dom.TagName("PRE")),
  (goog.dom.TagName.PROGRESS = new goog.dom.TagName("PROGRESS")),
  (goog.dom.TagName.Q = new goog.dom.TagName("Q")),
  (goog.dom.TagName.RP = new goog.dom.TagName("RP")),
  (goog.dom.TagName.RT = new goog.dom.TagName("RT")),
  (goog.dom.TagName.RTC = new goog.dom.TagName("RTC")),
  (goog.dom.TagName.RUBY = new goog.dom.TagName("RUBY")),
  (goog.dom.TagName.S = new goog.dom.TagName("S")),
  (goog.dom.TagName.SAMP = new goog.dom.TagName("SAMP")),
  (goog.dom.TagName.SCRIPT = new goog.dom.TagName("SCRIPT")),
  (goog.dom.TagName.SECTION = new goog.dom.TagName("SECTION")),
  (goog.dom.TagName.SELECT = new goog.dom.TagName("SELECT")),
  (goog.dom.TagName.SMALL = new goog.dom.TagName("SMALL")),
  (goog.dom.TagName.SOURCE = new goog.dom.TagName("SOURCE")),
  (goog.dom.TagName.SPAN = new goog.dom.TagName("SPAN")),
  (goog.dom.TagName.STRIKE = new goog.dom.TagName("STRIKE")),
  (goog.dom.TagName.STRONG = new goog.dom.TagName("STRONG")),
  (goog.dom.TagName.STYLE = new goog.dom.TagName("STYLE")),
  (goog.dom.TagName.SUB = new goog.dom.TagName("SUB")),
  (goog.dom.TagName.SUMMARY = new goog.dom.TagName("SUMMARY")),
  (goog.dom.TagName.SUP = new goog.dom.TagName("SUP")),
  (goog.dom.TagName.SVG = new goog.dom.TagName("SVG")),
  (goog.dom.TagName.TABLE = new goog.dom.TagName("TABLE")),
  (goog.dom.TagName.TBODY = new goog.dom.TagName("TBODY")),
  (goog.dom.TagName.TD = new goog.dom.TagName("TD")),
  (goog.dom.TagName.TEMPLATE = new goog.dom.TagName("TEMPLATE")),
  (goog.dom.TagName.TEXTAREA = new goog.dom.TagName("TEXTAREA")),
  (goog.dom.TagName.TFOOT = new goog.dom.TagName("TFOOT")),
  (goog.dom.TagName.TH = new goog.dom.TagName("TH")),
  (goog.dom.TagName.THEAD = new goog.dom.TagName("THEAD")),
  (goog.dom.TagName.TIME = new goog.dom.TagName("TIME")),
  (goog.dom.TagName.TITLE = new goog.dom.TagName("TITLE")),
  (goog.dom.TagName.TR = new goog.dom.TagName("TR")),
  (goog.dom.TagName.TRACK = new goog.dom.TagName("TRACK")),
  (goog.dom.TagName.TT = new goog.dom.TagName("TT")),
  (goog.dom.TagName.U = new goog.dom.TagName("U")),
  (goog.dom.TagName.UL = new goog.dom.TagName("UL")),
  (goog.dom.TagName.VAR = new goog.dom.TagName("VAR")),
  (goog.dom.TagName.VIDEO = new goog.dom.TagName("VIDEO")),
  (goog.dom.TagName.WBR = new goog.dom.TagName("WBR")),
  (goog.dom.tags = {}),
  (goog.dom.tags.VOID_TAGS_ = {
    area: !0,
    base: !0,
    br: !0,
    col: !0,
    command: !0,
    embed: !0,
    hr: !0,
    img: !0,
    input: !0,
    keygen: !0,
    link: !0,
    meta: !0,
    param: !0,
    source: !0,
    track: !0,
    wbr: !0,
  }),
  (goog.dom.tags.isVoidTag = function (t) {
    return !0 === goog.dom.tags.VOID_TAGS_[t];
  }),
  (goog.html = {}),
  (goog.html.trustedtypes = {}),
  (goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY =
    goog.TRUSTED_TYPES_POLICY_NAME
      ? goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME + "#html")
      : null),
  (goog.string.TypedString = function () {}),
  (goog.string.Const = function (t, e) {
    (this.stringConstValueWithSecurityContract__googStringSecurityPrivate_ =
      (t === goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_ && e) ||
      ""),
      (this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_ =
        goog.string.Const.TYPE_MARKER_);
  }),
  (goog.string.Const.prototype.implementsGoogStringTypedString = !0),
  (goog.string.Const.prototype.getTypedStringValue = function () {
    return this
      .stringConstValueWithSecurityContract__googStringSecurityPrivate_;
  }),
  goog.DEBUG &&
    (goog.string.Const.prototype.toString = function () {
      return (
        "Const{" +
        this.stringConstValueWithSecurityContract__googStringSecurityPrivate_ +
        "}"
      );
    }),
  (goog.string.Const.unwrap = function (t) {
    return t instanceof goog.string.Const &&
      t.constructor === goog.string.Const &&
      t.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_ ===
        goog.string.Const.TYPE_MARKER_
      ? t.stringConstValueWithSecurityContract__googStringSecurityPrivate_
      : (goog.asserts.fail("expected object of type Const, got '" + t + "'"),
        "type_error:Const");
  }),
  (goog.string.Const.from = function (t) {
    return new goog.string.Const(
      goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,
      t
    );
  }),
  (goog.string.Const.TYPE_MARKER_ = {}),
  (goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_ = {}),
  (goog.string.Const.EMPTY = goog.string.Const.from("")),
  (goog.html.SafeScript = function () {
    (this.privateDoNotAccessOrElseSafeScriptWrappedValue_ = ""),
      (this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =
        goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_);
  }),
  (goog.html.SafeScript.prototype.implementsGoogStringTypedString = !0),
  (goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}),
  (goog.html.SafeScript.fromConstant = function (t) {
    return 0 === (t = goog.string.Const.unwrap(t)).length
      ? goog.html.SafeScript.EMPTY
      : goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(
          t
        );
  }),
  (goog.html.SafeScript.fromConstantAndArgs = function (t, e) {
    for (var o = [], i = 1; i < arguments.length; i++)
      o.push(goog.html.SafeScript.stringify_(arguments[i]));
    return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(
      "(" + goog.string.Const.unwrap(t) + ")(" + o.join(", ") + ");"
    );
  }),
  (goog.html.SafeScript.fromJson = function (t) {
    return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(
      goog.html.SafeScript.stringify_(t)
    );
  }),
  (goog.html.SafeScript.prototype.getTypedStringValue = function () {
    return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString();
  }),
  goog.DEBUG &&
    (goog.html.SafeScript.prototype.toString = function () {
      return (
        "SafeScript{" +
        this.privateDoNotAccessOrElseSafeScriptWrappedValue_ +
        "}"
      );
    }),
  (goog.html.SafeScript.unwrap = function (t) {
    return goog.html.SafeScript.unwrapTrustedScript(t).toString();
  }),
  (goog.html.SafeScript.unwrapTrustedScript = function (t) {
    return t instanceof goog.html.SafeScript &&
      t.constructor === goog.html.SafeScript &&
      t.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===
        goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
      ? t.privateDoNotAccessOrElseSafeScriptWrappedValue_
      : (goog.asserts.fail(
          "expected object of type SafeScript, got '" +
            t +
            "' of type " +
            goog.typeOf(t)
        ),
        "type_error:SafeScript");
  }),
  (goog.html.SafeScript.stringify_ = function (t) {
    return JSON.stringify(t).replace(/</g, "\\x3c");
  }),
  (goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse =
    function (t) {
      return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(
        t
      );
    }),
  (goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_ =
    function (t) {
      return (
        (this.privateDoNotAccessOrElseSafeScriptWrappedValue_ = goog.html
          .trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY
          ? goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(
              t
            )
          : t),
        this
      );
    }),
  (goog.html.SafeScript.EMPTY =
    goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("")),
  (goog.fs = {}),
  (goog.fs.url = {}),
  (goog.fs.url.createObjectUrl = function (t) {
    return goog.fs.url.getUrlObject_().createObjectURL(t);
  }),
  (goog.fs.url.revokeObjectUrl = function (t) {
    goog.fs.url.getUrlObject_().revokeObjectURL(t);
  }),
  (goog.fs.url.getUrlObject_ = function () {
    var t = goog.fs.url.findUrlObject_();
    if (null != t) return t;
    throw Error("This browser doesn't seem to support blob URLs");
  }),
  (goog.fs.url.findUrlObject_ = function () {
    return void 0 !== goog.global.URL &&
      void 0 !== goog.global.URL.createObjectURL
      ? goog.global.URL
      : void 0 !== goog.global.webkitURL &&
        void 0 !== goog.global.webkitURL.createObjectURL
      ? goog.global.webkitURL
      : void 0 !== goog.global.createObjectURL
      ? goog.global
      : null;
  }),
  (goog.fs.url.browserSupportsObjectUrls = function () {
    return null != goog.fs.url.findUrlObject_();
  }),
  (goog.i18n = {}),
  (goog.i18n.bidi = {}),
  (goog.i18n.bidi.FORCE_RTL = !1),
  (goog.i18n.bidi.IS_RTL =
    goog.i18n.bidi.FORCE_RTL ||
    (("ar" == goog.LOCALE.substring(0, 2).toLowerCase() ||
      "fa" == goog.LOCALE.substring(0, 2).toLowerCase() ||
      "he" == goog.LOCALE.substring(0, 2).toLowerCase() ||
      "iw" == goog.LOCALE.substring(0, 2).toLowerCase() ||
      "ps" == goog.LOCALE.substring(0, 2).toLowerCase() ||
      "sd" == goog.LOCALE.substring(0, 2).toLowerCase() ||
      "ug" == goog.LOCALE.substring(0, 2).toLowerCase() ||
      "ur" == goog.LOCALE.substring(0, 2).toLowerCase() ||
      "yi" == goog.LOCALE.substring(0, 2).toLowerCase()) &&
      (2 == goog.LOCALE.length ||
        "-" == goog.LOCALE.substring(2, 3) ||
        "_" == goog.LOCALE.substring(2, 3))) ||
    (3 <= goog.LOCALE.length &&
      "ckb" == goog.LOCALE.substring(0, 3).toLowerCase() &&
      (3 == goog.LOCALE.length ||
        "-" == goog.LOCALE.substring(3, 4) ||
        "_" == goog.LOCALE.substring(3, 4))) ||
    (7 <= goog.LOCALE.length &&
      ("-" == goog.LOCALE.substring(2, 3) ||
        "_" == goog.LOCALE.substring(2, 3)) &&
      ("adlm" == goog.LOCALE.substring(3, 7).toLowerCase() ||
        "arab" == goog.LOCALE.substring(3, 7).toLowerCase() ||
        "hebr" == goog.LOCALE.substring(3, 7).toLowerCase() ||
        "nkoo" == goog.LOCALE.substring(3, 7).toLowerCase() ||
        "rohg" == goog.LOCALE.substring(3, 7).toLowerCase() ||
        "thaa" == goog.LOCALE.substring(3, 7).toLowerCase())) ||
    (8 <= goog.LOCALE.length &&
      ("-" == goog.LOCALE.substring(3, 4) ||
        "_" == goog.LOCALE.substring(3, 4)) &&
      ("adlm" == goog.LOCALE.substring(4, 8).toLowerCase() ||
        "arab" == goog.LOCALE.substring(4, 8).toLowerCase() ||
        "hebr" == goog.LOCALE.substring(4, 8).toLowerCase() ||
        "nkoo" == goog.LOCALE.substring(4, 8).toLowerCase() ||
        "rohg" == goog.LOCALE.substring(4, 8).toLowerCase() ||
        "thaa" == goog.LOCALE.substring(4, 8).toLowerCase()))),
  (goog.i18n.bidi.Format = {
    LRE: "‪",
    RLE: "‫",
    PDF: "‬",
    LRM: "‎",
    RLM: "‏",
  }),
  (goog.i18n.bidi.Dir = { LTR: 1, RTL: -1, NEUTRAL: 0 }),
  (goog.i18n.bidi.RIGHT = "right"),
  (goog.i18n.bidi.LEFT = "left"),
  (goog.i18n.bidi.I18N_RIGHT = goog.i18n.bidi.IS_RTL
    ? goog.i18n.bidi.LEFT
    : goog.i18n.bidi.RIGHT),
  (goog.i18n.bidi.I18N_LEFT = goog.i18n.bidi.IS_RTL
    ? goog.i18n.bidi.RIGHT
    : goog.i18n.bidi.LEFT),
  (goog.i18n.bidi.toDir = function (t, e) {
    return "number" == typeof t
      ? 0 < t
        ? goog.i18n.bidi.Dir.LTR
        : 0 > t
        ? goog.i18n.bidi.Dir.RTL
        : e
        ? null
        : goog.i18n.bidi.Dir.NEUTRAL
      : null == t
      ? null
      : t
      ? goog.i18n.bidi.Dir.RTL
      : goog.i18n.bidi.Dir.LTR;
  }),
  (goog.i18n.bidi.ltrChars_ =
    "A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\ud801\ud804-\ud839\ud83c-\udbff豈-﬜︀-﹯﻽-￿"),
  (goog.i18n.bidi.rtlChars_ = "֑-ۯۺ-ࣿ‏\ud802-\ud803\ud83a-\ud83bיִ-﷿ﹰ-ﻼ"),
  (goog.i18n.bidi.htmlSkipReg_ = /<[^>]*>|&[^;]+;/g),
  (goog.i18n.bidi.stripHtmlIfNeeded_ = function (t, e) {
    return e ? t.replace(goog.i18n.bidi.htmlSkipReg_, "") : t;
  }),
  (goog.i18n.bidi.rtlCharReg_ = new RegExp(
    "[" + goog.i18n.bidi.rtlChars_ + "]"
  )),
  (goog.i18n.bidi.ltrCharReg_ = new RegExp(
    "[" + goog.i18n.bidi.ltrChars_ + "]"
  ));
(goog.i18n.bidi.hasAnyRtl = function (t, e) {
  return goog.i18n.bidi.rtlCharReg_.test(
    goog.i18n.bidi.stripHtmlIfNeeded_(t, e)
  );
}),
  (goog.i18n.bidi.hasRtlChar = goog.i18n.bidi.hasAnyRtl),
  (goog.i18n.bidi.hasAnyLtr = function (t, e) {
    return goog.i18n.bidi.ltrCharReg_.test(
      goog.i18n.bidi.stripHtmlIfNeeded_(t, e)
    );
  }),
  (goog.i18n.bidi.ltrRe_ = new RegExp("^[" + goog.i18n.bidi.ltrChars_ + "]")),
  (goog.i18n.bidi.rtlRe_ = new RegExp("^[" + goog.i18n.bidi.rtlChars_ + "]")),
  (goog.i18n.bidi.isRtlChar = function (t) {
    return goog.i18n.bidi.rtlRe_.test(t);
  }),
  (goog.i18n.bidi.isLtrChar = function (t) {
    return goog.i18n.bidi.ltrRe_.test(t);
  }),
  (goog.i18n.bidi.isNeutralChar = function (t) {
    return !goog.i18n.bidi.isLtrChar(t) && !goog.i18n.bidi.isRtlChar(t);
  }),
  (goog.i18n.bidi.ltrDirCheckRe_ = new RegExp(
    "^[^" + goog.i18n.bidi.rtlChars_ + "]*[" + goog.i18n.bidi.ltrChars_ + "]"
  )),
  (goog.i18n.bidi.rtlDirCheckRe_ = new RegExp(
    "^[^" + goog.i18n.bidi.ltrChars_ + "]*[" + goog.i18n.bidi.rtlChars_ + "]"
  )),
  (goog.i18n.bidi.startsWithRtl = function (t, e) {
    return goog.i18n.bidi.rtlDirCheckRe_.test(
      goog.i18n.bidi.stripHtmlIfNeeded_(t, e)
    );
  }),
  (goog.i18n.bidi.isRtlText = goog.i18n.bidi.startsWithRtl),
  (goog.i18n.bidi.startsWithLtr = function (t, e) {
    return goog.i18n.bidi.ltrDirCheckRe_.test(
      goog.i18n.bidi.stripHtmlIfNeeded_(t, e)
    );
  }),
  (goog.i18n.bidi.isLtrText = goog.i18n.bidi.startsWithLtr),
  (goog.i18n.bidi.isRequiredLtrRe_ = /^http:\/\/.*/),
  (goog.i18n.bidi.isNeutralText = function (t, e) {
    return (
      (t = goog.i18n.bidi.stripHtmlIfNeeded_(t, e)),
      goog.i18n.bidi.isRequiredLtrRe_.test(t) ||
        (!goog.i18n.bidi.hasAnyLtr(t) && !goog.i18n.bidi.hasAnyRtl(t))
    );
  }),
  (goog.i18n.bidi.ltrExitDirCheckRe_ = new RegExp(
    "[" + goog.i18n.bidi.ltrChars_ + "][^" + goog.i18n.bidi.rtlChars_ + "]*$"
  )),
  (goog.i18n.bidi.rtlExitDirCheckRe_ = new RegExp(
    "[" + goog.i18n.bidi.rtlChars_ + "][^" + goog.i18n.bidi.ltrChars_ + "]*$"
  )),
  (goog.i18n.bidi.endsWithLtr = function (t, e) {
    return goog.i18n.bidi.ltrExitDirCheckRe_.test(
      goog.i18n.bidi.stripHtmlIfNeeded_(t, e)
    );
  }),
  (goog.i18n.bidi.isLtrExitText = goog.i18n.bidi.endsWithLtr),
  (goog.i18n.bidi.endsWithRtl = function (t, e) {
    return goog.i18n.bidi.rtlExitDirCheckRe_.test(
      goog.i18n.bidi.stripHtmlIfNeeded_(t, e)
    );
  }),
  (goog.i18n.bidi.isRtlExitText = goog.i18n.bidi.endsWithRtl),
  (goog.i18n.bidi.rtlLocalesRe_ =
    /^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i),
  (goog.i18n.bidi.isRtlLanguage = function (t) {
    return goog.i18n.bidi.rtlLocalesRe_.test(t);
  }),
  (goog.i18n.bidi.bracketGuardTextRe_ =
    /(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g),
  (goog.i18n.bidi.guardBracketInText = function (t, e) {
    return (
      (e = (void 0 === e ? goog.i18n.bidi.hasAnyRtl(t) : e)
        ? goog.i18n.bidi.Format.RLM
        : goog.i18n.bidi.Format.LRM),
      t.replace(goog.i18n.bidi.bracketGuardTextRe_, e + "$&" + e)
    );
  }),
  (goog.i18n.bidi.enforceRtlInHtml = function (t) {
    return "<" == t.charAt(0)
      ? t.replace(/<\w+/, "$& dir=rtl")
      : "\n<span dir=rtl>" + t + "</span>";
  }),
  (goog.i18n.bidi.enforceRtlInText = function (t) {
    return goog.i18n.bidi.Format.RLE + t + goog.i18n.bidi.Format.PDF;
  }),
  (goog.i18n.bidi.enforceLtrInHtml = function (t) {
    return "<" == t.charAt(0)
      ? t.replace(/<\w+/, "$& dir=ltr")
      : "\n<span dir=ltr>" + t + "</span>";
  }),
  (goog.i18n.bidi.enforceLtrInText = function (t) {
    return goog.i18n.bidi.Format.LRE + t + goog.i18n.bidi.Format.PDF;
  }),
  (goog.i18n.bidi.dimensionsRe_ =
    /:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g),
  (goog.i18n.bidi.leftRe_ = /left/gi),
  (goog.i18n.bidi.rightRe_ = /right/gi),
  (goog.i18n.bidi.tempRe_ = /%%%%/g),
  (goog.i18n.bidi.mirrorCSS = function (t) {
    return t
      .replace(goog.i18n.bidi.dimensionsRe_, ":$1 $4 $3 $2")
      .replace(goog.i18n.bidi.leftRe_, "%%%%")
      .replace(goog.i18n.bidi.rightRe_, goog.i18n.bidi.LEFT)
      .replace(goog.i18n.bidi.tempRe_, goog.i18n.bidi.RIGHT);
  }),
  (goog.i18n.bidi.doubleQuoteSubstituteRe_ = /([\u0591-\u05f2])"/g),
  (goog.i18n.bidi.singleQuoteSubstituteRe_ = /([\u0591-\u05f2])'/g),
  (goog.i18n.bidi.normalizeHebrewQuote = function (t) {
    return t
      .replace(goog.i18n.bidi.doubleQuoteSubstituteRe_, "$1״")
      .replace(goog.i18n.bidi.singleQuoteSubstituteRe_, "$1׳");
  }),
  (goog.i18n.bidi.wordSeparatorRe_ = /\s+/),
  (goog.i18n.bidi.hasNumeralsRe_ = /[\d\u06f0-\u06f9]/),
  (goog.i18n.bidi.rtlDetectionThreshold_ = 0.4),
  (goog.i18n.bidi.estimateDirection = function (t, e) {
    var o = 0,
      i = 0,
      n = !1;
    for (
      t = goog.i18n.bidi
        .stripHtmlIfNeeded_(t, e)
        .split(goog.i18n.bidi.wordSeparatorRe_),
        e = 0;
      e < t.length;
      e++
    ) {
      var l = t[e];
      goog.i18n.bidi.startsWithRtl(l)
        ? (o++, i++)
        : goog.i18n.bidi.isRequiredLtrRe_.test(l)
        ? (n = !0)
        : goog.i18n.bidi.hasAnyLtr(l)
        ? i++
        : goog.i18n.bidi.hasNumeralsRe_.test(l) && (n = !0);
    }
    return 0 == i
      ? n
        ? goog.i18n.bidi.Dir.LTR
        : goog.i18n.bidi.Dir.NEUTRAL
      : o / i > goog.i18n.bidi.rtlDetectionThreshold_
      ? goog.i18n.bidi.Dir.RTL
      : goog.i18n.bidi.Dir.LTR;
  }),
  (goog.i18n.bidi.detectRtlDirectionality = function (t, e) {
    return goog.i18n.bidi.estimateDirection(t, e) == goog.i18n.bidi.Dir.RTL;
  }),
  (goog.i18n.bidi.setElementDirAndAlign = function (t, e) {
    t &&
      (e = goog.i18n.bidi.toDir(e)) &&
      ((t.style.textAlign =
        e == goog.i18n.bidi.Dir.RTL
          ? goog.i18n.bidi.RIGHT
          : goog.i18n.bidi.LEFT),
      (t.dir = e == goog.i18n.bidi.Dir.RTL ? "rtl" : "ltr"));
  }),
  (goog.i18n.bidi.setElementDirByTextDirectionality = function (t, e) {
    switch (goog.i18n.bidi.estimateDirection(e)) {
      case goog.i18n.bidi.Dir.LTR:
        t.dir = "ltr";
        break;
      case goog.i18n.bidi.Dir.RTL:
        t.dir = "rtl";
        break;
      default:
        t.removeAttribute("dir");
    }
  }),
  (goog.i18n.bidi.DirectionalString = function () {}),
  (goog.html.TrustedResourceUrl = function (t, e) {
    (this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_ =
      (t === goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_ && e) ||
      ""),
      (this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =
        goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_);
  }),
  (goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString = !0),
  (goog.html.TrustedResourceUrl.prototype.getTypedStringValue = function () {
    return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString();
  }),
  (goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString =
    !0),
  (goog.html.TrustedResourceUrl.prototype.getDirection = function () {
    return goog.i18n.bidi.Dir.LTR;
  }),
  (goog.html.TrustedResourceUrl.prototype.cloneWithParams = function (t, e) {
    var o = goog.html.TrustedResourceUrl.unwrap(this),
      i = (o = goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(o))[3] || "";
    return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(
      o[1] +
        goog.html.TrustedResourceUrl.stringifyParams_("?", o[2] || "", t) +
        goog.html.TrustedResourceUrl.stringifyParams_("#", i, e)
    );
  }),
  goog.DEBUG &&
    (goog.html.TrustedResourceUrl.prototype.toString = function () {
      return (
        "TrustedResourceUrl{" +
        this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_ +
        "}"
      );
    }),
  (goog.html.TrustedResourceUrl.unwrap = function (t) {
    return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t).toString();
  }),
  (goog.html.TrustedResourceUrl.unwrapTrustedScriptURL = function (t) {
    return t instanceof goog.html.TrustedResourceUrl &&
      t.constructor === goog.html.TrustedResourceUrl &&
      t.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===
        goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
      ? t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_
      : (goog.asserts.fail(
          "expected object of type TrustedResourceUrl, got '" +
            t +
            "' of type " +
            goog.typeOf(t)
        ),
        "type_error:TrustedResourceUrl");
  }),
  (goog.html.TrustedResourceUrl.format = function (t, e) {
    var o = goog.string.Const.unwrap(t);
    if (!goog.html.TrustedResourceUrl.BASE_URL_.test(o))
      throw Error("Invalid TrustedResourceUrl format: " + o);
    return (
      (t = o.replace(
        goog.html.TrustedResourceUrl.FORMAT_MARKER_,
        function (t, i) {
          if (!Object.prototype.hasOwnProperty.call(e, i))
            throw Error(
              'Found marker, "' +
                i +
                '", in format string, "' +
                o +
                '", but no valid label mapping found in args: ' +
                JSON.stringify(e)
            );
          return (t = e[i]) instanceof goog.string.Const
            ? goog.string.Const.unwrap(t)
            : encodeURIComponent(String(t));
        }
      )),
      goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(
        t
      )
    );
  }),
  (goog.html.TrustedResourceUrl.FORMAT_MARKER_ = /%{(\w+)}/g),
  (goog.html.TrustedResourceUrl.BASE_URL_ =
    /^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i),
  (goog.html.TrustedResourceUrl.URL_PARAM_PARSER_ =
    /^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/),
  (goog.html.TrustedResourceUrl.formatWithParams = function (t, e, o, i) {
    return goog.html.TrustedResourceUrl.format(t, e).cloneWithParams(o, i);
  }),
  (goog.html.TrustedResourceUrl.fromConstant = function (t) {
    return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(
      goog.string.Const.unwrap(t)
    );
  }),
  (goog.html.TrustedResourceUrl.fromConstants = function (t) {
    for (var e = "", o = 0; o < t.length; o++)
      e += goog.string.Const.unwrap(t[o]);
    return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(
      e
    );
  }),
  (goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}),
  (goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse =
    function (t) {
      return (
        (t = goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY
          ? goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(
              t
            )
          : t),
        new goog.html.TrustedResourceUrl(
          goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,
          t
        )
      );
    }),
  (goog.html.TrustedResourceUrl.stringifyParams_ = function (t, e, o) {
    if (null == o) return e;
    if ("string" == typeof o) return o ? t + encodeURIComponent(o) : "";
    for (var i in o) {
      var n = o[i];
      n = goog.isArray(n) ? n : [n];
      for (var l = 0; l < n.length; l++) {
        var r = n[l];
        null != r &&
          (e || (e = t),
          (e +=
            (e.length > t.length ? "&" : "") +
            encodeURIComponent(i) +
            "=" +
            encodeURIComponent(String(r))));
      }
    }
    return e;
  }),
  (goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_ = {}),
  (goog.html.SafeUrl = function (t, e) {
    (this.privateDoNotAccessOrElseSafeUrlWrappedValue_ =
      (t === goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_ && e) || ""),
      (this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =
        goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_);
  }),
  (goog.html.SafeUrl.INNOCUOUS_STRING = "about:invalid#zClosurez"),
  (goog.html.SafeUrl.prototype.implementsGoogStringTypedString = !0),
  (goog.html.SafeUrl.prototype.getTypedStringValue = function () {
    return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString();
  }),
  (goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString = !0),
  (goog.html.SafeUrl.prototype.getDirection = function () {
    return goog.i18n.bidi.Dir.LTR;
  }),
  goog.DEBUG &&
    (goog.html.SafeUrl.prototype.toString = function () {
      return (
        "SafeUrl{" + this.privateDoNotAccessOrElseSafeUrlWrappedValue_ + "}"
      );
    }),
  (goog.html.SafeUrl.unwrap = function (t) {
    return t instanceof goog.html.SafeUrl &&
      t.constructor === goog.html.SafeUrl &&
      t.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===
        goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
      ? t.privateDoNotAccessOrElseSafeUrlWrappedValue_
      : (goog.asserts.fail(
          "expected object of type SafeUrl, got '" +
            t +
            "' of type " +
            goog.typeOf(t)
        ),
        "type_error:SafeUrl");
  }),
  (goog.html.SafeUrl.fromConstant = function (t) {
    return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(
      goog.string.Const.unwrap(t)
    );
  }),
  (goog.html.SAFE_MIME_TYPE_PATTERN_ =
    /^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))(?:;\w+=(?:\w+|"[\w;=]+"))*$/i),
  (goog.html.SafeUrl.isSafeMimeType = function (t) {
    return goog.html.SAFE_MIME_TYPE_PATTERN_.test(t);
  }),
  (goog.html.SafeUrl.fromBlob = function (t) {
    return (
      (t = goog.html.SAFE_MIME_TYPE_PATTERN_.test(t.type)
        ? goog.fs.url.createObjectUrl(t)
        : goog.html.SafeUrl.INNOCUOUS_STRING),
      goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)
    );
  }),
  (goog.html.DATA_URL_PATTERN_ = /^data:([^,]*);base64,[a-z0-9+\/]+=*$/i),
  (goog.html.SafeUrl.fromDataUrl = function (t) {
    var e = (t = t.replace(/(%0A|%0D)/g, "")).match(
      goog.html.DATA_URL_PATTERN_
    );
    return (
      (e = e && goog.html.SAFE_MIME_TYPE_PATTERN_.test(e[1])),
      goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(
        e ? t : goog.html.SafeUrl.INNOCUOUS_STRING
      )
    );
  }),
  (goog.html.SafeUrl.fromTelUrl = function (t) {
    return (
      goog.string.internal.caseInsensitiveStartsWith(t, "tel:") ||
        (t = goog.html.SafeUrl.INNOCUOUS_STRING),
      goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)
    );
  }),
  (goog.html.SIP_URL_PATTERN_ =
    /^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i),
  (goog.html.SafeUrl.fromSipUrl = function (t) {
    return (
      goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(t)) ||
        (t = goog.html.SafeUrl.INNOCUOUS_STRING),
      goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)
    );
  }),
  (goog.html.SafeUrl.fromFacebookMessengerUrl = function (t) {
    return (
      goog.string.internal.caseInsensitiveStartsWith(
        t,
        "fb-messenger://share"
      ) || (t = goog.html.SafeUrl.INNOCUOUS_STRING),
      goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)
    );
  }),
  (goog.html.SafeUrl.fromWhatsAppUrl = function (t) {
    return (
      goog.string.internal.caseInsensitiveStartsWith(t, "whatsapp://send") ||
        (t = goog.html.SafeUrl.INNOCUOUS_STRING),
      goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)
    );
  }),
  (goog.html.SafeUrl.fromSmsUrl = function (t) {
    return (
      (goog.string.internal.caseInsensitiveStartsWith(t, "sms:") &&
        goog.html.SafeUrl.isSmsUrlBodyValid_(t)) ||
        (t = goog.html.SafeUrl.INNOCUOUS_STRING),
      goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)
    );
  }),
  (goog.html.SafeUrl.isSmsUrlBodyValid_ = function (t) {
    var e = t.indexOf("#");
    if ((0 < e && (t = t.substring(0, e)), !(e = t.match(/[?&]body=/gi))))
      return !0;
    if (1 < e.length) return !1;
    if (!(t = t.match(/[?&]body=([^&]*)/)[1])) return !0;
    try {
      decodeURIComponent(t);
    } catch (t) {
      return !1;
    }
    return /^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(t);
  }),
  (goog.html.SafeUrl.fromSshUrl = function (t) {
    return (
      goog.string.internal.caseInsensitiveStartsWith(t, "ssh://") ||
        (t = goog.html.SafeUrl.INNOCUOUS_STRING),
      goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)
    );
  }),
  (goog.html.SafeUrl.sanitizeChromeExtensionUrl = function (t, e) {
    return goog.html.SafeUrl.sanitizeExtensionUrl_(
      /^chrome-extension:\/\/([^\/]+)\//,
      t,
      e
    );
  }),
  (goog.html.SafeUrl.sanitizeFirefoxExtensionUrl = function (t, e) {
    return goog.html.SafeUrl.sanitizeExtensionUrl_(
      /^moz-extension:\/\/([^\/]+)\//,
      t,
      e
    );
  }),
  (goog.html.SafeUrl.sanitizeEdgeExtensionUrl = function (t, e) {
    return goog.html.SafeUrl.sanitizeExtensionUrl_(
      /^ms-browser-extension:\/\/([^\/]+)\//,
      t,
      e
    );
  }),
  (goog.html.SafeUrl.sanitizeExtensionUrl_ = function (t, e, o) {
    return (
      (t = t.exec(e))
        ? ((t = t[1]),
          -1 ==
            (o instanceof goog.string.Const
              ? [goog.string.Const.unwrap(o)]
              : o.map(function (t) {
                  return goog.string.Const.unwrap(t);
                })
            ).indexOf(t) && (e = goog.html.SafeUrl.INNOCUOUS_STRING))
        : (e = goog.html.SafeUrl.INNOCUOUS_STRING),
      goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)
    );
  }),
  (goog.html.SafeUrl.fromTrustedResourceUrl = function (t) {
    return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(
      goog.html.TrustedResourceUrl.unwrap(t)
    );
  }),
  (goog.html.SAFE_URL_PATTERN_ =
    /^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i),
  (goog.html.SafeUrl.SAFE_URL_PATTERN = goog.html.SAFE_URL_PATTERN_),
  (goog.html.SafeUrl.sanitize = function (t) {
    return t instanceof goog.html.SafeUrl
      ? t
      : ((t =
          "object" == typeof t && t.implementsGoogStringTypedString
            ? t.getTypedStringValue()
            : String(t)),
        goog.html.SAFE_URL_PATTERN_.test(t) ||
          (t = goog.html.SafeUrl.INNOCUOUS_STRING),
        goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t));
  }),
  (goog.html.SafeUrl.sanitizeAssertUnchanged = function (t, e) {
    return t instanceof goog.html.SafeUrl
      ? t
      : ((t =
          "object" == typeof t && t.implementsGoogStringTypedString
            ? t.getTypedStringValue()
            : String(t)),
        e &&
        /^data:/i.test(t) &&
        (e = goog.html.SafeUrl.fromDataUrl(t)).getTypedStringValue() == t
          ? e
          : (goog.asserts.assert(
              goog.html.SAFE_URL_PATTERN_.test(t),
              "%s does not match the safe URL pattern",
              t
            ) || (t = goog.html.SafeUrl.INNOCUOUS_STRING),
            goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(
              t
            )));
  }),
  (goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}),
  (goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse = function (
    t
  ) {
    return new goog.html.SafeUrl(
      goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,
      t
    );
  }),
  (goog.html.SafeUrl.ABOUT_BLANK =
    goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(
      "about:blank"
    )),
  (goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_ = {}),
  (goog.html.SafeStyle = function () {
    (this.privateDoNotAccessOrElseSafeStyleWrappedValue_ = ""),
      (this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =
        goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_);
  }),
  (goog.html.SafeStyle.prototype.implementsGoogStringTypedString = !0),
  (goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}),
  (goog.html.SafeStyle.fromConstant = function (t) {
    return 0 === (t = goog.string.Const.unwrap(t)).length
      ? goog.html.SafeStyle.EMPTY
      : (goog.asserts.assert(
          goog.string.internal.endsWith(t, ";"),
          "Last character of style string is not ';': " + t
        ),
        goog.asserts.assert(
          goog.string.internal.contains(t, ":"),
          "Style string must contain at least one ':', to specify a \"name: value\" pair: " +
            t
        ),
        goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t));
  }),
  (goog.html.SafeStyle.prototype.getTypedStringValue = function () {
    return this.privateDoNotAccessOrElseSafeStyleWrappedValue_;
  }),
  goog.DEBUG &&
    (goog.html.SafeStyle.prototype.toString = function () {
      return (
        "SafeStyle{" + this.privateDoNotAccessOrElseSafeStyleWrappedValue_ + "}"
      );
    }),
  (goog.html.SafeStyle.unwrap = function (t) {
    return t instanceof goog.html.SafeStyle &&
      t.constructor === goog.html.SafeStyle &&
      t.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===
        goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
      ? t.privateDoNotAccessOrElseSafeStyleWrappedValue_
      : (goog.asserts.fail(
          "expected object of type SafeStyle, got '" +
            t +
            "' of type " +
            goog.typeOf(t)
        ),
        "type_error:SafeStyle");
  }),
  (goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse =
    function (t) {
      return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(t);
    }),
  (goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_ =
    function (t) {
      return (this.privateDoNotAccessOrElseSafeStyleWrappedValue_ = t), this;
    }),
  (goog.html.SafeStyle.EMPTY =
    goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse("")),
  (goog.html.SafeStyle.INNOCUOUS_STRING = "zClosurez"),
  (goog.html.SafeStyle.create = function (t) {
    var e,
      o = "";
    for (e in t) {
      if (!/^[-_a-zA-Z0-9]+$/.test(e))
        throw Error("Name allows only [-_a-zA-Z0-9], got: " + e);
      var i = t[e];
      null != i &&
        (o +=
          e +
          ":" +
          (i = goog.isArray(i)
            ? goog.array
                .map(i, goog.html.SafeStyle.sanitizePropertyValue_)
                .join(" ")
            : goog.html.SafeStyle.sanitizePropertyValue_(i)) +
          ";");
    }
    return o
      ? goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)
      : goog.html.SafeStyle.EMPTY;
  }),
  (goog.html.SafeStyle.sanitizePropertyValue_ = function (t) {
    if (t instanceof goog.html.SafeUrl)
      return (
        'url("' +
        goog.html.SafeUrl.unwrap(t)
          .replace(/</g, "%3c")
          .replace(/[\\"]/g, "\\$&") +
        '")'
      );
    if (
      ((t =
        t instanceof goog.string.Const
          ? goog.string.Const.unwrap(t)
          : goog.html.SafeStyle.sanitizePropertyValueString_(String(t))),
      /[{;}]/.test(t))
    )
      throw new goog.asserts.AssertionError(
        "Value does not allow [{;}], got: %s.",
        [t]
      );
    return t;
  }),
  (goog.html.SafeStyle.sanitizePropertyValueString_ = function (t) {
    var e = t
      .replace(goog.html.SafeStyle.FUNCTIONS_RE_, "$1")
      .replace(goog.html.SafeStyle.FUNCTIONS_RE_, "$1")
      .replace(goog.html.SafeStyle.URL_RE_, "url");
    return goog.html.SafeStyle.VALUE_RE_.test(e)
      ? goog.html.SafeStyle.COMMENT_RE_.test(t)
        ? (goog.asserts.fail("String value disallows comments, got: " + t),
          goog.html.SafeStyle.INNOCUOUS_STRING)
        : goog.html.SafeStyle.hasBalancedQuotes_(t)
        ? goog.html.SafeStyle.hasBalancedSquareBrackets_(t)
          ? goog.html.SafeStyle.sanitizeUrl_(t)
          : (goog.asserts.fail(
              "String value requires balanced square brackets and one identifier per pair of brackets, got: " +
                t
            ),
            goog.html.SafeStyle.INNOCUOUS_STRING)
        : (goog.asserts.fail(
            "String value requires balanced quotes, got: " + t
          ),
          goog.html.SafeStyle.INNOCUOUS_STRING)
      : (goog.asserts.fail(
          "String value allows only " +
            goog.html.SafeStyle.VALUE_ALLOWED_CHARS_ +
            " and simple functions, got: " +
            t
        ),
        goog.html.SafeStyle.INNOCUOUS_STRING);
  }),
  (goog.html.SafeStyle.hasBalancedQuotes_ = function (t) {
    for (var e = !0, o = !0, i = 0; i < t.length; i++) {
      var n = t.charAt(i);
      "'" == n && o ? (e = !e) : '"' == n && e && (o = !o);
    }
    return e && o;
  }),
  (goog.html.SafeStyle.hasBalancedSquareBrackets_ = function (t) {
    for (var e = !0, o = /^[-_a-zA-Z0-9]$/, i = 0; i < t.length; i++) {
      var n = t.charAt(i);
      if ("]" == n) {
        if (e) return !1;
        e = !0;
      } else if ("[" == n) {
        if (!e) return !1;
        e = !1;
      } else if (!e && !o.test(n)) return !1;
    }
    return e;
  }),
  (goog.html.SafeStyle.VALUE_ALLOWED_CHARS_ = "[-,.\"'%_!# a-zA-Z0-9\\[\\]]"),
  (goog.html.SafeStyle.VALUE_RE_ = new RegExp(
    "^" + goog.html.SafeStyle.VALUE_ALLOWED_CHARS_ + "+$"
  )),
  (goog.html.SafeStyle.URL_RE_ =
    /\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g),
  (goog.html.SafeStyle.ALLOWED_FUNCTIONS_ =
    "calc cubic-bezier fit-content hsl hsla matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(
      " "
    )),
  (goog.html.SafeStyle.FUNCTIONS_RE_ = new RegExp(
    "\\b(" +
      goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|") +
      ")\\([-+*/0-9a-z.%\\[\\], ]+\\)",
    "g"
  )),
  (goog.html.SafeStyle.COMMENT_RE_ = /\/\*/),
  (goog.html.SafeStyle.sanitizeUrl_ = function (t) {
    return t.replace(goog.html.SafeStyle.URL_RE_, function (t, e, o, i) {
      var n = "";
      return (
        (o = o.replace(/^(['"])(.*)\1$/, function (t, e, o) {
          return (n = e), o;
        })),
        (t = goog.html.SafeUrl.sanitize(o).getTypedStringValue()),
        e + n + t + n + i
      );
    });
  }),
  (goog.html.SafeStyle.concat = function (t) {
    var e = "",
      o = function (t) {
        goog.isArray(t)
          ? goog.array.forEach(t, o)
          : (e += goog.html.SafeStyle.unwrap(t));
      };
    return (
      goog.array.forEach(arguments, o),
      e
        ? goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e)
        : goog.html.SafeStyle.EMPTY
    );
  }),
  (goog.html.SafeStyleSheet = function () {
    (this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ = ""),
      (this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =
        goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_);
  }),
  (goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString = !0),
  (goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}),
  (goog.html.SafeStyleSheet.createRule = function (t, e) {
    if (goog.string.internal.contains(t, "<"))
      throw Error("Selector does not allow '<', got: " + t);
    var o = t.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g, "");
    if (!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(o))
      throw Error(
        "Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: " +
          t
      );
    if (!goog.html.SafeStyleSheet.hasBalancedBrackets_(o))
      throw Error("() and [] in selector must be balanced, got: " + t);
    return (
      e instanceof goog.html.SafeStyle || (e = goog.html.SafeStyle.create(e)),
      (t =
        t + "{" + goog.html.SafeStyle.unwrap(e).replace(/</g, "\\3C ") + "}"),
      goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(
        t
      )
    );
  }),
  (goog.html.SafeStyleSheet.hasBalancedBrackets_ = function (t) {
    for (var e = { "(": ")", "[": "]" }, o = [], i = 0; i < t.length; i++) {
      var n = t[i];
      if (e[n]) o.push(e[n]);
      else if (goog.object.contains(e, n) && o.pop() != n) return !1;
    }
    return 0 == o.length;
  }),
  (goog.html.SafeStyleSheet.concat = function (t) {
    var e = "",
      o = function (t) {
        goog.isArray(t)
          ? goog.array.forEach(t, o)
          : (e += goog.html.SafeStyleSheet.unwrap(t));
      };
    return (
      goog.array.forEach(arguments, o),
      goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(
        e
      )
    );
  }),
  (goog.html.SafeStyleSheet.fromConstant = function (t) {
    return 0 === (t = goog.string.Const.unwrap(t)).length
      ? goog.html.SafeStyleSheet.EMPTY
      : (goog.asserts.assert(
          !goog.string.internal.contains(t, "<"),
          "Forbidden '<' character in style sheet string: " + t
        ),
        goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(
          t
        ));
  }),
  (goog.html.SafeStyleSheet.prototype.getTypedStringValue = function () {
    return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_;
  }),
  goog.DEBUG &&
    (goog.html.SafeStyleSheet.prototype.toString = function () {
      return (
        "SafeStyleSheet{" +
        this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ +
        "}"
      );
    }),
  (goog.html.SafeStyleSheet.unwrap = function (t) {
    return t instanceof goog.html.SafeStyleSheet &&
      t.constructor === goog.html.SafeStyleSheet &&
      t.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===
        goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
      ? t.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_
      : (goog.asserts.fail(
          "expected object of type SafeStyleSheet, got '" +
            t +
            "' of type " +
            goog.typeOf(t)
        ),
        "type_error:SafeStyleSheet");
  }),
  (goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse =
    function (t) {
      return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(
        t
      );
    }),
  (goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_ =
    function (t) {
      return (
        (this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ = t), this
      );
    }),
  (goog.html.SafeStyleSheet.EMPTY =
    goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(
      ""
    )),
  (goog.html.SafeHtml = function () {
    (this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = ""),
      (this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =
        goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_),
      (this.dir_ = null);
  }),
  (goog.html.SafeHtml.ENABLE_ERROR_MESSAGES = goog.DEBUG),
  (goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE = !0),
  (goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString = !0),
  (goog.html.SafeHtml.prototype.getDirection = function () {
    return this.dir_;
  }),
  (goog.html.SafeHtml.prototype.implementsGoogStringTypedString = !0),
  (goog.html.SafeHtml.prototype.getTypedStringValue = function () {
    return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString();
  }),
  goog.DEBUG &&
    (goog.html.SafeHtml.prototype.toString = function () {
      return (
        "SafeHtml{" + this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ + "}"
      );
    }),
  (goog.html.SafeHtml.unwrap = function (t) {
    return goog.html.SafeHtml.unwrapTrustedHTML(t).toString();
  }),
  (goog.html.SafeHtml.unwrapTrustedHTML = function (t) {
    return t instanceof goog.html.SafeHtml &&
      t.constructor === goog.html.SafeHtml &&
      t.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===
        goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
      ? t.privateDoNotAccessOrElseSafeHtmlWrappedValue_
      : (goog.asserts.fail(
          "expected object of type SafeHtml, got '" +
            t +
            "' of type " +
            goog.typeOf(t)
        ),
        "type_error:SafeHtml");
  }),
  (goog.html.SafeHtml.htmlEscape = function (t) {
    if (t instanceof goog.html.SafeHtml) return t;
    var e = "object" == typeof t,
      o = null;
    return (
      e && t.implementsGoogI18nBidiDirectionalString && (o = t.getDirection()),
      (t =
        e && t.implementsGoogStringTypedString
          ? t.getTypedStringValue()
          : String(t)),
      goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
        goog.string.internal.htmlEscape(t),
        o
      )
    );
  }),
  (goog.html.SafeHtml.htmlEscapePreservingNewlines = function (t) {
    return t instanceof goog.html.SafeHtml
      ? t
      : ((t = goog.html.SafeHtml.htmlEscape(t)),
        goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
          goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(t)),
          t.getDirection()
        ));
  }),
  (goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces = function (t) {
    return t instanceof goog.html.SafeHtml
      ? t
      : ((t = goog.html.SafeHtml.htmlEscape(t)),
        goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
          goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(t)),
          t.getDirection()
        ));
  }),
  (goog.html.SafeHtml.from = goog.html.SafeHtml.htmlEscape),
  (goog.html.SafeHtml.VALID_NAMES_IN_TAG_ = /^[a-zA-Z0-9-]+$/),
  (goog.html.SafeHtml.URL_ATTRIBUTES_ = {
    action: !0,
    cite: !0,
    data: !0,
    formaction: !0,
    href: !0,
    manifest: !0,
    poster: !0,
    src: !0,
  }),
  (goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_ = {
    APPLET: !0,
    BASE: !0,
    EMBED: !0,
    IFRAME: !0,
    LINK: !0,
    MATH: !0,
    META: !0,
    OBJECT: !0,
    SCRIPT: !0,
    STYLE: !0,
    SVG: !0,
    TEMPLATE: !0,
  }),
  (goog.html.SafeHtml.create = function (t, e, o) {
    return (
      goog.html.SafeHtml.verifyTagName(String(t)),
      goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(
        String(t),
        e,
        o
      )
    );
  }),
  (goog.html.SafeHtml.verifyTagName = function (t) {
    if (!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(t))
      throw Error(
        goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
          ? "Invalid tag name <" + t + ">."
          : ""
      );
    if (t.toUpperCase() in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)
      throw Error(
        goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
          ? "Tag name <" + t + "> is not allowed for SafeHtml."
          : ""
      );
  }),
  (goog.html.SafeHtml.createIframe = function (t, e, o, i) {
    t && goog.html.TrustedResourceUrl.unwrap(t);
    var n = {};
    return (
      (n.src = t || null),
      (n.srcdoc = e && goog.html.SafeHtml.unwrap(e)),
      (t = goog.html.SafeHtml.combineAttributes(n, { sandbox: "" }, o)),
      goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(
        "iframe",
        t,
        i
      )
    );
  }),
  (goog.html.SafeHtml.createSandboxIframe = function (t, e, o, i) {
    if (!goog.html.SafeHtml.canUseSandboxIframe())
      throw Error(
        goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
          ? "The browser does not support sandboxed iframes."
          : ""
      );
    var n = {};
    return (
      (n.src = t
        ? goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t))
        : null),
      (n.srcdoc = e || null),
      (n.sandbox = ""),
      (t = goog.html.SafeHtml.combineAttributes(n, {}, o)),
      goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(
        "iframe",
        t,
        i
      )
    );
  }),
  (goog.html.SafeHtml.canUseSandboxIframe = function () {
    return (
      goog.global.HTMLIFrameElement &&
      "sandbox" in goog.global.HTMLIFrameElement.prototype
    );
  }),
  (goog.html.SafeHtml.createScriptSrc = function (t, e) {
    return (
      goog.html.TrustedResourceUrl.unwrap(t),
      (t = goog.html.SafeHtml.combineAttributes({ src: t }, {}, e)),
      goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(
        "script",
        t
      )
    );
  }),
  (goog.html.SafeHtml.createScript = function (t, e) {
    for (var o in e) {
      var i = o.toLowerCase();
      if ("language" == i || "src" == i || "text" == i || "type" == i)
        throw Error(
          goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
            ? 'Cannot set "' + i + '" attribute'
            : ""
        );
    }
    for (o = "", t = goog.array.concat(t), i = 0; i < t.length; i++)
      o += goog.html.SafeScript.unwrap(t[i]);
    return (
      (t = goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
        o,
        goog.i18n.bidi.Dir.NEUTRAL
      )),
      goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(
        "script",
        e,
        t
      )
    );
  }),
  (goog.html.SafeHtml.createStyle = function (t, e) {
    e = goog.html.SafeHtml.combineAttributes({ type: "text/css" }, {}, e);
    var o = "";
    t = goog.array.concat(t);
    for (var i = 0; i < t.length; i++)
      o += goog.html.SafeStyleSheet.unwrap(t[i]);
    return (
      (t = goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
        o,
        goog.i18n.bidi.Dir.NEUTRAL
      )),
      goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(
        "style",
        e,
        t
      )
    );
  }),
  (goog.html.SafeHtml.createMetaRefresh = function (t, e) {
    return (
      (t = goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t))),
      (goog.labs.userAgent.browser.isIE() ||
        goog.labs.userAgent.browser.isEdge()) &&
        goog.string.internal.contains(t, ";") &&
        (t = "'" + t.replace(/'/g, "%27") + "'"),
      goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(
        "meta",
        { "http-equiv": "refresh", content: (e || 0) + "; url=" + t }
      )
    );
  }),
  (goog.html.SafeHtml.getAttrNameAndValue_ = function (t, e, o) {
    if (o instanceof goog.string.Const) o = goog.string.Const.unwrap(o);
    else if ("style" == e.toLowerCase()) {
      if (!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)
        throw Error(
          goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
            ? 'Attribute "style" not supported.'
            : ""
        );
      o = goog.html.SafeHtml.getStyleValue_(o);
    } else {
      if (/^on/i.test(e))
        throw Error(
          goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
            ? 'Attribute "' +
                e +
                '" requires goog.string.Const value, "' +
                o +
                '" given.'
            : ""
        );
      if (e.toLowerCase() in goog.html.SafeHtml.URL_ATTRIBUTES_)
        if (o instanceof goog.html.TrustedResourceUrl)
          o = goog.html.TrustedResourceUrl.unwrap(o);
        else if (o instanceof goog.html.SafeUrl)
          o = goog.html.SafeUrl.unwrap(o);
        else {
          if ("string" != typeof o)
            throw Error(
              goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
                ? 'Attribute "' +
                    e +
                    '" on tag "' +
                    t +
                    '" requires goog.html.SafeUrl, goog.string.Const, or string, value "' +
                    o +
                    '" given.'
                : ""
            );
          o = goog.html.SafeUrl.sanitize(o).getTypedStringValue();
        }
    }
    return (
      o.implementsGoogStringTypedString && (o = o.getTypedStringValue()),
      goog.asserts.assert(
        "string" == typeof o || "number" == typeof o,
        "String or number value expected, got " + typeof o + " with value: " + o
      ),
      e + '="' + goog.string.internal.htmlEscape(String(o)) + '"'
    );
  }),
  (goog.html.SafeHtml.getStyleValue_ = function (t) {
    if (!goog.isObject(t))
      throw Error(
        goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
          ? 'The "style" attribute requires goog.html.SafeStyle or map of style properties, ' +
              typeof t +
              " given: " +
              t
          : ""
      );
    return (
      t instanceof goog.html.SafeStyle || (t = goog.html.SafeStyle.create(t)),
      goog.html.SafeStyle.unwrap(t)
    );
  }),
  (goog.html.SafeHtml.createWithDir = function (t, e, o, i) {
    return ((e = goog.html.SafeHtml.create(e, o, i)).dir_ = t), e;
  }),
  (goog.html.SafeHtml.join = function (t, e) {
    var o = (t = goog.html.SafeHtml.htmlEscape(t)).getDirection(),
      i = [],
      n = function (t) {
        goog.isArray(t)
          ? goog.array.forEach(t, n)
          : ((t = goog.html.SafeHtml.htmlEscape(t)),
            i.push(goog.html.SafeHtml.unwrap(t)),
            (t = t.getDirection()),
            o == goog.i18n.bidi.Dir.NEUTRAL
              ? (o = t)
              : t != goog.i18n.bidi.Dir.NEUTRAL && o != t && (o = null));
      };
    return (
      goog.array.forEach(e, n),
      goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
        i.join(goog.html.SafeHtml.unwrap(t)),
        o
      )
    );
  }),
  (goog.html.SafeHtml.concat = function (t) {
    return goog.html.SafeHtml.join(
      goog.html.SafeHtml.EMPTY,
      Array.prototype.slice.call(arguments)
    );
  }),
  (goog.html.SafeHtml.concatWithDir = function (t, e) {
    var o = goog.html.SafeHtml.concat(goog.array.slice(arguments, 1));
    return (o.dir_ = t), o;
  }),
  (goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}),
  (goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse =
    function (t, e) {
      return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(
        t,
        e
      );
    }),
  (goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_ =
    function (t, e) {
      return (
        (this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = goog.html
          .trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY
          ? goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(
              t
            )
          : t),
        (this.dir_ = e),
        this
      );
    }),
  (goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse =
    function (t, e, o) {
      var i = null,
        n = "<" + t + goog.html.SafeHtml.stringifyAttributes(t, e);
      return (
        null == o ? (o = []) : goog.isArray(o) || (o = [o]),
        goog.dom.tags.isVoidTag(t.toLowerCase())
          ? (goog.asserts.assert(
              !o.length,
              "Void tag <" + t + "> does not allow content."
            ),
            (n += ">"))
          : ((i = goog.html.SafeHtml.concat(o)),
            (n += ">" + goog.html.SafeHtml.unwrap(i) + "</" + t + ">"),
            (i = i.getDirection())),
        (t = e && e.dir) &&
          (i = /^(ltr|rtl|auto)$/i.test(t) ? goog.i18n.bidi.Dir.NEUTRAL : null),
        goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n, i)
      );
    }),
  (goog.html.SafeHtml.stringifyAttributes = function (t, e) {
    var o = "";
    if (e)
      for (var i in e) {
        if (!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(i))
          throw Error(
            goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
              ? 'Invalid attribute name "' + i + '".'
              : ""
          );
        var n = e[i];
        null != n &&
          (o += " " + goog.html.SafeHtml.getAttrNameAndValue_(t, i, n));
      }
    return o;
  }),
  (goog.html.SafeHtml.combineAttributes = function (t, e, o) {
    var i,
      n = {};
    for (i in t)
      goog.asserts.assert(i.toLowerCase() == i, "Must be lower case"),
        (n[i] = t[i]);
    for (i in e)
      goog.asserts.assert(i.toLowerCase() == i, "Must be lower case"),
        (n[i] = e[i]);
    if (o)
      for (i in o) {
        var l = i.toLowerCase();
        if (l in t)
          throw Error(
            goog.html.SafeHtml.ENABLE_ERROR_MESSAGES
              ? 'Cannot override "' +
                  l +
                  '" attribute, got "' +
                  i +
                  '" with value "' +
                  o[i] +
                  '"'
              : ""
          );
        l in e && delete n[l], (n[i] = o[i]);
      }
    return n;
  }),
  (goog.html.SafeHtml.DOCTYPE_HTML =
    goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
      "<!DOCTYPE html>",
      goog.i18n.bidi.Dir.NEUTRAL
    )),
  (goog.html.SafeHtml.EMPTY =
    goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
      "",
      goog.i18n.bidi.Dir.NEUTRAL
    )),
  (goog.html.SafeHtml.BR =
    goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
      "<br>",
      goog.i18n.bidi.Dir.NEUTRAL
    )),
  (goog.html.uncheckedconversions = {}),
  (goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract =
    function (t, e, o) {
      return (
        goog.asserts.assertString(
          goog.string.Const.unwrap(t),
          "must provide justification"
        ),
        goog.asserts.assert(
          !goog.string.internal.isEmptyOrWhitespace(
            goog.string.Const.unwrap(t)
          ),
          "must provide non-empty justification"
        ),
        goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(
          e,
          o || null
        )
      );
    }),
  (goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract =
    function (t, e) {
      return (
        goog.asserts.assertString(
          goog.string.Const.unwrap(t),
          "must provide justification"
        ),
        goog.asserts.assert(
          !goog.string.internal.isEmptyOrWhitespace(
            goog.string.Const.unwrap(t)
          ),
          "must provide non-empty justification"
        ),
        goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)
      );
    }),
  (goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract =
    function (t, e) {
      return (
        goog.asserts.assertString(
          goog.string.Const.unwrap(t),
          "must provide justification"
        ),
        goog.asserts.assert(
          !goog.string.internal.isEmptyOrWhitespace(
            goog.string.Const.unwrap(t)
          ),
          "must provide non-empty justification"
        ),
        goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e)
      );
    }),
  (goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract =
    function (t, e) {
      return (
        goog.asserts.assertString(
          goog.string.Const.unwrap(t),
          "must provide justification"
        ),
        goog.asserts.assert(
          !goog.string.internal.isEmptyOrWhitespace(
            goog.string.Const.unwrap(t)
          ),
          "must provide non-empty justification"
        ),
        goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(
          e
        )
      );
    }),
  (goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract =
    function (t, e) {
      return (
        goog.asserts.assertString(
          goog.string.Const.unwrap(t),
          "must provide justification"
        ),
        goog.asserts.assert(
          !goog.string.internal.isEmptyOrWhitespace(
            goog.string.Const.unwrap(t)
          ),
          "must provide non-empty justification"
        ),
        goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)
      );
    }),
  (goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract =
    function (t, e) {
      return (
        goog.asserts.assertString(
          goog.string.Const.unwrap(t),
          "must provide justification"
        ),
        goog.asserts.assert(
          !goog.string.internal.isEmptyOrWhitespace(
            goog.string.Const.unwrap(t)
          ),
          "must provide non-empty justification"
        ),
        goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(
          e
        )
      );
    }),
  (goog.dom.safe = {}),
  (goog.dom.safe.InsertAdjacentHtmlPosition = {
    AFTERBEGIN: "afterbegin",
    AFTEREND: "afterend",
    BEFOREBEGIN: "beforebegin",
    BEFOREEND: "beforeend",
  }),
  (goog.dom.safe.insertAdjacentHtml = function (t, e, o) {
    t.insertAdjacentHTML(e, goog.html.SafeHtml.unwrapTrustedHTML(o));
  }),
  (goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_ = {
    MATH: !0,
    SCRIPT: !0,
    STYLE: !0,
    SVG: !0,
    TEMPLATE: !0,
  }),
  (goog.dom.safe.isInnerHtmlCleanupRecursive_ = goog.functions.cacheReturnValue(
    function () {
      if (goog.DEBUG && "undefined" == typeof document) return !1;
      var t = document.createElement("div"),
        e = document.createElement("div");
      return (
        e.appendChild(document.createElement("div")),
        t.appendChild(e),
        !(goog.DEBUG && !t.firstChild) &&
          ((e = t.firstChild.firstChild),
          (t.innerHTML = goog.html.SafeHtml.unwrapTrustedHTML(
            goog.html.SafeHtml.EMPTY
          )),
          !e.parentElement)
      );
    }
  )),
  (goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse = function (t, e) {
    if (goog.dom.safe.isInnerHtmlCleanupRecursive_())
      for (; t.lastChild; ) t.removeChild(t.lastChild);
    t.innerHTML = goog.html.SafeHtml.unwrapTrustedHTML(e);
  }),
  (goog.dom.safe.setInnerHtml = function (t, e) {
    if (goog.asserts.ENABLE_ASSERTS) {
      var o = t.tagName.toUpperCase();
      if (goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[o])
        throw Error(
          "goog.dom.safe.setInnerHtml cannot be used to set content of " +
            t.tagName +
            "."
        );
    }
    goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(t, e);
  }),
  (goog.dom.safe.setOuterHtml = function (t, e) {
    t.outerHTML = goog.html.SafeHtml.unwrapTrustedHTML(e);
  }),
  (goog.dom.safe.setFormElementAction = function (t, e) {
    (e =
      e instanceof goog.html.SafeUrl
        ? e
        : goog.html.SafeUrl.sanitizeAssertUnchanged(e)),
      (goog.dom.asserts.assertIsHTMLFormElement(t).action =
        goog.html.SafeUrl.unwrap(e));
  }),
  (goog.dom.safe.setButtonFormAction = function (t, e) {
    (e =
      e instanceof goog.html.SafeUrl
        ? e
        : goog.html.SafeUrl.sanitizeAssertUnchanged(e)),
      (goog.dom.asserts.assertIsHTMLButtonElement(t).formAction =
        goog.html.SafeUrl.unwrap(e));
  }),
  (goog.dom.safe.setInputFormAction = function (t, e) {
    (e =
      e instanceof goog.html.SafeUrl
        ? e
        : goog.html.SafeUrl.sanitizeAssertUnchanged(e)),
      (goog.dom.asserts.assertIsHTMLInputElement(t).formAction =
        goog.html.SafeUrl.unwrap(e));
  }),
  (goog.dom.safe.setStyle = function (t, e) {
    t.style.cssText = goog.html.SafeStyle.unwrap(e);
  }),
  (goog.dom.safe.documentWrite = function (t, e) {
    t.write(goog.html.SafeHtml.unwrapTrustedHTML(e));
  }),
  (goog.dom.safe.setAnchorHref = function (t, e) {
    goog.dom.asserts.assertIsHTMLAnchorElement(t),
      (e =
        e instanceof goog.html.SafeUrl
          ? e
          : goog.html.SafeUrl.sanitizeAssertUnchanged(e)),
      (t.href = goog.html.SafeUrl.unwrap(e));
  }),
  (goog.dom.safe.setImageSrc = function (t, e) {
    if (
      (goog.dom.asserts.assertIsHTMLImageElement(t),
      !(e instanceof goog.html.SafeUrl))
    ) {
      var o = /^data:image\//i.test(e);
      e = goog.html.SafeUrl.sanitizeAssertUnchanged(e, o);
    }
    t.src = goog.html.SafeUrl.unwrap(e);
  }),
  (goog.dom.safe.setAudioSrc = function (t, e) {
    if (
      (goog.dom.asserts.assertIsHTMLAudioElement(t),
      !(e instanceof goog.html.SafeUrl))
    ) {
      var o = /^data:audio\//i.test(e);
      e = goog.html.SafeUrl.sanitizeAssertUnchanged(e, o);
    }
    t.src = goog.html.SafeUrl.unwrap(e);
  }),
  (goog.dom.safe.setVideoSrc = function (t, e) {
    if (
      (goog.dom.asserts.assertIsHTMLVideoElement(t),
      !(e instanceof goog.html.SafeUrl))
    ) {
      var o = /^data:video\//i.test(e);
      e = goog.html.SafeUrl.sanitizeAssertUnchanged(e, o);
    }
    t.src = goog.html.SafeUrl.unwrap(e);
  }),
  (goog.dom.safe.setEmbedSrc = function (t, e) {
    goog.dom.asserts.assertIsHTMLEmbedElement(t),
      (t.src = goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e));
  }),
  (goog.dom.safe.setFrameSrc = function (t, e) {
    goog.dom.asserts.assertIsHTMLFrameElement(t),
      (t.src = goog.html.TrustedResourceUrl.unwrap(e));
  }),
  (goog.dom.safe.setIframeSrc = function (t, e) {
    goog.dom.asserts.assertIsHTMLIFrameElement(t),
      (t.src = goog.html.TrustedResourceUrl.unwrap(e));
  }),
  (goog.dom.safe.setIframeSrcdoc = function (t, e) {
    goog.dom.asserts.assertIsHTMLIFrameElement(t),
      (t.srcdoc = goog.html.SafeHtml.unwrapTrustedHTML(e));
  }),
  (goog.dom.safe.setLinkHrefAndRel = function (t, e, o) {
    goog.dom.asserts.assertIsHTMLLinkElement(t),
      (t.rel = o),
      goog.string.internal.caseInsensitiveContains(o, "stylesheet")
        ? (goog.asserts.assert(
            e instanceof goog.html.TrustedResourceUrl,
            'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'
          ),
          (t.href = goog.html.TrustedResourceUrl.unwrap(e)))
        : (t.href =
            e instanceof goog.html.TrustedResourceUrl
              ? goog.html.TrustedResourceUrl.unwrap(e)
              : e instanceof goog.html.SafeUrl
              ? goog.html.SafeUrl.unwrap(e)
              : goog.html.SafeUrl.unwrap(
                  goog.html.SafeUrl.sanitizeAssertUnchanged(e)
                ));
  }),
  (goog.dom.safe.setObjectData = function (t, e) {
    goog.dom.asserts.assertIsHTMLObjectElement(t),
      (t.data = goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e));
  }),
  (goog.dom.safe.setScriptSrc = function (t, e) {
    goog.dom.asserts.assertIsHTMLScriptElement(t),
      (t.src = goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)),
      (e = goog.getScriptNonce()) && t.setAttribute("nonce", e);
  }),
  (goog.dom.safe.setScriptContent = function (t, e) {
    goog.dom.asserts.assertIsHTMLScriptElement(t),
      (t.text = goog.html.SafeScript.unwrapTrustedScript(e)),
      (e = goog.getScriptNonce()) && t.setAttribute("nonce", e);
  }),
  (goog.dom.safe.setLocationHref = function (t, e) {
    goog.dom.asserts.assertIsLocation(t),
      (e =
        e instanceof goog.html.SafeUrl
          ? e
          : goog.html.SafeUrl.sanitizeAssertUnchanged(e)),
      (t.href = goog.html.SafeUrl.unwrap(e));
  }),
  (goog.dom.safe.assignLocation = function (t, e) {
    goog.dom.asserts.assertIsLocation(t),
      (e =
        e instanceof goog.html.SafeUrl
          ? e
          : goog.html.SafeUrl.sanitizeAssertUnchanged(e)),
      t.assign(goog.html.SafeUrl.unwrap(e));
  }),
  (goog.dom.safe.replaceLocation = function (t, e) {
    goog.dom.asserts.assertIsLocation(t),
      (e =
        e instanceof goog.html.SafeUrl
          ? e
          : goog.html.SafeUrl.sanitizeAssertUnchanged(e)),
      t.replace(goog.html.SafeUrl.unwrap(e));
  }),
  (goog.dom.safe.openInWindow = function (t, e, o, i, n) {
    return (
      (t =
        t instanceof goog.html.SafeUrl
          ? t
          : goog.html.SafeUrl.sanitizeAssertUnchanged(t)),
      (e || goog.global).open(
        goog.html.SafeUrl.unwrap(t),
        o ? goog.string.Const.unwrap(o) : "",
        i,
        n
      )
    );
  }),
  (goog.dom.safe.parseFromStringHtml = function (t, e) {
    return goog.dom.safe.parseFromString(t, e, "text/html");
  }),
  (goog.dom.safe.parseFromString = function (t, e, o) {
    return t.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(e), o);
  }),
  (goog.dom.safe.createImageFromBlob = function (t) {
    if (!/^image\/.*/g.test(t.type))
      throw Error(
        "goog.dom.safe.createImageFromBlob only accepts MIME type image/.*."
      );
    var e = goog.global.URL.createObjectURL(t);
    return (
      ((t = new goog.global.Image()).onload = function () {
        goog.global.URL.revokeObjectURL(e);
      }),
      goog.dom.safe.setImageSrc(
        t,
        goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(
          goog.string.Const.from("Image blob URL."),
          e
        )
      ),
      t
    );
  }),
  (goog.string.DETECT_DOUBLE_ESCAPING = !1),
  (goog.string.FORCE_NON_DOM_HTML_UNESCAPING = !1),
  (goog.string.Unicode = { NBSP: " " }),
  (goog.string.startsWith = goog.string.internal.startsWith),
  (goog.string.endsWith = goog.string.internal.endsWith),
  (goog.string.caseInsensitiveStartsWith =
    goog.string.internal.caseInsensitiveStartsWith),
  (goog.string.caseInsensitiveEndsWith =
    goog.string.internal.caseInsensitiveEndsWith),
  (goog.string.caseInsensitiveEquals =
    goog.string.internal.caseInsensitiveEquals),
  (goog.string.subs = function (t, e) {
    for (
      var o = t.split("%s"),
        i = "",
        n = Array.prototype.slice.call(arguments, 1);
      n.length && 1 < o.length;

    )
      i += o.shift() + n.shift();
    return i + o.join("%s");
  }),
  (goog.string.collapseWhitespace = function (t) {
    return t.replace(/[\s\xa0]+/g, " ").replace(/^\s+|\s+$/g, "");
  }),
  (goog.string.isEmptyOrWhitespace = goog.string.internal.isEmptyOrWhitespace),
  (goog.string.isEmptyString = function (t) {
    return 0 == t.length;
  }),
  (goog.string.isEmpty = goog.string.isEmptyOrWhitespace),
  (goog.string.isEmptyOrWhitespaceSafe = function (t) {
    return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t));
  }),
  (goog.string.isEmptySafe = goog.string.isEmptyOrWhitespaceSafe),
  (goog.string.isBreakingWhitespace = function (t) {
    return !/[^\t\n\r ]/.test(t);
  }),
  (goog.string.isAlpha = function (t) {
    return !/[^a-zA-Z]/.test(t);
  }),
  (goog.string.isNumeric = function (t) {
    return !/[^0-9]/.test(t);
  }),
  (goog.string.isAlphaNumeric = function (t) {
    return !/[^a-zA-Z0-9]/.test(t);
  }),
  (goog.string.isSpace = function (t) {
    return " " == t;
  }),
  (goog.string.isUnicodeChar = function (t) {
    return (1 == t.length && " " <= t && "~" >= t) || ("" <= t && "�" >= t);
  }),
  (goog.string.stripNewlines = function (t) {
    return t.replace(/(\r\n|\r|\n)+/g, " ");
  }),
  (goog.string.canonicalizeNewlines = function (t) {
    return t.replace(/(\r\n|\r|\n)/g, "\n");
  }),
  (goog.string.normalizeWhitespace = function (t) {
    return t.replace(/\xa0|\s/g, " ");
  }),
  (goog.string.normalizeSpaces = function (t) {
    return t.replace(/\xa0|[ \t]+/g, " ");
  }),
  (goog.string.collapseBreakingSpaces = function (t) {
    return t
      .replace(/[\t\r\n ]+/g, " ")
      .replace(/^[\t\r\n ]+|[\t\r\n ]+$/g, "");
  }),
  (goog.string.trim = goog.string.internal.trim),
  (goog.string.trimLeft = function (t) {
    return t.replace(/^[\s\xa0]+/, "");
  }),
  (goog.string.trimRight = function (t) {
    return t.replace(/[\s\xa0]+$/, "");
  }),
  (goog.string.caseInsensitiveCompare =
    goog.string.internal.caseInsensitiveCompare),
  (goog.string.numberAwareCompare_ = function (t, e, o) {
    if (t == e) return 0;
    if (!t) return -1;
    if (!e) return 1;
    for (
      var i = t.toLowerCase().match(o),
        n = e.toLowerCase().match(o),
        l = Math.min(i.length, n.length),
        r = 0;
      r < l;
      r++
    ) {
      o = i[r];
      var s = n[r];
      if (o != s)
        return (
          (t = parseInt(o, 10)),
          !isNaN(t) && ((e = parseInt(s, 10)), !isNaN(e) && t - e)
            ? t - e
            : o < s
            ? -1
            : 1
        );
    }
    return i.length != n.length ? i.length - n.length : t < e ? -1 : 1;
  }),
  (goog.string.intAwareCompare = function (t, e) {
    return goog.string.numberAwareCompare_(t, e, /\d+|\D+/g);
  }),
  (goog.string.floatAwareCompare = function (t, e) {
    return goog.string.numberAwareCompare_(t, e, /\d+|\.\d+|\D+/g);
  }),
  (goog.string.numerateCompare = goog.string.floatAwareCompare),
  (goog.string.urlEncode = function (t) {
    return encodeURIComponent(String(t));
  }),
  (goog.string.urlDecode = function (t) {
    return decodeURIComponent(t.replace(/\+/g, " "));
  }),
  (goog.string.newLineToBr = goog.string.internal.newLineToBr),
  (goog.string.htmlEscape = function (t, e) {
    return (
      (t = goog.string.internal.htmlEscape(t, e)),
      goog.string.DETECT_DOUBLE_ESCAPING &&
        (t = t.replace(goog.string.E_RE_, "&#101;")),
      t
    );
  }),
  (goog.string.E_RE_ = /e/g),
  (goog.string.unescapeEntities = function (t) {
    return goog.string.contains(t, "&")
      ? !goog.string.FORCE_NON_DOM_HTML_UNESCAPING && "document" in goog.global
        ? goog.string.unescapeEntitiesUsingDom_(t)
        : goog.string.unescapePureXmlEntities_(t)
      : t;
  }),
  (goog.string.unescapeEntitiesWithDocument = function (t, e) {
    return goog.string.contains(t, "&")
      ? goog.string.unescapeEntitiesUsingDom_(t, e)
      : t;
  }),
  (goog.string.unescapeEntitiesUsingDom_ = function (t, e) {
    var o = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"' },
      i = e
        ? e.createElement("div")
        : goog.global.document.createElement("div");
    return t.replace(goog.string.HTML_ENTITY_PATTERN_, function (t, e) {
      var n = o[t];
      return (
        n ||
        ("#" == e.charAt(0) &&
          ((e = Number("0" + e.substr(1))),
          isNaN(e) || (n = String.fromCharCode(e))),
        n ||
          (goog.dom.safe.setInnerHtml(
            i,
            goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(
              goog.string.Const.from("Single HTML entity."),
              t + " "
            )
          ),
          (n = i.firstChild.nodeValue.slice(0, -1))),
        (o[t] = n))
      );
    });
  }),
  (goog.string.unescapePureXmlEntities_ = function (t) {
    return t.replace(/&([^;]+);/g, function (t, e) {
      switch (e) {
        case "amp":
          return "&";
        case "lt":
          return "<";
        case "gt":
          return ">";
        case "quot":
          return '"';
        default:
          return "#" != e.charAt(0) ||
            ((e = Number("0" + e.substr(1))), isNaN(e))
            ? t
            : String.fromCharCode(e);
      }
    });
  }),
  (goog.string.HTML_ENTITY_PATTERN_ = /&([^;\s<&]+);?/g),
  (goog.string.whitespaceEscape = function (t, e) {
    return goog.string.newLineToBr(t.replace(/  /g, " &#160;"), e);
  }),
  (goog.string.preserveSpaces = function (t) {
    return t.replace(/(^|[\n ]) /g, "$1" + goog.string.Unicode.NBSP);
  }),
  (goog.string.stripQuotes = function (t, e) {
    for (var o = e.length, i = 0; i < o; i++) {
      var n = 1 == o ? e : e.charAt(i);
      if (t.charAt(0) == n && t.charAt(t.length - 1) == n)
        return t.substring(1, t.length - 1);
    }
    return t;
  }),
  (goog.string.truncate = function (t, e, o) {
    return (
      o && (t = goog.string.unescapeEntities(t)),
      t.length > e && (t = t.substring(0, e - 3) + "..."),
      o && (t = goog.string.htmlEscape(t)),
      t
    );
  }),
  (goog.string.truncateMiddle = function (t, e, o, i) {
    if ((o && (t = goog.string.unescapeEntities(t)), i && t.length > e)) {
      i > e && (i = e);
      var n = t.length - i;
      t = t.substring(0, e - i) + "..." + t.substring(n);
    } else
      t.length > e &&
        ((i = Math.floor(e / 2)),
        (n = t.length - i),
        (t = t.substring(0, i + (e % 2)) + "..." + t.substring(n)));
    return o && (t = goog.string.htmlEscape(t)), t;
  }),
  (goog.string.specialEscapeChars_ = {
    "\0": "\\0",
    "\b": "\\b",
    "\f": "\\f",
    "\n": "\\n",
    "\r": "\\r",
    "\t": "\\t",
    "\v": "\\x0B",
    '"': '\\"',
    "\\": "\\\\",
    "<": "\\u003C",
  }),
  (goog.string.jsEscapeCache_ = { "'": "\\'" }),
  (goog.string.quote = function (t) {
    t = String(t);
    for (var e = ['"'], o = 0; o < t.length; o++) {
      var i = t.charAt(o),
        n = i.charCodeAt(0);
      e[o + 1] =
        goog.string.specialEscapeChars_[i] ||
        (31 < n && 127 > n ? i : goog.string.escapeChar(i));
    }
    return e.push('"'), e.join("");
  }),
  (goog.string.escapeString = function (t) {
    for (var e = [], o = 0; o < t.length; o++)
      e[o] = goog.string.escapeChar(t.charAt(o));
    return e.join("");
  }),
  (goog.string.escapeChar = function (t) {
    if (t in goog.string.jsEscapeCache_) return goog.string.jsEscapeCache_[t];
    if (t in goog.string.specialEscapeChars_)
      return (goog.string.jsEscapeCache_[t] =
        goog.string.specialEscapeChars_[t]);
    var e = t.charCodeAt(0);
    if (31 < e && 127 > e) var o = t;
    else
      256 > e
        ? ((o = "\\x"), (16 > e || 256 < e) && (o += "0"))
        : ((o = "\\u"), 4096 > e && (o += "0")),
        (o += e.toString(16).toUpperCase());
    return (goog.string.jsEscapeCache_[t] = o);
  }),
  (goog.string.contains = goog.string.internal.contains),
  (goog.string.caseInsensitiveContains =
    goog.string.internal.caseInsensitiveContains),
  (goog.string.countOf = function (t, e) {
    return t && e ? t.split(e).length - 1 : 0;
  }),
  (goog.string.removeAt = function (t, e, o) {
    var i = t;
    return (
      0 <= e &&
        e < t.length &&
        0 < o &&
        (i = t.substr(0, e) + t.substr(e + o, t.length - e - o)),
      i
    );
  }),
  (goog.string.remove = function (t, e) {
    return t.replace(e, "");
  }),
  (goog.string.removeAll = function (t, e) {
    return (e = new RegExp(goog.string.regExpEscape(e), "g")), t.replace(e, "");
  }),
  (goog.string.replaceAll = function (t, e, o) {
    return (
      (e = new RegExp(goog.string.regExpEscape(e), "g")),
      t.replace(e, o.replace(/\$/g, "$$$$"))
    );
  }),
  (goog.string.regExpEscape = function (t) {
    return String(t)
      .replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1")
      .replace(/\x08/g, "\\x08");
  }),
  (goog.string.repeat = String.prototype.repeat
    ? function (t, e) {
        return t.repeat(e);
      }
    : function (t, e) {
        return Array(e + 1).join(t);
      }),
  (goog.string.padNumber = function (t, e, o) {
    return (
      -1 == (o = (t = void 0 !== o ? t.toFixed(o) : String(t)).indexOf(".")) &&
        (o = t.length),
      goog.string.repeat("0", Math.max(0, e - o)) + t
    );
  }),
  (goog.string.makeSafe = function (t) {
    return null == t ? "" : String(t);
  }),
  (goog.string.buildString = function (t) {
    return Array.prototype.join.call(arguments, "");
  }),
  (goog.string.getRandomString = function () {
    return (
      Math.floor(2147483648 * Math.random()).toString(36) +
      Math.abs(Math.floor(2147483648 * Math.random()) ^ goog.now()).toString(36)
    );
  }),
  (goog.string.compareVersions = goog.string.internal.compareVersions),
  (goog.string.hashCode = function (t) {
    for (var e = 0, o = 0; o < t.length; ++o)
      e = (31 * e + t.charCodeAt(o)) >>> 0;
    return e;
  }),
  (goog.string.uniqueStringCounter_ = (2147483648 * Math.random()) | 0),
  (goog.string.createUniqueString = function () {
    return "goog_" + goog.string.uniqueStringCounter_++;
  }),
  (goog.string.toNumber = function (t) {
    var e = Number(t);
    return 0 == e && goog.string.isEmptyOrWhitespace(t) ? NaN : e;
  }),
  (goog.string.isLowerCamelCase = function (t) {
    return /^[a-z]+([A-Z][a-z]*)*$/.test(t);
  }),
  (goog.string.isUpperCamelCase = function (t) {
    return /^([A-Z][a-z]*)+$/.test(t);
  }),
  (goog.string.toCamelCase = function (t) {
    return String(t).replace(/\-([a-z])/g, function (t, e) {
      return e.toUpperCase();
    });
  }),
  (goog.string.toSelectorCase = function (t) {
    return String(t)
      .replace(/([A-Z])/g, "-$1")
      .toLowerCase();
  }),
  (goog.string.toTitleCase = function (t, e) {
    return (
      (e = "string" == typeof e ? goog.string.regExpEscape(e) : "\\s"),
      t.replace(
        new RegExp("(^" + (e ? "|[" + e + "]+" : "") + ")([a-z])", "g"),
        function (t, e, o) {
          return e + o.toUpperCase();
        }
      )
    );
  }),
  (goog.string.capitalize = function (t) {
    return (
      String(t.charAt(0)).toUpperCase() + String(t.substr(1)).toLowerCase()
    );
  }),
  (goog.string.parseInt = function (t) {
    return (
      isFinite(t) && (t = String(t)),
      "string" == typeof t
        ? /^\s*-?0x/i.test(t)
          ? parseInt(t, 16)
          : parseInt(t, 10)
        : NaN
    );
  }),
  (goog.string.splitLimit = function (t, e, o) {
    t = t.split(e);
    for (var i = []; 0 < o && t.length; ) i.push(t.shift()), o--;
    return t.length && i.push(t.join(e)), i;
  }),
  (goog.string.lastComponent = function (t, e) {
    if (!e) return t;
    "string" == typeof e && (e = [e]);
    for (var o = -1, i = 0; i < e.length; i++)
      if ("" != e[i]) {
        var n = t.lastIndexOf(e[i]);
        n > o && (o = n);
      }
    return -1 == o ? t : t.slice(o + 1);
  }),
  (goog.string.editDistance = function (t, e) {
    var o = [],
      i = [];
    if (t == e) return 0;
    if (!t.length || !e.length) return Math.max(t.length, e.length);
    for (var n = 0; n < e.length + 1; n++) o[n] = n;
    for (n = 0; n < t.length; n++) {
      i[0] = n + 1;
      for (var l = 0; l < e.length; l++)
        i[l + 1] = Math.min(
          i[l] + 1,
          o[l + 1] + 1,
          o[l] + Number(t[n] != e[l])
        );
      for (l = 0; l < o.length; l++) o[l] = i[l];
    }
    return i[e.length];
  }),
  (goog.labs.userAgent.engine = {}),
  (goog.labs.userAgent.engine.isPresto = function () {
    return goog.labs.userAgent.util.matchUserAgent("Presto");
  }),
  (goog.labs.userAgent.engine.isTrident = function () {
    return (
      goog.labs.userAgent.util.matchUserAgent("Trident") ||
      goog.labs.userAgent.util.matchUserAgent("MSIE")
    );
  }),
  (goog.labs.userAgent.engine.isEdge = function () {
    return goog.labs.userAgent.util.matchUserAgent("Edge");
  }),
  (goog.labs.userAgent.engine.isWebKit = function () {
    return (
      goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit") &&
      !goog.labs.userAgent.engine.isEdge()
    );
  }),
  (goog.labs.userAgent.engine.isGecko = function () {
    return (
      goog.labs.userAgent.util.matchUserAgent("Gecko") &&
      !goog.labs.userAgent.engine.isWebKit() &&
      !goog.labs.userAgent.engine.isTrident() &&
      !goog.labs.userAgent.engine.isEdge()
    );
  }),
  (goog.labs.userAgent.engine.getVersion = function () {
    var t = goog.labs.userAgent.util.getUserAgent();
    if (t) {
      t = goog.labs.userAgent.util.extractVersionTuples(t);
      var e,
        o = goog.labs.userAgent.engine.getEngineTuple_(t);
      if (o)
        return "Gecko" == o[0]
          ? goog.labs.userAgent.engine.getVersionForKey_(t, "Firefox")
          : o[1];
      if ((t = t[0]) && (e = t[2]) && (e = /Trident\/([^\s;]+)/.exec(e)))
        return e[1];
    }
    return "";
  }),
  (goog.labs.userAgent.engine.getEngineTuple_ = function (t) {
    if (!goog.labs.userAgent.engine.isEdge()) return t[1];
    for (var e = 0; e < t.length; e++) {
      var o = t[e];
      if ("Edge" == o[0]) return o;
    }
  }),
  (goog.labs.userAgent.engine.isVersionOrHigher = function (t) {
    return (
      0 <=
      goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(), t)
    );
  }),
  (goog.labs.userAgent.engine.getVersionForKey_ = function (t, e) {
    return (
      ((t = goog.array.find(t, function (t) {
        return e == t[0];
      })) &&
        t[1]) ||
      ""
    );
  }),
  (goog.labs.userAgent.platform = {}),
  (goog.labs.userAgent.platform.isAndroid = function () {
    return goog.labs.userAgent.util.matchUserAgent("Android");
  }),
  (goog.labs.userAgent.platform.isIpod = function () {
    return goog.labs.userAgent.util.matchUserAgent("iPod");
  }),
  (goog.labs.userAgent.platform.isIphone = function () {
    return (
      goog.labs.userAgent.util.matchUserAgent("iPhone") &&
      !goog.labs.userAgent.util.matchUserAgent("iPod") &&
      !goog.labs.userAgent.util.matchUserAgent("iPad")
    );
  }),
  (goog.labs.userAgent.platform.isIpad = function () {
    return goog.labs.userAgent.util.matchUserAgent("iPad");
  }),
  (goog.labs.userAgent.platform.isIos = function () {
    return (
      goog.labs.userAgent.platform.isIphone() ||
      goog.labs.userAgent.platform.isIpad() ||
      goog.labs.userAgent.platform.isIpod()
    );
  }),
  (goog.labs.userAgent.platform.isMacintosh = function () {
    return goog.labs.userAgent.util.matchUserAgent("Macintosh");
  }),
  (goog.labs.userAgent.platform.isLinux = function () {
    return goog.labs.userAgent.util.matchUserAgent("Linux");
  }),
  (goog.labs.userAgent.platform.isWindows = function () {
    return goog.labs.userAgent.util.matchUserAgent("Windows");
  }),
  (goog.labs.userAgent.platform.isChromeOS = function () {
    return goog.labs.userAgent.util.matchUserAgent("CrOS");
  }),
  (goog.labs.userAgent.platform.isChromecast = function () {
    return goog.labs.userAgent.util.matchUserAgent("CrKey");
  }),
  (goog.labs.userAgent.platform.isKaiOS = function () {
    return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS");
  }),
  (goog.labs.userAgent.platform.isGo2Phone = function () {
    return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP");
  }),
  (goog.labs.userAgent.platform.getVersion = function () {
    var t = goog.labs.userAgent.util.getUserAgent(),
      e = "";
    return (
      goog.labs.userAgent.platform.isWindows()
        ? (e = (t = (e = /Windows (?:NT|Phone) ([0-9.]+)/).exec(t))
            ? t[1]
            : "0.0")
        : goog.labs.userAgent.platform.isIos()
        ? (e =
            (t = (e = /(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(t)) &&
            t[1].replace(/_/g, "."))
        : goog.labs.userAgent.platform.isMacintosh()
        ? (e = (t = (e = /Mac OS X ([0-9_.]+)/).exec(t))
            ? t[1].replace(/_/g, ".")
            : "10")
        : goog.labs.userAgent.platform.isKaiOS()
        ? (e = (t = (e = /(?:KaiOS)\/(\S+)/i).exec(t)) && t[1])
        : goog.labs.userAgent.platform.isAndroid()
        ? (e = (t = (e = /Android\s+([^\);]+)(\)|;)/).exec(t)) && t[1])
        : goog.labs.userAgent.platform.isChromeOS() &&
          (e =
            (t = (e = /(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(t)) &&
            t[1]),
      e || ""
    );
  }),
  (goog.labs.userAgent.platform.isVersionOrHigher = function (t) {
    return (
      0 <=
      goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(), t)
    );
  }),
  (goog.reflect = {}),
  (goog.reflect.object = function (t, e) {
    return e;
  }),
  (goog.reflect.objectProperty = function (t, e) {
    return t;
  }),
  (goog.reflect.sinkValue = function (t) {
    return goog.reflect.sinkValue[" "](t), t;
  }),
  (goog.reflect.sinkValue[" "] = goog.nullFunction),
  (goog.reflect.canAccessProperty = function (t, e) {
    try {
      return goog.reflect.sinkValue(t[e]), !0;
    } catch (t) {}
    return !1;
  }),
  (goog.reflect.cache = function (t, e, o, i) {
    return (
      (i = i ? i(e) : e),
      Object.prototype.hasOwnProperty.call(t, i) ? t[i] : (t[i] = o(e))
    );
  }),
  (goog.userAgent = {}),
  (goog.userAgent.ASSUME_IE = !1),
  (goog.userAgent.ASSUME_EDGE = !1),
  (goog.userAgent.ASSUME_GECKO = !1),
  (goog.userAgent.ASSUME_WEBKIT = !1),
  (goog.userAgent.ASSUME_MOBILE_WEBKIT = !1),
  (goog.userAgent.ASSUME_OPERA = !1),
  (goog.userAgent.ASSUME_ANY_VERSION = !1),
  (goog.userAgent.BROWSER_KNOWN_ =
    goog.userAgent.ASSUME_IE ||
    goog.userAgent.ASSUME_EDGE ||
    goog.userAgent.ASSUME_GECKO ||
    goog.userAgent.ASSUME_MOBILE_WEBKIT ||
    goog.userAgent.ASSUME_WEBKIT ||
    goog.userAgent.ASSUME_OPERA),
  (goog.userAgent.getUserAgentString = function () {
    return goog.labs.userAgent.util.getUserAgent();
  }),
  (goog.userAgent.getNavigatorTyped = function () {
    return goog.global.navigator || null;
  }),
  (goog.userAgent.getNavigator = function () {
    return goog.userAgent.getNavigatorTyped();
  }),
  (goog.userAgent.OPERA = goog.userAgent.BROWSER_KNOWN_
    ? goog.userAgent.ASSUME_OPERA
    : goog.labs.userAgent.browser.isOpera()),
  (goog.userAgent.IE = goog.userAgent.BROWSER_KNOWN_
    ? goog.userAgent.ASSUME_IE
    : goog.labs.userAgent.browser.isIE()),
  (goog.userAgent.EDGE = goog.userAgent.BROWSER_KNOWN_
    ? goog.userAgent.ASSUME_EDGE
    : goog.labs.userAgent.engine.isEdge()),
  (goog.userAgent.EDGE_OR_IE = goog.userAgent.EDGE || goog.userAgent.IE),
  (goog.userAgent.GECKO = goog.userAgent.BROWSER_KNOWN_
    ? goog.userAgent.ASSUME_GECKO
    : goog.labs.userAgent.engine.isGecko()),
  (goog.userAgent.WEBKIT = goog.userAgent.BROWSER_KNOWN_
    ? goog.userAgent.ASSUME_WEBKIT || goog.userAgent.ASSUME_MOBILE_WEBKIT
    : goog.labs.userAgent.engine.isWebKit()),
  (goog.userAgent.isMobile_ = function () {
    return (
      goog.userAgent.WEBKIT && goog.labs.userAgent.util.matchUserAgent("Mobile")
    );
  }),
  (goog.userAgent.MOBILE =
    goog.userAgent.ASSUME_MOBILE_WEBKIT || goog.userAgent.isMobile_()),
  (goog.userAgent.SAFARI = goog.userAgent.WEBKIT),
  (goog.userAgent.determinePlatform_ = function () {
    var t = goog.userAgent.getNavigatorTyped();
    return (t && t.platform) || "";
  }),
  (goog.userAgent.PLATFORM = goog.userAgent.determinePlatform_()),
  (goog.userAgent.ASSUME_MAC = !1),
  (goog.userAgent.ASSUME_WINDOWS = !1),
  (goog.userAgent.ASSUME_LINUX = !1),
  (goog.userAgent.ASSUME_X11 = !1),
  (goog.userAgent.ASSUME_ANDROID = !1),
  (goog.userAgent.ASSUME_IPHONE = !1),
  (goog.userAgent.ASSUME_IPAD = !1),
  (goog.userAgent.ASSUME_IPOD = !1),
  (goog.userAgent.ASSUME_KAIOS = !1),
  (goog.userAgent.ASSUME_GO2PHONE = !1),
  (goog.userAgent.PLATFORM_KNOWN_ =
    goog.userAgent.ASSUME_MAC ||
    goog.userAgent.ASSUME_WINDOWS ||
    goog.userAgent.ASSUME_LINUX ||
    goog.userAgent.ASSUME_X11 ||
    goog.userAgent.ASSUME_ANDROID ||
    goog.userAgent.ASSUME_IPHONE ||
    goog.userAgent.ASSUME_IPAD ||
    goog.userAgent.ASSUME_IPOD),
  (goog.userAgent.MAC = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_MAC
    : goog.labs.userAgent.platform.isMacintosh()),
  (goog.userAgent.WINDOWS = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_WINDOWS
    : goog.labs.userAgent.platform.isWindows()),
  (goog.userAgent.isLegacyLinux_ = function () {
    return (
      goog.labs.userAgent.platform.isLinux() ||
      goog.labs.userAgent.platform.isChromeOS()
    );
  }),
  (goog.userAgent.LINUX = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_LINUX
    : goog.userAgent.isLegacyLinux_()),
  (goog.userAgent.isX11_ = function () {
    var t = goog.userAgent.getNavigatorTyped();
    return !!t && goog.string.contains(t.appVersion || "", "X11");
  }),
  (goog.userAgent.X11 = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_X11
    : goog.userAgent.isX11_()),
  (goog.userAgent.ANDROID = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_ANDROID
    : goog.labs.userAgent.platform.isAndroid()),
  (goog.userAgent.IPHONE = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_IPHONE
    : goog.labs.userAgent.platform.isIphone()),
  (goog.userAgent.IPAD = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_IPAD
    : goog.labs.userAgent.platform.isIpad()),
  (goog.userAgent.IPOD = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_IPOD
    : goog.labs.userAgent.platform.isIpod()),
  (goog.userAgent.IOS = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_IPHONE ||
      goog.userAgent.ASSUME_IPAD ||
      goog.userAgent.ASSUME_IPOD
    : goog.labs.userAgent.platform.isIos()),
  (goog.userAgent.KAIOS = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_KAIOS
    : goog.labs.userAgent.platform.isKaiOS()),
  (goog.userAgent.GO2PHONE = goog.userAgent.PLATFORM_KNOWN_
    ? goog.userAgent.ASSUME_GO2PHONE
    : goog.labs.userAgent.platform.isGo2Phone()),
  (goog.userAgent.determineVersion_ = function () {
    var t = "",
      e = goog.userAgent.getVersionRegexResult_();
    return (
      e && (t = e ? e[1] : ""),
      goog.userAgent.IE &&
      null != (e = goog.userAgent.getDocumentMode_()) &&
      e > parseFloat(t)
        ? String(e)
        : t
    );
  }),
  (goog.userAgent.getVersionRegexResult_ = function () {
    var t = goog.userAgent.getUserAgentString();
    return goog.userAgent.GECKO
      ? /rv:([^\);]+)(\)|;)/.exec(t)
      : goog.userAgent.EDGE
      ? /Edge\/([\d\.]+)/.exec(t)
      : goog.userAgent.IE
      ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t)
      : goog.userAgent.WEBKIT
      ? /WebKit\/(\S+)/.exec(t)
      : goog.userAgent.OPERA
      ? /(?:Version)[ \/]?(\S+)/.exec(t)
      : void 0;
  }),
  (goog.userAgent.getDocumentMode_ = function () {
    var t = goog.global.document;
    return t ? t.documentMode : void 0;
  }),
  (goog.userAgent.VERSION = goog.userAgent.determineVersion_()),
  (goog.userAgent.compare = function (t, e) {
    return goog.string.compareVersions(t, e);
  }),
  (goog.userAgent.isVersionOrHigherCache_ = {}),
  (goog.userAgent.isVersionOrHigher = function (t) {
    return (
      goog.userAgent.ASSUME_ANY_VERSION ||
      goog.reflect.cache(
        goog.userAgent.isVersionOrHigherCache_,
        t,
        function () {
          return 0 <= goog.string.compareVersions(goog.userAgent.VERSION, t);
        }
      )
    );
  }),
  (goog.userAgent.isVersion = goog.userAgent.isVersionOrHigher),
  (goog.userAgent.isDocumentModeOrHigher = function (t) {
    return Number(goog.userAgent.DOCUMENT_MODE) >= t;
  }),
  (goog.userAgent.isDocumentMode = goog.userAgent.isDocumentModeOrHigher),
  (goog.userAgent.DOCUMENT_MODE = (function () {
    if (goog.global.document && goog.userAgent.IE)
      return goog.userAgent.getDocumentMode_();
  })()),
  (goog.dom.BrowserFeature = {}),
  (goog.dom.BrowserFeature.ASSUME_NO_OFFSCREEN_CANVAS = !1),
  (goog.dom.BrowserFeature.ASSUME_OFFSCREEN_CANVAS = !1),
  (goog.dom.BrowserFeature.detectOffscreenCanvas_ = function (t) {
    try {
      return !!new self.OffscreenCanvas(0, 0).getContext(t);
    } catch (t) {}
    return !1;
  }),
  (goog.dom.BrowserFeature.OFFSCREEN_CANVAS_2D =
    !goog.dom.BrowserFeature.ASSUME_NO_OFFSCREEN_CANVAS &&
    (goog.dom.BrowserFeature.ASSUME_OFFSCREEN_CANVAS ||
      goog.dom.BrowserFeature.detectOffscreenCanvas_("2d"))),
  (goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES =
    !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9)),
  (goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE =
    (!goog.userAgent.GECKO && !goog.userAgent.IE) ||
    (goog.userAgent.IE && goog.userAgent.isDocumentModeOrHigher(9)) ||
    (goog.userAgent.GECKO && goog.userAgent.isVersionOrHigher("1.9.1"))),
  (goog.dom.BrowserFeature.CAN_USE_INNER_TEXT =
    goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("9")),
  (goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY =
    goog.userAgent.IE || goog.userAgent.OPERA || goog.userAgent.WEBKIT),
  (goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT = goog.userAgent.IE),
  (goog.dom.BrowserFeature.LEGACY_IE_RANGES =
    goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9)),
  (goog.math = {}),
  (goog.math.randomInt = function (t) {
    return Math.floor(Math.random() * t);
  }),
  (goog.math.uniformRandom = function (t, e) {
    return t + Math.random() * (e - t);
  }),
  (goog.math.clamp = function (t, e, o) {
    return Math.min(Math.max(t, e), o);
  }),
  (goog.math.modulo = function (t, e) {
    return 0 > (t %= e) * e ? t + e : t;
  }),
  (goog.math.lerp = function (t, e, o) {
    return t + o * (e - t);
  }),
  (goog.math.nearlyEquals = function (t, e, o) {
    return Math.abs(t - e) <= (o || 1e-6);
  }),
  (goog.math.standardAngle = function (t) {
    return goog.math.modulo(t, 360);
  }),
  (goog.math.standardAngleInRadians = function (t) {
    return goog.math.modulo(t, 2 * Math.PI);
  }),
  (goog.math.toRadians = function (t) {
    return (t * Math.PI) / 180;
  }),
  (goog.math.toDegrees = function (t) {
    return (180 * t) / Math.PI;
  }),
  (goog.math.angleDx = function (t, e) {
    return e * Math.cos(goog.math.toRadians(t));
  }),
  (goog.math.angleDy = function (t, e) {
    return e * Math.sin(goog.math.toRadians(t));
  }),
  (goog.math.angle = function (t, e, o, i) {
    return goog.math.standardAngle(
      goog.math.toDegrees(Math.atan2(i - e, o - t))
    );
  }),
  (goog.math.angleDifference = function (t, e) {
    return (
      180 < (t = goog.math.standardAngle(e) - goog.math.standardAngle(t))
        ? (t -= 360)
        : -180 >= t && (t = 360 + t),
      t
    );
  }),
  (goog.math.sign = function (t) {
    return 0 < t ? 1 : 0 > t ? -1 : t;
  }),
  (goog.math.longestCommonSubsequence = function (t, e, o, i) {
    (o =
      o ||
      function (t, e) {
        return t == e;
      }),
      (i =
        i ||
        function (e, o) {
          return t[e];
        });
    for (var n = t.length, l = e.length, r = [], s = 0; s < n + 1; s++)
      (r[s] = []), (r[s][0] = 0);
    for (var a = 0; a < l + 1; a++) r[0][a] = 0;
    for (s = 1; s <= n; s++)
      for (a = 1; a <= l; a++)
        o(t[s - 1], e[a - 1])
          ? (r[s][a] = r[s - 1][a - 1] + 1)
          : (r[s][a] = Math.max(r[s - 1][a], r[s][a - 1]));
    var c = [];
    for (s = n, a = l; 0 < s && 0 < a; )
      o(t[s - 1], e[a - 1])
        ? (c.unshift(i(s - 1, a - 1)), s--, a--)
        : r[s - 1][a] > r[s][a - 1]
        ? s--
        : a--;
    return c;
  }),
  (goog.math.sum = function (t) {
    return goog.array.reduce(
      arguments,
      function (t, e) {
        return t + e;
      },
      0
    );
  }),
  (goog.math.average = function (t) {
    return goog.math.sum.apply(null, arguments) / arguments.length;
  }),
  (goog.math.sampleVariance = function (t) {
    var e = arguments.length;
    if (2 > e) return 0;
    var o = goog.math.average.apply(null, arguments);
    return (
      goog.math.sum.apply(
        null,
        goog.array.map(arguments, function (t) {
          return Math.pow(t - o, 2);
        })
      ) /
      (e - 1)
    );
  }),
  (goog.math.standardDeviation = function (t) {
    return Math.sqrt(goog.math.sampleVariance.apply(null, arguments));
  }),
  (goog.math.isInt = function (t) {
    return isFinite(t) && 0 == t % 1;
  }),
  (goog.math.isFiniteNumber = function (t) {
    return isFinite(t);
  }),
  (goog.math.isNegativeZero = function (t) {
    return 0 == t && 0 > 1 / t;
  }),
  (goog.math.log10Floor = function (t) {
    if (0 < t) {
      var e = Math.round(Math.log(t) * Math.LOG10E);
      return e - (parseFloat("1e" + e) > t ? 1 : 0);
    }
    return 0 == t ? -1 / 0 : NaN;
  }),
  (goog.math.safeFloor = function (t, e) {
    return (
      goog.asserts.assert(void 0 === e || 0 < e), Math.floor(t + (e || 2e-15))
    );
  }),
  (goog.math.safeCeil = function (t, e) {
    return (
      goog.asserts.assert(void 0 === e || 0 < e), Math.ceil(t - (e || 2e-15))
    );
  }),
  (goog.math.Coordinate = function (t, e) {
    (this.x = void 0 !== t ? t : 0), (this.y = void 0 !== e ? e : 0);
  }),
  (goog.math.Coordinate.prototype.clone = function () {
    return new goog.math.Coordinate(this.x, this.y);
  }),
  goog.DEBUG &&
    (goog.math.Coordinate.prototype.toString = function () {
      return "(" + this.x + ", " + this.y + ")";
    }),
  (goog.math.Coordinate.prototype.equals = function (t) {
    return (
      t instanceof goog.math.Coordinate && goog.math.Coordinate.equals(this, t)
    );
  }),
  (goog.math.Coordinate.equals = function (t, e) {
    return t == e || (!(!t || !e) && t.x == e.x && t.y == e.y);
  }),
  (goog.math.Coordinate.distance = function (t, e) {
    var o = t.x - e.x;
    return (t = t.y - e.y), Math.sqrt(o * o + t * t);
  }),
  (goog.math.Coordinate.magnitude = function (t) {
    return Math.sqrt(t.x * t.x + t.y * t.y);
  }),
  (goog.math.Coordinate.azimuth = function (t) {
    return goog.math.angle(0, 0, t.x, t.y);
  }),
  (goog.math.Coordinate.squaredDistance = function (t, e) {
    var o = t.x - e.x;
    return o * o + (t = t.y - e.y) * t;
  }),
  (goog.math.Coordinate.difference = function (t, e) {
    return new goog.math.Coordinate(t.x - e.x, t.y - e.y);
  }),
  (goog.math.Coordinate.sum = function (t, e) {
    return new goog.math.Coordinate(t.x + e.x, t.y + e.y);
  }),
  (goog.math.Coordinate.prototype.ceil = function () {
    return (this.x = Math.ceil(this.x)), (this.y = Math.ceil(this.y)), this;
  }),
  (goog.math.Coordinate.prototype.floor = function () {
    return (this.x = Math.floor(this.x)), (this.y = Math.floor(this.y)), this;
  }),
  (goog.math.Coordinate.prototype.round = function () {
    return (this.x = Math.round(this.x)), (this.y = Math.round(this.y)), this;
  }),
  (goog.math.Coordinate.prototype.translate = function (t, e) {
    return (
      t instanceof goog.math.Coordinate
        ? ((this.x += t.x), (this.y += t.y))
        : ((this.x += Number(t)), "number" == typeof e && (this.y += e)),
      this
    );
  }),
  (goog.math.Coordinate.prototype.scale = function (t, e) {
    return (this.x *= t), (this.y *= "number" == typeof e ? e : t), this;
  }),
  (goog.math.Coordinate.prototype.rotateRadians = function (t, e) {
    e = e || new goog.math.Coordinate(0, 0);
    var o = this.x,
      i = this.y,
      n = Math.cos(t);
    (t = Math.sin(t)),
      (this.x = (o - e.x) * n - (i - e.y) * t + e.x),
      (this.y = (o - e.x) * t + (i - e.y) * n + e.y);
  }),
  (goog.math.Coordinate.prototype.rotateDegrees = function (t, e) {
    this.rotateRadians(goog.math.toRadians(t), e);
  }),
  (goog.math.Size = function (t, e) {
    (this.width = t), (this.height = e);
  }),
  (goog.math.Size.equals = function (t, e) {
    return (
      t == e || (!(!t || !e) && t.width == e.width && t.height == e.height)
    );
  }),
  (goog.math.Size.prototype.clone = function () {
    return new goog.math.Size(this.width, this.height);
  }),
  goog.DEBUG &&
    (goog.math.Size.prototype.toString = function () {
      return "(" + this.width + " x " + this.height + ")";
    }),
  (goog.math.Size.prototype.getLongest = function () {
    return Math.max(this.width, this.height);
  }),
  (goog.math.Size.prototype.getShortest = function () {
    return Math.min(this.width, this.height);
  }),
  (goog.math.Size.prototype.area = function () {
    return this.width * this.height;
  }),
  (goog.math.Size.prototype.perimeter = function () {
    return 2 * (this.width + this.height);
  }),
  (goog.math.Size.prototype.aspectRatio = function () {
    return this.width / this.height;
  }),
  (goog.math.Size.prototype.isEmpty = function () {
    return !this.area();
  }),
  (goog.math.Size.prototype.ceil = function () {
    return (
      (this.width = Math.ceil(this.width)),
      (this.height = Math.ceil(this.height)),
      this
    );
  }),
  (goog.math.Size.prototype.fitsInside = function (t) {
    return this.width <= t.width && this.height <= t.height;
  }),
  (goog.math.Size.prototype.floor = function () {
    return (
      (this.width = Math.floor(this.width)),
      (this.height = Math.floor(this.height)),
      this
    );
  }),
  (goog.math.Size.prototype.round = function () {
    return (
      (this.width = Math.round(this.width)),
      (this.height = Math.round(this.height)),
      this
    );
  }),
  (goog.math.Size.prototype.scale = function (t, e) {
    return (
      (this.width *= t), (this.height *= "number" == typeof e ? e : t), this
    );
  }),
  (goog.math.Size.prototype.scaleToCover = function (t) {
    return (
      (t =
        this.aspectRatio() <= t.aspectRatio()
          ? t.width / this.width
          : t.height / this.height),
      this.scale(t)
    );
  }),
  (goog.math.Size.prototype.scaleToFit = function (t) {
    return (
      (t =
        this.aspectRatio() > t.aspectRatio()
          ? t.width / this.width
          : t.height / this.height),
      this.scale(t)
    );
  }),
  (goog.dom.ASSUME_QUIRKS_MODE = !1),
  (goog.dom.ASSUME_STANDARDS_MODE = !1),
  (goog.dom.COMPAT_MODE_KNOWN_ =
    goog.dom.ASSUME_QUIRKS_MODE || goog.dom.ASSUME_STANDARDS_MODE),
  (goog.dom.getDomHelper = function (t) {
    return t
      ? new goog.dom.DomHelper(goog.dom.getOwnerDocument(t))
      : goog.dom.defaultDomHelper_ ||
          (goog.dom.defaultDomHelper_ = new goog.dom.DomHelper());
  }),
  (goog.dom.getDocument = function () {
    return document;
  }),
  (goog.dom.getElement = function (t) {
    return goog.dom.getElementHelper_(document, t);
  }),
  (goog.dom.getElementHelper_ = function (t, e) {
    return "string" == typeof e ? t.getElementById(e) : e;
  }),
  (goog.dom.getRequiredElement = function (t) {
    return goog.dom.getRequiredElementHelper_(document, t);
  }),
  (goog.dom.getRequiredElementHelper_ = function (t, e) {
    return (
      goog.asserts.assertString(e),
      (t = goog.dom.getElementHelper_(t, e)),
      goog.asserts.assertElement(t, "No element found with id: " + e)
    );
  }),
  (goog.dom.$ = goog.dom.getElement),
  (goog.dom.getElementsByTagName = function (t, e) {
    return (e || document).getElementsByTagName(String(t));
  }),
  (goog.dom.getElementsByTagNameAndClass = function (t, e, o) {
    return goog.dom.getElementsByTagNameAndClass_(document, t, e, o);
  }),
  (goog.dom.getElementByTagNameAndClass = function (t, e, o) {
    return goog.dom.getElementByTagNameAndClass_(document, t, e, o);
  }),
  (goog.dom.getElementsByClass = function (t, e) {
    var o = e || document;
    return goog.dom.canUseQuerySelector_(o)
      ? o.querySelectorAll("." + t)
      : goog.dom.getElementsByTagNameAndClass_(document, "*", t, e);
  }),
  (goog.dom.getElementByClass = function (t, e) {
    var o = e || document;
    return (
      (o.getElementsByClassName
        ? o.getElementsByClassName(t)[0]
        : goog.dom.getElementByTagNameAndClass_(document, "*", t, e)) || null
    );
  }),
  (goog.dom.getRequiredElementByClass = function (t, e) {
    return (
      (e = goog.dom.getElementByClass(t, e)),
      goog.asserts.assert(e, "No element found with className: " + t)
    );
  }),
  (goog.dom.canUseQuerySelector_ = function (t) {
    return !(!t.querySelectorAll || !t.querySelector);
  }),
  (goog.dom.getElementsByTagNameAndClass_ = function (t, e, o, i) {
    if (
      ((t = i || t),
      (e = e && "*" != e ? String(e).toUpperCase() : ""),
      goog.dom.canUseQuerySelector_(t) && (e || o))
    )
      return t.querySelectorAll(e + (o ? "." + o : ""));
    if (o && t.getElementsByClassName) {
      if (((t = t.getElementsByClassName(o)), e)) {
        i = {};
        for (var n, l = 0, r = 0; (n = t[r]); r++)
          e == n.nodeName && (i[l++] = n);
        return (i.length = l), i;
      }
      return t;
    }
    if (((t = t.getElementsByTagName(e || "*")), o)) {
      for (i = {}, r = l = 0; (n = t[r]); r++)
        "function" == typeof (e = n.className).split &&
          goog.array.contains(e.split(/\s+/), o) &&
          (i[l++] = n);
      return (i.length = l), i;
    }
    return t;
  }),
  (goog.dom.getElementByTagNameAndClass_ = function (t, e, o, i) {
    var n = i || t,
      l = e && "*" != e ? String(e).toUpperCase() : "";
    return goog.dom.canUseQuerySelector_(n) && (l || o)
      ? n.querySelector(l + (o ? "." + o : ""))
      : goog.dom.getElementsByTagNameAndClass_(t, e, o, i)[0] || null;
  }),
  (goog.dom.$$ = goog.dom.getElementsByTagNameAndClass),
  (goog.dom.setProperties = function (t, e) {
    goog.object.forEach(e, function (e, o) {
      e &&
        "object" == typeof e &&
        e.implementsGoogStringTypedString &&
        (e = e.getTypedStringValue()),
        "style" == o
          ? (t.style.cssText = e)
          : "class" == o
          ? (t.className = e)
          : "for" == o
          ? (t.htmlFor = e)
          : goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(o)
          ? t.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[o], e)
          : goog.string.startsWith(o, "aria-") ||
            goog.string.startsWith(o, "data-")
          ? t.setAttribute(o, e)
          : (t[o] = e);
    });
  }),
  (goog.dom.DIRECT_ATTRIBUTE_MAP_ = {
    cellpadding: "cellPadding",
    cellspacing: "cellSpacing",
    colspan: "colSpan",
    frameborder: "frameBorder",
    height: "height",
    maxlength: "maxLength",
    nonce: "nonce",
    role: "role",
    rowspan: "rowSpan",
    type: "type",
    usemap: "useMap",
    valign: "vAlign",
    width: "width",
  }),
  (goog.dom.getViewportSize = function (t) {
    return goog.dom.getViewportSize_(t || window);
  }),
  (goog.dom.getViewportSize_ = function (t) {
    return (
      (t = t.document),
      (t = goog.dom.isCss1CompatMode_(t) ? t.documentElement : t.body),
      new goog.math.Size(t.clientWidth, t.clientHeight)
    );
  }),
  (goog.dom.getDocumentHeight = function () {
    return goog.dom.getDocumentHeight_(window);
  }),
  (goog.dom.getDocumentHeightForWindow = function (t) {
    return goog.dom.getDocumentHeight_(t);
  }),
  (goog.dom.getDocumentHeight_ = function (t) {
    var e = t.document,
      o = 0;
    if (e) {
      o = e.body;
      var i = e.documentElement;
      if (!i || !o) return 0;
      if (
        ((t = goog.dom.getViewportSize_(t).height),
        goog.dom.isCss1CompatMode_(e) && i.scrollHeight)
      )
        o = i.scrollHeight != t ? i.scrollHeight : i.offsetHeight;
      else {
        e = i.scrollHeight;
        var n = i.offsetHeight;
        i.clientHeight != n && ((e = o.scrollHeight), (n = o.offsetHeight)),
          (o = e > t ? (e > n ? e : n) : e < n ? e : n);
      }
    }
    return o;
  }),
  (goog.dom.getPageScroll = function (t) {
    return goog.dom
      .getDomHelper((t || goog.global || window).document)
      .getDocumentScroll();
  }),
  (goog.dom.getDocumentScroll = function () {
    return goog.dom.getDocumentScroll_(document);
  }),
  (goog.dom.getDocumentScroll_ = function (t) {
    var e = goog.dom.getDocumentScrollElement_(t);
    return (
      (t = goog.dom.getWindow_(t)),
      goog.userAgent.IE &&
      goog.userAgent.isVersionOrHigher("10") &&
      t.pageYOffset != e.scrollTop
        ? new goog.math.Coordinate(e.scrollLeft, e.scrollTop)
        : new goog.math.Coordinate(
            t.pageXOffset || e.scrollLeft,
            t.pageYOffset || e.scrollTop
          )
    );
  }),
  (goog.dom.getDocumentScrollElement = function () {
    return goog.dom.getDocumentScrollElement_(document);
  }),
  (goog.dom.getDocumentScrollElement_ = function (t) {
    return t.scrollingElement
      ? t.scrollingElement
      : !goog.userAgent.WEBKIT && goog.dom.isCss1CompatMode_(t)
      ? t.documentElement
      : t.body || t.documentElement;
  }),
  (goog.dom.getWindow = function (t) {
    return t ? goog.dom.getWindow_(t) : window;
  }),
  (goog.dom.getWindow_ = function (t) {
    return t.parentWindow || t.defaultView;
  }),
  (goog.dom.createDom = function (t, e, o) {
    return goog.dom.createDom_(document, arguments);
  }),
  (goog.dom.createDom_ = function (t, e) {
    var o = String(e[0]),
      i = e[1];
    if (
      !goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES &&
      i &&
      (i.name || i.type)
    ) {
      if (
        ((o = ["<", o]),
        i.name && o.push(' name="', goog.string.htmlEscape(i.name), '"'),
        i.type)
      ) {
        o.push(' type="', goog.string.htmlEscape(i.type), '"');
        var n = {};
        goog.object.extend(n, i), delete n.type, (i = n);
      }
      o.push(">"), (o = o.join(""));
    }
    return (
      (o = goog.dom.createElement_(t, o)),
      i &&
        ("string" == typeof i
          ? (o.className = i)
          : goog.isArray(i)
          ? (o.className = i.join(" "))
          : goog.dom.setProperties(o, i)),
      2 < e.length && goog.dom.append_(t, o, e, 2),
      o
    );
  }),
  (goog.dom.append_ = function (t, e, o, i) {
    function n(o) {
      o && e.appendChild("string" == typeof o ? t.createTextNode(o) : o);
    }
    for (; i < o.length; i++) {
      var l = o[i];
      goog.isArrayLike(l) && !goog.dom.isNodeLike(l)
        ? goog.array.forEach(
            goog.dom.isNodeList(l) ? goog.array.toArray(l) : l,
            n
          )
        : n(l);
    }
  }),
  (goog.dom.$dom = goog.dom.createDom),
  (goog.dom.createElement = function (t) {
    return goog.dom.createElement_(document, t);
  }),
  (goog.dom.createElement_ = function (t, e) {
    return (
      (e = String(e)),
      "application/xhtml+xml" === t.contentType && (e = e.toLowerCase()),
      t.createElement(e)
    );
  }),
  (goog.dom.createTextNode = function (t) {
    return document.createTextNode(String(t));
  }),
  (goog.dom.createTable = function (t, e, o) {
    return goog.dom.createTable_(document, t, e, !!o);
  }),
  (goog.dom.createTable_ = function (t, e, o, i) {
    for (
      var n = goog.dom.createElement_(t, "TABLE"),
        l = n.appendChild(goog.dom.createElement_(t, "TBODY")),
        r = 0;
      r < e;
      r++
    ) {
      for (var s = goog.dom.createElement_(t, "TR"), a = 0; a < o; a++) {
        var c = goog.dom.createElement_(t, "TD");
        i && goog.dom.setTextContent(c, goog.string.Unicode.NBSP),
          s.appendChild(c);
      }
      l.appendChild(s);
    }
    return n;
  }),
  (goog.dom.constHtmlToNode = function (t) {
    var e = goog.array.map(arguments, goog.string.Const.unwrap);
    return (
      (e =
        goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(
          goog.string.Const.from(
            "Constant HTML string, that gets turned into a Node later, so it will be automatically balanced."
          ),
          e.join("")
        )),
      goog.dom.safeHtmlToNode(e)
    );
  }),
  (goog.dom.safeHtmlToNode = function (t) {
    return goog.dom.safeHtmlToNode_(document, t);
  }),
  (goog.dom.safeHtmlToNode_ = function (t, e) {
    var o = goog.dom.createElement_(t, "DIV");
    return (
      goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT
        ? (goog.dom.safe.setInnerHtml(
            o,
            goog.html.SafeHtml.concat(goog.html.SafeHtml.BR, e)
          ),
          o.removeChild(goog.asserts.assert(o.firstChild)))
        : goog.dom.safe.setInnerHtml(o, e),
      goog.dom.childrenToNode_(t, o)
    );
  }),
  (goog.dom.childrenToNode_ = function (t, e) {
    if (1 == e.childNodes.length)
      return e.removeChild(goog.asserts.assert(e.firstChild));
    for (t = t.createDocumentFragment(); e.firstChild; )
      t.appendChild(e.firstChild);
    return t;
  }),
  (goog.dom.isCss1CompatMode = function () {
    return goog.dom.isCss1CompatMode_(document);
  }),
  (goog.dom.isCss1CompatMode_ = function (t) {
    return goog.dom.COMPAT_MODE_KNOWN_
      ? goog.dom.ASSUME_STANDARDS_MODE
      : "CSS1Compat" == t.compatMode;
  }),
  (goog.dom.canHaveChildren = function (t) {
    if (t.nodeType != goog.dom.NodeType.ELEMENT) return !1;
    switch (t.tagName) {
      case "APPLET":
      case "AREA":
      case "BASE":
      case "BR":
      case "COL":
      case "COMMAND":
      case "EMBED":
      case "FRAME":
      case "HR":
      case "IMG":
      case "INPUT":
      case "IFRAME":
      case "ISINDEX":
      case "KEYGEN":
      case "LINK":
      case "NOFRAMES":
      case "NOSCRIPT":
      case "META":
      case "OBJECT":
      case "PARAM":
      case "SCRIPT":
      case "SOURCE":
      case "STYLE":
      case "TRACK":
      case "WBR":
        return !1;
    }
    return !0;
  }),
  (goog.dom.appendChild = function (t, e) {
    goog.asserts.assert(
      null != t && null != e,
      "goog.dom.appendChild expects non-null arguments"
    ),
      t.appendChild(e);
  }),
  (goog.dom.append = function (t, e) {
    goog.dom.append_(goog.dom.getOwnerDocument(t), t, arguments, 1);
  }),
  (goog.dom.removeChildren = function (t) {
    for (var e; (e = t.firstChild); ) t.removeChild(e);
  }),
  (goog.dom.insertSiblingBefore = function (t, e) {
    goog.asserts.assert(
      null != t && null != e,
      "goog.dom.insertSiblingBefore expects non-null arguments"
    ),
      e.parentNode && e.parentNode.insertBefore(t, e);
  }),
  (goog.dom.insertSiblingAfter = function (t, e) {
    goog.asserts.assert(
      null != t && null != e,
      "goog.dom.insertSiblingAfter expects non-null arguments"
    ),
      e.parentNode && e.parentNode.insertBefore(t, e.nextSibling);
  }),
  (goog.dom.insertChildAt = function (t, e, o) {
    goog.asserts.assert(
      null != t,
      "goog.dom.insertChildAt expects a non-null parent"
    ),
      t.insertBefore(e, t.childNodes[o] || null);
  }),
  (goog.dom.removeNode = function (t) {
    return t && t.parentNode ? t.parentNode.removeChild(t) : null;
  }),
  (goog.dom.replaceNode = function (t, e) {
    goog.asserts.assert(
      null != t && null != e,
      "goog.dom.replaceNode expects non-null arguments"
    );
    var o = e.parentNode;
    o && o.replaceChild(t, e);
  }),
  (goog.dom.flattenElement = function (t) {
    var e,
      o = t.parentNode;
    if (o && o.nodeType != goog.dom.NodeType.DOCUMENT_FRAGMENT) {
      if (t.removeNode) return t.removeNode(!1);
      for (; (e = t.firstChild); ) o.insertBefore(e, t);
      return goog.dom.removeNode(t);
    }
  }),
  (goog.dom.getChildren = function (t) {
    return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE &&
      null != t.children
      ? t.children
      : goog.array.filter(t.childNodes, function (t) {
          return t.nodeType == goog.dom.NodeType.ELEMENT;
        });
  }),
  (goog.dom.getFirstElementChild = function (t) {
    return void 0 !== t.firstElementChild
      ? t.firstElementChild
      : goog.dom.getNextElementNode_(t.firstChild, !0);
  }),
  (goog.dom.getLastElementChild = function (t) {
    return void 0 !== t.lastElementChild
      ? t.lastElementChild
      : goog.dom.getNextElementNode_(t.lastChild, !1);
  }),
  (goog.dom.getNextElementSibling = function (t) {
    return void 0 !== t.nextElementSibling
      ? t.nextElementSibling
      : goog.dom.getNextElementNode_(t.nextSibling, !0);
  }),
  (goog.dom.getPreviousElementSibling = function (t) {
    return void 0 !== t.previousElementSibling
      ? t.previousElementSibling
      : goog.dom.getNextElementNode_(t.previousSibling, !1);
  }),
  (goog.dom.getNextElementNode_ = function (t, e) {
    for (; t && t.nodeType != goog.dom.NodeType.ELEMENT; )
      t = e ? t.nextSibling : t.previousSibling;
    return t;
  }),
  (goog.dom.getNextNode = function (t) {
    if (!t) return null;
    if (t.firstChild) return t.firstChild;
    for (; t && !t.nextSibling; ) t = t.parentNode;
    return t ? t.nextSibling : null;
  }),
  (goog.dom.getPreviousNode = function (t) {
    if (!t) return null;
    if (!t.previousSibling) return t.parentNode;
    for (t = t.previousSibling; t && t.lastChild; ) t = t.lastChild;
    return t;
  }),
  (goog.dom.isNodeLike = function (t) {
    return goog.isObject(t) && 0 < t.nodeType;
  }),
  (goog.dom.isElement = function (t) {
    return goog.isObject(t) && t.nodeType == goog.dom.NodeType.ELEMENT;
  }),
  (goog.dom.isWindow = function (t) {
    return goog.isObject(t) && t.window == t;
  }),
  (goog.dom.getParentElement = function (t) {
    var e;
    return !goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY ||
      (goog.userAgent.IE &&
        goog.userAgent.isVersionOrHigher("9") &&
        !goog.userAgent.isVersionOrHigher("10") &&
        goog.global.SVGElement &&
        t instanceof goog.global.SVGElement) ||
      !(e = t.parentElement)
      ? ((e = t.parentNode), goog.dom.isElement(e) ? e : null)
      : e;
  }),
  (goog.dom.contains = function (t, e) {
    if (!t || !e) return !1;
    if (t.contains && e.nodeType == goog.dom.NodeType.ELEMENT)
      return t == e || t.contains(e);
    if (void 0 !== t.compareDocumentPosition)
      return t == e || !!(16 & t.compareDocumentPosition(e));
    for (; e && t != e; ) e = e.parentNode;
    return e == t;
  }),
  (goog.dom.compareNodeOrder = function (t, e) {
    if (t == e) return 0;
    if (t.compareDocumentPosition)
      return 2 & t.compareDocumentPosition(e) ? 1 : -1;
    if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9)) {
      if (t.nodeType == goog.dom.NodeType.DOCUMENT) return -1;
      if (e.nodeType == goog.dom.NodeType.DOCUMENT) return 1;
    }
    if ("sourceIndex" in t || (t.parentNode && "sourceIndex" in t.parentNode)) {
      var o = t.nodeType == goog.dom.NodeType.ELEMENT,
        i = e.nodeType == goog.dom.NodeType.ELEMENT;
      if (o && i) return t.sourceIndex - e.sourceIndex;
      var n = t.parentNode,
        l = e.parentNode;
      return n == l
        ? goog.dom.compareSiblingOrder_(t, e)
        : !o && goog.dom.contains(n, e)
        ? -1 * goog.dom.compareParentsDescendantNodeIe_(t, e)
        : !i && goog.dom.contains(l, t)
        ? goog.dom.compareParentsDescendantNodeIe_(e, t)
        : (o ? t.sourceIndex : n.sourceIndex) -
          (i ? e.sourceIndex : l.sourceIndex);
    }
    return (
      (o = (i = goog.dom.getOwnerDocument(t)).createRange()).selectNode(t),
      o.collapse(!0),
      (t = i.createRange()).selectNode(e),
      t.collapse(!0),
      o.compareBoundaryPoints(goog.global.Range.START_TO_END, t)
    );
  }),
  (goog.dom.compareParentsDescendantNodeIe_ = function (t, e) {
    var o = t.parentNode;
    if (o == e) return -1;
    for (; e.parentNode != o; ) e = e.parentNode;
    return goog.dom.compareSiblingOrder_(e, t);
  }),
  (goog.dom.compareSiblingOrder_ = function (t, e) {
    for (; (e = e.previousSibling); ) if (e == t) return -1;
    return 1;
  }),
  (goog.dom.findCommonAncestor = function (t) {
    var e,
      o = arguments.length;
    if (!o) return null;
    if (1 == o) return arguments[0];
    var i = [],
      n = 1 / 0;
    for (e = 0; e < o; e++) {
      for (var l = [], r = arguments[e]; r; ) l.unshift(r), (r = r.parentNode);
      i.push(l), (n = Math.min(n, l.length));
    }
    for (l = null, e = 0; e < n; e++) {
      r = i[0][e];
      for (var s = 1; s < o; s++) if (r != i[s][e]) return l;
      l = r;
    }
    return l;
  }),
  (goog.dom.isInDocument = function (t) {
    return 16 == (16 & t.ownerDocument.compareDocumentPosition(t));
  }),
  (goog.dom.getOwnerDocument = function (t) {
    return (
      goog.asserts.assert(t, "Node cannot be null or undefined."),
      t.nodeType == goog.dom.NodeType.DOCUMENT
        ? t
        : t.ownerDocument || t.document
    );
  }),
  (goog.dom.getFrameContentDocument = function (t) {
    return t.contentDocument || t.contentWindow.document;
  }),
  (goog.dom.getFrameContentWindow = function (t) {
    try {
      return (
        t.contentWindow ||
        (t.contentDocument ? goog.dom.getWindow(t.contentDocument) : null)
      );
    } catch (t) {}
    return null;
  }),
  (goog.dom.setTextContent = function (t, e) {
    if (
      (goog.asserts.assert(
        null != t,
        "goog.dom.setTextContent expects a non-null value for node"
      ),
      "textContent" in t)
    )
      t.textContent = e;
    else if (t.nodeType == goog.dom.NodeType.TEXT) t.data = String(e);
    else if (t.firstChild && t.firstChild.nodeType == goog.dom.NodeType.TEXT) {
      for (; t.lastChild != t.firstChild; )
        t.removeChild(goog.asserts.assert(t.lastChild));
      t.firstChild.data = String(e);
    } else {
      goog.dom.removeChildren(t);
      var o = goog.dom.getOwnerDocument(t);
      t.appendChild(o.createTextNode(String(e)));
    }
  }),
  (goog.dom.getOuterHtml = function (t) {
    if (
      (goog.asserts.assert(
        null !== t,
        "goog.dom.getOuterHtml expects a non-null value for element"
      ),
      "outerHTML" in t)
    )
      return t.outerHTML;
    var e = goog.dom.getOwnerDocument(t);
    return (
      (e = goog.dom.createElement_(e, "DIV")).appendChild(t.cloneNode(!0)),
      e.innerHTML
    );
  }),
  (goog.dom.findNode = function (t, e) {
    var o = [];
    return goog.dom.findNodes_(t, e, o, !0) ? o[0] : void 0;
  }),
  (goog.dom.findNodes = function (t, e) {
    var o = [];
    return goog.dom.findNodes_(t, e, o, !1), o;
  }),
  (goog.dom.findNodes_ = function (t, e, o, i) {
    if (null != t)
      for (t = t.firstChild; t; ) {
        if ((e(t) && (o.push(t), i)) || goog.dom.findNodes_(t, e, o, i))
          return !0;
        t = t.nextSibling;
      }
    return !1;
  }),
  (goog.dom.findElement = function (t, e) {
    for (t = goog.dom.getChildrenReverse_(t); 0 < t.length; ) {
      var o = t.pop();
      if (e(o)) return o;
      for (o = o.lastElementChild; o; o = o.previousElementSibling) t.push(o);
    }
    return null;
  }),
  (goog.dom.findElements = function (t, e) {
    var o = [];
    for (t = goog.dom.getChildrenReverse_(t); 0 < t.length; ) {
      var i = t.pop();
      for (
        e(i) && o.push(i), i = i.lastElementChild;
        i;
        i = i.previousElementSibling
      )
        t.push(i);
    }
    return o;
  }),
  (goog.dom.getChildrenReverse_ = function (t) {
    if (t.nodeType == goog.dom.NodeType.DOCUMENT) return [t.documentElement];
    var e = [];
    for (t = t.lastElementChild; t; t = t.previousElementSibling) e.push(t);
    return e;
  }),
  (goog.dom.TAGS_TO_IGNORE_ = {
    SCRIPT: 1,
    STYLE: 1,
    HEAD: 1,
    IFRAME: 1,
    OBJECT: 1,
  }),
  (goog.dom.PREDEFINED_TAG_VALUES_ = { IMG: " ", BR: "\n" }),
  (goog.dom.isFocusableTabIndex = function (t) {
    return (
      goog.dom.hasSpecifiedTabIndex_(t) && goog.dom.isTabIndexFocusable_(t)
    );
  }),
  (goog.dom.setFocusableTabIndex = function (t, e) {
    e ? (t.tabIndex = 0) : ((t.tabIndex = -1), t.removeAttribute("tabIndex"));
  }),
  (goog.dom.isFocusable = function (t) {
    var e;
    return (e = goog.dom.nativelySupportsFocus_(t)
      ? !t.disabled &&
        (!goog.dom.hasSpecifiedTabIndex_(t) || goog.dom.isTabIndexFocusable_(t))
      : goog.dom.isFocusableTabIndex(t)) && goog.userAgent.IE
      ? goog.dom.hasNonZeroBoundingRect_(t)
      : e;
  }),
  (goog.dom.hasSpecifiedTabIndex_ = function (t) {
    return goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("9")
      ? null != (t = t.getAttributeNode("tabindex")) && t.specified
      : t.hasAttribute("tabindex");
  }),
  (goog.dom.isTabIndexFocusable_ = function (t) {
    return "number" == typeof (t = t.tabIndex) && 0 <= t && 32768 > t;
  }),
  (goog.dom.nativelySupportsFocus_ = function (t) {
    return (
      ("A" == t.tagName && t.hasAttribute("href")) ||
      "INPUT" == t.tagName ||
      "TEXTAREA" == t.tagName ||
      "SELECT" == t.tagName ||
      "BUTTON" == t.tagName
    );
  }),
  (goog.dom.hasNonZeroBoundingRect_ = function (t) {
    return (
      null !=
        (t =
          !goog.isFunction(t.getBoundingClientRect) ||
          (goog.userAgent.IE && null == t.parentElement)
            ? { height: t.offsetHeight, width: t.offsetWidth }
            : t.getBoundingClientRect()) &&
      0 < t.height &&
      0 < t.width
    );
  }),
  (goog.dom.getTextContent = function (t) {
    if (
      goog.dom.BrowserFeature.CAN_USE_INNER_TEXT &&
      null !== t &&
      "innerText" in t
    )
      t = goog.string.canonicalizeNewlines(t.innerText);
    else {
      var e = [];
      goog.dom.getTextContent_(t, e, !0), (t = e.join(""));
    }
    return (
      (t = (t = t.replace(/ \xAD /g, " ").replace(/\xAD/g, "")).replace(
        /\u200B/g,
        ""
      )),
      goog.dom.BrowserFeature.CAN_USE_INNER_TEXT || (t = t.replace(/ +/g, " ")),
      " " != t && (t = t.replace(/^\s*/, "")),
      t
    );
  }),
  (goog.dom.getRawTextContent = function (t) {
    var e = [];
    return goog.dom.getTextContent_(t, e, !1), e.join("");
  }),
  (goog.dom.getTextContent_ = function (t, e, o) {
    if (!(t.nodeName in goog.dom.TAGS_TO_IGNORE_))
      if (t.nodeType == goog.dom.NodeType.TEXT)
        o
          ? e.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g, ""))
          : e.push(t.nodeValue);
      else if (t.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)
        e.push(goog.dom.PREDEFINED_TAG_VALUES_[t.nodeName]);
      else
        for (t = t.firstChild; t; )
          goog.dom.getTextContent_(t, e, o), (t = t.nextSibling);
  }),
  (goog.dom.getNodeTextLength = function (t) {
    return goog.dom.getTextContent(t).length;
  }),
  (goog.dom.getNodeTextOffset = function (t, e) {
    e = e || goog.dom.getOwnerDocument(t).body;
    for (var o = []; t && t != e; ) {
      for (var i = t; (i = i.previousSibling); )
        o.unshift(goog.dom.getTextContent(i));
      t = t.parentNode;
    }
    return goog.string.trimLeft(o.join("")).replace(/ +/g, " ").length;
  }),
  (goog.dom.getNodeAtOffset = function (t, e, o) {
    t = [t];
    for (var i = 0, n = null; 0 < t.length && i < e; )
      if (!((n = t.pop()).nodeName in goog.dom.TAGS_TO_IGNORE_))
        if (n.nodeType == goog.dom.NodeType.TEXT) {
          var l = n.nodeValue.replace(/(\r\n|\r|\n)/g, "").replace(/ +/g, " ");
          i += l.length;
        } else if (n.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)
          i += goog.dom.PREDEFINED_TAG_VALUES_[n.nodeName].length;
        else
          for (l = n.childNodes.length - 1; 0 <= l; l--)
            t.push(n.childNodes[l]);
    return (
      goog.isObject(o) &&
        ((o.remainder = n ? n.nodeValue.length + e - i - 1 : 0), (o.node = n)),
      n
    );
  }),
  (goog.dom.isNodeList = function (t) {
    if (t && "number" == typeof t.length) {
      if (goog.isObject(t))
        return "function" == typeof t.item || "string" == typeof t.item;
      if (goog.isFunction(t)) return "function" == typeof t.item;
    }
    return !1;
  }),
  (goog.dom.getAncestorByTagNameAndClass = function (t, e, o, i) {
    if (!e && !o) return null;
    var n = e ? String(e).toUpperCase() : null;
    return goog.dom.getAncestor(
      t,
      function (t) {
        return (
          (!n || t.nodeName == n) &&
          (!o ||
            ("string" == typeof t.className &&
              goog.array.contains(t.className.split(/\s+/), o)))
        );
      },
      !0,
      i
    );
  }),
  (goog.dom.getAncestorByClass = function (t, e, o) {
    return goog.dom.getAncestorByTagNameAndClass(t, null, e, o);
  }),
  (goog.dom.getAncestor = function (t, e, o, i) {
    for (t && !o && (t = t.parentNode), o = 0; t && (null == i || o <= i); ) {
      if ((goog.asserts.assert("parentNode" != t.name), e(t))) return t;
      (t = t.parentNode), o++;
    }
    return null;
  }),
  (goog.dom.getActiveElement = function (t) {
    try {
      var e = t && t.activeElement;
      return e && e.nodeName ? e : null;
    } catch (t) {
      return null;
    }
  }),
  (goog.dom.getPixelRatio = function () {
    var t = goog.dom.getWindow();
    return void 0 !== t.devicePixelRatio
      ? t.devicePixelRatio
      : t.matchMedia
      ? goog.dom.matchesPixelRatio_(3) ||
        goog.dom.matchesPixelRatio_(2) ||
        goog.dom.matchesPixelRatio_(1.5) ||
        goog.dom.matchesPixelRatio_(1) ||
        0.75
      : 1;
  }),
  (goog.dom.matchesPixelRatio_ = function (t) {
    return goog.dom
      .getWindow()
      .matchMedia(
        "(min-resolution: " +
          t +
          "dppx),(min--moz-device-pixel-ratio: " +
          t +
          "),(min-resolution: " +
          96 * t +
          "dpi)"
      ).matches
      ? t
      : 0;
  }),
  (goog.dom.getCanvasContext2D = function (t) {
    return t.getContext("2d");
  }),
  (goog.dom.DomHelper = function (t) {
    this.document_ = t || goog.global.document || document;
  }),
  (goog.dom.DomHelper.prototype.getDomHelper = goog.dom.getDomHelper),
  (goog.dom.DomHelper.prototype.setDocument = function (t) {
    this.document_ = t;
  }),
  (goog.dom.DomHelper.prototype.getDocument = function () {
    return this.document_;
  }),
  (goog.dom.DomHelper.prototype.getElement = function (t) {
    return goog.dom.getElementHelper_(this.document_, t);
  }),
  (goog.dom.DomHelper.prototype.getRequiredElement = function (t) {
    return goog.dom.getRequiredElementHelper_(this.document_, t);
  }),
  (goog.dom.DomHelper.prototype.$ = goog.dom.DomHelper.prototype.getElement),
  (goog.dom.DomHelper.prototype.getElementsByTagName = function (t, e) {
    return (e || this.document_).getElementsByTagName(String(t));
  }),
  (goog.dom.DomHelper.prototype.getElementsByTagNameAndClass = function (
    t,
    e,
    o
  ) {
    return goog.dom.getElementsByTagNameAndClass_(this.document_, t, e, o);
  }),
  (goog.dom.DomHelper.prototype.getElementByTagNameAndClass = function (
    t,
    e,
    o
  ) {
    return goog.dom.getElementByTagNameAndClass_(this.document_, t, e, o);
  }),
  (goog.dom.DomHelper.prototype.getElementsByClass = function (t, e) {
    return goog.dom.getElementsByClass(t, e || this.document_);
  }),
  (goog.dom.DomHelper.prototype.getElementByClass = function (t, e) {
    return goog.dom.getElementByClass(t, e || this.document_);
  }),
  (goog.dom.DomHelper.prototype.getRequiredElementByClass = function (t, e) {
    return goog.dom.getRequiredElementByClass(t, e || this.document_);
  }),
  (goog.dom.DomHelper.prototype.$$ =
    goog.dom.DomHelper.prototype.getElementsByTagNameAndClass),
  (goog.dom.DomHelper.prototype.setProperties = goog.dom.setProperties),
  (goog.dom.DomHelper.prototype.getViewportSize = function (t) {
    return goog.dom.getViewportSize(t || this.getWindow());
  }),
  (goog.dom.DomHelper.prototype.getDocumentHeight = function () {
    return goog.dom.getDocumentHeight_(this.getWindow());
  }),
  (goog.dom.DomHelper.prototype.createDom = function (t, e, o) {
    return goog.dom.createDom_(this.document_, arguments);
  }),
  (goog.dom.DomHelper.prototype.$dom = goog.dom.DomHelper.prototype.createDom),
  (goog.dom.DomHelper.prototype.createElement = function (t) {
    return goog.dom.createElement_(this.document_, t);
  }),
  (goog.dom.DomHelper.prototype.createTextNode = function (t) {
    return this.document_.createTextNode(String(t));
  }),
  (goog.dom.DomHelper.prototype.createTable = function (t, e, o) {
    return goog.dom.createTable_(this.document_, t, e, !!o);
  }),
  (goog.dom.DomHelper.prototype.safeHtmlToNode = function (t) {
    return goog.dom.safeHtmlToNode_(this.document_, t);
  }),
  (goog.dom.DomHelper.prototype.isCss1CompatMode = function () {
    return goog.dom.isCss1CompatMode_(this.document_);
  }),
  (goog.dom.DomHelper.prototype.getWindow = function () {
    return goog.dom.getWindow_(this.document_);
  }),
  (goog.dom.DomHelper.prototype.getDocumentScrollElement = function () {
    return goog.dom.getDocumentScrollElement_(this.document_);
  }),
  (goog.dom.DomHelper.prototype.getDocumentScroll = function () {
    return goog.dom.getDocumentScroll_(this.document_);
  }),
  (goog.dom.DomHelper.prototype.getActiveElement = function (t) {
    return goog.dom.getActiveElement(t || this.document_);
  }),
  (goog.dom.DomHelper.prototype.appendChild = goog.dom.appendChild),
  (goog.dom.DomHelper.prototype.append = goog.dom.append),
  (goog.dom.DomHelper.prototype.canHaveChildren = goog.dom.canHaveChildren),
  (goog.dom.DomHelper.prototype.removeChildren = goog.dom.removeChildren),
  (goog.dom.DomHelper.prototype.insertSiblingBefore =
    goog.dom.insertSiblingBefore),
  (goog.dom.DomHelper.prototype.insertSiblingAfter =
    goog.dom.insertSiblingAfter),
  (goog.dom.DomHelper.prototype.insertChildAt = goog.dom.insertChildAt),
  (goog.dom.DomHelper.prototype.removeNode = goog.dom.removeNode),
  (goog.dom.DomHelper.prototype.replaceNode = goog.dom.replaceNode),
  (goog.dom.DomHelper.prototype.flattenElement = goog.dom.flattenElement),
  (goog.dom.DomHelper.prototype.getChildren = goog.dom.getChildren),
  (goog.dom.DomHelper.prototype.getFirstElementChild =
    goog.dom.getFirstElementChild),
  (goog.dom.DomHelper.prototype.getLastElementChild =
    goog.dom.getLastElementChild),
  (goog.dom.DomHelper.prototype.getNextElementSibling =
    goog.dom.getNextElementSibling),
  (goog.dom.DomHelper.prototype.getPreviousElementSibling =
    goog.dom.getPreviousElementSibling),
  (goog.dom.DomHelper.prototype.getNextNode = goog.dom.getNextNode),
  (goog.dom.DomHelper.prototype.getPreviousNode = goog.dom.getPreviousNode),
  (goog.dom.DomHelper.prototype.isNodeLike = goog.dom.isNodeLike),
  (goog.dom.DomHelper.prototype.isElement = goog.dom.isElement),
  (goog.dom.DomHelper.prototype.isWindow = goog.dom.isWindow),
  (goog.dom.DomHelper.prototype.getParentElement = goog.dom.getParentElement),
  (goog.dom.DomHelper.prototype.contains = goog.dom.contains),
  (goog.dom.DomHelper.prototype.compareNodeOrder = goog.dom.compareNodeOrder),
  (goog.dom.DomHelper.prototype.findCommonAncestor =
    goog.dom.findCommonAncestor),
  (goog.dom.DomHelper.prototype.getOwnerDocument = goog.dom.getOwnerDocument),
  (goog.dom.DomHelper.prototype.getFrameContentDocument =
    goog.dom.getFrameContentDocument),
  (goog.dom.DomHelper.prototype.getFrameContentWindow =
    goog.dom.getFrameContentWindow),
  (goog.dom.DomHelper.prototype.setTextContent = goog.dom.setTextContent),
  (goog.dom.DomHelper.prototype.getOuterHtml = goog.dom.getOuterHtml),
  (goog.dom.DomHelper.prototype.findNode = goog.dom.findNode),
  (goog.dom.DomHelper.prototype.findNodes = goog.dom.findNodes),
  (goog.dom.DomHelper.prototype.isFocusableTabIndex =
    goog.dom.isFocusableTabIndex),
  (goog.dom.DomHelper.prototype.setFocusableTabIndex =
    goog.dom.setFocusableTabIndex),
  (goog.dom.DomHelper.prototype.isFocusable = goog.dom.isFocusable),
  (goog.dom.DomHelper.prototype.getTextContent = goog.dom.getTextContent),
  (goog.dom.DomHelper.prototype.getNodeTextLength = goog.dom.getNodeTextLength),
  (goog.dom.DomHelper.prototype.getNodeTextOffset = goog.dom.getNodeTextOffset),
  (goog.dom.DomHelper.prototype.getNodeAtOffset = goog.dom.getNodeAtOffset),
  (goog.dom.DomHelper.prototype.isNodeList = goog.dom.isNodeList),
  (goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass =
    goog.dom.getAncestorByTagNameAndClass),
  (goog.dom.DomHelper.prototype.getAncestorByClass =
    goog.dom.getAncestorByClass),
  (goog.dom.DomHelper.prototype.getAncestor = goog.dom.getAncestor),
  (goog.dom.DomHelper.prototype.getCanvasContext2D =
    goog.dom.getCanvasContext2D),
  (goog.dom.classlist = {}),
  (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST = !1),
  (goog.dom.classlist.getClassName_ = function (t) {
    return "string" == typeof t.className
      ? t.className
      : (t.getAttribute && t.getAttribute("class")) || "";
  }),
  (goog.dom.classlist.get = function (t) {
    return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || t.classList
      ? t.classList
      : goog.dom.classlist.getClassName_(t).match(/\S+/g) || [];
  }),
  (goog.dom.classlist.set = function (t, e) {
    "string" == typeof t.className
      ? (t.className = e)
      : t.setAttribute && t.setAttribute("class", e);
  }),
  (goog.dom.classlist.contains = function (t, e) {
    return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || t.classList
      ? t.classList.contains(e)
      : goog.array.contains(goog.dom.classlist.get(t), e);
  }),
  (goog.dom.classlist.add = function (t, e) {
    if (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || t.classList)
      t.classList.add(e);
    else if (!goog.dom.classlist.contains(t, e)) {
      var o = goog.dom.classlist.getClassName_(t);
      goog.dom.classlist.set(t, o + (0 < o.length ? " " + e : e));
    }
  }),
  (goog.dom.classlist.addAll = function (t, e) {
    if (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || t.classList)
      goog.array.forEach(e, function (e) {
        goog.dom.classlist.add(t, e);
      });
    else {
      var o = {};
      for (var i in (goog.array.forEach(
        goog.dom.classlist.get(t),
        function (t) {
          o[t] = !0;
        }
      ),
      goog.array.forEach(e, function (t) {
        o[t] = !0;
      }),
      (e = ""),
      o))
        e += 0 < e.length ? " " + i : i;
      goog.dom.classlist.set(t, e);
    }
  }),
  (goog.dom.classlist.remove = function (t, e) {
    goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || t.classList
      ? t.classList.remove(e)
      : goog.dom.classlist.contains(t, e) &&
        goog.dom.classlist.set(
          t,
          goog.array
            .filter(goog.dom.classlist.get(t), function (t) {
              return t != e;
            })
            .join(" ")
        );
  }),
  (goog.dom.classlist.removeAll = function (t, e) {
    goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || t.classList
      ? goog.array.forEach(e, function (e) {
          goog.dom.classlist.remove(t, e);
        })
      : goog.dom.classlist.set(
          t,
          goog.array
            .filter(goog.dom.classlist.get(t), function (t) {
              return !goog.array.contains(e, t);
            })
            .join(" ")
        );
  }),
  (goog.dom.classlist.enable = function (t, e, o) {
    o ? goog.dom.classlist.add(t, e) : goog.dom.classlist.remove(t, e);
  }),
  (goog.dom.classlist.enableAll = function (t, e, o) {
    (o ? goog.dom.classlist.addAll : goog.dom.classlist.removeAll)(t, e);
  }),
  (goog.dom.classlist.swap = function (t, e, o) {
    return (
      !!goog.dom.classlist.contains(t, e) &&
      (goog.dom.classlist.remove(t, e), goog.dom.classlist.add(t, o), !0)
    );
  }),
  (goog.dom.classlist.toggle = function (t, e) {
    var o = !goog.dom.classlist.contains(t, e);
    return goog.dom.classlist.enable(t, e, o), o;
  }),
  (goog.dom.classlist.addRemove = function (t, e, o) {
    goog.dom.classlist.remove(t, e), goog.dom.classlist.add(t, o);
  }),
  (goog.a11y = {}),
  (goog.a11y.aria = {}),
  (goog.a11y.aria.Role = {
    ALERT: "alert",
    ALERTDIALOG: "alertdialog",
    APPLICATION: "application",
    ARTICLE: "article",
    BANNER: "banner",
    BUTTON: "button",
    CHECKBOX: "checkbox",
    COLUMNHEADER: "columnheader",
    COMBOBOX: "combobox",
    COMPLEMENTARY: "complementary",
    CONTENTINFO: "contentinfo",
    DEFINITION: "definition",
    DIALOG: "dialog",
    DIRECTORY: "directory",
    DOCUMENT: "document",
    FORM: "form",
    GRID: "grid",
    GRIDCELL: "gridcell",
    GROUP: "group",
    HEADING: "heading",
    IMG: "img",
    LINK: "link",
    LIST: "list",
    LISTBOX: "listbox",
    LISTITEM: "listitem",
    LOG: "log",
    MAIN: "main",
    MARQUEE: "marquee",
    MATH: "math",
    MENU: "menu",
    MENUBAR: "menubar",
    MENU_ITEM: "menuitem",
    MENU_ITEM_CHECKBOX: "menuitemcheckbox",
    MENU_ITEM_RADIO: "menuitemradio",
    NAVIGATION: "navigation",
    NOTE: "note",
    OPTION: "option",
    PRESENTATION: "presentation",
    PROGRESSBAR: "progressbar",
    RADIO: "radio",
    RADIOGROUP: "radiogroup",
    REGION: "region",
    ROW: "row",
    ROWGROUP: "rowgroup",
    ROWHEADER: "rowheader",
    SCROLLBAR: "scrollbar",
    SEARCH: "search",
    SEPARATOR: "separator",
    SLIDER: "slider",
    SPINBUTTON: "spinbutton",
    STATUS: "status",
    TAB: "tab",
    TAB_LIST: "tablist",
    TAB_PANEL: "tabpanel",
    TEXTBOX: "textbox",
    TEXTINFO: "textinfo",
    TIMER: "timer",
    TOOLBAR: "toolbar",
    TOOLTIP: "tooltip",
    TREE: "tree",
    TREEGRID: "treegrid",
    TREEITEM: "treeitem",
  }),
  (goog.a11y.aria.State = {
    ACTIVEDESCENDANT: "activedescendant",
    ATOMIC: "atomic",
    AUTOCOMPLETE: "autocomplete",
    BUSY: "busy",
    CHECKED: "checked",
    COLINDEX: "colindex",
    CONTROLS: "controls",
    DESCRIBEDBY: "describedby",
    DISABLED: "disabled",
    DROPEFFECT: "dropeffect",
    EXPANDED: "expanded",
    FLOWTO: "flowto",
    GRABBED: "grabbed",
    HASPOPUP: "haspopup",
    HIDDEN: "hidden",
    INVALID: "invalid",
    LABEL: "label",
    LABELLEDBY: "labelledby",
    LEVEL: "level",
    LIVE: "live",
    MULTILINE: "multiline",
    MULTISELECTABLE: "multiselectable",
    ORIENTATION: "orientation",
    OWNS: "owns",
    POSINSET: "posinset",
    PRESSED: "pressed",
    READONLY: "readonly",
    RELEVANT: "relevant",
    REQUIRED: "required",
    ROWINDEX: "rowindex",
    SELECTED: "selected",
    SETSIZE: "setsize",
    SORT: "sort",
    VALUEMAX: "valuemax",
    VALUEMIN: "valuemin",
    VALUENOW: "valuenow",
    VALUETEXT: "valuetext",
  }),
  (goog.a11y.aria.AutoCompleteValues = {
    INLINE: "inline",
    LIST: "list",
    BOTH: "both",
    NONE: "none",
  }),
  (goog.a11y.aria.DropEffectValues = {
    COPY: "copy",
    MOVE: "move",
    LINK: "link",
    EXECUTE: "execute",
    POPUP: "popup",
    NONE: "none",
  }),
  (goog.a11y.aria.LivePriority = {
    OFF: "off",
    POLITE: "polite",
    ASSERTIVE: "assertive",
  }),
  (goog.a11y.aria.OrientationValues = {
    VERTICAL: "vertical",
    HORIZONTAL: "horizontal",
  }),
  (goog.a11y.aria.RelevantValues = {
    ADDITIONS: "additions",
    REMOVALS: "removals",
    TEXT: "text",
    ALL: "all",
  }),
  (goog.a11y.aria.SortValues = {
    ASCENDING: "ascending",
    DESCENDING: "descending",
    NONE: "none",
    OTHER: "other",
  }),
  (goog.a11y.aria.CheckedValues = {
    TRUE: "true",
    FALSE: "false",
    MIXED: "mixed",
    UNDEFINED: "undefined",
  }),
  (goog.a11y.aria.ExpandedValues = {
    TRUE: "true",
    FALSE: "false",
    UNDEFINED: "undefined",
  }),
  (goog.a11y.aria.GrabbedValues = {
    TRUE: "true",
    FALSE: "false",
    UNDEFINED: "undefined",
  }),
  (goog.a11y.aria.InvalidValues = {
    FALSE: "false",
    TRUE: "true",
    GRAMMAR: "grammar",
    SPELLING: "spelling",
  }),
  (goog.a11y.aria.PressedValues = {
    TRUE: "true",
    FALSE: "false",
    MIXED: "mixed",
    UNDEFINED: "undefined",
  }),
  (goog.a11y.aria.SelectedValues = {
    TRUE: "true",
    FALSE: "false",
    UNDEFINED: "undefined",
  }),
  (goog.a11y.aria.datatables = {}),
  (goog.a11y.aria.datatables.getDefaultValuesMap = function () {
    return (
      goog.a11y.aria.DefaultStateValueMap_ ||
        (goog.a11y.aria.DefaultStateValueMap_ = goog.object.create(
          goog.a11y.aria.State.ATOMIC,
          !1,
          goog.a11y.aria.State.AUTOCOMPLETE,
          "none",
          goog.a11y.aria.State.DROPEFFECT,
          "none",
          goog.a11y.aria.State.HASPOPUP,
          !1,
          goog.a11y.aria.State.LIVE,
          "off",
          goog.a11y.aria.State.MULTILINE,
          !1,
          goog.a11y.aria.State.MULTISELECTABLE,
          !1,
          goog.a11y.aria.State.ORIENTATION,
          "vertical",
          goog.a11y.aria.State.READONLY,
          !1,
          goog.a11y.aria.State.RELEVANT,
          "additions text",
          goog.a11y.aria.State.REQUIRED,
          !1,
          goog.a11y.aria.State.SORT,
          "none",
          goog.a11y.aria.State.BUSY,
          !1,
          goog.a11y.aria.State.DISABLED,
          !1,
          goog.a11y.aria.State.HIDDEN,
          !1,
          goog.a11y.aria.State.INVALID,
          "false"
        )),
      goog.a11y.aria.DefaultStateValueMap_
    );
  }),
  (goog.a11y.aria.ARIA_PREFIX_ = "aria-"),
  (goog.a11y.aria.ROLE_ATTRIBUTE_ = "role"),
  (goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_ = goog.object.createSet(
    "A AREA BUTTON HEAD INPUT LINK MENU META OPTGROUP OPTION PROGRESS STYLE SELECT SOURCE TEXTAREA TITLE TRACK".split(
      " "
    )
  )),
  (goog.a11y.aria.CONTAINER_ROLES_ = [
    goog.a11y.aria.Role.COMBOBOX,
    goog.a11y.aria.Role.GRID,
    goog.a11y.aria.Role.GROUP,
    goog.a11y.aria.Role.LISTBOX,
    goog.a11y.aria.Role.MENU,
    goog.a11y.aria.Role.MENUBAR,
    goog.a11y.aria.Role.RADIOGROUP,
    goog.a11y.aria.Role.ROW,
    goog.a11y.aria.Role.ROWGROUP,
    goog.a11y.aria.Role.TAB_LIST,
    goog.a11y.aria.Role.TEXTBOX,
    goog.a11y.aria.Role.TOOLBAR,
    goog.a11y.aria.Role.TREE,
    goog.a11y.aria.Role.TREEGRID,
  ]),
  (goog.a11y.aria.setRole = function (t, e) {
    e
      ? (goog.asserts.ENABLE_ASSERTS &&
          goog.asserts.assert(
            goog.object.containsValue(goog.a11y.aria.Role, e),
            "No such ARIA role " + e
          ),
        t.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_, e))
      : goog.a11y.aria.removeRole(t);
  }),
  (goog.a11y.aria.getRole = function (t) {
    return t.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_) || null;
  }),
  (goog.a11y.aria.removeRole = function (t) {
    t.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_);
  }),
  (goog.a11y.aria.setState = function (t, e, o) {
    goog.isArray(o) && (o = o.join(" "));
    var i = goog.a11y.aria.getAriaAttributeName_(e);
    "" === o || null == o
      ? e in (o = goog.a11y.aria.datatables.getDefaultValuesMap())
        ? t.setAttribute(i, o[e])
        : t.removeAttribute(i)
      : t.setAttribute(i, o);
  }),
  (goog.a11y.aria.toggleState = function (t, e) {
    var o = goog.a11y.aria.getState(t, e);
    goog.string.isEmptyOrWhitespace(goog.string.makeSafe(o)) ||
    "true" == o ||
    "false" == o
      ? goog.a11y.aria.setState(t, e, "true" == o ? "false" : "true")
      : goog.a11y.aria.removeState(t, e);
  }),
  (goog.a11y.aria.removeState = function (t, e) {
    t.removeAttribute(goog.a11y.aria.getAriaAttributeName_(e));
  }),
  (goog.a11y.aria.getState = function (t, e) {
    return null ==
      (t = t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e))) || null == t
      ? ""
      : String(t);
  }),
  (goog.a11y.aria.getActiveDescendant = function (t) {
    var e = goog.a11y.aria.getState(t, goog.a11y.aria.State.ACTIVEDESCENDANT);
    return goog.dom.getOwnerDocument(t).getElementById(e);
  }),
  (goog.a11y.aria.setActiveDescendant = function (t, e) {
    var o = "";
    e &&
      ((o = e.id),
      goog.asserts.assert(o, "The active element should have an id.")),
      goog.a11y.aria.setState(t, goog.a11y.aria.State.ACTIVEDESCENDANT, o);
  }),
  (goog.a11y.aria.getLabel = function (t) {
    return goog.a11y.aria.getState(t, goog.a11y.aria.State.LABEL);
  }),
  (goog.a11y.aria.setLabel = function (t, e) {
    goog.a11y.aria.setState(t, goog.a11y.aria.State.LABEL, e);
  }),
  (goog.a11y.aria.assertRoleIsSetInternalUtil = function (t, e) {
    goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_[t.tagName] ||
      ((t = goog.a11y.aria.getRole(t)),
      goog.asserts.assert(null != t, "The element ARIA role cannot be null."),
      goog.asserts.assert(
        goog.array.contains(e, t),
        'Non existing or incorrect role set for element.The role set is "' +
          t +
          '". The role should be any of "' +
          e +
          '". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.'
      ));
  }),
  (goog.a11y.aria.getStateBoolean = function (t, e) {
    return (
      (t = t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e))),
      goog.asserts.assert(
        "boolean" == typeof t || null == t || "true" == t || "false" == t
      ),
      null == t || "boolean" == typeof t ? t : "true" == t
    );
  }),
  (goog.a11y.aria.getStateNumber = function (t, e) {
    return (
      (t = t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e))),
      goog.asserts.assert(
        (null == t || !isNaN(Number(t))) && "boolean" != typeof t
      ),
      null == t ? null : Number(t)
    );
  }),
  (goog.a11y.aria.getStateString = function (t, e) {
    return (
      (t = t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e))),
      goog.asserts.assert(
        (null == t || "string" == typeof t) &&
          ("" == t || isNaN(Number(t))) &&
          "true" != t &&
          "false" != t
      ),
      null == t || "" == t ? null : t
    );
  }),
  (goog.a11y.aria.getStringArrayStateInternalUtil = function (t, e) {
    return (
      (t = t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e))),
      goog.a11y.aria.splitStringOnWhitespace_(t)
    );
  }),
  (goog.a11y.aria.hasState = function (t, e) {
    return t.hasAttribute(goog.a11y.aria.getAriaAttributeName_(e));
  }),
  (goog.a11y.aria.isContainerRole = function (t) {
    return (
      (t = goog.a11y.aria.getRole(t)),
      goog.array.contains(goog.a11y.aria.CONTAINER_ROLES_, t)
    );
  }),
  (goog.a11y.aria.splitStringOnWhitespace_ = function (t) {
    return t ? t.split(/\s+/) : [];
  }),
  (goog.a11y.aria.getAriaAttributeName_ = function (t) {
    return (
      goog.asserts.ENABLE_ASSERTS &&
        (goog.asserts.assert(t, "ARIA attribute cannot be empty."),
        goog.asserts.assert(
          goog.object.containsValue(goog.a11y.aria.State, t),
          "No such ARIA attribute " + t
        )),
      goog.a11y.aria.ARIA_PREFIX_ + t
    );
  }),
  (goog.dom.vendor = {}),
  (goog.dom.vendor.getVendorJsPrefix = function () {
    return goog.userAgent.WEBKIT
      ? "Webkit"
      : goog.userAgent.GECKO
      ? "Moz"
      : goog.userAgent.IE
      ? "ms"
      : goog.userAgent.OPERA
      ? "O"
      : null;
  }),
  (goog.dom.vendor.getVendorPrefix = function () {
    return goog.userAgent.WEBKIT
      ? "-webkit"
      : goog.userAgent.GECKO
      ? "-moz"
      : goog.userAgent.IE
      ? "-ms"
      : goog.userAgent.OPERA
      ? "-o"
      : null;
  }),
  (goog.dom.vendor.getPrefixedPropertyName = function (t, e) {
    if (e && t in e) return t;
    var o = goog.dom.vendor.getVendorJsPrefix();
    return o
      ? ((t = (o = o.toLowerCase()) + goog.string.toTitleCase(t)),
        void 0 === e || t in e ? t : null)
      : null;
  }),
  (goog.dom.vendor.getPrefixedEventType = function (t) {
    return ((goog.dom.vendor.getVendorJsPrefix() || "") + t).toLowerCase();
  }),
  (goog.math.Box = function (t, e, o, i) {
    (this.top = t), (this.right = e), (this.bottom = o), (this.left = i);
  }),
  (goog.math.Box.boundingBox = function (t) {
    for (
      var e = new goog.math.Box(
          arguments[0].y,
          arguments[0].x,
          arguments[0].y,
          arguments[0].x
        ),
        o = 1;
      o < arguments.length;
      o++
    )
      e.expandToIncludeCoordinate(arguments[o]);
    return e;
  }),
  (goog.math.Box.prototype.getWidth = function () {
    return this.right - this.left;
  }),
  (goog.math.Box.prototype.getHeight = function () {
    return this.bottom - this.top;
  }),
  (goog.math.Box.prototype.clone = function () {
    return new goog.math.Box(this.top, this.right, this.bottom, this.left);
  }),
  goog.DEBUG &&
    (goog.math.Box.prototype.toString = function () {
      return (
        "(" +
        this.top +
        "t, " +
        this.right +
        "r, " +
        this.bottom +
        "b, " +
        this.left +
        "l)"
      );
    }),
  (goog.math.Box.prototype.contains = function (t) {
    return goog.math.Box.contains(this, t);
  }),
  (goog.math.Box.prototype.expand = function (t, e, o, i) {
    return (
      goog.isObject(t)
        ? ((this.top -= t.top),
          (this.right += t.right),
          (this.bottom += t.bottom),
          (this.left -= t.left))
        : ((this.top -= t),
          (this.right += Number(e)),
          (this.bottom += Number(o)),
          (this.left -= Number(i))),
      this
    );
  }),
  (goog.math.Box.prototype.expandToInclude = function (t) {
    (this.left = Math.min(this.left, t.left)),
      (this.top = Math.min(this.top, t.top)),
      (this.right = Math.max(this.right, t.right)),
      (this.bottom = Math.max(this.bottom, t.bottom));
  }),
  (goog.math.Box.prototype.expandToIncludeCoordinate = function (t) {
    (this.top = Math.min(this.top, t.y)),
      (this.right = Math.max(this.right, t.x)),
      (this.bottom = Math.max(this.bottom, t.y)),
      (this.left = Math.min(this.left, t.x));
  }),
  (goog.math.Box.equals = function (t, e) {
    return (
      t == e ||
      (!(!t || !e) &&
        t.top == e.top &&
        t.right == e.right &&
        t.bottom == e.bottom &&
        t.left == e.left)
    );
  }),
  (goog.math.Box.contains = function (t, e) {
    return (
      !(!t || !e) &&
      (e instanceof goog.math.Box
        ? e.left >= t.left &&
          e.right <= t.right &&
          e.top >= t.top &&
          e.bottom <= t.bottom
        : e.x >= t.left && e.x <= t.right && e.y >= t.top && e.y <= t.bottom)
    );
  }),
  (goog.math.Box.relativePositionX = function (t, e) {
    return e.x < t.left ? e.x - t.left : e.x > t.right ? e.x - t.right : 0;
  }),
  (goog.math.Box.relativePositionY = function (t, e) {
    return e.y < t.top ? e.y - t.top : e.y > t.bottom ? e.y - t.bottom : 0;
  }),
  (goog.math.Box.distance = function (t, e) {
    var o = goog.math.Box.relativePositionX(t, e);
    return (
      (t = goog.math.Box.relativePositionY(t, e)), Math.sqrt(o * o + t * t)
    );
  }),
  (goog.math.Box.intersects = function (t, e) {
    return (
      t.left <= e.right &&
      e.left <= t.right &&
      t.top <= e.bottom &&
      e.top <= t.bottom
    );
  }),
  (goog.math.Box.intersectsWithPadding = function (t, e, o) {
    return (
      t.left <= e.right + o &&
      e.left <= t.right + o &&
      t.top <= e.bottom + o &&
      e.top <= t.bottom + o
    );
  }),
  (goog.math.Box.prototype.ceil = function () {
    return (
      (this.top = Math.ceil(this.top)),
      (this.right = Math.ceil(this.right)),
      (this.bottom = Math.ceil(this.bottom)),
      (this.left = Math.ceil(this.left)),
      this
    );
  }),
  (goog.math.Box.prototype.floor = function () {
    return (
      (this.top = Math.floor(this.top)),
      (this.right = Math.floor(this.right)),
      (this.bottom = Math.floor(this.bottom)),
      (this.left = Math.floor(this.left)),
      this
    );
  }),
  (goog.math.Box.prototype.round = function () {
    return (
      (this.top = Math.round(this.top)),
      (this.right = Math.round(this.right)),
      (this.bottom = Math.round(this.bottom)),
      (this.left = Math.round(this.left)),
      this
    );
  }),
  (goog.math.Box.prototype.translate = function (t, e) {
    return (
      t instanceof goog.math.Coordinate
        ? ((this.left += t.x),
          (this.right += t.x),
          (this.top += t.y),
          (this.bottom += t.y))
        : (goog.asserts.assertNumber(t),
          (this.left += t),
          (this.right += t),
          "number" == typeof e && ((this.top += e), (this.bottom += e))),
      this
    );
  }),
  (goog.math.Box.prototype.scale = function (t, e) {
    return (
      (e = "number" == typeof e ? e : t),
      (this.left *= t),
      (this.right *= t),
      (this.top *= e),
      (this.bottom *= e),
      this
    );
  }),
  (goog.math.IRect = function () {}),
  (goog.math.Rect = function (t, e, o, i) {
    (this.left = t), (this.top = e), (this.width = o), (this.height = i);
  }),
  (goog.math.Rect.prototype.clone = function () {
    return new goog.math.Rect(this.left, this.top, this.width, this.height);
  }),
  (goog.math.Rect.prototype.toBox = function () {
    return new goog.math.Box(
      this.top,
      this.left + this.width,
      this.top + this.height,
      this.left
    );
  }),
  (goog.math.Rect.createFromPositionAndSize = function (t, e) {
    return new goog.math.Rect(t.x, t.y, e.width, e.height);
  }),
  (goog.math.Rect.createFromBox = function (t) {
    return new goog.math.Rect(
      t.left,
      t.top,
      t.right - t.left,
      t.bottom - t.top
    );
  }),
  goog.DEBUG &&
    (goog.math.Rect.prototype.toString = function () {
      return (
        "(" +
        this.left +
        ", " +
        this.top +
        " - " +
        this.width +
        "w x " +
        this.height +
        "h)"
      );
    }),
  (goog.math.Rect.equals = function (t, e) {
    return (
      t == e ||
      (!(!t || !e) &&
        t.left == e.left &&
        t.width == e.width &&
        t.top == e.top &&
        t.height == e.height)
    );
  }),
  (goog.math.Rect.prototype.intersection = function (t) {
    var e = Math.max(this.left, t.left),
      o = Math.min(this.left + this.width, t.left + t.width);
    if (e <= o) {
      var i = Math.max(this.top, t.top);
      if (i <= (t = Math.min(this.top + this.height, t.top + t.height)))
        return (
          (this.left = e),
          (this.top = i),
          (this.width = o - e),
          (this.height = t - i),
          !0
        );
    }
    return !1;
  }),
  (goog.math.Rect.intersection = function (t, e) {
    var o = Math.max(t.left, e.left),
      i = Math.min(t.left + t.width, e.left + e.width);
    if (o <= i) {
      var n = Math.max(t.top, e.top);
      if (n <= (t = Math.min(t.top + t.height, e.top + e.height)))
        return new goog.math.Rect(o, n, i - o, t - n);
    }
    return null;
  }),
  (goog.math.Rect.intersects = function (t, e) {
    return (
      t.left <= e.left + e.width &&
      e.left <= t.left + t.width &&
      t.top <= e.top + e.height &&
      e.top <= t.top + t.height
    );
  }),
  (goog.math.Rect.prototype.intersects = function (t) {
    return goog.math.Rect.intersects(this, t);
  }),
  (goog.math.Rect.difference = function (t, e) {
    var o = goog.math.Rect.intersection(t, e);
    if (!o || !o.height || !o.width) return [t.clone()];
    o = [];
    var i = t.top,
      n = t.height,
      l = t.left + t.width,
      r = t.top + t.height,
      s = e.left + e.width,
      a = e.top + e.height;
    return (
      e.top > t.top &&
        (o.push(new goog.math.Rect(t.left, t.top, t.width, e.top - t.top)),
        (i = e.top),
        (n -= e.top - t.top)),
      a < r &&
        (o.push(new goog.math.Rect(t.left, a, t.width, r - a)), (n = a - i)),
      e.left > t.left &&
        o.push(new goog.math.Rect(t.left, i, e.left - t.left, n)),
      s < l && o.push(new goog.math.Rect(s, i, l - s, n)),
      o
    );
  }),
  (goog.math.Rect.prototype.difference = function (t) {
    return goog.math.Rect.difference(this, t);
  }),
  (goog.math.Rect.prototype.boundingRect = function (t) {
    var e = Math.max(this.left + this.width, t.left + t.width),
      o = Math.max(this.top + this.height, t.top + t.height);
    (this.left = Math.min(this.left, t.left)),
      (this.top = Math.min(this.top, t.top)),
      (this.width = e - this.left),
      (this.height = o - this.top);
  }),
  (goog.math.Rect.boundingRect = function (t, e) {
    return t && e
      ? ((t = new goog.math.Rect(
          t.left,
          t.top,
          t.width,
          t.height
        )).boundingRect(e),
        t)
      : null;
  }),
  (goog.math.Rect.prototype.contains = function (t) {
    return t instanceof goog.math.Coordinate
      ? t.x >= this.left &&
          t.x <= this.left + this.width &&
          t.y >= this.top &&
          t.y <= this.top + this.height
      : this.left <= t.left &&
          this.left + this.width >= t.left + t.width &&
          this.top <= t.top &&
          this.top + this.height >= t.top + t.height;
  }),
  (goog.math.Rect.prototype.squaredDistance = function (t) {
    var e =
      t.x < this.left
        ? this.left - t.x
        : Math.max(t.x - (this.left + this.width), 0);
    return (
      e * e +
      (t =
        t.y < this.top
          ? this.top - t.y
          : Math.max(t.y - (this.top + this.height), 0)) *
        t
    );
  }),
  (goog.math.Rect.prototype.distance = function (t) {
    return Math.sqrt(this.squaredDistance(t));
  }),
  (goog.math.Rect.prototype.getSize = function () {
    return new goog.math.Size(this.width, this.height);
  }),
  (goog.math.Rect.prototype.getTopLeft = function () {
    return new goog.math.Coordinate(this.left, this.top);
  }),
  (goog.math.Rect.prototype.getCenter = function () {
    return new goog.math.Coordinate(
      this.left + this.width / 2,
      this.top + this.height / 2
    );
  }),
  (goog.math.Rect.prototype.getBottomRight = function () {
    return new goog.math.Coordinate(
      this.left + this.width,
      this.top + this.height
    );
  }),
  (goog.math.Rect.prototype.ceil = function () {
    return (
      (this.left = Math.ceil(this.left)),
      (this.top = Math.ceil(this.top)),
      (this.width = Math.ceil(this.width)),
      (this.height = Math.ceil(this.height)),
      this
    );
  }),
  (goog.math.Rect.prototype.floor = function () {
    return (
      (this.left = Math.floor(this.left)),
      (this.top = Math.floor(this.top)),
      (this.width = Math.floor(this.width)),
      (this.height = Math.floor(this.height)),
      this
    );
  }),
  (goog.math.Rect.prototype.round = function () {
    return (
      (this.left = Math.round(this.left)),
      (this.top = Math.round(this.top)),
      (this.width = Math.round(this.width)),
      (this.height = Math.round(this.height)),
      this
    );
  }),
  (goog.math.Rect.prototype.translate = function (t, e) {
    return (
      t instanceof goog.math.Coordinate
        ? ((this.left += t.x), (this.top += t.y))
        : ((this.left += goog.asserts.assertNumber(t)),
          "number" == typeof e && (this.top += e)),
      this
    );
  }),
  (goog.math.Rect.prototype.scale = function (t, e) {
    return (
      (e = "number" == typeof e ? e : t),
      (this.left *= t),
      (this.width *= t),
      (this.top *= e),
      (this.height *= e),
      this
    );
  }),
  (goog.style = {}),
  (goog.style.setStyle = function (t, e, o) {
    if ("string" == typeof e) goog.style.setStyle_(t, o, e);
    else for (var i in e) goog.style.setStyle_(t, e[i], i);
  }),
  (goog.style.setStyle_ = function (t, e, o) {
    (o = goog.style.getVendorJsStyleName_(t, o)) && (t.style[o] = e);
  }),
  (goog.style.styleNameCache_ = {}),
  (goog.style.getVendorJsStyleName_ = function (t, e) {
    var o = goog.style.styleNameCache_[e];
    if (!o) {
      var i = goog.string.toCamelCase(e);
      (o = i),
        void 0 === t.style[i] &&
          ((i =
            goog.dom.vendor.getVendorJsPrefix() + goog.string.toTitleCase(i)),
          void 0 !== t.style[i] && (o = i)),
        (goog.style.styleNameCache_[e] = o);
    }
    return o;
  }),
  (goog.style.getVendorStyleName_ = function (t, e) {
    var o = goog.string.toCamelCase(e);
    return void 0 === t.style[o] &&
      ((o = goog.dom.vendor.getVendorJsPrefix() + goog.string.toTitleCase(o)),
      void 0 !== t.style[o])
      ? goog.dom.vendor.getVendorPrefix() + "-" + e
      : e;
  }),
  (goog.style.getStyle = function (t, e) {
    var o = t.style[goog.string.toCamelCase(e)];
    return void 0 !== o
      ? o
      : t.style[goog.style.getVendorJsStyleName_(t, e)] || "";
  }),
  (goog.style.getComputedStyle = function (t, e) {
    var o = goog.dom.getOwnerDocument(t);
    return (
      (o.defaultView &&
        o.defaultView.getComputedStyle &&
        (t = o.defaultView.getComputedStyle(t, null)) &&
        (t[e] || t.getPropertyValue(e))) ||
      ""
    );
  }),
  (goog.style.getCascadedStyle = function (t, e) {
    return t.currentStyle ? t.currentStyle[e] : null;
  }),
  (goog.style.getStyle_ = function (t, e) {
    return (
      goog.style.getComputedStyle(t, e) ||
      goog.style.getCascadedStyle(t, e) ||
      (t.style && t.style[e])
    );
  }),
  (goog.style.getComputedBoxSizing = function (t) {
    return (
      goog.style.getStyle_(t, "boxSizing") ||
      goog.style.getStyle_(t, "MozBoxSizing") ||
      goog.style.getStyle_(t, "WebkitBoxSizing") ||
      null
    );
  }),
  (goog.style.getComputedPosition = function (t) {
    return goog.style.getStyle_(t, "position");
  }),
  (goog.style.getBackgroundColor = function (t) {
    return goog.style.getStyle_(t, "backgroundColor");
  }),
  (goog.style.getComputedOverflowX = function (t) {
    return goog.style.getStyle_(t, "overflowX");
  }),
  (goog.style.getComputedOverflowY = function (t) {
    return goog.style.getStyle_(t, "overflowY");
  }),
  (goog.style.getComputedZIndex = function (t) {
    return goog.style.getStyle_(t, "zIndex");
  }),
  (goog.style.getComputedTextAlign = function (t) {
    return goog.style.getStyle_(t, "textAlign");
  }),
  (goog.style.getComputedCursor = function (t) {
    return goog.style.getStyle_(t, "cursor");
  }),
  (goog.style.getComputedTransform = function (t) {
    var e = goog.style.getVendorStyleName_(t, "transform");
    return goog.style.getStyle_(t, e) || goog.style.getStyle_(t, "transform");
  }),
  (goog.style.setPosition = function (t, e, o) {
    if (e instanceof goog.math.Coordinate) {
      var i = e.x;
      e = e.y;
    } else (i = e), (e = o);
    (t.style.left = goog.style.getPixelStyleValue_(i, !1)),
      (t.style.top = goog.style.getPixelStyleValue_(e, !1));
  }),
  (goog.style.getPosition = function (t) {
    return new goog.math.Coordinate(t.offsetLeft, t.offsetTop);
  }),
  (goog.style.getClientViewportElement = function (t) {
    return (
      (t = t ? goog.dom.getOwnerDocument(t) : goog.dom.getDocument()),
      !goog.userAgent.IE ||
      goog.userAgent.isDocumentModeOrHigher(9) ||
      goog.dom.getDomHelper(t).isCss1CompatMode()
        ? t.documentElement
        : t.body
    );
  }),
  (goog.style.getViewportPageOffset = function (t) {
    var e = t.body;
    return (
      (t = t.documentElement),
      new goog.math.Coordinate(
        e.scrollLeft || t.scrollLeft,
        e.scrollTop || t.scrollTop
      )
    );
  }),
  (goog.style.getBoundingClientRect_ = function (t) {
    try {
      var e = t.getBoundingClientRect();
    } catch (t) {
      return { left: 0, top: 0, right: 0, bottom: 0 };
    }
    return (
      goog.userAgent.IE &&
        t.ownerDocument.body &&
        ((t = t.ownerDocument),
        (e.left -= t.documentElement.clientLeft + t.body.clientLeft),
        (e.top -= t.documentElement.clientTop + t.body.clientTop)),
      e
    );
  }),
  (goog.style.getOffsetParent = function (t) {
    if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(8))
      return goog.asserts.assert(t && "offsetParent" in t), t.offsetParent;
    var e = goog.dom.getOwnerDocument(t),
      o = goog.style.getStyle_(t, "position"),
      i = "fixed" == o || "absolute" == o;
    for (t = t.parentNode; t && t != e; t = t.parentNode)
      if (
        (t.nodeType == goog.dom.NodeType.DOCUMENT_FRAGMENT &&
          t.host &&
          (t = t.host),
        (o = goog.style.getStyle_(t, "position")),
        !(i = i && "static" == o && t != e.documentElement && t != e.body) &&
          (t.scrollWidth > t.clientWidth ||
            t.scrollHeight > t.clientHeight ||
            "fixed" == o ||
            "absolute" == o ||
            "relative" == o))
      )
        return t;
    return null;
  }),
  (goog.style.getVisibleRectForElement = function (t) {
    for (
      var e = new goog.math.Box(0, 1 / 0, 1 / 0, 0),
        o = goog.dom.getDomHelper(t),
        i = o.getDocument().body,
        n = o.getDocument().documentElement,
        l = o.getDocumentScrollElement();
      (t = goog.style.getOffsetParent(t));

    )
      if (
        !(
          (goog.userAgent.IE && 0 == t.clientWidth) ||
          (goog.userAgent.WEBKIT && 0 == t.clientHeight && t == i)
        ) &&
        t != i &&
        t != n &&
        "visible" != goog.style.getStyle_(t, "overflow")
      ) {
        var r = goog.style.getPageOffset(t),
          s = goog.style.getClientLeftTop(t);
        (r.x += s.x),
          (r.y += s.y),
          (e.top = Math.max(e.top, r.y)),
          (e.right = Math.min(e.right, r.x + t.clientWidth)),
          (e.bottom = Math.min(e.bottom, r.y + t.clientHeight)),
          (e.left = Math.max(e.left, r.x));
      }
    return (
      (i = l.scrollLeft),
      (l = l.scrollTop),
      (e.left = Math.max(e.left, i)),
      (e.top = Math.max(e.top, l)),
      (o = o.getViewportSize()),
      (e.right = Math.min(e.right, i + o.width)),
      (e.bottom = Math.min(e.bottom, l + o.height)),
      0 <= e.top && 0 <= e.left && e.bottom > e.top && e.right > e.left
        ? e
        : null
    );
  }),
  (goog.style.getContainerOffsetToScrollInto = function (t, e, o) {
    var i = e || goog.dom.getDocumentScrollElement(),
      n = goog.style.getPageOffset(t),
      l = goog.style.getPageOffset(i),
      r = goog.style.getBorderBox(i);
    return (
      i == goog.dom.getDocumentScrollElement()
        ? ((e = n.x - i.scrollLeft),
          (n = n.y - i.scrollTop),
          goog.userAgent.IE &&
            !goog.userAgent.isDocumentModeOrHigher(10) &&
            ((e += r.left), (n += r.top)))
        : ((e = n.x - l.x - r.left), (n = n.y - l.y - r.top)),
      (r = goog.style.getSizeWithDisplay_(t)),
      (t = i.clientWidth - r.width),
      (r = i.clientHeight - r.height),
      (l = i.scrollLeft),
      (i = i.scrollTop),
      o
        ? ((l += e - t / 2), (i += n - r / 2))
        : ((l += Math.min(e, Math.max(e - t, 0))),
          (i += Math.min(n, Math.max(n - r, 0)))),
      new goog.math.Coordinate(l, i)
    );
  }),
  (goog.style.scrollIntoContainerView = function (t, e, o) {
    (e = e || goog.dom.getDocumentScrollElement()),
      (t = goog.style.getContainerOffsetToScrollInto(t, e, o)),
      (e.scrollLeft = t.x),
      (e.scrollTop = t.y);
  }),
  (goog.style.getClientLeftTop = function (t) {
    return new goog.math.Coordinate(t.clientLeft, t.clientTop);
  }),
  (goog.style.getPageOffset = function (t) {
    var e = goog.dom.getOwnerDocument(t);
    goog.asserts.assertObject(t, "Parameter is required");
    var o = new goog.math.Coordinate(0, 0);
    return (
      t == goog.style.getClientViewportElement(e) ||
        ((t = goog.style.getBoundingClientRect_(t)),
        (e = goog.dom.getDomHelper(e).getDocumentScroll()),
        (o.x = t.left + e.x),
        (o.y = t.top + e.y)),
      o
    );
  }),
  (goog.style.getPageOffsetLeft = function (t) {
    return goog.style.getPageOffset(t).x;
  }),
  (goog.style.getPageOffsetTop = function (t) {
    return goog.style.getPageOffset(t).y;
  }),
  (goog.style.getFramedPageOffset = function (t, e) {
    var o = new goog.math.Coordinate(0, 0),
      i = goog.dom.getWindow(goog.dom.getOwnerDocument(t));
    if (!goog.reflect.canAccessProperty(i, "parent")) return o;
    do {
      var n =
        i == e
          ? goog.style.getPageOffset(t)
          : goog.style.getClientPositionForElement_(goog.asserts.assert(t));
      (o.x += n.x), (o.y += n.y);
    } while (
      i &&
      i != e &&
      i != i.parent &&
      (t = i.frameElement) &&
      (i = i.parent)
    );
    return o;
  }),
  (goog.style.translateRectForAnotherFrame = function (t, e, o) {
    if (e.getDocument() != o.getDocument()) {
      var i = e.getDocument().body;
      (o = goog.style.getFramedPageOffset(i, o.getWindow())),
        (o = goog.math.Coordinate.difference(o, goog.style.getPageOffset(i))),
        !goog.userAgent.IE ||
          goog.userAgent.isDocumentModeOrHigher(9) ||
          e.isCss1CompatMode() ||
          (o = goog.math.Coordinate.difference(o, e.getDocumentScroll())),
        (t.left += o.x),
        (t.top += o.y);
    }
  }),
  (goog.style.getRelativePosition = function (t, e) {
    return (
      (t = goog.style.getClientPosition(t)),
      (e = goog.style.getClientPosition(e)),
      new goog.math.Coordinate(t.x - e.x, t.y - e.y)
    );
  }),
  (goog.style.getClientPositionForElement_ = function (t) {
    return (
      (t = goog.style.getBoundingClientRect_(t)),
      new goog.math.Coordinate(t.left, t.top)
    );
  }),
  (goog.style.getClientPosition = function (t) {
    return (
      goog.asserts.assert(t),
      t.nodeType == goog.dom.NodeType.ELEMENT
        ? goog.style.getClientPositionForElement_(t)
        : ((t = t.changedTouches ? t.changedTouches[0] : t),
          new goog.math.Coordinate(t.clientX, t.clientY))
    );
  }),
  (goog.style.setPageOffset = function (t, e, o) {
    var i = goog.style.getPageOffset(t);
    e instanceof goog.math.Coordinate && ((o = e.y), (e = e.x)),
      (e = goog.asserts.assertNumber(e) - i.x),
      goog.style.setPosition(
        t,
        t.offsetLeft + e,
        t.offsetTop + (Number(o) - i.y)
      );
  }),
  (goog.style.setSize = function (t, e, o) {
    if (e instanceof goog.math.Size) (o = e.height), (e = e.width);
    else if (null == o) throw Error("missing height argument");
    goog.style.setWidth(t, e), goog.style.setHeight(t, o);
  }),
  (goog.style.getPixelStyleValue_ = function (t, e) {
    return "number" == typeof t && (t = (e ? Math.round(t) : t) + "px"), t;
  }),
  (goog.style.setHeight = function (t, e) {
    t.style.height = goog.style.getPixelStyleValue_(e, !0);
  }),
  (goog.style.setWidth = function (t, e) {
    t.style.width = goog.style.getPixelStyleValue_(e, !0);
  }),
  (goog.style.getSize = function (t) {
    return goog.style.evaluateWithTemporaryDisplay_(
      goog.style.getSizeWithDisplay_,
      t
    );
  });
(goog.style.evaluateWithTemporaryDisplay_ = function (t, e) {
  if ("none" != goog.style.getStyle_(e, "display")) return t(e);
  var o = e.style,
    i = o.display,
    n = o.visibility,
    l = o.position;
  return (
    (o.visibility = "hidden"),
    (o.position = "absolute"),
    (o.display = "inline"),
    (t = t(e)),
    (o.display = i),
    (o.position = l),
    (o.visibility = n),
    t
  );
}),
  (goog.style.getSizeWithDisplay_ = function (t) {
    var e = t.offsetWidth,
      o = t.offsetHeight,
      i = goog.userAgent.WEBKIT && !e && !o;
    return (void 0 === e || i) && t.getBoundingClientRect
      ? ((t = goog.style.getBoundingClientRect_(t)),
        new goog.math.Size(t.right - t.left, t.bottom - t.top))
      : new goog.math.Size(e, o);
  }),
  (goog.style.getTransformedSize = function (t) {
    return t.getBoundingClientRect
      ? ((t = goog.style.evaluateWithTemporaryDisplay_(
          goog.style.getBoundingClientRect_,
          t
        )),
        new goog.math.Size(t.right - t.left, t.bottom - t.top))
      : null;
  }),
  (goog.style.getBounds = function (t) {
    var e = goog.style.getPageOffset(t);
    return (
      (t = goog.style.getSize(t)),
      new goog.math.Rect(e.x, e.y, t.width, t.height)
    );
  }),
  (goog.style.toCamelCase = function (t) {
    return goog.string.toCamelCase(String(t));
  }),
  (goog.style.toSelectorCase = function (t) {
    return goog.string.toSelectorCase(t);
  }),
  (goog.style.getOpacity = function (t) {
    goog.asserts.assert(t);
    var e = t.style;
    return (
      (t = ""),
      "opacity" in e
        ? (t = e.opacity)
        : "MozOpacity" in e
        ? (t = e.MozOpacity)
        : "filter" in e &&
          (e = e.filter.match(/alpha\(opacity=([\d.]+)\)/)) &&
          (t = String(e[1] / 100)),
      "" == t ? t : Number(t)
    );
  }),
  (goog.style.setOpacity = function (t, e) {
    goog.asserts.assert(t),
      "opacity" in (t = t.style)
        ? (t.opacity = e)
        : "MozOpacity" in t
        ? (t.MozOpacity = e)
        : "filter" in t &&
          (t.filter = "" === e ? "" : "alpha(opacity=" + 100 * Number(e) + ")");
  }),
  (goog.style.setTransparentBackgroundImage = function (t, e) {
    (t = t.style),
      goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("8")
        ? (t.filter =
            'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="' +
            e +
            '", sizingMethod="crop")')
        : ((t.backgroundImage = "url(" + e + ")"),
          (t.backgroundPosition = "top left"),
          (t.backgroundRepeat = "no-repeat"));
  }),
  (goog.style.clearTransparentBackgroundImage = function (t) {
    "filter" in (t = t.style) ? (t.filter = "") : (t.backgroundImage = "none");
  }),
  (goog.style.showElement = function (t, e) {
    goog.style.setElementShown(t, e);
  }),
  (goog.style.setElementShown = function (t, e) {
    t.style.display = e ? "" : "none";
  }),
  (goog.style.isElementShown = function (t) {
    return "none" != t.style.display;
  }),
  (goog.style.installSafeStyleSheet = function (t, e) {
    var o = (e = goog.dom.getDomHelper(e)).getDocument();
    if (goog.userAgent.IE && o.createStyleSheet)
      return (e = o.createStyleSheet()), goog.style.setSafeStyleSheet(e, t), e;
    if (!(o = e.getElementsByTagNameAndClass("HEAD")[0])) {
      var i = e.getElementsByTagNameAndClass("BODY")[0];
      (o = e.createDom("HEAD")), i.parentNode.insertBefore(o, i);
    }
    return (
      (i = e.createDom("STYLE")),
      goog.style.setSafeStyleSheet(i, t),
      e.appendChild(o, i),
      i
    );
  }),
  (goog.style.uninstallStyles = function (t) {
    goog.dom.removeNode(t.ownerNode || t.owningElement || t);
  }),
  (goog.style.setSafeStyleSheet = function (t, e) {
    (e = goog.html.SafeStyleSheet.unwrap(e)),
      goog.userAgent.IE && void 0 !== t.cssText
        ? (t.cssText = e)
        : (t.innerHTML = e);
  }),
  (goog.style.setPreWrap = function (t) {
    (t = t.style),
      goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("8")
        ? ((t.whiteSpace = "pre"), (t.wordWrap = "break-word"))
        : (t.whiteSpace = goog.userAgent.GECKO ? "-moz-pre-wrap" : "pre-wrap");
  }),
  (goog.style.setInlineBlock = function (t) {
    ((t = t.style).position = "relative"),
      goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("8")
        ? ((t.zoom = "1"), (t.display = "inline"))
        : (t.display = "inline-block");
  }),
  (goog.style.isRightToLeft = function (t) {
    return "rtl" == goog.style.getStyle_(t, "direction");
  }),
  (goog.style.unselectableStyle_ = goog.userAgent.GECKO
    ? "MozUserSelect"
    : goog.userAgent.WEBKIT || goog.userAgent.EDGE
    ? "WebkitUserSelect"
    : null),
  (goog.style.isUnselectable = function (t) {
    return goog.style.unselectableStyle_
      ? "none" == t.style[goog.style.unselectableStyle_].toLowerCase()
      : !(!goog.userAgent.IE && !goog.userAgent.OPERA) &&
          "on" == t.getAttribute("unselectable");
  }),
  (goog.style.setUnselectable = function (t, e, o) {
    o = o ? null : t.getElementsByTagName("*");
    var i = goog.style.unselectableStyle_;
    if (i) {
      if (((e = e ? "none" : ""), t.style && (t.style[i] = e), o)) {
        t = 0;
        for (var n; (n = o[t]); t++) n.style && (n.style[i] = e);
      }
    } else if (
      (goog.userAgent.IE || goog.userAgent.OPERA) &&
      ((e = e ? "on" : ""), t.setAttribute("unselectable", e), o)
    )
      for (t = 0; (n = o[t]); t++) n.setAttribute("unselectable", e);
  }),
  (goog.style.getBorderBoxSize = function (t) {
    return new goog.math.Size(t.offsetWidth, t.offsetHeight);
  }),
  (goog.style.setBorderBoxSize = function (t, e) {
    var o = goog.dom.getOwnerDocument(t),
      i = goog.dom.getDomHelper(o).isCss1CompatMode();
    !goog.userAgent.IE ||
    goog.userAgent.isVersionOrHigher("10") ||
    (i && goog.userAgent.isVersionOrHigher("8"))
      ? goog.style.setBoxSizingSize_(t, e, "border-box")
      : ((o = t.style),
        i
          ? ((i = goog.style.getPaddingBox(t)),
            (t = goog.style.getBorderBox(t)),
            (o.pixelWidth = e.width - t.left - i.left - i.right - t.right),
            (o.pixelHeight = e.height - t.top - i.top - i.bottom - t.bottom))
          : ((o.pixelWidth = e.width), (o.pixelHeight = e.height)));
  }),
  (goog.style.getContentBoxSize = function (t) {
    var e = goog.dom.getOwnerDocument(t),
      o = goog.userAgent.IE && t.currentStyle;
    return o &&
      goog.dom.getDomHelper(e).isCss1CompatMode() &&
      "auto" != o.width &&
      "auto" != o.height &&
      !o.boxSizing
      ? ((e = goog.style.getIePixelValue_(t, o.width, "width", "pixelWidth")),
        (t = goog.style.getIePixelValue_(t, o.height, "height", "pixelHeight")),
        new goog.math.Size(e, t))
      : ((o = goog.style.getBorderBoxSize(t)),
        (e = goog.style.getPaddingBox(t)),
        (t = goog.style.getBorderBox(t)),
        new goog.math.Size(
          o.width - t.left - e.left - e.right - t.right,
          o.height - t.top - e.top - e.bottom - t.bottom
        ));
  }),
  (goog.style.setContentBoxSize = function (t, e) {
    var o = goog.dom.getOwnerDocument(t),
      i = goog.dom.getDomHelper(o).isCss1CompatMode();
    !goog.userAgent.IE ||
    goog.userAgent.isVersionOrHigher("10") ||
    (i && goog.userAgent.isVersionOrHigher("8"))
      ? goog.style.setBoxSizingSize_(t, e, "content-box")
      : ((o = t.style),
        i
          ? ((o.pixelWidth = e.width), (o.pixelHeight = e.height))
          : ((i = goog.style.getPaddingBox(t)),
            (t = goog.style.getBorderBox(t)),
            (o.pixelWidth = e.width + t.left + i.left + i.right + t.right),
            (o.pixelHeight = e.height + t.top + i.top + i.bottom + t.bottom)));
  }),
  (goog.style.setBoxSizingSize_ = function (t, e, o) {
    (t = t.style),
      goog.userAgent.GECKO
        ? (t.MozBoxSizing = o)
        : goog.userAgent.WEBKIT
        ? (t.WebkitBoxSizing = o)
        : (t.boxSizing = o),
      (t.width = Math.max(e.width, 0) + "px"),
      (t.height = Math.max(e.height, 0) + "px");
  }),
  (goog.style.getIePixelValue_ = function (t, e, o, i) {
    if (/^\d+px?$/.test(e)) return parseInt(e, 10);
    var n = t.style[o],
      l = t.runtimeStyle[o];
    return (
      (t.runtimeStyle[o] = t.currentStyle[o]),
      (t.style[o] = e),
      (e = t.style[i]),
      (t.style[o] = n),
      (t.runtimeStyle[o] = l),
      +e
    );
  }),
  (goog.style.getIePixelDistance_ = function (t, e) {
    return (e = goog.style.getCascadedStyle(t, e))
      ? goog.style.getIePixelValue_(t, e, "left", "pixelLeft")
      : 0;
  }),
  (goog.style.getBox_ = function (t, e) {
    if (goog.userAgent.IE) {
      var o = goog.style.getIePixelDistance_(t, e + "Left"),
        i = goog.style.getIePixelDistance_(t, e + "Right"),
        n = goog.style.getIePixelDistance_(t, e + "Top");
      return (
        (t = goog.style.getIePixelDistance_(t, e + "Bottom")),
        new goog.math.Box(n, i, t, o)
      );
    }
    return (
      (o = goog.style.getComputedStyle(t, e + "Left")),
      (i = goog.style.getComputedStyle(t, e + "Right")),
      (n = goog.style.getComputedStyle(t, e + "Top")),
      (t = goog.style.getComputedStyle(t, e + "Bottom")),
      new goog.math.Box(
        parseFloat(n),
        parseFloat(i),
        parseFloat(t),
        parseFloat(o)
      )
    );
  }),
  (goog.style.getPaddingBox = function (t) {
    return goog.style.getBox_(t, "padding");
  }),
  (goog.style.getMarginBox = function (t) {
    return goog.style.getBox_(t, "margin");
  }),
  (goog.style.ieBorderWidthKeywords_ = { thin: 2, medium: 4, thick: 6 }),
  (goog.style.getIePixelBorder_ = function (t, e) {
    return "none" == goog.style.getCascadedStyle(t, e + "Style")
      ? 0
      : (e = goog.style.getCascadedStyle(t, e + "Width")) in
        goog.style.ieBorderWidthKeywords_
      ? goog.style.ieBorderWidthKeywords_[e]
      : goog.style.getIePixelValue_(t, e, "left", "pixelLeft");
  }),
  (goog.style.getBorderBox = function (t) {
    if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9)) {
      var e = goog.style.getIePixelBorder_(t, "borderLeft"),
        o = goog.style.getIePixelBorder_(t, "borderRight"),
        i = goog.style.getIePixelBorder_(t, "borderTop");
      return (
        (t = goog.style.getIePixelBorder_(t, "borderBottom")),
        new goog.math.Box(i, o, t, e)
      );
    }
    return (
      (e = goog.style.getComputedStyle(t, "borderLeftWidth")),
      (o = goog.style.getComputedStyle(t, "borderRightWidth")),
      (i = goog.style.getComputedStyle(t, "borderTopWidth")),
      (t = goog.style.getComputedStyle(t, "borderBottomWidth")),
      new goog.math.Box(
        parseFloat(i),
        parseFloat(o),
        parseFloat(t),
        parseFloat(e)
      )
    );
  }),
  (goog.style.getFontFamily = function (t) {
    var e = goog.dom.getOwnerDocument(t),
      o = "";
    if (e.body.createTextRange && goog.dom.contains(e, t)) {
      (e = e.body.createTextRange()).moveToElementText(t);
      try {
        o = e.queryCommandValue("FontName");
      } catch (t) {
        o = "";
      }
    }
    return (
      o || (o = goog.style.getStyle_(t, "fontFamily")),
      1 < (t = o.split(",")).length && (o = t[0]),
      goog.string.stripQuotes(o, "\"'")
    );
  }),
  (goog.style.lengthUnitRegex_ = /[^\d]+$/),
  (goog.style.getLengthUnits = function (t) {
    return ((t = t.match(goog.style.lengthUnitRegex_)) && t[0]) || null;
  }),
  (goog.style.ABSOLUTE_CSS_LENGTH_UNITS_ = {
    cm: 1,
    in: 1,
    mm: 1,
    pc: 1,
    pt: 1,
  }),
  (goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_ = { em: 1, ex: 1 }),
  (goog.style.getFontSize = function (t) {
    var e = goog.style.getStyle_(t, "fontSize"),
      o = goog.style.getLengthUnits(e);
    if (e && "px" == o) return parseInt(e, 10);
    if (goog.userAgent.IE) {
      if (String(o) in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)
        return goog.style.getIePixelValue_(t, e, "left", "pixelLeft");
      if (
        t.parentNode &&
        t.parentNode.nodeType == goog.dom.NodeType.ELEMENT &&
        String(o) in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_
      )
        return (
          (t = t.parentNode),
          (o = goog.style.getStyle_(t, "fontSize")),
          goog.style.getIePixelValue_(
            t,
            e == o ? "1em" : e,
            "left",
            "pixelLeft"
          )
        );
    }
    return (
      (o = goog.dom.createDom("SPAN", {
        style:
          "visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;",
      })),
      goog.dom.appendChild(t, o),
      (e = o.offsetHeight),
      goog.dom.removeNode(o),
      e
    );
  }),
  (goog.style.parseStyleAttribute = function (t) {
    var e = {};
    return (
      goog.array.forEach(t.split(/\s*;\s*/), function (t) {
        var o = t.match(/\s*([\w-]+)\s*:(.+)/);
        o &&
          ((t = o[1]),
          (o = goog.string.trim(o[2])),
          (e[goog.string.toCamelCase(t.toLowerCase())] = o));
      }),
      e
    );
  }),
  (goog.style.toStyleAttribute = function (t) {
    var e = [];
    return (
      goog.object.forEach(t, function (t, o) {
        e.push(goog.string.toSelectorCase(o), ":", t, ";");
      }),
      e.join("")
    );
  }),
  (goog.style.setFloat = function (t, e) {
    t.style[goog.userAgent.IE ? "styleFloat" : "cssFloat"] = e;
  }),
  (goog.style.getFloat = function (t) {
    return t.style[goog.userAgent.IE ? "styleFloat" : "cssFloat"] || "";
  }),
  (goog.style.getScrollbarWidth = function (t) {
    var e = goog.dom.createElement("DIV");
    return (
      t && (e.className = t),
      (e.style.cssText =
        "overflow:auto;position:absolute;top:0;width:100px;height:100px"),
      (t = goog.dom.createElement("DIV")),
      goog.style.setSize(t, "200px", "200px"),
      e.appendChild(t),
      goog.dom.appendChild(goog.dom.getDocument().body, e),
      (t = e.offsetWidth - e.clientWidth),
      goog.dom.removeNode(e),
      t
    );
  }),
  (goog.style.MATRIX_TRANSLATION_REGEX_ =
    /matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/),
  (goog.style.getCssTranslation = function (t) {
    return (t = goog.style.getComputedTransform(t)) &&
      (t = t.match(goog.style.MATRIX_TRANSLATION_REGEX_))
      ? new goog.math.Coordinate(parseFloat(t[1]), parseFloat(t[2]))
      : new goog.math.Coordinate(0, 0);
  }),
  (goog.disposable = {}),
  (goog.disposable.IDisposable = function () {}),
  (goog.disposable.IDisposable.prototype.dispose = goog.abstractMethod),
  (goog.disposable.IDisposable.prototype.isDisposed = goog.abstractMethod),
  (goog.Disposable = function () {
    goog.Disposable.MONITORING_MODE != goog.Disposable.MonitoringMode.OFF &&
      (goog.Disposable.INCLUDE_STACK_ON_CREATION &&
        (this.creationStack = Error().stack),
      (goog.Disposable.instances_[goog.getUid(this)] = this)),
      (this.disposed_ = this.disposed_),
      (this.onDisposeCallbacks_ = this.onDisposeCallbacks_);
  }),
  (goog.Disposable.MonitoringMode = { OFF: 0, PERMANENT: 1, INTERACTIVE: 2 }),
  (goog.Disposable.MONITORING_MODE = 0),
  (goog.Disposable.INCLUDE_STACK_ON_CREATION = !0),
  (goog.Disposable.instances_ = {}),
  (goog.Disposable.getUndisposedObjects = function () {
    var t,
      e = [];
    for (t in goog.Disposable.instances_)
      goog.Disposable.instances_.hasOwnProperty(t) &&
        e.push(goog.Disposable.instances_[Number(t)]);
    return e;
  }),
  (goog.Disposable.clearUndisposedObjects = function () {
    goog.Disposable.instances_ = {};
  }),
  (goog.Disposable.prototype.disposed_ = !1),
  (goog.Disposable.prototype.isDisposed = function () {
    return this.disposed_;
  }),
  (goog.Disposable.prototype.getDisposed =
    goog.Disposable.prototype.isDisposed),
  (goog.Disposable.prototype.dispose = function () {
    if (
      !this.disposed_ &&
      ((this.disposed_ = !0),
      this.disposeInternal(),
      goog.Disposable.MONITORING_MODE != goog.Disposable.MonitoringMode.OFF)
    ) {
      var t = goog.getUid(this);
      if (
        goog.Disposable.MONITORING_MODE ==
          goog.Disposable.MonitoringMode.PERMANENT &&
        !goog.Disposable.instances_.hasOwnProperty(t)
      )
        throw Error(
          this +
            " did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"
        );
      if (
        goog.Disposable.MONITORING_MODE != goog.Disposable.MonitoringMode.OFF &&
        this.onDisposeCallbacks_ &&
        0 < this.onDisposeCallbacks_.length
      )
        throw Error(
          this +
            " did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method."
        );
      delete goog.Disposable.instances_[t];
    }
  }),
  (goog.Disposable.prototype.registerDisposable = function (t) {
    this.addOnDisposeCallback(goog.partial(goog.dispose, t));
  }),
  (goog.Disposable.prototype.addOnDisposeCallback = function (t, e) {
    this.disposed_
      ? void 0 !== e
        ? t.call(e)
        : t()
      : (this.onDisposeCallbacks_ || (this.onDisposeCallbacks_ = []),
        this.onDisposeCallbacks_.push(void 0 !== e ? goog.bind(t, e) : t));
  }),
  (goog.Disposable.prototype.disposeInternal = function () {
    if (this.onDisposeCallbacks_)
      for (; this.onDisposeCallbacks_.length; )
        this.onDisposeCallbacks_.shift()();
  }),
  (goog.Disposable.isDisposed = function (t) {
    return !(!t || "function" != typeof t.isDisposed) && t.isDisposed();
  }),
  (goog.dispose = function (t) {
    t && "function" == typeof t.dispose && t.dispose();
  }),
  (goog.disposeAll = function (t) {
    for (var e = 0, o = arguments.length; e < o; ++e) {
      var i = arguments[e];
      goog.isArrayLike(i) ? goog.disposeAll.apply(null, i) : goog.dispose(i);
    }
  }),
  (goog.debug.entryPointRegistry = {}),
  (goog.debug.EntryPointMonitor = function () {}),
  (goog.debug.entryPointRegistry.refList_ = []),
  (goog.debug.entryPointRegistry.monitors_ = []),
  (goog.debug.entryPointRegistry.monitorsMayExist_ = !1),
  (goog.debug.entryPointRegistry.register = function (t) {
    if (
      ((goog.debug.entryPointRegistry.refList_[
        goog.debug.entryPointRegistry.refList_.length
      ] = t),
      goog.debug.entryPointRegistry.monitorsMayExist_)
    )
      for (
        var e = goog.debug.entryPointRegistry.monitors_, o = 0;
        o < e.length;
        o++
      )
        t(goog.bind(e[o].wrap, e[o]));
  }),
  (goog.debug.entryPointRegistry.monitorAll = function (t) {
    goog.debug.entryPointRegistry.monitorsMayExist_ = !0;
    for (
      var e = goog.bind(t.wrap, t), o = 0;
      o < goog.debug.entryPointRegistry.refList_.length;
      o++
    )
      goog.debug.entryPointRegistry.refList_[o](e);
    goog.debug.entryPointRegistry.monitors_.push(t);
  }),
  (goog.debug.entryPointRegistry.unmonitorAllIfPossible = function (t) {
    var e = goog.debug.entryPointRegistry.monitors_;
    goog.asserts.assert(
      t == e[e.length - 1],
      "Only the most recent monitor can be unwrapped."
    ),
      (t = goog.bind(t.unwrap, t));
    for (var o = 0; o < goog.debug.entryPointRegistry.refList_.length; o++)
      goog.debug.entryPointRegistry.refList_[o](t);
    e.length--;
  }),
  (goog.debug.errorcontext = {}),
  (goog.debug.errorcontext.addErrorContext = function (t, e, o) {
    t[goog.debug.errorcontext.CONTEXT_KEY_] ||
      (t[goog.debug.errorcontext.CONTEXT_KEY_] = {}),
      (t[goog.debug.errorcontext.CONTEXT_KEY_][e] = o);
  }),
  (goog.debug.errorcontext.getErrorContext = function (t) {
    return t[goog.debug.errorcontext.CONTEXT_KEY_] || {};
  }),
  (goog.debug.errorcontext.CONTEXT_KEY_ = "__closure__error__context__984382"),
  (goog.debug.LOGGING_ENABLED = goog.DEBUG),
  (goog.debug.FORCE_SLOPPY_STACKS = !1),
  (goog.debug.catchErrors = function (t, e, o) {
    var i = (o = o || goog.global).onerror,
      n = !!e;
    goog.userAgent.WEBKIT &&
      !goog.userAgent.isVersionOrHigher("535.3") &&
      (n = !n),
      (o.onerror = function (e, o, l, r, s) {
        return (
          i && i(e, o, l, r, s),
          t({
            message: e,
            fileName: o,
            line: l,
            lineNumber: l,
            col: r,
            error: s,
          }),
          n
        );
      });
  }),
  (goog.debug.expose = function (t, e) {
    if (void 0 === t) return "undefined";
    if (null == t) return "NULL";
    var o,
      i = [];
    for (o in t)
      if (e || !goog.isFunction(t[o])) {
        var n = o + " = ";
        try {
          n += t[o];
        } catch (t) {
          n += "*** " + t + " ***";
        }
        i.push(n);
      }
    return i.join("\n");
  }),
  (goog.debug.deepExpose = function (t, e) {
    var o = [],
      i = [],
      n = {},
      l = function (t, r) {
        var s = r + "  ";
        try {
          if (void 0 === t) o.push("undefined");
          else if (null === t) o.push("NULL");
          else if ("string" == typeof t)
            o.push('"' + t.replace(/\n/g, "\n" + r) + '"');
          else if (goog.isFunction(t))
            o.push(String(t).replace(/\n/g, "\n" + r));
          else if (goog.isObject(t)) {
            goog.hasUid(t) || i.push(t);
            var a = goog.getUid(t);
            if (n[a]) o.push("*** reference loop detected (id=" + a + ") ***");
            else {
              for (var c in ((n[a] = !0), o.push("{"), t))
                (!e && goog.isFunction(t[c])) ||
                  (o.push("\n"), o.push(s), o.push(c + " = "), l(t[c], s));
              o.push("\n" + r + "}"), delete n[a];
            }
          } else o.push(t);
        } catch (t) {
          o.push("*** " + t + " ***");
        }
      };
    for (l(t, ""), t = 0; t < i.length; t++) goog.removeUid(i[t]);
    return o.join("");
  }),
  (goog.debug.exposeArray = function (t) {
    for (var e = [], o = 0; o < t.length; o++)
      goog.isArray(t[o]) ? e.push(goog.debug.exposeArray(t[o])) : e.push(t[o]);
    return "[ " + e.join(", ") + " ]";
  }),
  (goog.debug.normalizeErrorObject = function (t) {
    var e = goog.getObjectByName("window.location.href");
    if (
      (null == t && (t = 'Unknown Error of type "null/undefined"'),
      "string" == typeof t)
    )
      return {
        message: t,
        name: "Unknown error",
        lineNumber: "Not available",
        fileName: e,
        stack: "Not available",
      };
    var o = !1;
    try {
      var i = t.lineNumber || t.line || "Not available";
    } catch (t) {
      (i = "Not available"), (o = !0);
    }
    try {
      var n =
        t.fileName ||
        t.filename ||
        t.sourceURL ||
        goog.global.$googDebugFname ||
        e;
    } catch (t) {
      (n = "Not available"), (o = !0);
    }
    return !o && t.lineNumber && t.fileName && t.stack && t.message && t.name
      ? t
      : (null == (e = t.message) &&
          (e =
            t.constructor && t.constructor instanceof Function
              ? 'Unknown Error of type "' +
                (t.constructor.name
                  ? t.constructor.name
                  : goog.debug.getFunctionName(t.constructor)) +
                '"'
              : "Unknown Error of unknown type"),
        {
          message: e,
          name: t.name || "UnknownError",
          lineNumber: i,
          fileName: n,
          stack: t.stack || "Not available",
        });
  }),
  (goog.debug.enhanceError = function (t, e) {
    if (
      (t instanceof Error ||
        ((t = Error(t)),
        Error.captureStackTrace &&
          Error.captureStackTrace(t, goog.debug.enhanceError)),
      t.stack || (t.stack = goog.debug.getStacktrace(goog.debug.enhanceError)),
      e)
    ) {
      for (var o = 0; t["message" + o]; ) ++o;
      t["message" + o] = String(e);
    }
    return t;
  }),
  (goog.debug.enhanceErrorWithContext = function (t, e) {
    if (((t = goog.debug.enhanceError(t)), e))
      for (var o in e) goog.debug.errorcontext.addErrorContext(t, o, e[o]);
    return t;
  }),
  (goog.debug.getStacktraceSimple = function (t) {
    if (!goog.debug.FORCE_SLOPPY_STACKS) {
      var e = goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);
      if (e) return e;
    }
    e = [];
    for (var o = arguments.callee.caller, i = 0; o && (!t || i < t); ) {
      e.push(goog.debug.getFunctionName(o)), e.push("()\n");
      try {
        o = o.caller;
      } catch (t) {
        e.push("[exception trying to get caller]\n");
        break;
      }
      if (++i >= goog.debug.MAX_STACK_DEPTH) {
        e.push("[...long stack...]");
        break;
      }
    }
    return (
      t && i >= t ? e.push("[...reached max depth limit...]") : e.push("[end]"),
      e.join("")
    );
  }),
  (goog.debug.MAX_STACK_DEPTH = 50),
  (goog.debug.getNativeStackTrace_ = function (t) {
    var e = Error();
    if (Error.captureStackTrace)
      return Error.captureStackTrace(e, t), String(e.stack);
    try {
      throw e;
    } catch (t) {
      e = t;
    }
    return (t = e.stack) ? String(t) : null;
  }),
  (goog.debug.getStacktrace = function (t) {
    var e;
    return (
      goog.debug.FORCE_SLOPPY_STACKS ||
        (e = goog.debug.getNativeStackTrace_(t || goog.debug.getStacktrace)),
      e ||
        (e = goog.debug.getStacktraceHelper_(t || arguments.callee.caller, [])),
      e
    );
  }),
  (goog.debug.getStacktraceHelper_ = function (t, e) {
    var o = [];
    if (goog.array.contains(e, t)) o.push("[...circular reference...]");
    else if (t && e.length < goog.debug.MAX_STACK_DEPTH) {
      o.push(goog.debug.getFunctionName(t) + "(");
      for (var i = t.arguments, n = 0; i && n < i.length; n++) {
        0 < n && o.push(", ");
        var l = i[n];
        switch (typeof l) {
          case "object":
            l = l ? "object" : "null";
            break;
          case "string":
            break;
          case "number":
            l = String(l);
            break;
          case "boolean":
            l = l ? "true" : "false";
            break;
          case "function":
            l = (l = goog.debug.getFunctionName(l)) ? l : "[fn]";
            break;
          default:
            l = typeof l;
        }
        40 < l.length && (l = l.substr(0, 40) + "..."), o.push(l);
      }
      e.push(t), o.push(")\n");
      try {
        o.push(goog.debug.getStacktraceHelper_(t.caller, e));
      } catch (t) {
        o.push("[exception trying to get caller]\n");
      }
    } else t ? o.push("[...long stack...]") : o.push("[end]");
    return o.join("");
  }),
  (goog.debug.getFunctionName = function (t) {
    if (goog.debug.fnNameCache_[t]) return goog.debug.fnNameCache_[t];
    if (((t = String(t)), !goog.debug.fnNameCache_[t])) {
      var e = /function\s+([^\(]+)/m.exec(t);
      goog.debug.fnNameCache_[t] = e ? e[1] : "[Anonymous]";
    }
    return goog.debug.fnNameCache_[t];
  }),
  (goog.debug.makeWhitespaceVisible = function (t) {
    return t
      .replace(/ /g, "[_]")
      .replace(/\f/g, "[f]")
      .replace(/\n/g, "[n]\n")
      .replace(/\r/g, "[r]")
      .replace(/\t/g, "[t]");
  }),
  (goog.debug.runtimeType = function (t) {
    return t instanceof Function
      ? t.displayName || t.name || "unknown type name"
      : t instanceof Object
      ? t.constructor.displayName ||
        t.constructor.name ||
        Object.prototype.toString.call(t)
      : null === t
      ? "null"
      : typeof t;
  }),
  (goog.debug.fnNameCache_ = {}),
  (goog.debug.freezeInternal_ =
    (goog.DEBUG && Object.freeze) ||
    function (t) {
      return t;
    }),
  (goog.debug.freeze = function (t) {
    return goog.debug.freezeInternal_(t);
  }),
  (goog.events = {}),
  ($jscomp.scope.purify = function (t) {
    return t();
  }),
  (goog.events.BrowserFeature = {
    HAS_W3C_BUTTON:
      !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9),
    HAS_W3C_EVENT_SUPPORT:
      !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9),
    SET_KEY_CODE_TO_PREVENT_DEFAULT:
      goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("9"),
    HAS_NAVIGATOR_ONLINE_PROPERTY:
      !goog.userAgent.WEBKIT || goog.userAgent.isVersionOrHigher("528"),
    HAS_HTML5_NETWORK_EVENT_SUPPORT:
      (goog.userAgent.GECKO && goog.userAgent.isVersionOrHigher("1.9b")) ||
      (goog.userAgent.IE && goog.userAgent.isVersionOrHigher("8")) ||
      (goog.userAgent.OPERA && goog.userAgent.isVersionOrHigher("9.5")) ||
      (goog.userAgent.WEBKIT && goog.userAgent.isVersionOrHigher("528")),
    HTML5_NETWORK_EVENTS_FIRE_ON_BODY:
      (goog.userAgent.GECKO && !goog.userAgent.isVersionOrHigher("8")) ||
      (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("9")),
    TOUCH_ENABLED:
      "ontouchstart" in goog.global ||
      !!(
        goog.global.document &&
        document.documentElement &&
        "ontouchstart" in document.documentElement
      ) ||
      !(
        !goog.global.navigator ||
        (!goog.global.navigator.maxTouchPoints &&
          !goog.global.navigator.msMaxTouchPoints)
      ),
    POINTER_EVENTS: "PointerEvent" in goog.global,
    MSPOINTER_EVENTS:
      "MSPointerEvent" in goog.global &&
      !(!goog.global.navigator || !goog.global.navigator.msPointerEnabled),
    PASSIVE_EVENTS: (0, $jscomp.scope.purify)(function () {
      if (!goog.global.addEventListener || !Object.defineProperty) return !1;
      var t = !1,
        e = Object.defineProperty({}, "passive", {
          get: function () {
            t = !0;
          },
        });
      try {
        goog.global.addEventListener("test", goog.nullFunction, e),
          goog.global.removeEventListener("test", goog.nullFunction, e);
      } catch (t) {}
      return t;
    }),
  }),
  (goog.events.EventId = function (t) {
    this.id = t;
  }),
  (goog.events.EventId.prototype.toString = function () {
    return this.id;
  }),
  (goog.events.Event = function (t, e) {
    (this.type = t instanceof goog.events.EventId ? String(t) : t),
      (this.currentTarget = this.target = e),
      (this.defaultPrevented = this.propagationStopped_ = !1),
      (this.returnValue_ = !0);
  }),
  (goog.events.Event.prototype.stopPropagation = function () {
    this.propagationStopped_ = !0;
  }),
  (goog.events.Event.prototype.preventDefault = function () {
    (this.defaultPrevented = !0), (this.returnValue_ = !1);
  }),
  (goog.events.Event.stopPropagation = function (t) {
    t.stopPropagation();
  }),
  (goog.events.Event.preventDefault = function (t) {
    t.preventDefault();
  }),
  (goog.events.getVendorPrefixedName_ = function (t) {
    return goog.userAgent.WEBKIT
      ? "webkit" + t
      : goog.userAgent.OPERA
      ? "o" + t.toLowerCase()
      : t.toLowerCase();
  }),
  (goog.events.EventType = {
    CLICK: "click",
    RIGHTCLICK: "rightclick",
    DBLCLICK: "dblclick",
    AUXCLICK: "auxclick",
    MOUSEDOWN: "mousedown",
    MOUSEUP: "mouseup",
    MOUSEOVER: "mouseover",
    MOUSEOUT: "mouseout",
    MOUSEMOVE: "mousemove",
    MOUSEENTER: "mouseenter",
    MOUSELEAVE: "mouseleave",
    MOUSECANCEL: "mousecancel",
    SELECTIONCHANGE: "selectionchange",
    SELECTSTART: "selectstart",
    WHEEL: "wheel",
    KEYPRESS: "keypress",
    KEYDOWN: "keydown",
    KEYUP: "keyup",
    BLUR: "blur",
    FOCUS: "focus",
    DEACTIVATE: "deactivate",
    FOCUSIN: "focusin",
    FOCUSOUT: "focusout",
    CHANGE: "change",
    RESET: "reset",
    SELECT: "select",
    SUBMIT: "submit",
    INPUT: "input",
    PROPERTYCHANGE: "propertychange",
    DRAGSTART: "dragstart",
    DRAG: "drag",
    DRAGENTER: "dragenter",
    DRAGOVER: "dragover",
    DRAGLEAVE: "dragleave",
    DROP: "drop",
    DRAGEND: "dragend",
    TOUCHSTART: "touchstart",
    TOUCHMOVE: "touchmove",
    TOUCHEND: "touchend",
    TOUCHCANCEL: "touchcancel",
    BEFOREUNLOAD: "beforeunload",
    CONSOLEMESSAGE: "consolemessage",
    CONTEXTMENU: "contextmenu",
    DEVICECHANGE: "devicechange",
    DEVICEMOTION: "devicemotion",
    DEVICEORIENTATION: "deviceorientation",
    DOMCONTENTLOADED: "DOMContentLoaded",
    ERROR: "error",
    HELP: "help",
    LOAD: "load",
    LOSECAPTURE: "losecapture",
    ORIENTATIONCHANGE: "orientationchange",
    READYSTATECHANGE: "readystatechange",
    RESIZE: "resize",
    SCROLL: "scroll",
    UNLOAD: "unload",
    CANPLAY: "canplay",
    CANPLAYTHROUGH: "canplaythrough",
    DURATIONCHANGE: "durationchange",
    EMPTIED: "emptied",
    ENDED: "ended",
    LOADEDDATA: "loadeddata",
    LOADEDMETADATA: "loadedmetadata",
    PAUSE: "pause",
    PLAY: "play",
    PLAYING: "playing",
    PROGRESS: "progress",
    RATECHANGE: "ratechange",
    SEEKED: "seeked",
    SEEKING: "seeking",
    STALLED: "stalled",
    SUSPEND: "suspend",
    TIMEUPDATE: "timeupdate",
    VOLUMECHANGE: "volumechange",
    WAITING: "waiting",
    SOURCEOPEN: "sourceopen",
    SOURCEENDED: "sourceended",
    SOURCECLOSED: "sourceclosed",
    ABORT: "abort",
    UPDATE: "update",
    UPDATESTART: "updatestart",
    UPDATEEND: "updateend",
    HASHCHANGE: "hashchange",
    PAGEHIDE: "pagehide",
    PAGESHOW: "pageshow",
    POPSTATE: "popstate",
    COPY: "copy",
    PASTE: "paste",
    CUT: "cut",
    BEFORECOPY: "beforecopy",
    BEFORECUT: "beforecut",
    BEFOREPASTE: "beforepaste",
    ONLINE: "online",
    OFFLINE: "offline",
    MESSAGE: "message",
    CONNECT: "connect",
    INSTALL: "install",
    ACTIVATE: "activate",
    FETCH: "fetch",
    FOREIGNFETCH: "foreignfetch",
    MESSAGEERROR: "messageerror",
    STATECHANGE: "statechange",
    UPDATEFOUND: "updatefound",
    CONTROLLERCHANGE: "controllerchange",
    ANIMATIONSTART: goog.events.getVendorPrefixedName_("AnimationStart"),
    ANIMATIONEND: goog.events.getVendorPrefixedName_("AnimationEnd"),
    ANIMATIONITERATION:
      goog.events.getVendorPrefixedName_("AnimationIteration"),
    TRANSITIONEND: goog.events.getVendorPrefixedName_("TransitionEnd"),
    POINTERDOWN: "pointerdown",
    POINTERUP: "pointerup",
    POINTERCANCEL: "pointercancel",
    POINTERMOVE: "pointermove",
    POINTEROVER: "pointerover",
    POINTEROUT: "pointerout",
    POINTERENTER: "pointerenter",
    POINTERLEAVE: "pointerleave",
    GOTPOINTERCAPTURE: "gotpointercapture",
    LOSTPOINTERCAPTURE: "lostpointercapture",
    MSGESTURECHANGE: "MSGestureChange",
    MSGESTUREEND: "MSGestureEnd",
    MSGESTUREHOLD: "MSGestureHold",
    MSGESTURESTART: "MSGestureStart",
    MSGESTURETAP: "MSGestureTap",
    MSGOTPOINTERCAPTURE: "MSGotPointerCapture",
    MSINERTIASTART: "MSInertiaStart",
    MSLOSTPOINTERCAPTURE: "MSLostPointerCapture",
    MSPOINTERCANCEL: "MSPointerCancel",
    MSPOINTERDOWN: "MSPointerDown",
    MSPOINTERENTER: "MSPointerEnter",
    MSPOINTERHOVER: "MSPointerHover",
    MSPOINTERLEAVE: "MSPointerLeave",
    MSPOINTERMOVE: "MSPointerMove",
    MSPOINTEROUT: "MSPointerOut",
    MSPOINTEROVER: "MSPointerOver",
    MSPOINTERUP: "MSPointerUp",
    TEXT: "text",
    TEXTINPUT: goog.userAgent.IE ? "textinput" : "textInput",
    COMPOSITIONSTART: "compositionstart",
    COMPOSITIONUPDATE: "compositionupdate",
    COMPOSITIONEND: "compositionend",
    BEFOREINPUT: "beforeinput",
    EXIT: "exit",
    LOADABORT: "loadabort",
    LOADCOMMIT: "loadcommit",
    LOADREDIRECT: "loadredirect",
    LOADSTART: "loadstart",
    LOADSTOP: "loadstop",
    RESPONSIVE: "responsive",
    SIZECHANGED: "sizechanged",
    UNRESPONSIVE: "unresponsive",
    VISIBILITYCHANGE: "visibilitychange",
    STORAGE: "storage",
    DOMSUBTREEMODIFIED: "DOMSubtreeModified",
    DOMNODEINSERTED: "DOMNodeInserted",
    DOMNODEREMOVED: "DOMNodeRemoved",
    DOMNODEREMOVEDFROMDOCUMENT: "DOMNodeRemovedFromDocument",
    DOMNODEINSERTEDINTODOCUMENT: "DOMNodeInsertedIntoDocument",
    DOMATTRMODIFIED: "DOMAttrModified",
    DOMCHARACTERDATAMODIFIED: "DOMCharacterDataModified",
    BEFOREPRINT: "beforeprint",
    AFTERPRINT: "afterprint",
    BEFOREINSTALLPROMPT: "beforeinstallprompt",
    APPINSTALLED: "appinstalled",
  }),
  (goog.events.getPointerFallbackEventName_ = function (t, e, o) {
    return goog.events.BrowserFeature.POINTER_EVENTS
      ? t
      : goog.events.BrowserFeature.MSPOINTER_EVENTS
      ? e
      : o;
  }),
  (goog.events.PointerFallbackEventType = {
    POINTERDOWN: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERDOWN,
      goog.events.EventType.MSPOINTERDOWN,
      goog.events.EventType.MOUSEDOWN
    ),
    POINTERUP: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERUP,
      goog.events.EventType.MSPOINTERUP,
      goog.events.EventType.MOUSEUP
    ),
    POINTERCANCEL: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERCANCEL,
      goog.events.EventType.MSPOINTERCANCEL,
      goog.events.EventType.MOUSECANCEL
    ),
    POINTERMOVE: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERMOVE,
      goog.events.EventType.MSPOINTERMOVE,
      goog.events.EventType.MOUSEMOVE
    ),
    POINTEROVER: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTEROVER,
      goog.events.EventType.MSPOINTEROVER,
      goog.events.EventType.MOUSEOVER
    ),
    POINTEROUT: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTEROUT,
      goog.events.EventType.MSPOINTEROUT,
      goog.events.EventType.MOUSEOUT
    ),
    POINTERENTER: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERENTER,
      goog.events.EventType.MSPOINTERENTER,
      goog.events.EventType.MOUSEENTER
    ),
    POINTERLEAVE: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERLEAVE,
      goog.events.EventType.MSPOINTERLEAVE,
      goog.events.EventType.MOUSELEAVE
    ),
  }),
  (goog.events.PointerTouchFallbackEventType = {
    POINTERDOWN: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERDOWN,
      goog.events.EventType.MSPOINTERDOWN,
      goog.events.EventType.TOUCHSTART
    ),
    POINTERUP: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERUP,
      goog.events.EventType.MSPOINTERUP,
      goog.events.EventType.TOUCHEND
    ),
    POINTERCANCEL: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERCANCEL,
      goog.events.EventType.MSPOINTERCANCEL,
      goog.events.EventType.TOUCHCANCEL
    ),
    POINTERMOVE: goog.events.getPointerFallbackEventName_(
      goog.events.EventType.POINTERMOVE,
      goog.events.EventType.MSPOINTERMOVE,
      goog.events.EventType.TOUCHMOVE
    ),
  }),
  (goog.events.PointerAsMouseEventType = {
    MOUSEDOWN: goog.events.PointerFallbackEventType.POINTERDOWN,
    MOUSEUP: goog.events.PointerFallbackEventType.POINTERUP,
    MOUSECANCEL: goog.events.PointerFallbackEventType.POINTERCANCEL,
    MOUSEMOVE: goog.events.PointerFallbackEventType.POINTERMOVE,
    MOUSEOVER: goog.events.PointerFallbackEventType.POINTEROVER,
    MOUSEOUT: goog.events.PointerFallbackEventType.POINTEROUT,
    MOUSEENTER: goog.events.PointerFallbackEventType.POINTERENTER,
    MOUSELEAVE: goog.events.PointerFallbackEventType.POINTERLEAVE,
  }),
  (goog.events.MouseAsMouseEventType = {
    MOUSEDOWN: goog.events.EventType.MOUSEDOWN,
    MOUSEUP: goog.events.EventType.MOUSEUP,
    MOUSECANCEL: goog.events.EventType.MOUSECANCEL,
    MOUSEMOVE: goog.events.EventType.MOUSEMOVE,
    MOUSEOVER: goog.events.EventType.MOUSEOVER,
    MOUSEOUT: goog.events.EventType.MOUSEOUT,
    MOUSEENTER: goog.events.EventType.MOUSEENTER,
    MOUSELEAVE: goog.events.EventType.MOUSELEAVE,
  }),
  (goog.events.PointerAsTouchEventType = {
    TOUCHCANCEL: goog.events.PointerTouchFallbackEventType.POINTERCANCEL,
    TOUCHEND: goog.events.PointerTouchFallbackEventType.POINTERUP,
    TOUCHMOVE: goog.events.PointerTouchFallbackEventType.POINTERMOVE,
    TOUCHSTART: goog.events.PointerTouchFallbackEventType.POINTERDOWN,
  }),
  (goog.events.USE_LAYER_XY_AS_OFFSET_XY = !1),
  (goog.events.BrowserEvent = function (t, e) {
    goog.events.Event.call(this, t ? t.type : ""),
      (this.relatedTarget = this.currentTarget = this.target = null),
      (this.button =
        this.screenY =
        this.screenX =
        this.clientY =
        this.clientX =
        this.offsetY =
        this.offsetX =
          0),
      (this.key = ""),
      (this.charCode = this.keyCode = 0),
      (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
      (this.state = null),
      (this.platformModifierKey = !1),
      (this.pointerId = 0),
      (this.pointerType = ""),
      (this.event_ = null),
      t && this.init(t, e);
  }),
  goog.inherits(goog.events.BrowserEvent, goog.events.Event),
  (goog.events.BrowserEvent.MouseButton = { LEFT: 0, MIDDLE: 1, RIGHT: 2 }),
  (goog.events.BrowserEvent.PointerType = {
    MOUSE: "mouse",
    PEN: "pen",
    TOUCH: "touch",
  }),
  (goog.events.BrowserEvent.IEButtonMap = goog.debug.freeze([1, 4, 2])),
  (goog.events.BrowserEvent.IE_BUTTON_MAP =
    goog.events.BrowserEvent.IEButtonMap),
  (goog.events.BrowserEvent.IE_POINTER_TYPE_MAP = goog.debug.freeze({
    2: goog.events.BrowserEvent.PointerType.TOUCH,
    3: goog.events.BrowserEvent.PointerType.PEN,
    4: goog.events.BrowserEvent.PointerType.MOUSE,
  })),
  (goog.events.BrowserEvent.prototype.init = function (t, e) {
    var o = (this.type = t.type),
      i =
        t.changedTouches && t.changedTouches.length
          ? t.changedTouches[0]
          : null;
    (this.target = t.target || t.srcElement),
      (this.currentTarget = e),
      (e = t.relatedTarget)
        ? goog.userAgent.GECKO &&
          (goog.reflect.canAccessProperty(e, "nodeName") || (e = null))
        : o == goog.events.EventType.MOUSEOVER
        ? (e = t.fromElement)
        : o == goog.events.EventType.MOUSEOUT && (e = t.toElement),
      (this.relatedTarget = e),
      i
        ? ((this.clientX = void 0 !== i.clientX ? i.clientX : i.pageX),
          (this.clientY = void 0 !== i.clientY ? i.clientY : i.pageY),
          (this.screenX = i.screenX || 0),
          (this.screenY = i.screenY || 0))
        : (goog.events.USE_LAYER_XY_AS_OFFSET_XY
            ? ((this.offsetX = void 0 !== t.layerX ? t.layerX : t.offsetX),
              (this.offsetY = void 0 !== t.layerY ? t.layerY : t.offsetY))
            : ((this.offsetX =
                goog.userAgent.WEBKIT || void 0 !== t.offsetX
                  ? t.offsetX
                  : t.layerX),
              (this.offsetY =
                goog.userAgent.WEBKIT || void 0 !== t.offsetY
                  ? t.offsetY
                  : t.layerY)),
          (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX),
          (this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY),
          (this.screenX = t.screenX || 0),
          (this.screenY = t.screenY || 0)),
      (this.button = t.button),
      (this.keyCode = t.keyCode || 0),
      (this.key = t.key || ""),
      (this.charCode = t.charCode || ("keypress" == o ? t.keyCode : 0)),
      (this.ctrlKey = t.ctrlKey),
      (this.altKey = t.altKey),
      (this.shiftKey = t.shiftKey),
      (this.metaKey = t.metaKey),
      (this.platformModifierKey = goog.userAgent.MAC ? t.metaKey : t.ctrlKey),
      (this.pointerId = t.pointerId || 0),
      (this.pointerType = goog.events.BrowserEvent.getPointerType_(t)),
      (this.state = t.state),
      (this.event_ = t),
      t.defaultPrevented && this.preventDefault();
  }),
  (goog.events.BrowserEvent.prototype.isButton = function (t) {
    return goog.events.BrowserFeature.HAS_W3C_BUTTON
      ? this.event_.button == t
      : "click" == this.type
      ? t == goog.events.BrowserEvent.MouseButton.LEFT
      : !!(this.event_.button & goog.events.BrowserEvent.IE_BUTTON_MAP[t]);
  }),
  (goog.events.BrowserEvent.prototype.isMouseActionButton = function () {
    return (
      this.isButton(goog.events.BrowserEvent.MouseButton.LEFT) &&
      !(goog.userAgent.WEBKIT && goog.userAgent.MAC && this.ctrlKey)
    );
  }),
  (goog.events.BrowserEvent.prototype.stopPropagation = function () {
    goog.events.BrowserEvent.superClass_.stopPropagation.call(this),
      this.event_.stopPropagation
        ? this.event_.stopPropagation()
        : (this.event_.cancelBubble = !0);
  }),
  (goog.events.BrowserEvent.prototype.preventDefault = function () {
    goog.events.BrowserEvent.superClass_.preventDefault.call(this);
    var t = this.event_;
    if (t.preventDefault) t.preventDefault();
    else if (
      ((t.returnValue = !1),
      goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)
    )
      try {
        (t.ctrlKey || (112 <= t.keyCode && 123 >= t.keyCode)) &&
          (t.keyCode = -1);
      } catch (t) {}
  }),
  (goog.events.BrowserEvent.prototype.getBrowserEvent = function () {
    return this.event_;
  }),
  (goog.events.BrowserEvent.getPointerType_ = function (t) {
    return "string" == typeof t.pointerType
      ? t.pointerType
      : goog.events.BrowserEvent.IE_POINTER_TYPE_MAP[t.pointerType] || "";
  }),
  (goog.events.Listenable = function () {}),
  (goog.events.Listenable.IMPLEMENTED_BY_PROP =
    "closure_listenable_" + ((1e6 * Math.random()) | 0)),
  (goog.events.Listenable.addImplementation = function (t) {
    t.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP] = !0;
  }),
  (goog.events.Listenable.isImplementedBy = function (t) {
    return !(!t || !t[goog.events.Listenable.IMPLEMENTED_BY_PROP]);
  }),
  (goog.events.ListenableKey = function () {}),
  (goog.events.ListenableKey.counter_ = 0),
  (goog.events.ListenableKey.reserveKey = function () {
    return ++goog.events.ListenableKey.counter_;
  }),
  (goog.events.Listener = function (t, e, o, i, n, l) {
    goog.events.Listener.ENABLE_MONITORING &&
      (this.creationStack = Error().stack),
      (this.listener = t),
      (this.proxy = e),
      (this.src = o),
      (this.type = i),
      (this.capture = !!n),
      (this.handler = l),
      (this.key = goog.events.ListenableKey.reserveKey()),
      (this.removed = this.callOnce = !1);
  }),
  (goog.events.Listener.ENABLE_MONITORING = !1),
  (goog.events.Listener.prototype.markAsRemoved = function () {
    (this.removed = !0),
      (this.handler = this.src = this.proxy = this.listener = null);
  }),
  (goog.events.ListenerMap = function (t) {
    (this.src = t), (this.listeners = {}), (this.typeCount_ = 0);
  }),
  (goog.events.ListenerMap.prototype.getTypeCount = function () {
    return this.typeCount_;
  }),
  (goog.events.ListenerMap.prototype.getListenerCount = function () {
    var t,
      e = 0;
    for (t in this.listeners) e += this.listeners[t].length;
    return e;
  }),
  (goog.events.ListenerMap.prototype.add = function (t, e, o, i, n) {
    var l = t.toString();
    (t = this.listeners[l]) ||
      ((t = this.listeners[l] = []), this.typeCount_++);
    var r = goog.events.ListenerMap.findListenerIndex_(t, e, i, n);
    return (
      -1 < r
        ? ((e = t[r]), o || (e.callOnce = !1))
        : (((e = new goog.events.Listener(
            e,
            null,
            this.src,
            l,
            !!i,
            n
          )).callOnce = o),
          t.push(e)),
      e
    );
  }),
  (goog.events.ListenerMap.prototype.remove = function (t, e, o, i) {
    if (!((t = t.toString()) in this.listeners)) return !1;
    var n = this.listeners[t];
    return (
      -1 < (e = goog.events.ListenerMap.findListenerIndex_(n, e, o, i)) &&
      (n[e].markAsRemoved(),
      goog.array.removeAt(n, e),
      0 == n.length && (delete this.listeners[t], this.typeCount_--),
      !0)
    );
  }),
  (goog.events.ListenerMap.prototype.removeByKey = function (t) {
    var e = t.type;
    if (!(e in this.listeners)) return !1;
    var o = goog.array.remove(this.listeners[e], t);
    return (
      o &&
        (t.markAsRemoved(),
        0 == this.listeners[e].length &&
          (delete this.listeners[e], this.typeCount_--)),
      o
    );
  }),
  (goog.events.ListenerMap.prototype.removeAll = function (t) {
    t = t && t.toString();
    var e,
      o = 0;
    for (e in this.listeners)
      if (!t || e == t) {
        for (var i = this.listeners[e], n = 0; n < i.length; n++)
          ++o, i[n].markAsRemoved();
        delete this.listeners[e], this.typeCount_--;
      }
    return o;
  }),
  (goog.events.ListenerMap.prototype.getListeners = function (t, e) {
    var o = [];
    if ((t = this.listeners[t.toString()]))
      for (var i = 0; i < t.length; ++i) {
        var n = t[i];
        n.capture == e && o.push(n);
      }
    return o;
  }),
  (goog.events.ListenerMap.prototype.getListener = function (t, e, o, i) {
    var n = -1;
    return (
      (t = this.listeners[t.toString()]) &&
        (n = goog.events.ListenerMap.findListenerIndex_(t, e, o, i)),
      -1 < n ? t[n] : null
    );
  }),
  (goog.events.ListenerMap.prototype.hasListener = function (t, e) {
    var o = void 0 !== t,
      i = o ? t.toString() : "",
      n = void 0 !== e;
    return goog.object.some(this.listeners, function (t, l) {
      for (l = 0; l < t.length; ++l)
        if (!((o && t[l].type != i) || (n && t[l].capture != e))) return !0;
      return !1;
    });
  }),
  (goog.events.ListenerMap.findListenerIndex_ = function (t, e, o, i) {
    for (var n = 0; n < t.length; ++n) {
      var l = t[n];
      if (!l.removed && l.listener == e && l.capture == !!o && l.handler == i)
        return n;
    }
    return -1;
  }),
  (goog.events.LISTENER_MAP_PROP_ =
    "closure_lm_" + ((1e6 * Math.random()) | 0)),
  (goog.events.onString_ = "on"),
  (goog.events.onStringMap_ = {}),
  (goog.events.CaptureSimulationMode = {
    OFF_AND_FAIL: 0,
    OFF_AND_SILENT: 1,
    ON: 2,
  }),
  (goog.events.CAPTURE_SIMULATION_MODE = 2),
  (goog.events.listenerCountEstimate_ = 0),
  (goog.events.listen = function (t, e, o, i, n) {
    if (i && i.once) return goog.events.listenOnce(t, e, o, i, n);
    if (goog.isArray(e)) {
      for (var l = 0; l < e.length; l++) goog.events.listen(t, e[l], o, i, n);
      return null;
    }
    return (
      (o = goog.events.wrapListener(o)),
      goog.events.Listenable.isImplementedBy(t)
        ? ((i = goog.isObject(i) ? !!i.capture : !!i), t.listen(e, o, i, n))
        : goog.events.listen_(t, e, o, !1, i, n)
    );
  }),
  (goog.events.listen_ = function (t, e, o, i, n, l) {
    if (!e) throw Error("Invalid event type");
    var r = goog.isObject(n) ? !!n.capture : !!n;
    if (r && !goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT) {
      if (
        goog.events.CAPTURE_SIMULATION_MODE ==
        goog.events.CaptureSimulationMode.OFF_AND_FAIL
      )
        return (
          goog.asserts.fail("Can not register capture listener in IE8-."), null
        );
      if (
        goog.events.CAPTURE_SIMULATION_MODE ==
        goog.events.CaptureSimulationMode.OFF_AND_SILENT
      )
        return null;
    }
    var s = goog.events.getListenerMap_(t);
    if (
      (s ||
        (t[goog.events.LISTENER_MAP_PROP_] = s =
          new goog.events.ListenerMap(t)),
      (o = s.add(e, o, i, r, l)).proxy)
    )
      return o;
    if (
      ((i = goog.events.getProxy()),
      (o.proxy = i),
      (i.src = t),
      (i.listener = o),
      t.addEventListener)
    )
      goog.events.BrowserFeature.PASSIVE_EVENTS || (n = r),
        void 0 === n && (n = !1),
        t.addEventListener(e.toString(), i, n);
    else if (t.attachEvent)
      t.attachEvent(goog.events.getOnString_(e.toString()), i);
    else {
      if (!t.addListener || !t.removeListener)
        throw Error("addEventListener and attachEvent are unavailable.");
      goog.asserts.assert(
        "change" === e,
        "MediaQueryList only has a change event"
      ),
        t.addListener(i);
    }
    return goog.events.listenerCountEstimate_++, o;
  }),
  (goog.events.getProxy = function () {
    var t = goog.events.handleBrowserEvent_,
      e = goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT
        ? function (o) {
            return t.call(e.src, e.listener, o);
          }
        : function (o) {
            if (!(o = t.call(e.src, e.listener, o))) return o;
          };
    return e;
  }),
  (goog.events.listenOnce = function (t, e, o, i, n) {
    if (goog.isArray(e)) {
      for (var l = 0; l < e.length; l++)
        goog.events.listenOnce(t, e[l], o, i, n);
      return null;
    }
    return (
      (o = goog.events.wrapListener(o)),
      goog.events.Listenable.isImplementedBy(t)
        ? ((i = goog.isObject(i) ? !!i.capture : !!i), t.listenOnce(e, o, i, n))
        : goog.events.listen_(t, e, o, !0, i, n)
    );
  }),
  (goog.events.listenWithWrapper = function (t, e, o, i, n) {
    e.listen(t, o, i, n);
  }),
  (goog.events.unlisten = function (t, e, o, i, n) {
    if (goog.isArray(e)) {
      for (var l = 0; l < e.length; l++) goog.events.unlisten(t, e[l], o, i, n);
      return null;
    }
    return (
      (i = goog.isObject(i) ? !!i.capture : !!i),
      (o = goog.events.wrapListener(o)),
      goog.events.Listenable.isImplementedBy(t)
        ? t.unlisten(e, o, i, n)
        : !!t &&
          !(
            !(t = goog.events.getListenerMap_(t)) ||
            !(e = t.getListener(e, o, i, n))
          ) &&
          goog.events.unlistenByKey(e)
    );
  }),
  (goog.events.unlistenByKey = function (t) {
    if ("number" == typeof t || !t || t.removed) return !1;
    var e = t.src;
    if (goog.events.Listenable.isImplementedBy(e)) return e.unlistenByKey(t);
    var o = t.type,
      i = t.proxy;
    return (
      e.removeEventListener
        ? e.removeEventListener(o, i, t.capture)
        : e.detachEvent
        ? e.detachEvent(goog.events.getOnString_(o), i)
        : e.addListener && e.removeListener && e.removeListener(i),
      goog.events.listenerCountEstimate_--,
      (o = goog.events.getListenerMap_(e))
        ? (o.removeByKey(t),
          0 == o.getTypeCount() &&
            ((o.src = null), (e[goog.events.LISTENER_MAP_PROP_] = null)))
        : t.markAsRemoved(),
      !0
    );
  }),
  (goog.events.unlistenWithWrapper = function (t, e, o, i, n) {
    e.unlisten(t, o, i, n);
  }),
  (goog.events.removeAll = function (t, e) {
    if (!t) return 0;
    if (goog.events.Listenable.isImplementedBy(t))
      return t.removeAllListeners(e);
    if (!(t = goog.events.getListenerMap_(t))) return 0;
    var o = 0;
    for (var i in ((e = e && e.toString()), t.listeners))
      if (!e || i == e)
        for (var n = t.listeners[i].concat(), l = 0; l < n.length; ++l)
          goog.events.unlistenByKey(n[l]) && ++o;
    return o;
  }),
  (goog.events.getListeners = function (t, e, o) {
    return goog.events.Listenable.isImplementedBy(t) ||
      (t && (t = goog.events.getListenerMap_(t)))
      ? t.getListeners(e, o)
      : [];
  }),
  (goog.events.getListener = function (t, e, o, i, n) {
    return (
      (o = goog.events.wrapListener(o)),
      (i = !!i),
      goog.events.Listenable.isImplementedBy(t) ||
      (t && (t = goog.events.getListenerMap_(t)))
        ? t.getListener(e, o, i, n)
        : null
    );
  }),
  (goog.events.hasListener = function (t, e, o) {
    return (
      (goog.events.Listenable.isImplementedBy(t) ||
        !!(t = goog.events.getListenerMap_(t))) &&
      t.hasListener(e, o)
    );
  }),
  (goog.events.expose = function (t) {
    var e,
      o = [];
    for (e in t)
      t[e] && t[e].id
        ? o.push(e + " = " + t[e] + " (" + t[e].id + ")")
        : o.push(e + " = " + t[e]);
    return o.join("\n");
  }),
  (goog.events.getOnString_ = function (t) {
    return t in goog.events.onStringMap_
      ? goog.events.onStringMap_[t]
      : (goog.events.onStringMap_[t] = goog.events.onString_ + t);
  }),
  (goog.events.fireListeners = function (t, e, o, i) {
    return goog.events.Listenable.isImplementedBy(t)
      ? t.fireListeners(e, o, i)
      : goog.events.fireListeners_(t, e, o, i);
  }),
  (goog.events.fireListeners_ = function (t, e, o, i) {
    var n = !0;
    if ((t = goog.events.getListenerMap_(t)) && (e = t.listeners[e.toString()]))
      for (e = e.concat(), t = 0; t < e.length; t++) {
        var l = e[t];
        l &&
          l.capture == o &&
          !l.removed &&
          ((l = goog.events.fireListener(l, i)), (n = n && !1 !== l));
      }
    return n;
  }),
  (goog.events.fireListener = function (t, e) {
    var o = t.listener,
      i = t.handler || t.src;
    return t.callOnce && goog.events.unlistenByKey(t), o.call(i, e);
  }),
  (goog.events.getTotalListenerCount = function () {
    return goog.events.listenerCountEstimate_;
  }),
  (goog.events.dispatchEvent = function (t, e) {
    return (
      goog.asserts.assert(
        goog.events.Listenable.isImplementedBy(t),
        "Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."
      ),
      t.dispatchEvent(e)
    );
  }),
  (goog.events.protectBrowserEventEntryPoint = function (t) {
    goog.events.handleBrowserEvent_ = t.protectEntryPoint(
      goog.events.handleBrowserEvent_
    );
  }),
  (goog.events.handleBrowserEvent_ = function (t, e) {
    if (t.removed) return !0;
    if (!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT) {
      var o = e || goog.getObjectByName("window.event");
      e = new goog.events.BrowserEvent(o, this);
      var i = !0;
      if (
        goog.events.CAPTURE_SIMULATION_MODE ==
        goog.events.CaptureSimulationMode.ON
      ) {
        if (!goog.events.isMarkedIeEvent_(o)) {
          goog.events.markIeEvent_(o), (o = []);
          for (var n = e.currentTarget; n; n = n.parentNode) o.push(n);
          for (
            t = t.type, n = o.length - 1;
            !e.propagationStopped_ && 0 <= n;
            n--
          ) {
            e.currentTarget = o[n];
            var l = goog.events.fireListeners_(o[n], t, !0, e);
            i = i && l;
          }
          for (n = 0; !e.propagationStopped_ && n < o.length; n++)
            (e.currentTarget = o[n]),
              (l = goog.events.fireListeners_(o[n], t, !1, e)),
              (i = i && l);
        }
      } else i = goog.events.fireListener(t, e);
      return i;
    }
    return goog.events.fireListener(t, new goog.events.BrowserEvent(e, this));
  }),
  (goog.events.markIeEvent_ = function (t) {
    var e = !1;
    if (0 == t.keyCode)
      try {
        return void (t.keyCode = -1);
      } catch (t) {
        e = !0;
      }
    (e || null == t.returnValue) && (t.returnValue = !0);
  }),
  (goog.events.isMarkedIeEvent_ = function (t) {
    return 0 > t.keyCode || null != t.returnValue;
  }),
  (goog.events.uniqueIdCounter_ = 0),
  (goog.events.getUniqueId = function (t) {
    return t + "_" + goog.events.uniqueIdCounter_++;
  }),
  (goog.events.getListenerMap_ = function (t) {
    return (t = t[goog.events.LISTENER_MAP_PROP_]) instanceof
      goog.events.ListenerMap
      ? t
      : null;
  }),
  (goog.events.LISTENER_WRAPPER_PROP_ =
    "__closure_events_fn_" + ((1e9 * Math.random()) >>> 0)),
  (goog.events.wrapListener = function (t) {
    return (
      goog.asserts.assert(t, "Listener can not be null."),
      goog.isFunction(t)
        ? t
        : (goog.asserts.assert(
            t.handleEvent,
            "An object listener must have handleEvent method."
          ),
          t[goog.events.LISTENER_WRAPPER_PROP_] ||
            (t[goog.events.LISTENER_WRAPPER_PROP_] = function (e) {
              return t.handleEvent(e);
            }),
          t[goog.events.LISTENER_WRAPPER_PROP_])
    );
  }),
  goog.debug.entryPointRegistry.register(function (t) {
    goog.events.handleBrowserEvent_ = t(goog.events.handleBrowserEvent_);
  }),
  (goog.events.EventHandler = function (t) {
    goog.Disposable.call(this), (this.handler_ = t), (this.keys_ = {});
  }),
  goog.inherits(goog.events.EventHandler, goog.Disposable),
  (goog.events.EventHandler.typeArray_ = []),
  (goog.events.EventHandler.prototype.listen = function (t, e, o, i) {
    return this.listen_(t, e, o, i);
  }),
  (goog.events.EventHandler.prototype.listenWithScope = function (
    t,
    e,
    o,
    i,
    n
  ) {
    return this.listen_(t, e, o, i, n);
  }),
  (goog.events.EventHandler.prototype.listen_ = function (t, e, o, i, n) {
    goog.isArray(e) ||
      (e && (goog.events.EventHandler.typeArray_[0] = e.toString()),
      (e = goog.events.EventHandler.typeArray_));
    for (var l = 0; l < e.length; l++) {
      var r = goog.events.listen(
        t,
        e[l],
        o || this.handleEvent,
        i || !1,
        n || this.handler_ || this
      );
      if (!r) break;
      this.keys_[r.key] = r;
    }
    return this;
  }),
  (goog.events.EventHandler.prototype.listenOnce = function (t, e, o, i) {
    return this.listenOnce_(t, e, o, i);
  }),
  (goog.events.EventHandler.prototype.listenOnceWithScope = function (
    t,
    e,
    o,
    i,
    n
  ) {
    return this.listenOnce_(t, e, o, i, n);
  }),
  (goog.events.EventHandler.prototype.listenOnce_ = function (t, e, o, i, n) {
    if (goog.isArray(e))
      for (var l = 0; l < e.length; l++) this.listenOnce_(t, e[l], o, i, n);
    else {
      if (
        !(t = goog.events.listenOnce(
          t,
          e,
          o || this.handleEvent,
          i,
          n || this.handler_ || this
        ))
      )
        return this;
      this.keys_[t.key] = t;
    }
    return this;
  }),
  (goog.events.EventHandler.prototype.listenWithWrapper = function (
    t,
    e,
    o,
    i
  ) {
    return this.listenWithWrapper_(t, e, o, i);
  }),
  (goog.events.EventHandler.prototype.listenWithWrapperAndScope = function (
    t,
    e,
    o,
    i,
    n
  ) {
    return this.listenWithWrapper_(t, e, o, i, n);
  }),
  (goog.events.EventHandler.prototype.listenWithWrapper_ = function (
    t,
    e,
    o,
    i,
    n
  ) {
    return e.listen(t, o, i, n || this.handler_ || this, this), this;
  }),
  (goog.events.EventHandler.prototype.getListenerCount = function () {
    var t,
      e = 0;
    for (t in this.keys_)
      Object.prototype.hasOwnProperty.call(this.keys_, t) && e++;
    return e;
  }),
  (goog.events.EventHandler.prototype.unlisten = function (t, e, o, i, n) {
    if (goog.isArray(e))
      for (var l = 0; l < e.length; l++) this.unlisten(t, e[l], o, i, n);
    else
      (i = goog.isObject(i) ? !!i.capture : !!i),
        (t = goog.events.getListener(
          t,
          e,
          o || this.handleEvent,
          i,
          n || this.handler_ || this
        )) && (goog.events.unlistenByKey(t), delete this.keys_[t.key]);
    return this;
  }),
  (goog.events.EventHandler.prototype.unlistenWithWrapper = function (
    t,
    e,
    o,
    i,
    n
  ) {
    return e.unlisten(t, o, i, n || this.handler_ || this, this), this;
  }),
  (goog.events.EventHandler.prototype.removeAll = function () {
    goog.object.forEach(
      this.keys_,
      function (t, e) {
        this.keys_.hasOwnProperty(e) && goog.events.unlistenByKey(t);
      },
      this
    ),
      (this.keys_ = {});
  }),
  (goog.events.EventHandler.prototype.disposeInternal = function () {
    goog.events.EventHandler.superClass_.disposeInternal.call(this),
      this.removeAll();
  }),
  (goog.events.EventHandler.prototype.handleEvent = function (t) {
    throw Error("EventHandler.handleEvent not implemented");
  }),
  (goog.events.EventTarget = function () {
    goog.Disposable.call(this),
      (this.eventTargetListeners_ = new goog.events.ListenerMap(this)),
      (this.actualEventTarget_ = this),
      (this.parentEventTarget_ = null);
  }),
  goog.inherits(goog.events.EventTarget, goog.Disposable),
  goog.events.Listenable.addImplementation(goog.events.EventTarget),
  (goog.events.EventTarget.MAX_ANCESTORS_ = 1e3),
  (goog.events.EventTarget.prototype.getParentEventTarget = function () {
    return this.parentEventTarget_;
  }),
  (goog.events.EventTarget.prototype.setParentEventTarget = function (t) {
    this.parentEventTarget_ = t;
  }),
  (goog.events.EventTarget.prototype.addEventListener = function (t, e, o, i) {
    goog.events.listen(this, t, e, o, i);
  }),
  (goog.events.EventTarget.prototype.removeEventListener = function (
    t,
    e,
    o,
    i
  ) {
    goog.events.unlisten(this, t, e, o, i);
  }),
  (goog.events.EventTarget.prototype.dispatchEvent = function (t) {
    this.assertInitialized_();
    var e = this.getParentEventTarget();
    if (e)
      for (var o = [], i = 1; e; e = e.getParentEventTarget())
        o.push(e),
          goog.asserts.assert(
            ++i < goog.events.EventTarget.MAX_ANCESTORS_,
            "infinite loop"
          );
    return goog.events.EventTarget.dispatchEventInternal_(
      this.actualEventTarget_,
      t,
      o
    );
  }),
  (goog.events.EventTarget.prototype.disposeInternal = function () {
    goog.events.EventTarget.superClass_.disposeInternal.call(this),
      this.removeAllListeners(),
      (this.parentEventTarget_ = null);
  }),
  (goog.events.EventTarget.prototype.listen = function (t, e, o, i) {
    return (
      this.assertInitialized_(),
      this.eventTargetListeners_.add(String(t), e, !1, o, i)
    );
  }),
  (goog.events.EventTarget.prototype.listenOnce = function (t, e, o, i) {
    return this.eventTargetListeners_.add(String(t), e, !0, o, i);
  }),
  (goog.events.EventTarget.prototype.unlisten = function (t, e, o, i) {
    return this.eventTargetListeners_.remove(String(t), e, o, i);
  }),
  (goog.events.EventTarget.prototype.unlistenByKey = function (t) {
    return this.eventTargetListeners_.removeByKey(t);
  }),
  (goog.events.EventTarget.prototype.removeAllListeners = function (t) {
    return this.eventTargetListeners_
      ? this.eventTargetListeners_.removeAll(t)
      : 0;
  }),
  (goog.events.EventTarget.prototype.fireListeners = function (t, e, o) {
    if (!(t = this.eventTargetListeners_.listeners[String(t)])) return !0;
    t = t.concat();
    for (var i = !0, n = 0; n < t.length; ++n) {
      var l = t[n];
      if (l && !l.removed && l.capture == e) {
        var r = l.listener,
          s = l.handler || l.src;
        l.callOnce && this.unlistenByKey(l), (i = !1 !== r.call(s, o) && i);
      }
    }
    return i && 0 != o.returnValue_;
  }),
  (goog.events.EventTarget.prototype.getListeners = function (t, e) {
    return this.eventTargetListeners_.getListeners(String(t), e);
  }),
  (goog.events.EventTarget.prototype.getListener = function (t, e, o, i) {
    return this.eventTargetListeners_.getListener(String(t), e, o, i);
  }),
  (goog.events.EventTarget.prototype.hasListener = function (t, e) {
    return this.eventTargetListeners_.hasListener(
      void 0 !== t ? String(t) : void 0,
      e
    );
  }),
  (goog.events.EventTarget.prototype.setTargetForTesting = function (t) {
    this.actualEventTarget_ = t;
  }),
  (goog.events.EventTarget.prototype.assertInitialized_ = function () {
    goog.asserts.assert(
      this.eventTargetListeners_,
      "Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?"
    );
  }),
  (goog.events.EventTarget.dispatchEventInternal_ = function (t, e, o) {
    var i = e.type || e;
    if ("string" == typeof e) e = new goog.events.Event(e, t);
    else if (e instanceof goog.events.Event) e.target = e.target || t;
    else {
      var n = e;
      (e = new goog.events.Event(i, t)), goog.object.extend(e, n);
    }
    if (((n = !0), o))
      for (var l = o.length - 1; !e.propagationStopped_ && 0 <= l; l--) {
        var r = (e.currentTarget = o[l]);
        n = r.fireListeners(i, !0, e) && n;
      }
    if (
      (e.propagationStopped_ ||
        ((n = (r = e.currentTarget = t).fireListeners(i, !0, e) && n),
        e.propagationStopped_ || (n = r.fireListeners(i, !1, e) && n)),
      o)
    )
      for (l = 0; !e.propagationStopped_ && l < o.length; l++)
        n = (r = e.currentTarget = o[l]).fireListeners(i, !1, e) && n;
    return n;
  }),
  (goog.ui = {}),
  (goog.ui.IdGenerator = function () {}),
  goog.addSingletonGetter(goog.ui.IdGenerator),
  (goog.ui.IdGenerator.prototype.nextId_ = 0),
  (goog.ui.IdGenerator.prototype.idPrefix_ = ""),
  (goog.ui.IdGenerator.prototype.setIdPrefix = function (t) {
    this.idPrefix_ = t;
  }),
  (goog.ui.IdGenerator.prototype.getNextUniqueId = function () {
    return this.idPrefix_ + ":" + (this.nextId_++).toString(36);
  }),
  (goog.ui.Component = function (t) {
    goog.events.EventTarget.call(this),
      (this.dom_ = t || goog.dom.getDomHelper()),
      (this.rightToLeft_ = goog.ui.Component.defaultRightToLeft_),
      (this.id_ = null),
      (this.inDocument_ = !1),
      (this.element_ = null),
      (this.googUiComponentHandler_ = void 0),
      (this.childIndex_ = this.children_ = this.parent_ = this.model_ = null),
      (this.pointerEventsEnabled_ = this.wasDecorated_ = !1);
  }),
  goog.inherits(goog.ui.Component, goog.events.EventTarget),
  (goog.ui.Component.ALLOW_DETACHED_DECORATION = !1),
  (goog.ui.Component.prototype.idGenerator_ =
    goog.ui.IdGenerator.getInstance()),
  (goog.ui.Component.DEFAULT_BIDI_DIR = 0),
  (goog.ui.Component.defaultRightToLeft_ =
    1 != goog.ui.Component.DEFAULT_BIDI_DIR &&
    (-1 == goog.ui.Component.DEFAULT_BIDI_DIR || null)),
  (goog.ui.Component.EventType = {
    BEFORE_SHOW: "beforeshow",
    SHOW: "show",
    HIDE: "hide",
    DISABLE: "disable",
    ENABLE: "enable",
    HIGHLIGHT: "highlight",
    UNHIGHLIGHT: "unhighlight",
    ACTIVATE: "activate",
    DEACTIVATE: "deactivate",
    SELECT: "select",
    UNSELECT: "unselect",
    CHECK: "check",
    UNCHECK: "uncheck",
    FOCUS: "focus",
    BLUR: "blur",
    OPEN: "open",
    CLOSE: "close",
    ENTER: "enter",
    LEAVE: "leave",
    ACTION: "action",
    CHANGE: "change",
  }),
  (goog.ui.Component.Error = {
    NOT_SUPPORTED: "Method not supported",
    DECORATE_INVALID: "Invalid element to decorate",
    ALREADY_RENDERED: "Component already rendered",
    PARENT_UNABLE_TO_BE_SET: "Unable to set parent component",
    CHILD_INDEX_OUT_OF_BOUNDS: "Child component index out of bounds",
    NOT_OUR_CHILD: "Child is not in parent component",
    NOT_IN_DOCUMENT:
      "Operation not supported while component is not in document",
    STATE_INVALID: "Invalid component state",
  }),
  (goog.ui.Component.State = {
    ALL: 255,
    DISABLED: 1,
    HOVER: 2,
    ACTIVE: 4,
    SELECTED: 8,
    CHECKED: 16,
    FOCUSED: 32,
    OPENED: 64,
  }),
  (goog.ui.Component.getStateTransitionEvent = function (t, e) {
    switch (t) {
      case goog.ui.Component.State.DISABLED:
        return e
          ? goog.ui.Component.EventType.DISABLE
          : goog.ui.Component.EventType.ENABLE;
      case goog.ui.Component.State.HOVER:
        return e
          ? goog.ui.Component.EventType.HIGHLIGHT
          : goog.ui.Component.EventType.UNHIGHLIGHT;
      case goog.ui.Component.State.ACTIVE:
        return e
          ? goog.ui.Component.EventType.ACTIVATE
          : goog.ui.Component.EventType.DEACTIVATE;
      case goog.ui.Component.State.SELECTED:
        return e
          ? goog.ui.Component.EventType.SELECT
          : goog.ui.Component.EventType.UNSELECT;
      case goog.ui.Component.State.CHECKED:
        return e
          ? goog.ui.Component.EventType.CHECK
          : goog.ui.Component.EventType.UNCHECK;
      case goog.ui.Component.State.FOCUSED:
        return e
          ? goog.ui.Component.EventType.FOCUS
          : goog.ui.Component.EventType.BLUR;
      case goog.ui.Component.State.OPENED:
        return e
          ? goog.ui.Component.EventType.OPEN
          : goog.ui.Component.EventType.CLOSE;
    }
    throw Error(goog.ui.Component.Error.STATE_INVALID);
  }),
  (goog.ui.Component.setDefaultRightToLeft = function (t) {
    goog.ui.Component.defaultRightToLeft_ = t;
  }),
  (goog.ui.Component.prototype.getId = function () {
    return this.id_ || (this.id_ = this.idGenerator_.getNextUniqueId());
  }),
  (goog.ui.Component.prototype.setId = function (t) {
    this.parent_ &&
      this.parent_.childIndex_ &&
      (goog.object.remove(this.parent_.childIndex_, this.id_),
      goog.object.add(this.parent_.childIndex_, t, this)),
      (this.id_ = t);
  }),
  (goog.ui.Component.prototype.getElement = function () {
    return this.element_;
  }),
  (goog.ui.Component.prototype.getElementStrict = function () {
    var t = this.element_;
    return (
      goog.asserts.assert(
        t,
        "Can not call getElementStrict before rendering/decorating."
      ),
      t
    );
  }),
  (goog.ui.Component.prototype.setElementInternal = function (t) {
    this.element_ = t;
  }),
  (goog.ui.Component.prototype.getElementsByClass = function (t) {
    return this.element_ ? this.dom_.getElementsByClass(t, this.element_) : [];
  }),
  (goog.ui.Component.prototype.getElementByClass = function (t) {
    return this.element_ ? this.dom_.getElementByClass(t, this.element_) : null;
  }),
  (goog.ui.Component.prototype.getRequiredElementByClass = function (t) {
    var e = this.getElementByClass(t);
    return (
      goog.asserts.assert(e, "Expected element in component with class: %s", t),
      e
    );
  }),
  (goog.ui.Component.prototype.getHandler = function () {
    return (
      this.googUiComponentHandler_ ||
        (this.googUiComponentHandler_ = new goog.events.EventHandler(this)),
      goog.asserts.assert(this.googUiComponentHandler_)
    );
  }),
  (goog.ui.Component.prototype.setParent = function (t) {
    if (this == t) throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);
    if (
      t &&
      this.parent_ &&
      this.id_ &&
      this.parent_.getChild(this.id_) &&
      this.parent_ != t
    )
      throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);
    (this.parent_ = t),
      goog.ui.Component.superClass_.setParentEventTarget.call(this, t);
  }),
  (goog.ui.Component.prototype.getParent = function () {
    return this.parent_;
  }),
  (goog.ui.Component.prototype.setParentEventTarget = function (t) {
    if (this.parent_ && this.parent_ != t)
      throw Error(goog.ui.Component.Error.NOT_SUPPORTED);
    goog.ui.Component.superClass_.setParentEventTarget.call(this, t);
  }),
  (goog.ui.Component.prototype.getDomHelper = function () {
    return this.dom_;
  }),
  (goog.ui.Component.prototype.isInDocument = function () {
    return this.inDocument_;
  }),
  (goog.ui.Component.prototype.createDom = function () {
    this.element_ = this.dom_.createElement("DIV");
  }),
  (goog.ui.Component.prototype.render = function (t) {
    this.render_(t);
  }),
  (goog.ui.Component.prototype.renderBefore = function (t) {
    this.render_(t.parentNode, t);
  }),
  (goog.ui.Component.prototype.render_ = function (t, e) {
    if (this.inDocument_) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.element_ || this.createDom(),
      t
        ? t.insertBefore(this.element_, e || null)
        : this.dom_.getDocument().body.appendChild(this.element_),
      (this.parent_ && !this.parent_.isInDocument()) || this.enterDocument();
  }),
  (goog.ui.Component.prototype.decorate = function (t) {
    if (this.inDocument_) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    if (!t || !this.canDecorate(t))
      throw Error(goog.ui.Component.Error.DECORATE_INVALID);
    this.wasDecorated_ = !0;
    var e = goog.dom.getOwnerDocument(t);
    (this.dom_ && this.dom_.getDocument() == e) ||
      (this.dom_ = goog.dom.getDomHelper(t)),
      this.decorateInternal(t),
      (goog.ui.Component.ALLOW_DETACHED_DECORATION &&
        !goog.dom.contains(e, t)) ||
        this.enterDocument();
  }),
  (goog.ui.Component.prototype.canDecorate = function (t) {
    return !0;
  }),
  (goog.ui.Component.prototype.wasDecorated = function () {
    return this.wasDecorated_;
  }),
  (goog.ui.Component.prototype.decorateInternal = function (t) {
    this.element_ = t;
  }),
  (goog.ui.Component.prototype.enterDocument = function () {
    (this.inDocument_ = !0),
      this.forEachChild(function (t) {
        !t.isInDocument() && t.getElement() && t.enterDocument();
      });
  }),
  (goog.ui.Component.prototype.exitDocument = function () {
    this.forEachChild(function (t) {
      t.isInDocument() && t.exitDocument();
    }),
      this.googUiComponentHandler_ && this.googUiComponentHandler_.removeAll(),
      (this.inDocument_ = !1);
  }),
  (goog.ui.Component.prototype.disposeInternal = function () {
    this.inDocument_ && this.exitDocument(),
      this.googUiComponentHandler_ &&
        (this.googUiComponentHandler_.dispose(),
        delete this.googUiComponentHandler_),
      this.forEachChild(function (t) {
        t.dispose();
      }),
      !this.wasDecorated_ &&
        this.element_ &&
        goog.dom.removeNode(this.element_),
      (this.parent_ =
        this.model_ =
        this.element_ =
        this.childIndex_ =
        this.children_ =
          null),
      goog.ui.Component.superClass_.disposeInternal.call(this);
  }),
  (goog.ui.Component.prototype.makeId = function (t) {
    return this.getId() + "." + t;
  }),
  (goog.ui.Component.prototype.makeIds = function (t) {
    var e,
      o = {};
    for (e in t) o[e] = this.makeId(t[e]);
    return o;
  }),
  (goog.ui.Component.prototype.getModel = function () {
    return this.model_;
  }),
  (goog.ui.Component.prototype.setModel = function (t) {
    this.model_ = t;
  }),
  (goog.ui.Component.prototype.getFragmentFromId = function (t) {
    return t.substring(this.getId().length + 1);
  }),
  (goog.ui.Component.prototype.getElementByFragment = function (t) {
    if (!this.inDocument_) throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);
    return this.dom_.getElement(this.makeId(t));
  }),
  (goog.ui.Component.prototype.addChild = function (t, e) {
    this.addChildAt(t, this.getChildCount(), e);
  }),
  (goog.ui.Component.prototype.addChildAt = function (t, e, o) {
    if (
      (goog.asserts.assert(!!t, "Provided element must not be null."),
      t.inDocument_ && (o || !this.inDocument_))
    )
      throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    if (0 > e || e > this.getChildCount())
      throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);
    (this.childIndex_ && this.children_) ||
      ((this.childIndex_ = {}), (this.children_ = [])),
      t.getParent() == this
        ? (goog.object.set(this.childIndex_, t.getId(), t),
          goog.array.remove(this.children_, t))
        : goog.object.add(this.childIndex_, t.getId(), t),
      t.setParent(this),
      goog.array.insertAt(this.children_, t, e),
      t.inDocument_ && this.inDocument_ && t.getParent() == this
        ? (e = (o = this.getContentElement()).childNodes[e] || null) !=
            t.getElement() && o.insertBefore(t.getElement(), e)
        : o
        ? (this.element_ || this.createDom(),
          (e = this.getChildAt(e + 1)),
          t.render_(this.getContentElement(), e ? e.element_ : null))
        : this.inDocument_ &&
          !t.inDocument_ &&
          t.element_ &&
          t.element_.parentNode &&
          t.element_.parentNode.nodeType == goog.dom.NodeType.ELEMENT &&
          t.enterDocument();
  }),
  (goog.ui.Component.prototype.getContentElement = function () {
    return this.element_;
  }),
  (goog.ui.Component.prototype.isRightToLeft = function () {
    return (
      null == this.rightToLeft_ &&
        (this.rightToLeft_ = goog.style.isRightToLeft(
          this.inDocument_ ? this.element_ : this.dom_.getDocument().body
        )),
      this.rightToLeft_
    );
  }),
  (goog.ui.Component.prototype.setRightToLeft = function (t) {
    if (this.inDocument_) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.rightToLeft_ = t;
  }),
  (goog.ui.Component.prototype.hasChildren = function () {
    return !!this.children_ && 0 != this.children_.length;
  }),
  (goog.ui.Component.prototype.getChildCount = function () {
    return this.children_ ? this.children_.length : 0;
  }),
  (goog.ui.Component.prototype.getChildIds = function () {
    var t = [];
    return (
      this.forEachChild(function (e) {
        t.push(e.getId());
      }),
      t
    );
  }),
  (goog.ui.Component.prototype.getChild = function (t) {
    return (
      (this.childIndex_ && t && goog.object.get(this.childIndex_, t)) || null
    );
  }),
  (goog.ui.Component.prototype.getChildAt = function (t) {
    return (this.children_ && this.children_[t]) || null;
  }),
  (goog.ui.Component.prototype.forEachChild = function (t, e) {
    this.children_ && goog.array.forEach(this.children_, t, e);
  }),
  (goog.ui.Component.prototype.indexOfChild = function (t) {
    return this.children_ && t ? goog.array.indexOf(this.children_, t) : -1;
  }),
  (goog.ui.Component.prototype.removeChild = function (t, e) {
    if (t) {
      var o = "string" == typeof t ? t : t.getId();
      (t = this.getChild(o)),
        o &&
          t &&
          (goog.object.remove(this.childIndex_, o),
          goog.array.remove(this.children_, t),
          e &&
            (t.exitDocument(), t.element_ && goog.dom.removeNode(t.element_)),
          t.setParent(null));
    }
    if (!t) throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);
    return t;
  }),
  (goog.ui.Component.prototype.removeChildAt = function (t, e) {
    return this.removeChild(this.getChildAt(t), e);
  }),
  (goog.ui.Component.prototype.removeChildren = function (t) {
    for (var e = []; this.hasChildren(); ) e.push(this.removeChildAt(0, t));
    return e;
  }),
  (goog.ui.Component.prototype.pointerEventsEnabled = function () {
    return this.pointerEventsEnabled_;
  }),
  (goog.ui.Component.prototype.setPointerEventsEnabled = function (t) {
    if (this.inDocument_) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.pointerEventsEnabled_ = t;
  }),
  (goog.ui.ControlRenderer = function () {}),
  goog.addSingletonGetter(goog.ui.ControlRenderer),
  goog.tagUnsealableClass(goog.ui.ControlRenderer),
  (goog.ui.ControlRenderer.getCustomRenderer = function (t, e) {
    return (
      ((t = new t()).getCssClass = function () {
        return e;
      }),
      t
    );
  }),
  (goog.ui.ControlRenderer.CSS_CLASS = "goog-control"),
  (goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS = []),
  (goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_ = goog.object.create(
    goog.a11y.aria.Role.BUTTON,
    goog.a11y.aria.State.PRESSED,
    goog.a11y.aria.Role.CHECKBOX,
    goog.a11y.aria.State.CHECKED,
    goog.a11y.aria.Role.MENU_ITEM,
    goog.a11y.aria.State.SELECTED,
    goog.a11y.aria.Role.MENU_ITEM_CHECKBOX,
    goog.a11y.aria.State.CHECKED,
    goog.a11y.aria.Role.MENU_ITEM_RADIO,
    goog.a11y.aria.State.CHECKED,
    goog.a11y.aria.Role.RADIO,
    goog.a11y.aria.State.CHECKED,
    goog.a11y.aria.Role.TAB,
    goog.a11y.aria.State.SELECTED,
    goog.a11y.aria.Role.TREEITEM,
    goog.a11y.aria.State.SELECTED
  )),
  (goog.ui.ControlRenderer.prototype.getAriaRole = function () {}),
  (goog.ui.ControlRenderer.prototype.createDom = function (t) {
    return t
      .getDomHelper()
      .createDom("DIV", this.getClassNames(t).join(" "), t.getContent());
  }),
  (goog.ui.ControlRenderer.prototype.getContentElement = function (t) {
    return t;
  }),
  (goog.ui.ControlRenderer.prototype.enableClassName = function (t, e, o) {
    if ((t = t.getElement ? t.getElement() : t)) {
      var i = [e];
      goog.userAgent.IE &&
        !goog.userAgent.isVersionOrHigher("7") &&
        (i = this.getAppliedCombinedClassNames_(
          goog.dom.classlist.get(t),
          e
        )).push(e),
        goog.dom.classlist.enableAll(t, i, o);
    }
  }),
  (goog.ui.ControlRenderer.prototype.enableExtraClassName = function (t, e, o) {
    this.enableClassName(t, e, o);
  }),
  (goog.ui.ControlRenderer.prototype.canDecorate = function (t) {
    return !0;
  }),
  (goog.ui.ControlRenderer.prototype.decorate = function (t, e) {
    e.id && t.setId(e.id);
    var o = this.getContentElement(e);
    o && o.firstChild
      ? t.setContentInternal(
          o.firstChild.nextSibling
            ? goog.array.clone(o.childNodes)
            : o.firstChild
        )
      : t.setContentInternal(null);
    var i = 0,
      n = this.getCssClass(),
      l = this.getStructuralCssClass(),
      r = !1,
      s = !1,
      a = !1,
      c = goog.array.toArray(goog.dom.classlist.get(e));
    if (
      (goog.array.forEach(
        c,
        function (t) {
          r || t != n
            ? s || t != l
              ? (i |= this.getStateFromClass(t))
              : (s = !0)
            : ((r = !0), l == n && (s = !0)),
            this.getStateFromClass(t) == goog.ui.Component.State.DISABLED &&
              (goog.asserts.assertElement(o),
              goog.dom.isFocusableTabIndex(o) &&
                goog.dom.setFocusableTabIndex(o, !1));
        },
        this
      ),
      t.setStateInternal(i),
      r || (c.push(n), l == n && (s = !0)),
      s || c.push(l),
      (t = t.getExtraClassNames()) && c.push.apply(c, t),
      goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("7"))
    ) {
      var g = this.getAppliedCombinedClassNames_(c);
      0 < g.length && (c.push.apply(c, g), (a = !0));
    }
    return (r && s && !t && !a) || goog.dom.classlist.set(e, c.join(" ")), e;
  }),
  (goog.ui.ControlRenderer.prototype.initializeDom = function (t) {
    t.isRightToLeft() && this.setRightToLeft(t.getElement(), !0),
      t.isEnabled() && this.setFocusable(t, t.isVisible());
  }),
  (goog.ui.ControlRenderer.prototype.setAriaRole = function (t, e) {
    (e = e || this.getAriaRole()) &&
      (goog.asserts.assert(
        t,
        "The element passed as a first parameter cannot be null."
      ),
      e != goog.a11y.aria.getRole(t) && goog.a11y.aria.setRole(t, e));
  }),
  (goog.ui.ControlRenderer.prototype.setAriaStates = function (t, e) {
    goog.asserts.assert(t), goog.asserts.assert(e);
    var o = t.getAriaLabel();
    null != o && this.setAriaLabel(e, o),
      t.isVisible() ||
        goog.a11y.aria.setState(e, goog.a11y.aria.State.HIDDEN, !t.isVisible()),
      t.isEnabled() ||
        this.updateAriaState(
          e,
          goog.ui.Component.State.DISABLED,
          !t.isEnabled()
        ),
      t.isSupportedState(goog.ui.Component.State.SELECTED) &&
        this.updateAriaState(
          e,
          goog.ui.Component.State.SELECTED,
          t.isSelected()
        ),
      t.isSupportedState(goog.ui.Component.State.CHECKED) &&
        this.updateAriaState(e, goog.ui.Component.State.CHECKED, t.isChecked()),
      t.isSupportedState(goog.ui.Component.State.OPENED) &&
        this.updateAriaState(e, goog.ui.Component.State.OPENED, t.isOpen());
  }),
  (goog.ui.ControlRenderer.prototype.setAriaLabel = function (t, e) {
    goog.a11y.aria.setLabel(t, e);
  }),
  (goog.ui.ControlRenderer.prototype.setAllowTextSelection = function (t, e) {
    goog.style.setUnselectable(
      t,
      !e,
      !goog.userAgent.IE && !goog.userAgent.OPERA
    );
  }),
  (goog.ui.ControlRenderer.prototype.setRightToLeft = function (t, e) {
    this.enableClassName(t, this.getStructuralCssClass() + "-rtl", e);
  }),
  (goog.ui.ControlRenderer.prototype.isFocusable = function (t) {
    var e;
    return (
      !(
        !t.isSupportedState(goog.ui.Component.State.FOCUSED) ||
        !(e = t.getKeyEventTarget())
      ) && goog.dom.isFocusableTabIndex(e)
    );
  }),
  (goog.ui.ControlRenderer.prototype.setFocusable = function (t, e) {
    var o;
    if (
      t.isSupportedState(goog.ui.Component.State.FOCUSED) &&
      (o = t.getKeyEventTarget())
    ) {
      if (!e && t.isFocused()) {
        try {
          o.blur();
        } catch (t) {}
        t.isFocused() && t.handleBlur(null);
      }
      goog.dom.isFocusableTabIndex(o) != e &&
        goog.dom.setFocusableTabIndex(o, e);
    }
  }),
  (goog.ui.ControlRenderer.prototype.setVisible = function (t, e) {
    goog.style.setElementShown(t, e),
      t && goog.a11y.aria.setState(t, goog.a11y.aria.State.HIDDEN, !e);
  }),
  (goog.ui.ControlRenderer.prototype.setState = function (t, e, o) {
    var i = t.getElement();
    if (i) {
      var n = this.getClassForState(e);
      n && this.enableClassName(t, n, o), this.updateAriaState(i, e, o);
    }
  }),
  (goog.ui.ControlRenderer.prototype.updateAriaState = function (t, e, o) {
    goog.ui.ControlRenderer.ariaAttributeMap_ ||
      (goog.ui.ControlRenderer.ariaAttributeMap_ = goog.object.create(
        goog.ui.Component.State.DISABLED,
        goog.a11y.aria.State.DISABLED,
        goog.ui.Component.State.SELECTED,
        goog.a11y.aria.State.SELECTED,
        goog.ui.Component.State.CHECKED,
        goog.a11y.aria.State.CHECKED,
        goog.ui.Component.State.OPENED,
        goog.a11y.aria.State.EXPANDED
      )),
      goog.asserts.assert(
        t,
        "The element passed as a first parameter cannot be null."
      ),
      (e = goog.ui.ControlRenderer.getAriaStateForAriaRole_(
        t,
        goog.ui.ControlRenderer.ariaAttributeMap_[e]
      )) && goog.a11y.aria.setState(t, e, o);
  }),
  (goog.ui.ControlRenderer.getAriaStateForAriaRole_ = function (t, e) {
    return (t = goog.a11y.aria.getRole(t))
      ? ((t = goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_[t] || e),
        goog.ui.ControlRenderer.isAriaState_(e) ? t : e)
      : e;
  }),
  (goog.ui.ControlRenderer.isAriaState_ = function (t) {
    return (
      t == goog.a11y.aria.State.CHECKED || t == goog.a11y.aria.State.SELECTED
    );
  }),
  (goog.ui.ControlRenderer.prototype.setContent = function (t, e) {
    var o = this.getContentElement(t);
    o &&
      (goog.dom.removeChildren(o),
      e &&
        ("string" == typeof e
          ? goog.dom.setTextContent(o, e)
          : ((t = function (t) {
              if (t) {
                var e = goog.dom.getOwnerDocument(o);
                o.appendChild("string" == typeof t ? e.createTextNode(t) : t);
              }
            }),
            goog.isArray(e)
              ? goog.array.forEach(e, t)
              : !goog.isArrayLike(e) || "nodeType" in e
              ? t(e)
              : goog.array.forEach(goog.array.clone(e), t))));
  }),
  (goog.ui.ControlRenderer.prototype.getKeyEventTarget = function (t) {
    return t.getElement();
  }),
  (goog.ui.ControlRenderer.prototype.getCssClass = function () {
    return goog.ui.ControlRenderer.CSS_CLASS;
  }),
  (goog.ui.ControlRenderer.prototype.getIe6ClassCombinations = function () {
    return [];
  }),
  (goog.ui.ControlRenderer.prototype.getStructuralCssClass = function () {
    return this.getCssClass();
  }),
  (goog.ui.ControlRenderer.prototype.getClassNames = function (t) {
    var e = this.getCssClass(),
      o = [e],
      i = this.getStructuralCssClass();
    return (
      i != e && o.push(i),
      (e = this.getClassNamesForState(t.getState())),
      o.push.apply(o, e),
      (t = t.getExtraClassNames()) && o.push.apply(o, t),
      goog.userAgent.IE &&
        !goog.userAgent.isVersionOrHigher("7") &&
        o.push.apply(o, this.getAppliedCombinedClassNames_(o)),
      o
    );
  }),
  (goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_ = function (
    t,
    e
  ) {
    var o = [];
    return (
      e && (t = goog.array.concat(t, [e])),
      goog.array.forEach(this.getIe6ClassCombinations(), function (i) {
        !goog.array.every(i, goog.partial(goog.array.contains, t)) ||
          (e && !goog.array.contains(i, e)) ||
          o.push(i.join("_"));
      }),
      o
    );
  }),
  (goog.ui.ControlRenderer.prototype.getClassNamesForState = function (t) {
    for (var e = []; t; ) {
      var o = t & -t;
      e.push(this.getClassForState(o)), (t &= ~o);
    }
    return e;
  }),
  (goog.ui.ControlRenderer.prototype.getClassForState = function (t) {
    return (
      this.classByState_ || this.createClassByStateMap_(), this.classByState_[t]
    );
  }),
  (goog.ui.ControlRenderer.prototype.getStateFromClass = function (t) {
    return (
      this.stateByClass_ || this.createStateByClassMap_(),
      (t = parseInt(this.stateByClass_[t], 10)),
      isNaN(t) ? 0 : t
    );
  }),
  (goog.ui.ControlRenderer.prototype.createClassByStateMap_ = function () {
    var t = this.getStructuralCssClass(),
      e = !goog.string.contains(goog.string.normalizeWhitespace(t), " ");
    goog.asserts.assert(
      e,
      "ControlRenderer has an invalid css class: '" + t + "'"
    ),
      (this.classByState_ = goog.object.create(
        goog.ui.Component.State.DISABLED,
        t + "-disabled",
        goog.ui.Component.State.HOVER,
        t + "-hover",
        goog.ui.Component.State.ACTIVE,
        t + "-active",
        goog.ui.Component.State.SELECTED,
        t + "-selected",
        goog.ui.Component.State.CHECKED,
        t + "-checked",
        goog.ui.Component.State.FOCUSED,
        t + "-focused",
        goog.ui.Component.State.OPENED,
        t + "-open"
      ));
  }),
  (goog.ui.ControlRenderer.prototype.createStateByClassMap_ = function () {
    this.classByState_ || this.createClassByStateMap_(),
      (this.stateByClass_ = goog.object.transpose(this.classByState_));
  }),
  (goog.ui.MenuSeparatorRenderer = function () {
    goog.ui.ControlRenderer.call(this);
  }),
  goog.inherits(goog.ui.MenuSeparatorRenderer, goog.ui.ControlRenderer),
  goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer),
  (goog.ui.MenuSeparatorRenderer.CSS_CLASS = "goog-menuseparator"),
  (goog.ui.MenuSeparatorRenderer.prototype.createDom = function (t) {
    return t.getDomHelper().createDom("DIV", this.getCssClass());
  }),
  (goog.ui.MenuSeparatorRenderer.prototype.decorate = function (t, e) {
    if ((e.id && t.setId(e.id), "HR" == e.tagName)) {
      var o = e;
      (e = this.createDom(t)),
        goog.dom.insertSiblingBefore(e, o),
        goog.dom.removeNode(o);
    } else goog.dom.classlist.add(e, this.getCssClass());
    return e;
  }),
  (goog.ui.MenuSeparatorRenderer.prototype.setContent = function (t, e) {}),
  (goog.ui.MenuSeparatorRenderer.prototype.getCssClass = function () {
    return goog.ui.MenuSeparatorRenderer.CSS_CLASS;
  }),
  (goog.events.KeyCodes = {
    WIN_KEY_FF_LINUX: 0,
    MAC_ENTER: 3,
    BACKSPACE: 8,
    TAB: 9,
    NUM_CENTER: 12,
    ENTER: 13,
    SHIFT: 16,
    CTRL: 17,
    ALT: 18,
    PAUSE: 19,
    CAPS_LOCK: 20,
    ESC: 27,
    SPACE: 32,
    PAGE_UP: 33,
    PAGE_DOWN: 34,
    END: 35,
    HOME: 36,
    LEFT: 37,
    UP: 38,
    RIGHT: 39,
    DOWN: 40,
    PLUS_SIGN: 43,
    PRINT_SCREEN: 44,
    INSERT: 45,
    DELETE: 46,
    ZERO: 48,
    ONE: 49,
    TWO: 50,
    THREE: 51,
    FOUR: 52,
    FIVE: 53,
    SIX: 54,
    SEVEN: 55,
    EIGHT: 56,
    NINE: 57,
    FF_SEMICOLON: 59,
    FF_EQUALS: 61,
    FF_DASH: 173,
    FF_HASH: 163,
    FF_JP_QUOTE: 58,
    QUESTION_MARK: 63,
    AT_SIGN: 64,
    A: 65,
    B: 66,
    C: 67,
    D: 68,
    E: 69,
    F: 70,
    G: 71,
    H: 72,
    I: 73,
    J: 74,
    K: 75,
    L: 76,
    M: 77,
    N: 78,
    O: 79,
    P: 80,
    Q: 81,
    R: 82,
    S: 83,
    T: 84,
    U: 85,
    V: 86,
    W: 87,
    X: 88,
    Y: 89,
    Z: 90,
    META: 91,
    WIN_KEY_RIGHT: 92,
    CONTEXT_MENU: 93,
    NUM_ZERO: 96,
    NUM_ONE: 97,
    NUM_TWO: 98,
    NUM_THREE: 99,
    NUM_FOUR: 100,
    NUM_FIVE: 101,
    NUM_SIX: 102,
    NUM_SEVEN: 103,
    NUM_EIGHT: 104,
    NUM_NINE: 105,
    NUM_MULTIPLY: 106,
    NUM_PLUS: 107,
    NUM_MINUS: 109,
    NUM_PERIOD: 110,
    NUM_DIVISION: 111,
    F1: 112,
    F2: 113,
    F3: 114,
    F4: 115,
    F5: 116,
    F6: 117,
    F7: 118,
    F8: 119,
    F9: 120,
    F10: 121,
    F11: 122,
    F12: 123,
    NUMLOCK: 144,
    SCROLL_LOCK: 145,
    FIRST_MEDIA_KEY: 166,
    LAST_MEDIA_KEY: 183,
    SEMICOLON: 186,
    DASH: 189,
    EQUALS: 187,
    COMMA: 188,
    PERIOD: 190,
    SLASH: 191,
    APOSTROPHE: 192,
    TILDE: 192,
    SINGLE_QUOTE: 222,
    OPEN_SQUARE_BRACKET: 219,
    BACKSLASH: 220,
    CLOSE_SQUARE_BRACKET: 221,
    WIN_KEY: 224,
    MAC_FF_META: 224,
    MAC_WK_CMD_LEFT: 91,
    MAC_WK_CMD_RIGHT: 93,
    WIN_IME: 229,
    VK_NONAME: 252,
    PHANTOM: 255,
  }),
  (goog.events.KeyCodes.isTextModifyingKeyEvent = function (t) {
    if (
      (t.altKey && !t.ctrlKey) ||
      t.metaKey ||
      (t.keyCode >= goog.events.KeyCodes.F1 &&
        t.keyCode <= goog.events.KeyCodes.F12)
    )
      return !1;
    if (goog.events.KeyCodes.isCharacterKey(t.keyCode)) return !0;
    switch (t.keyCode) {
      case goog.events.KeyCodes.ALT:
      case goog.events.KeyCodes.CAPS_LOCK:
      case goog.events.KeyCodes.CONTEXT_MENU:
      case goog.events.KeyCodes.CTRL:
      case goog.events.KeyCodes.DOWN:
      case goog.events.KeyCodes.END:
      case goog.events.KeyCodes.ESC:
      case goog.events.KeyCodes.HOME:
      case goog.events.KeyCodes.INSERT:
      case goog.events.KeyCodes.LEFT:
      case goog.events.KeyCodes.MAC_FF_META:
      case goog.events.KeyCodes.META:
      case goog.events.KeyCodes.NUMLOCK:
      case goog.events.KeyCodes.NUM_CENTER:
      case goog.events.KeyCodes.PAGE_DOWN:
      case goog.events.KeyCodes.PAGE_UP:
      case goog.events.KeyCodes.PAUSE:
      case goog.events.KeyCodes.PHANTOM:
      case goog.events.KeyCodes.PRINT_SCREEN:
      case goog.events.KeyCodes.RIGHT:
      case goog.events.KeyCodes.SCROLL_LOCK:
      case goog.events.KeyCodes.SHIFT:
      case goog.events.KeyCodes.UP:
      case goog.events.KeyCodes.VK_NONAME:
      case goog.events.KeyCodes.WIN_KEY:
      case goog.events.KeyCodes.WIN_KEY_RIGHT:
        return !1;
      case goog.events.KeyCodes.WIN_KEY_FF_LINUX:
        return !goog.userAgent.GECKO;
      default:
        return (
          t.keyCode < goog.events.KeyCodes.FIRST_MEDIA_KEY ||
          t.keyCode > goog.events.KeyCodes.LAST_MEDIA_KEY
        );
    }
  }),
  (goog.events.KeyCodes.firesKeyPressEvent = function (t, e, o, i, n, l) {
    if (goog.userAgent.WEBKIT && !goog.userAgent.isVersionOrHigher("525"))
      return !0;
    if (goog.userAgent.MAC && n) return goog.events.KeyCodes.isCharacterKey(t);
    if (n && !i) return !1;
    if (!goog.userAgent.GECKO) {
      "number" == typeof e && (e = goog.events.KeyCodes.normalizeKeyCode(e));
      var r =
          e == goog.events.KeyCodes.CTRL ||
          e == goog.events.KeyCodes.ALT ||
          (goog.userAgent.MAC && e == goog.events.KeyCodes.META),
        s = e == goog.events.KeyCodes.SHIFT && (i || l);
      if (((!o || goog.userAgent.MAC) && r) || (goog.userAgent.MAC && s))
        return !1;
    }
    if ((goog.userAgent.WEBKIT || goog.userAgent.EDGE) && i && o)
      switch (t) {
        case goog.events.KeyCodes.BACKSLASH:
        case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:
        case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:
        case goog.events.KeyCodes.TILDE:
        case goog.events.KeyCodes.SEMICOLON:
        case goog.events.KeyCodes.DASH:
        case goog.events.KeyCodes.EQUALS:
        case goog.events.KeyCodes.COMMA:
        case goog.events.KeyCodes.PERIOD:
        case goog.events.KeyCodes.SLASH:
        case goog.events.KeyCodes.APOSTROPHE:
        case goog.events.KeyCodes.SINGLE_QUOTE:
          return !1;
      }
    if (goog.userAgent.IE && i && e == t) return !1;
    switch (t) {
      case goog.events.KeyCodes.ENTER:
        return !goog.userAgent.GECKO || (!l && !n && !(o && i));
      case goog.events.KeyCodes.ESC:
        return !(
          goog.userAgent.WEBKIT ||
          goog.userAgent.EDGE ||
          goog.userAgent.GECKO
        );
    }
    return (
      (!goog.userAgent.GECKO || !(i || n || l)) &&
      goog.events.KeyCodes.isCharacterKey(t)
    );
  }),
  (goog.events.KeyCodes.isCharacterKey = function (t) {
    if (
      (t >= goog.events.KeyCodes.ZERO && t <= goog.events.KeyCodes.NINE) ||
      (t >= goog.events.KeyCodes.NUM_ZERO &&
        t <= goog.events.KeyCodes.NUM_MULTIPLY) ||
      (t >= goog.events.KeyCodes.A && t <= goog.events.KeyCodes.Z) ||
      ((goog.userAgent.WEBKIT || goog.userAgent.EDGE) && 0 == t)
    )
      return !0;
    switch (t) {
      case goog.events.KeyCodes.SPACE:
      case goog.events.KeyCodes.PLUS_SIGN:
      case goog.events.KeyCodes.QUESTION_MARK:
      case goog.events.KeyCodes.AT_SIGN:
      case goog.events.KeyCodes.NUM_PLUS:
      case goog.events.KeyCodes.NUM_MINUS:
      case goog.events.KeyCodes.NUM_PERIOD:
      case goog.events.KeyCodes.NUM_DIVISION:
      case goog.events.KeyCodes.SEMICOLON:
      case goog.events.KeyCodes.FF_SEMICOLON:
      case goog.events.KeyCodes.DASH:
      case goog.events.KeyCodes.EQUALS:
      case goog.events.KeyCodes.FF_EQUALS:
      case goog.events.KeyCodes.COMMA:
      case goog.events.KeyCodes.PERIOD:
      case goog.events.KeyCodes.SLASH:
      case goog.events.KeyCodes.APOSTROPHE:
      case goog.events.KeyCodes.SINGLE_QUOTE:
      case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:
      case goog.events.KeyCodes.BACKSLASH:
      case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:
      case goog.events.KeyCodes.FF_HASH:
      case goog.events.KeyCodes.FF_JP_QUOTE:
        return !0;
      case goog.events.KeyCodes.FF_DASH:
        return goog.userAgent.GECKO;
      default:
        return !1;
    }
  }),
  (goog.events.KeyCodes.normalizeKeyCode = function (t) {
    return goog.userAgent.GECKO
      ? goog.events.KeyCodes.normalizeGeckoKeyCode(t)
      : goog.userAgent.MAC && goog.userAgent.WEBKIT
      ? goog.events.KeyCodes.normalizeMacWebKitKeyCode(t)
      : t;
  }),
  (goog.events.KeyCodes.normalizeGeckoKeyCode = function (t) {
    switch (t) {
      case goog.events.KeyCodes.FF_EQUALS:
        return goog.events.KeyCodes.EQUALS;
      case goog.events.KeyCodes.FF_SEMICOLON:
        return goog.events.KeyCodes.SEMICOLON;
      case goog.events.KeyCodes.FF_DASH:
        return goog.events.KeyCodes.DASH;
      case goog.events.KeyCodes.MAC_FF_META:
        return goog.events.KeyCodes.META;
      case goog.events.KeyCodes.WIN_KEY_FF_LINUX:
        return goog.events.KeyCodes.WIN_KEY;
      default:
        return t;
    }
  }),
  (goog.events.KeyCodes.normalizeMacWebKitKeyCode = function (t) {
    switch (t) {
      case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:
        return goog.events.KeyCodes.META;
      default:
        return t;
    }
  }),
  (goog.events.KeyHandler = function (t, e) {
    goog.events.EventTarget.call(this), t && this.attach(t, e);
  }),
  goog.inherits(goog.events.KeyHandler, goog.events.EventTarget),
  (goog.events.KeyHandler.prototype.element_ = null),
  (goog.events.KeyHandler.prototype.keyPressKey_ = null),
  (goog.events.KeyHandler.prototype.keyDownKey_ = null),
  (goog.events.KeyHandler.prototype.keyUpKey_ = null),
  (goog.events.KeyHandler.prototype.lastKey_ = -1),
  (goog.events.KeyHandler.prototype.keyCode_ = -1),
  (goog.events.KeyHandler.prototype.altKey_ = !1),
  (goog.events.KeyHandler.EventType = { KEY: "key" }),
  (goog.events.KeyHandler.safariKey_ = {
    3: goog.events.KeyCodes.ENTER,
    12: goog.events.KeyCodes.NUMLOCK,
    63232: goog.events.KeyCodes.UP,
    63233: goog.events.KeyCodes.DOWN,
    63234: goog.events.KeyCodes.LEFT,
    63235: goog.events.KeyCodes.RIGHT,
    63236: goog.events.KeyCodes.F1,
    63237: goog.events.KeyCodes.F2,
    63238: goog.events.KeyCodes.F3,
    63239: goog.events.KeyCodes.F4,
    63240: goog.events.KeyCodes.F5,
    63241: goog.events.KeyCodes.F6,
    63242: goog.events.KeyCodes.F7,
    63243: goog.events.KeyCodes.F8,
    63244: goog.events.KeyCodes.F9,
    63245: goog.events.KeyCodes.F10,
    63246: goog.events.KeyCodes.F11,
    63247: goog.events.KeyCodes.F12,
    63248: goog.events.KeyCodes.PRINT_SCREEN,
    63272: goog.events.KeyCodes.DELETE,
    63273: goog.events.KeyCodes.HOME,
    63275: goog.events.KeyCodes.END,
    63276: goog.events.KeyCodes.PAGE_UP,
    63277: goog.events.KeyCodes.PAGE_DOWN,
    63289: goog.events.KeyCodes.NUMLOCK,
    63302: goog.events.KeyCodes.INSERT,
  }),
  (goog.events.KeyHandler.keyIdentifier_ = {
    Up: goog.events.KeyCodes.UP,
    Down: goog.events.KeyCodes.DOWN,
    Left: goog.events.KeyCodes.LEFT,
    Right: goog.events.KeyCodes.RIGHT,
    Enter: goog.events.KeyCodes.ENTER,
    F1: goog.events.KeyCodes.F1,
    F2: goog.events.KeyCodes.F2,
    F3: goog.events.KeyCodes.F3,
    F4: goog.events.KeyCodes.F4,
    F5: goog.events.KeyCodes.F5,
    F6: goog.events.KeyCodes.F6,
    F7: goog.events.KeyCodes.F7,
    F8: goog.events.KeyCodes.F8,
    F9: goog.events.KeyCodes.F9,
    F10: goog.events.KeyCodes.F10,
    F11: goog.events.KeyCodes.F11,
    F12: goog.events.KeyCodes.F12,
    "U+007F": goog.events.KeyCodes.DELETE,
    Home: goog.events.KeyCodes.HOME,
    End: goog.events.KeyCodes.END,
    PageUp: goog.events.KeyCodes.PAGE_UP,
    PageDown: goog.events.KeyCodes.PAGE_DOWN,
    Insert: goog.events.KeyCodes.INSERT,
  }),
  (goog.events.KeyHandler.USES_KEYDOWN_ =
    !goog.userAgent.WEBKIT || goog.userAgent.isVersionOrHigher("525")),
  (goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_ =
    goog.userAgent.MAC && goog.userAgent.GECKO),
  (goog.events.KeyHandler.prototype.handleKeyDown_ = function (t) {
    (goog.userAgent.WEBKIT || goog.userAgent.EDGE) &&
      ((this.lastKey_ == goog.events.KeyCodes.CTRL && !t.ctrlKey) ||
        (this.lastKey_ == goog.events.KeyCodes.ALT && !t.altKey) ||
        (goog.userAgent.MAC &&
          this.lastKey_ == goog.events.KeyCodes.META &&
          !t.metaKey)) &&
      this.resetState(),
      -1 == this.lastKey_ &&
        (t.ctrlKey && t.keyCode != goog.events.KeyCodes.CTRL
          ? (this.lastKey_ = goog.events.KeyCodes.CTRL)
          : t.altKey && t.keyCode != goog.events.KeyCodes.ALT
          ? (this.lastKey_ = goog.events.KeyCodes.ALT)
          : t.metaKey &&
            t.keyCode != goog.events.KeyCodes.META &&
            (this.lastKey_ = goog.events.KeyCodes.META)),
      goog.events.KeyHandler.USES_KEYDOWN_ &&
      !goog.events.KeyCodes.firesKeyPressEvent(
        t.keyCode,
        this.lastKey_,
        t.shiftKey,
        t.ctrlKey,
        t.altKey,
        t.metaKey
      )
        ? this.handleEvent(t)
        : ((this.keyCode_ = goog.events.KeyCodes.normalizeKeyCode(t.keyCode)),
          goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_ &&
            (this.altKey_ = t.altKey));
  }),
  (goog.events.KeyHandler.prototype.resetState = function () {
    this.keyCode_ = this.lastKey_ = -1;
  }),
  (goog.events.KeyHandler.prototype.handleKeyup_ = function (t) {
    this.resetState(), (this.altKey_ = t.altKey);
  }),
  (goog.events.KeyHandler.prototype.handleEvent = function (t) {
    var e = t.getBrowserEvent(),
      o = e.altKey;
    if (goog.userAgent.IE && t.type == goog.events.EventType.KEYPRESS)
      var i = this.keyCode_,
        n =
          i != goog.events.KeyCodes.ENTER && i != goog.events.KeyCodes.ESC
            ? e.keyCode
            : 0;
    else
      (goog.userAgent.WEBKIT || goog.userAgent.EDGE) &&
      t.type == goog.events.EventType.KEYPRESS
        ? ((i = this.keyCode_),
          (n =
            0 <= e.charCode &&
            63232 > e.charCode &&
            goog.events.KeyCodes.isCharacterKey(i)
              ? e.charCode
              : 0))
        : goog.userAgent.OPERA && !goog.userAgent.WEBKIT
        ? ((i = this.keyCode_),
          (n = goog.events.KeyCodes.isCharacterKey(i) ? e.keyCode : 0))
        : (t.type == goog.events.EventType.KEYPRESS
            ? (goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_ &&
                (o = this.altKey_),
              e.keyCode == e.charCode
                ? 32 > e.keyCode
                  ? ((i = e.keyCode), (n = 0))
                  : ((i = this.keyCode_), (n = e.charCode))
                : ((i = e.keyCode || this.keyCode_), (n = e.charCode || 0)))
            : ((i = e.keyCode || this.keyCode_), (n = e.charCode || 0)),
          goog.userAgent.MAC &&
            n == goog.events.KeyCodes.QUESTION_MARK &&
            i == goog.events.KeyCodes.WIN_KEY &&
            (i = goog.events.KeyCodes.SLASH));
    var l = (i = goog.events.KeyCodes.normalizeKeyCode(i));
    i
      ? 63232 <= i && i in goog.events.KeyHandler.safariKey_
        ? (l = goog.events.KeyHandler.safariKey_[i])
        : 25 == i && t.shiftKey && (l = 9)
      : e.keyIdentifier &&
        e.keyIdentifier in goog.events.KeyHandler.keyIdentifier_ &&
        (l = goog.events.KeyHandler.keyIdentifier_[e.keyIdentifier]),
      (goog.userAgent.GECKO &&
        goog.events.KeyHandler.USES_KEYDOWN_ &&
        t.type == goog.events.EventType.KEYPRESS &&
        !goog.events.KeyCodes.firesKeyPressEvent(
          l,
          this.lastKey_,
          t.shiftKey,
          t.ctrlKey,
          o,
          t.metaKey
        )) ||
        ((t = l == this.lastKey_),
        (this.lastKey_ = l),
        ((e = new goog.events.KeyEvent(l, n, t, e)).altKey = o),
        this.dispatchEvent(e));
  }),
  (goog.events.KeyHandler.prototype.getElement = function () {
    return this.element_;
  }),
  (goog.events.KeyHandler.prototype.attach = function (t, e) {
    this.keyUpKey_ && this.detach(),
      (this.element_ = t),
      (this.keyPressKey_ = goog.events.listen(
        this.element_,
        goog.events.EventType.KEYPRESS,
        this,
        e
      )),
      (this.keyDownKey_ = goog.events.listen(
        this.element_,
        goog.events.EventType.KEYDOWN,
        this.handleKeyDown_,
        e,
        this
      )),
      (this.keyUpKey_ = goog.events.listen(
        this.element_,
        goog.events.EventType.KEYUP,
        this.handleKeyup_,
        e,
        this
      ));
  }),
  (goog.events.KeyHandler.prototype.detach = function () {
    this.keyPressKey_ &&
      (goog.events.unlistenByKey(this.keyPressKey_),
      goog.events.unlistenByKey(this.keyDownKey_),
      goog.events.unlistenByKey(this.keyUpKey_),
      (this.keyUpKey_ = this.keyDownKey_ = this.keyPressKey_ = null)),
      (this.element_ = null),
      (this.keyCode_ = this.lastKey_ = -1);
  }),
  (goog.events.KeyHandler.prototype.disposeInternal = function () {
    goog.events.KeyHandler.superClass_.disposeInternal.call(this),
      this.detach();
  }),
  (goog.events.KeyEvent = function (t, e, o, i) {
    goog.events.BrowserEvent.call(this, i),
      (this.type = goog.events.KeyHandler.EventType.KEY),
      (this.keyCode = t),
      (this.charCode = e),
      (this.repeat = o);
  }),
  goog.inherits(goog.events.KeyEvent, goog.events.BrowserEvent),
  (goog.ui.ComponentUtil = {}),
  (goog.ui.ComponentUtil.getMouseEventType = function (t) {
    return t.pointerEventsEnabled()
      ? goog.events.PointerAsMouseEventType
      : goog.events.MouseAsMouseEventType;
  }),
  (goog.ui.registry = {}),
  (goog.ui.registry.getDefaultRenderer = function (t) {
    for (
      var e;
      t && ((e = goog.getUid(t)), !(e = goog.ui.registry.defaultRenderers_[e]));

    )
      t = t.superClass_ ? t.superClass_.constructor : null;
    return e
      ? goog.isFunction(e.getInstance)
        ? e.getInstance()
        : new e()
      : null;
  }),
  (goog.ui.registry.setDefaultRenderer = function (t, e) {
    if (!goog.isFunction(t)) throw Error("Invalid component class " + t);
    if (!goog.isFunction(e)) throw Error("Invalid renderer class " + e);
    (t = goog.getUid(t)), (goog.ui.registry.defaultRenderers_[t] = e);
  }),
  (goog.ui.registry.getDecoratorByClassName = function (t) {
    return t in goog.ui.registry.decoratorFunctions_
      ? goog.ui.registry.decoratorFunctions_[t]()
      : null;
  }),
  (goog.ui.registry.setDecoratorByClassName = function (t, e) {
    if (!t) throw Error("Invalid class name " + t);
    if (!goog.isFunction(e)) throw Error("Invalid decorator function " + e);
    goog.ui.registry.decoratorFunctions_[t] = e;
  }),
  (goog.ui.registry.getDecorator = function (t) {
    goog.asserts.assert(t);
    for (var e = goog.dom.classlist.get(t), o = 0, i = e.length; o < i; o++)
      if ((t = goog.ui.registry.getDecoratorByClassName(e[o]))) return t;
    return null;
  }),
  (goog.ui.registry.reset = function () {
    (goog.ui.registry.defaultRenderers_ = {}),
      (goog.ui.registry.decoratorFunctions_ = {});
  }),
  (goog.ui.registry.defaultRenderers_ = {}),
  (goog.ui.registry.decoratorFunctions_ = {}),
  (goog.ui.Control = function (t, e, o) {
    goog.ui.Component.call(this, o),
      (this.renderer_ =
        e || goog.ui.registry.getDefaultRenderer(this.constructor)),
      this.setContentInternal(void 0 !== t ? t : null),
      (this.ariaLabel_ = null);
  }),
  goog.inherits(goog.ui.Control, goog.ui.Component),
  goog.tagUnsealableClass(goog.ui.Control),
  (goog.ui.Control.registerDecorator =
    goog.ui.registry.setDecoratorByClassName),
  (goog.ui.Control.getDecorator = goog.ui.registry.getDecorator),
  (goog.ui.Control.prototype.content_ = null),
  (goog.ui.Control.prototype.state_ = 0),
  (goog.ui.Control.prototype.supportedStates_ =
    goog.ui.Component.State.DISABLED |
    goog.ui.Component.State.HOVER |
    goog.ui.Component.State.ACTIVE |
    goog.ui.Component.State.FOCUSED),
  (goog.ui.Control.prototype.autoStates_ = goog.ui.Component.State.ALL),
  (goog.ui.Control.prototype.statesWithTransitionEvents_ = 0),
  (goog.ui.Control.prototype.visible_ = !0),
  (goog.ui.Control.prototype.extraClassNames_ = null),
  (goog.ui.Control.prototype.handleMouseEvents_ = !0),
  (goog.ui.Control.prototype.allowTextSelection_ = !1),
  (goog.ui.Control.prototype.preferredAriaRole_ = null),
  (goog.ui.Control.prototype.isHandleMouseEvents = function () {
    return this.handleMouseEvents_;
  }),
  (goog.ui.Control.prototype.setHandleMouseEvents = function (t) {
    this.isInDocument() &&
      t != this.handleMouseEvents_ &&
      this.enableMouseEventHandling_(t),
      (this.handleMouseEvents_ = t);
  }),
  (goog.ui.Control.prototype.getKeyEventTarget = function () {
    return this.renderer_.getKeyEventTarget(this);
  }),
  (goog.ui.Control.prototype.getKeyHandler = function () {
    return (
      this.keyHandler_ || (this.keyHandler_ = new goog.events.KeyHandler())
    );
  }),
  (goog.ui.Control.prototype.getRenderer = function () {
    return this.renderer_;
  }),
  (goog.ui.Control.prototype.setRenderer = function (t) {
    if (this.isInDocument())
      throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.getElement() && this.setElementInternal(null), (this.renderer_ = t);
  }),
  (goog.ui.Control.prototype.getExtraClassNames = function () {
    return this.extraClassNames_;
  }),
  (goog.ui.Control.prototype.addClassName = function (t) {
    t &&
      (this.extraClassNames_
        ? goog.array.contains(this.extraClassNames_, t) ||
          this.extraClassNames_.push(t)
        : (this.extraClassNames_ = [t]),
      this.renderer_.enableExtraClassName(this, t, !0));
  }),
  (goog.ui.Control.prototype.removeClassName = function (t) {
    t &&
      this.extraClassNames_ &&
      goog.array.remove(this.extraClassNames_, t) &&
      (0 == this.extraClassNames_.length && (this.extraClassNames_ = null),
      this.renderer_.enableExtraClassName(this, t, !1));
  }),
  (goog.ui.Control.prototype.enableClassName = function (t, e) {
    e ? this.addClassName(t) : this.removeClassName(t);
  }),
  (goog.ui.Control.prototype.createDom = function () {
    var t = this.renderer_.createDom(this);
    this.setElementInternal(t),
      this.renderer_.setAriaRole(t, this.getPreferredAriaRole()),
      this.isAllowTextSelection() ||
        this.renderer_.setAllowTextSelection(t, !1),
      this.isVisible() || this.renderer_.setVisible(t, !1);
  }),
  (goog.ui.Control.prototype.getPreferredAriaRole = function () {
    return this.preferredAriaRole_;
  }),
  (goog.ui.Control.prototype.setPreferredAriaRole = function (t) {
    this.preferredAriaRole_ = t;
  }),
  (goog.ui.Control.prototype.getAriaLabel = function () {
    return this.ariaLabel_;
  }),
  (goog.ui.Control.prototype.setAriaLabel = function (t) {
    this.ariaLabel_ = t;
    var e = this.getElement();
    e && this.renderer_.setAriaLabel(e, t);
  }),
  (goog.ui.Control.prototype.getContentElement = function () {
    return this.renderer_.getContentElement(this.getElement());
  }),
  (goog.ui.Control.prototype.canDecorate = function (t) {
    return this.renderer_.canDecorate(t);
  }),
  (goog.ui.Control.prototype.decorateInternal = function (t) {
    (t = this.renderer_.decorate(this, t)),
      this.setElementInternal(t),
      this.renderer_.setAriaRole(t, this.getPreferredAriaRole()),
      this.isAllowTextSelection() ||
        this.renderer_.setAllowTextSelection(t, !1),
      (this.visible_ = "none" != t.style.display);
  }),
  (goog.ui.Control.prototype.enterDocument = function () {
    if (
      (goog.ui.Control.superClass_.enterDocument.call(this),
      this.renderer_.setAriaStates(this, this.getElementStrict()),
      this.renderer_.initializeDom(this),
      this.supportedStates_ & ~goog.ui.Component.State.DISABLED &&
        (this.isHandleMouseEvents() && this.enableMouseEventHandling_(!0),
        this.isSupportedState(goog.ui.Component.State.FOCUSED)))
    ) {
      var t = this.getKeyEventTarget();
      if (t) {
        var e = this.getKeyHandler();
        e.attach(t),
          this.getHandler()
            .listen(
              e,
              goog.events.KeyHandler.EventType.KEY,
              this.handleKeyEvent
            )
            .listen(t, goog.events.EventType.FOCUS, this.handleFocus)
            .listen(t, goog.events.EventType.BLUR, this.handleBlur);
      }
    }
  }),
  (goog.ui.Control.prototype.enableMouseEventHandling_ = function (t) {
    var e = goog.ui.ComponentUtil.getMouseEventType(this),
      o = this.getHandler(),
      i = this.getElement();
    t
      ? (o
          .listen(i, e.MOUSEDOWN, this.handleMouseDown)
          .listen(i, [e.MOUSEUP, e.MOUSECANCEL], this.handleMouseUp)
          .listen(i, goog.events.EventType.MOUSEOVER, this.handleMouseOver)
          .listen(i, goog.events.EventType.MOUSEOUT, this.handleMouseOut),
        this.pointerEventsEnabled() &&
          o.listen(
            i,
            goog.events.EventType.GOTPOINTERCAPTURE,
            this.preventPointerCapture_
          ),
        this.handleContextMenu != goog.nullFunction &&
          o.listen(
            i,
            goog.events.EventType.CONTEXTMENU,
            this.handleContextMenu
          ),
        goog.userAgent.IE &&
          (goog.userAgent.isVersionOrHigher(9) ||
            o.listen(i, goog.events.EventType.DBLCLICK, this.handleDblClick),
          this.ieMouseEventSequenceSimulator_ ||
            ((this.ieMouseEventSequenceSimulator_ =
              new goog.ui.Control.IeMouseEventSequenceSimulator_(this)),
            this.registerDisposable(this.ieMouseEventSequenceSimulator_))))
      : (o
          .unlisten(i, e.MOUSEDOWN, this.handleMouseDown)
          .unlisten(i, [e.MOUSEUP, e.MOUSECANCEL], this.handleMouseUp)
          .unlisten(i, goog.events.EventType.MOUSEOVER, this.handleMouseOver)
          .unlisten(i, goog.events.EventType.MOUSEOUT, this.handleMouseOut),
        this.pointerEventsEnabled() &&
          o.unlisten(
            i,
            goog.events.EventType.GOTPOINTERCAPTURE,
            this.preventPointerCapture_
          ),
        this.handleContextMenu != goog.nullFunction &&
          o.unlisten(
            i,
            goog.events.EventType.CONTEXTMENU,
            this.handleContextMenu
          ),
        goog.userAgent.IE &&
          (goog.userAgent.isVersionOrHigher(9) ||
            o.unlisten(i, goog.events.EventType.DBLCLICK, this.handleDblClick),
          goog.dispose(this.ieMouseEventSequenceSimulator_),
          (this.ieMouseEventSequenceSimulator_ = null)));
  }),
  (goog.ui.Control.prototype.exitDocument = function () {
    goog.ui.Control.superClass_.exitDocument.call(this),
      this.keyHandler_ && this.keyHandler_.detach(),
      this.isVisible() &&
        this.isEnabled() &&
        this.renderer_.setFocusable(this, !1);
  }),
  (goog.ui.Control.prototype.disposeInternal = function () {
    goog.ui.Control.superClass_.disposeInternal.call(this),
      this.keyHandler_ && (this.keyHandler_.dispose(), delete this.keyHandler_),
      delete this.renderer_,
      (this.ieMouseEventSequenceSimulator_ =
        this.extraClassNames_ =
        this.content_ =
          null);
  }),
  (goog.ui.Control.prototype.getContent = function () {
    return this.content_;
  }),
  (goog.ui.Control.prototype.setContent = function (t) {
    this.renderer_.setContent(this.getElement(), t), this.setContentInternal(t);
  }),
  (goog.ui.Control.prototype.setContentInternal = function (t) {
    this.content_ = t;
  }),
  (goog.ui.Control.prototype.getCaption = function () {
    var t = this.getContent();
    return t
      ? ((t =
          "string" == typeof t
            ? t
            : goog.isArray(t)
            ? goog.array.map(t, goog.dom.getRawTextContent).join("")
            : goog.dom.getTextContent(t)),
        goog.string.collapseBreakingSpaces(t))
      : "";
  }),
  (goog.ui.Control.prototype.setCaption = function (t) {
    this.setContent(t);
  }),
  (goog.ui.Control.prototype.setRightToLeft = function (t) {
    goog.ui.Control.superClass_.setRightToLeft.call(this, t);
    var e = this.getElement();
    e && this.renderer_.setRightToLeft(e, t);
  }),
  (goog.ui.Control.prototype.isAllowTextSelection = function () {
    return this.allowTextSelection_;
  }),
  (goog.ui.Control.prototype.setAllowTextSelection = function (t) {
    this.allowTextSelection_ = t;
    var e = this.getElement();
    e && this.renderer_.setAllowTextSelection(e, t);
  }),
  (goog.ui.Control.prototype.isVisible = function () {
    return this.visible_;
  }),
  (goog.ui.Control.prototype.setVisible = function (t, e) {
    return (
      !!(
        e ||
        (this.visible_ != t &&
          this.dispatchEvent(
            t
              ? goog.ui.Component.EventType.SHOW
              : goog.ui.Component.EventType.HIDE
          ))
      ) &&
      ((e = this.getElement()) && this.renderer_.setVisible(e, t),
      this.isEnabled() && this.renderer_.setFocusable(this, t),
      (this.visible_ = t),
      !0)
    );
  }),
  (goog.ui.Control.prototype.isEnabled = function () {
    return !this.hasState(goog.ui.Component.State.DISABLED);
  }),
  (goog.ui.Control.prototype.isParentDisabled_ = function () {
    var t = this.getParent();
    return !!t && "function" == typeof t.isEnabled && !t.isEnabled();
  }),
  (goog.ui.Control.prototype.setEnabled = function (t) {
    !this.isParentDisabled_() &&
      this.isTransitionAllowed(goog.ui.Component.State.DISABLED, !t) &&
      (t || (this.setActive(!1), this.setHighlighted(!1)),
      this.isVisible() && this.renderer_.setFocusable(this, t),
      this.setState(goog.ui.Component.State.DISABLED, !t, !0));
  }),
  (goog.ui.Control.prototype.isHighlighted = function () {
    return this.hasState(goog.ui.Component.State.HOVER);
  }),
  (goog.ui.Control.prototype.setHighlighted = function (t) {
    this.isTransitionAllowed(goog.ui.Component.State.HOVER, t) &&
      this.setState(goog.ui.Component.State.HOVER, t);
  }),
  (goog.ui.Control.prototype.isActive = function () {
    return this.hasState(goog.ui.Component.State.ACTIVE);
  }),
  (goog.ui.Control.prototype.setActive = function (t) {
    this.isTransitionAllowed(goog.ui.Component.State.ACTIVE, t) &&
      this.setState(goog.ui.Component.State.ACTIVE, t);
  }),
  (goog.ui.Control.prototype.isSelected = function () {
    return this.hasState(goog.ui.Component.State.SELECTED);
  }),
  (goog.ui.Control.prototype.setSelected = function (t) {
    this.isTransitionAllowed(goog.ui.Component.State.SELECTED, t) &&
      this.setState(goog.ui.Component.State.SELECTED, t);
  }),
  (goog.ui.Control.prototype.isChecked = function () {
    return this.hasState(goog.ui.Component.State.CHECKED);
  }),
  (goog.ui.Control.prototype.setChecked = function (t) {
    this.isTransitionAllowed(goog.ui.Component.State.CHECKED, t) &&
      this.setState(goog.ui.Component.State.CHECKED, t);
  }),
  (goog.ui.Control.prototype.isFocused = function () {
    return this.hasState(goog.ui.Component.State.FOCUSED);
  }),
  (goog.ui.Control.prototype.setFocused = function (t) {
    this.isTransitionAllowed(goog.ui.Component.State.FOCUSED, t) &&
      this.setState(goog.ui.Component.State.FOCUSED, t);
  }),
  (goog.ui.Control.prototype.isOpen = function () {
    return this.hasState(goog.ui.Component.State.OPENED);
  }),
  (goog.ui.Control.prototype.setOpen = function (t) {
    this.isTransitionAllowed(goog.ui.Component.State.OPENED, t) &&
      this.setState(goog.ui.Component.State.OPENED, t);
  }),
  (goog.ui.Control.prototype.getState = function () {
    return this.state_;
  }),
  (goog.ui.Control.prototype.hasState = function (t) {
    return !!(this.state_ & t);
  }),
  (goog.ui.Control.prototype.setState = function (t, e, o) {
    o || t != goog.ui.Component.State.DISABLED
      ? this.isSupportedState(t) &&
        e != this.hasState(t) &&
        (this.renderer_.setState(this, t, e),
        (this.state_ = e ? this.state_ | t : this.state_ & ~t))
      : this.setEnabled(!e);
  }),
  (goog.ui.Control.prototype.setStateInternal = function (t) {
    this.state_ = t;
  }),
  (goog.ui.Control.prototype.isSupportedState = function (t) {
    return !!(this.supportedStates_ & t);
  }),
  (goog.ui.Control.prototype.setSupportedState = function (t, e) {
    if (this.isInDocument() && this.hasState(t) && !e)
      throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    !e && this.hasState(t) && this.setState(t, !1),
      (this.supportedStates_ = e
        ? this.supportedStates_ | t
        : this.supportedStates_ & ~t);
  }),
  (goog.ui.Control.prototype.isAutoState = function (t) {
    return !!(this.autoStates_ & t) && this.isSupportedState(t);
  }),
  (goog.ui.Control.prototype.setAutoStates = function (t, e) {
    this.autoStates_ = e ? this.autoStates_ | t : this.autoStates_ & ~t;
  }),
  (goog.ui.Control.prototype.isDispatchTransitionEvents = function (t) {
    return !!(this.statesWithTransitionEvents_ & t) && this.isSupportedState(t);
  }),
  (goog.ui.Control.prototype.setDispatchTransitionEvents = function (t, e) {
    this.statesWithTransitionEvents_ = e
      ? this.statesWithTransitionEvents_ | t
      : this.statesWithTransitionEvents_ & ~t;
  }),
  (goog.ui.Control.prototype.isTransitionAllowed = function (t, e) {
    return (
      this.isSupportedState(t) &&
      this.hasState(t) != e &&
      (!(this.statesWithTransitionEvents_ & t) ||
        this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(t, e))) &&
      !this.isDisposed()
    );
  }),
  (goog.ui.Control.prototype.handleMouseOver = function (t) {
    !goog.ui.Control.isMouseEventWithinElement_(t, this.getElement()) &&
      this.dispatchEvent(goog.ui.Component.EventType.ENTER) &&
      this.isEnabled() &&
      this.isAutoState(goog.ui.Component.State.HOVER) &&
      this.setHighlighted(!0);
  }),
  (goog.ui.Control.prototype.handleMouseOut = function (t) {
    !goog.ui.Control.isMouseEventWithinElement_(t, this.getElement()) &&
      this.dispatchEvent(goog.ui.Component.EventType.LEAVE) &&
      (this.isAutoState(goog.ui.Component.State.ACTIVE) && this.setActive(!1),
      this.isAutoState(goog.ui.Component.State.HOVER) &&
        this.setHighlighted(!1));
  }),
  (goog.ui.Control.prototype.preventPointerCapture_ = function (t) {
    var e = t.target;
    e.releasePointerCapture && e.releasePointerCapture(t.pointerId);
  }),
  (goog.ui.Control.prototype.handleContextMenu = goog.nullFunction),
  (goog.ui.Control.isMouseEventWithinElement_ = function (t, e) {
    return !!t.relatedTarget && goog.dom.contains(e, t.relatedTarget);
  }),
  (goog.ui.Control.prototype.handleMouseDown = function (t) {
    this.isEnabled() &&
      (this.isAutoState(goog.ui.Component.State.HOVER) &&
        this.setHighlighted(!0),
      t.isMouseActionButton() &&
        (this.isAutoState(goog.ui.Component.State.ACTIVE) && this.setActive(!0),
        this.renderer_ &&
          this.renderer_.isFocusable(this) &&
          this.getKeyEventTarget().focus())),
      !this.isAllowTextSelection() &&
        t.isMouseActionButton() &&
        t.preventDefault();
  }),
  (goog.ui.Control.prototype.handleMouseUp = function (t) {
    this.isEnabled() &&
      (this.isAutoState(goog.ui.Component.State.HOVER) &&
        this.setHighlighted(!0),
      this.isActive() &&
        this.performActionInternal(t) &&
        this.isAutoState(goog.ui.Component.State.ACTIVE) &&
        this.setActive(!1));
  }),
  (goog.ui.Control.prototype.handleDblClick = function (t) {
    this.isEnabled() && this.performActionInternal(t);
  }),
  (goog.ui.Control.prototype.performActionInternal = function (t) {
    this.isAutoState(goog.ui.Component.State.CHECKED) &&
      this.setChecked(!this.isChecked()),
      this.isAutoState(goog.ui.Component.State.SELECTED) &&
        this.setSelected(!0),
      this.isAutoState(goog.ui.Component.State.OPENED) &&
        this.setOpen(!this.isOpen());
    var e = new goog.events.Event(goog.ui.Component.EventType.ACTION, this);
    return (
      t &&
        ((e.altKey = t.altKey),
        (e.ctrlKey = t.ctrlKey),
        (e.metaKey = t.metaKey),
        (e.shiftKey = t.shiftKey),
        (e.platformModifierKey = t.platformModifierKey)),
      this.dispatchEvent(e)
    );
  }),
  (goog.ui.Control.prototype.handleFocus = function (t) {
    this.isAutoState(goog.ui.Component.State.FOCUSED) && this.setFocused(!0);
  }),
  (goog.ui.Control.prototype.handleBlur = function (t) {
    this.isAutoState(goog.ui.Component.State.ACTIVE) && this.setActive(!1),
      this.isAutoState(goog.ui.Component.State.FOCUSED) && this.setFocused(!1);
  }),
  (goog.ui.Control.prototype.handleKeyEvent = function (t) {
    return (
      !!(
        this.isVisible() &&
        this.isEnabled() &&
        this.handleKeyEventInternal(t)
      ) && (t.preventDefault(), t.stopPropagation(), !0)
    );
  }),
  (goog.ui.Control.prototype.handleKeyEventInternal = function (t) {
    return (
      t.keyCode == goog.events.KeyCodes.ENTER && this.performActionInternal(t)
    );
  }),
  goog.ui.registry.setDefaultRenderer(goog.ui.Control, goog.ui.ControlRenderer),
  goog.ui.registry.setDecoratorByClassName(
    goog.ui.ControlRenderer.CSS_CLASS,
    function () {
      return new goog.ui.Control(null);
    }
  ),
  (goog.ui.Control.IeMouseEventSequenceSimulator_ = function (t) {
    goog.Disposable.call(this),
      (this.control_ = t),
      (this.clickExpected_ = !1),
      (this.handler_ = new goog.events.EventHandler(this)),
      this.registerDisposable(this.handler_);
    var e = this.control_.getElementStrict();
    (t = goog.ui.ComponentUtil.getMouseEventType(t)),
      this.handler_
        .listen(e, t.MOUSEDOWN, this.handleMouseDown_)
        .listen(e, t.MOUSEUP, this.handleMouseUp_)
        .listen(e, goog.events.EventType.CLICK, this.handleClick_);
  }),
  goog.inherits(
    goog.ui.Control.IeMouseEventSequenceSimulator_,
    goog.Disposable
  ),
  (goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_ =
    !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9)),
  (goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_ =
    function () {
      this.clickExpected_ = !1;
    }),
  (goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_ =
    function () {
      this.clickExpected_ = !0;
    }),
  (goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_ =
    function (t, e) {
      if (!goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_)
        return (
          (t.button = goog.events.BrowserEvent.MouseButton.LEFT),
          (t.type = e),
          t
        );
      var o = document.createEvent("MouseEvents");
      return (
        o.initMouseEvent(
          e,
          t.bubbles,
          t.cancelable,
          t.view || null,
          t.detail,
          t.screenX,
          t.screenY,
          t.clientX,
          t.clientY,
          t.ctrlKey,
          t.altKey,
          t.shiftKey,
          t.metaKey,
          goog.events.BrowserEvent.MouseButton.LEFT,
          t.relatedTarget || null
        ),
        o
      );
    }),
  (goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_ =
    function (t) {
      if (this.clickExpected_) this.clickExpected_ = !1;
      else {
        var e = t.getBrowserEvent(),
          o = e.button,
          i = e.type,
          n =
            goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(
              e,
              goog.events.EventType.MOUSEDOWN
            );
        this.control_.handleMouseDown(
          new goog.events.BrowserEvent(n, t.currentTarget)
        ),
          (n =
            goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(
              e,
              goog.events.EventType.MOUSEUP
            )),
          this.control_.handleMouseUp(
            new goog.events.BrowserEvent(n, t.currentTarget)
          ),
          goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_ ||
            ((e.button = o), (e.type = i));
      }
    }),
  (goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal =
    function () {
      (this.control_ = null),
        goog.ui.Control.IeMouseEventSequenceSimulator_.superClass_.disposeInternal.call(
          this
        );
    }),
  (goog.ui.Separator = function (t, e) {
    goog.ui.Control.call(
      this,
      null,
      t || goog.ui.MenuSeparatorRenderer.getInstance(),
      e
    ),
      this.setSupportedState(goog.ui.Component.State.DISABLED, !1),
      this.setSupportedState(goog.ui.Component.State.HOVER, !1),
      this.setSupportedState(goog.ui.Component.State.ACTIVE, !1),
      this.setSupportedState(goog.ui.Component.State.FOCUSED, !1),
      this.setStateInternal(goog.ui.Component.State.DISABLED);
  }),
  goog.inherits(goog.ui.Separator, goog.ui.Control),
  (goog.ui.Separator.prototype.enterDocument = function () {
    goog.ui.Separator.superClass_.enterDocument.call(this);
    var t = this.getElement();
    goog.asserts.assert(t, "The DOM element for the separator cannot be null."),
      goog.a11y.aria.setRole(t, "separator");
  }),
  goog.ui.registry.setDecoratorByClassName(
    goog.ui.MenuSeparatorRenderer.CSS_CLASS,
    function () {
      return new goog.ui.Separator();
    }
  ),
  (goog.ui.MenuSeparator = function (t) {
    goog.ui.Separator.call(
      this,
      goog.ui.MenuSeparatorRenderer.getInstance(),
      t
    );
  }),
  goog.inherits(goog.ui.MenuSeparator, goog.ui.Separator),
  goog.ui.registry.setDecoratorByClassName(
    goog.ui.MenuSeparatorRenderer.CSS_CLASS,
    function () {
      return new goog.ui.Separator();
    }
  ),
  (Blockly.ContextMenu = {}),
  (Blockly.ContextMenu.currentBlock = null),
  (Blockly.ContextMenu.eventWrapper_ = null),
  (Blockly.ContextMenu.show = function (t, e, o) {
    if ((Blockly.WidgetDiv.show(Blockly.ContextMenu, o, null), e.length)) {
      var i = Blockly.ContextMenu.populate_(e, o);
      Blockly.ContextMenu.position_(i, t, o),
        setTimeout(function () {
          i.getElement().focus();
        }, 1),
        (Blockly.ContextMenu.currentBlock = null);
    } else Blockly.ContextMenu.hide();
  }),
  (Blockly.ContextMenu.populate_ = function (t, e) {
    var o = new Blockly.Menu();
    o.setRightToLeft(e);
    for (var i, n = 0; (i = t[n]); n++) {
      var l = i.separator
        ? new goog.ui.MenuSeparator()
        : new Blockly.MenuItem(i.text);
      l.setRightToLeft(e),
        o.addChild(l, !0),
        l.setEnabled(i.enabled),
        i.enabled &&
          l.onAction(function () {
            Blockly.ContextMenu.hide(), this.callback();
          }, i);
    }
    return o;
  }),
  (Blockly.ContextMenu.position_ = function (t, e, o) {
    var i = Blockly.utils.getViewportBBox();
    (e = {
      top: e.clientY + i.top,
      bottom: e.clientY + i.top,
      left: e.clientX + i.left,
      right: e.clientX + i.left,
    }),
      Blockly.ContextMenu.createWidget_(t);
    var n = Blockly.utils.uiMenu.getSize(t);
    o && Blockly.utils.uiMenu.adjustBBoxesForRTL(i, e, n),
      Blockly.WidgetDiv.positionWithAnchor(i, e, n, o),
      t.getElement().focus();
  }),
  (Blockly.ContextMenu.createWidget_ = function (t) {
    t.render(Blockly.WidgetDiv.DIV);
    var e = t.getElement();
    Blockly.utils.dom.addClass(e, "blocklyContextMenu"),
      Blockly.bindEventWithChecks_(
        e,
        "contextmenu",
        null,
        Blockly.utils.noEvent
      ),
      t.focus();
  }),
  (Blockly.ContextMenu.hide = function () {
    Blockly.WidgetDiv.hideIfOwner(Blockly.ContextMenu),
      (Blockly.ContextMenu.currentBlock = null),
      Blockly.ContextMenu.eventWrapper_ &&
        (Blockly.unbindEvent_(Blockly.ContextMenu.eventWrapper_),
        (Blockly.ContextMenu.eventWrapper_ = null));
  }),
  (Blockly.ContextMenu.callbackFactory = function (t, e) {
    return function () {
      Blockly.Events.disable();
      try {
        var o = Blockly.Xml.domToBlock(e, t.workspace),
          i = t.getRelativeToSurfaceXY();
        (i.x = t.RTL ? i.x - Blockly.SNAP_RADIUS : i.x + Blockly.SNAP_RADIUS),
          (i.y += 2 * Blockly.SNAP_RADIUS),
          o.moveBy(i.x, i.y);
      } finally {
        Blockly.Events.enable();
      }
      Blockly.Events.isEnabled() &&
        !o.isShadow() &&
        Blockly.Events.fire(new Blockly.Events.BlockCreate(o)),
        o.select();
    };
  }),
  (Blockly.ContextMenu.blockDeleteOption = function (t) {
    var e = t.getDescendants(!1, !0).length,
      o = t.getNextBlock();
    return (
      o && (e -= o.getDescendants(!1, !0).length),
      {
        text:
          1 == e
            ? Blockly.Msg.DELETE_BLOCK
            : Blockly.Msg.DELETE_X_BLOCKS.replace("%1", String(e)),
        enabled: !0,
        callback: function () {
          Blockly.Events.setGroup(!0),
            t.dispose(!0, !0),
            Blockly.Events.setGroup(!1);
        },
      }
    );
  }),
  (Blockly.ContextMenu.blockHelpOption = function (t) {
    return {
      enabled: !("function" == typeof t.helpUrl ? !t.helpUrl() : !t.helpUrl),
      text: Blockly.Msg.HELP,
      callback: function () {
        t.showHelp();
      },
    };
  }),
  (Blockly.ContextMenu.blockDuplicateOption = function (t) {
    var e = t.isDuplicatable();
    return {
      text: Blockly.Msg.DUPLICATE_BLOCK,
      enabled: e,
      callback: function () {
        Blockly.duplicate(t);
      },
    };
  }),
  (Blockly.ContextMenu.blockCommentOption = function (t) {
    var e = { enabled: !Blockly.utils.userAgent.IE };
    return (
      t.getCommentIcon()
        ? ((e.text = Blockly.Msg.REMOVE_COMMENT),
          (e.callback = function () {
            t.setCommentText(null);
          }))
        : ((e.text = Blockly.Msg.ADD_COMMENT),
          (e.callback = function () {
            t.setCommentText(""), t.comment.setVisible(!0);
          })),
      e
    );
  }),
  (Blockly.ContextMenu.commentDeleteOption = function (t) {
    return {
      text: Blockly.Msg.REMOVE_COMMENT,
      enabled: !0,
      callback: function () {
        Blockly.Events.setGroup(!0),
          t.dispose(!0, !0),
          Blockly.Events.setGroup(!1);
      },
    };
  }),
  (Blockly.ContextMenu.commentDuplicateOption = function (t) {
    return {
      text: Blockly.Msg.DUPLICATE_COMMENT,
      enabled: !0,
      callback: function () {
        Blockly.duplicate(t);
      },
    };
  }),
  (Blockly.ContextMenu.workspaceCommentOption = function (t, e) {
    if (!Blockly.WorkspaceCommentSvg)
      throw Error("Missing require for Blockly.WorkspaceCommentSvg");
    var o = { enabled: !Blockly.utils.userAgent.IE };
    return (
      (o.text = Blockly.Msg.ADD_COMMENT),
      (o.callback = function () {
        var o = new Blockly.WorkspaceCommentSvg(
            t,
            Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,
            Blockly.WorkspaceCommentSvg.DEFAULT_SIZE,
            Blockly.WorkspaceCommentSvg.DEFAULT_SIZE
          ),
          i = t.getInjectionDiv().getBoundingClientRect();
        i = new Blockly.utils.Coordinate(e.clientX - i.left, e.clientY - i.top);
        var n = t.getOriginOffsetInPixels();
        (i = Blockly.utils.Coordinate.difference(i, n)).scale(1 / t.scale),
          o.moveBy(i.x, i.y),
          t.rendered && (o.initSvg(), o.render(), o.select());
      }),
      o
    );
  }),
  (Blockly.RenderedConnection = function (t, e) {
    Blockly.RenderedConnection.superClass_.constructor.call(this, t, e),
      (this.db_ = t.workspace.connectionDBList[e]),
      (this.dbOpposite_ =
        t.workspace.connectionDBList[Blockly.OPPOSITE_TYPE[e]]),
      (this.offsetInBlock_ = new Blockly.utils.Coordinate(0, 0)),
      (this.trackedState_ = Blockly.RenderedConnection.TrackedState.WILL_TRACK);
  }),
  Blockly.utils.object.inherits(Blockly.RenderedConnection, Blockly.Connection),
  (Blockly.RenderedConnection.TrackedState = {
    WILL_TRACK: -1,
    UNTRACKED: 0,
    TRACKED: 1,
  }),
  (Blockly.RenderedConnection.prototype.dispose = function () {
    Blockly.RenderedConnection.superClass_.dispose.call(this),
      this.trackedState_ == Blockly.RenderedConnection.TrackedState.TRACKED &&
        this.db_.removeConnection(this, this.y);
  }),
  (Blockly.RenderedConnection.prototype.getSourceBlock = function () {
    return Blockly.RenderedConnection.superClass_.getSourceBlock.call(this);
  }),
  (Blockly.RenderedConnection.prototype.targetBlock = function () {
    return Blockly.RenderedConnection.superClass_.targetBlock.call(this);
  }),
  (Blockly.RenderedConnection.prototype.distanceFrom = function (t) {
    var e = this.x - t.x;
    return (t = this.y - t.y), Math.sqrt(e * e + t * t);
  }),
  (Blockly.RenderedConnection.prototype.bumpAwayFrom = function (t) {
    if (!this.sourceBlock_.workspace.isDragging()) {
      var e = this.sourceBlock_.getRootBlock();
      if (!e.isInFlyout) {
        var o = !1;
        if (!e.isMovable()) {
          if (!(e = t.getSourceBlock().getRootBlock()).isMovable()) return;
          (t = this), (o = !0);
        }
        var i = Blockly.selected == e;
        i || e.addSelect();
        var n =
            t.x +
            Blockly.SNAP_RADIUS +
            Math.floor(Math.random() * Blockly.BUMP_RANDOMNESS) -
            this.x,
          l =
            t.y +
            Blockly.SNAP_RADIUS +
            Math.floor(Math.random() * Blockly.BUMP_RANDOMNESS) -
            this.y;
        o && (l = -l),
          e.RTL &&
            (n =
              t.x -
              Blockly.SNAP_RADIUS -
              Math.floor(Math.random() * Blockly.BUMP_RANDOMNESS) -
              this.x),
          e.moveBy(n, l),
          i || e.removeSelect();
      }
    }
  }),
  (Blockly.RenderedConnection.prototype.moveTo = function (t, e) {
    this.trackedState_ == Blockly.RenderedConnection.TrackedState.WILL_TRACK
      ? (this.db_.addConnection(this, e),
        (this.trackedState_ = Blockly.RenderedConnection.TrackedState.TRACKED))
      : this.trackedState_ == Blockly.RenderedConnection.TrackedState.TRACKED &&
        (this.db_.removeConnection(this, this.y),
        this.db_.addConnection(this, e)),
      (this.x = t),
      (this.y = e);
  }),
  (Blockly.RenderedConnection.prototype.moveBy = function (t, e) {
    this.moveTo(this.x + t, this.y + e);
  }),
  (Blockly.RenderedConnection.prototype.moveToOffset = function (t) {
    this.moveTo(t.x + this.offsetInBlock_.x, t.y + this.offsetInBlock_.y);
  }),
  (Blockly.RenderedConnection.prototype.setOffsetInBlock = function (t, e) {
    (this.offsetInBlock_.x = t), (this.offsetInBlock_.y = e);
  }),
  (Blockly.RenderedConnection.prototype.getOffsetInBlock = function () {
    return this.offsetInBlock_;
  }),
  (Blockly.RenderedConnection.prototype.tighten = function () {
    var t = this.targetConnection.x - this.x,
      e = this.targetConnection.y - this.y;
    if (0 != Math.round(t) || 0 != Math.round(e)) {
      var o = this.targetBlock(),
        i = o.getSvgRoot();
      if (!i) throw Error("block is not rendered.");
      o.rendered &&
        ((i = Blockly.utils.getRelativeXY(i)),
        o
          .getSvgRoot()
          .setAttribute(
            "transform",
            "translate(" + (i.x - t) + "," + (i.y - e) + ")"
          ),
        o.moveConnections(-t, -e));
    }
  }),
  (Blockly.RenderedConnection.prototype.closest = function (t, e) {
    return this.dbOpposite_.searchForClosest(this, t, e);
  }),
  (Blockly.RenderedConnection.prototype.highlight = function () {
    var t = this.sourceBlock_.workspace.getRenderer().getConstants(),
      e = t.shapeFor(this);
    this.type == Blockly.INPUT_VALUE || this.type == Blockly.OUTPUT_VALUE
      ? ((t = t.TAB_OFFSET_FROM_TOP),
        (e =
          Blockly.utils.svgPaths.moveBy(0, -t) +
          Blockly.utils.svgPaths.lineOnAxis("v", t) +
          e.pathDown +
          Blockly.utils.svgPaths.lineOnAxis("v", t)))
      : ((t = t.NOTCH_OFFSET_LEFT - t.CORNER_RADIUS),
        (e =
          Blockly.utils.svgPaths.moveBy(-t, 0) +
          Blockly.utils.svgPaths.lineOnAxis("h", t) +
          e.pathLeft +
          Blockly.utils.svgPaths.lineOnAxis("h", t))),
      (t = this.sourceBlock_.getRelativeToSurfaceXY()),
      (Blockly.Connection.highlightedPath_ = Blockly.utils.dom.createSvgElement(
        "path",
        {
          class: "blocklyHighlightedConnectionPath",
          d: e,
          transform:
            "translate(" +
            (this.x - t.x) +
            "," +
            (this.y - t.y) +
            ")" +
            (this.sourceBlock_.RTL ? " scale(-1 1)" : ""),
        },
        this.sourceBlock_.getSvgRoot()
      ));
  }),
  (Blockly.RenderedConnection.prototype.unhighlight = function () {
    Blockly.utils.dom.removeNode(Blockly.Connection.highlightedPath_),
      delete Blockly.Connection.highlightedPath_;
  }),
  (Blockly.RenderedConnection.prototype.setTracking = function (t) {
    (t &&
      this.trackedState_ == Blockly.RenderedConnection.TrackedState.TRACKED) ||
      (!t &&
        this.trackedState_ ==
          Blockly.RenderedConnection.TrackedState.UNTRACKED) ||
      this.sourceBlock_.isInFlyout ||
      (t
        ? (this.db_.addConnection(this, this.y),
          (this.trackedState_ =
            Blockly.RenderedConnection.TrackedState.TRACKED))
        : (this.trackedState_ ==
            Blockly.RenderedConnection.TrackedState.TRACKED &&
            this.db_.removeConnection(this, this.y),
          (this.trackedState_ =
            Blockly.RenderedConnection.TrackedState.UNTRACKED)));
  }),
  (Blockly.RenderedConnection.prototype.stopTrackingAll = function () {
    if ((this.setTracking(!1), this.targetConnection))
      for (
        var t = this.targetBlock().getDescendants(!1), e = 0;
        e < t.length;
        e++
      ) {
        for (var o = t[e], i = o.getConnections_(!0), n = 0; n < i.length; n++)
          i[n].setTracking(!1);
        for (o = o.getIcons(), n = 0; n < o.length; n++) o[n].setVisible(!1);
      }
  }),
  (Blockly.RenderedConnection.prototype.startTrackingAll = function () {
    this.setTracking(!0);
    var t = [];
    if (this.type != Blockly.INPUT_VALUE && this.type != Blockly.NEXT_STATEMENT)
      return t;
    var e = this.targetBlock();
    if (e) {
      if (e.isCollapsed()) {
        var o = [];
        e.outputConnection && o.push(e.outputConnection),
          e.nextConnection && o.push(e.nextConnection),
          e.previousConnection && o.push(e.previousConnection);
      } else o = e.getConnections_(!0);
      for (var i = 0; i < o.length; i++)
        t.push.apply(t, o[i].startTrackingAll());
      t.length || (t[0] = e);
    }
    return t;
  }),
  (Blockly.RenderedConnection.prototype.isConnectionAllowed = function (t, e) {
    return (
      !(this.distanceFrom(t) > e) &&
      Blockly.RenderedConnection.superClass_.isConnectionAllowed.call(this, t)
    );
  }),
  (Blockly.RenderedConnection.prototype.onFailedConnect = function (t) {
    this.bumpAwayFrom(t);
  }),
  (Blockly.RenderedConnection.prototype.disconnectInternal_ = function (t, e) {
    Blockly.RenderedConnection.superClass_.disconnectInternal_.call(this, t, e),
      t.rendered && t.render(),
      e.rendered && (e.updateDisabled(), e.render());
  }),
  (Blockly.RenderedConnection.prototype.respawnShadow_ = function () {
    var t = this.getSourceBlock(),
      e = this.getShadowDom();
    if (t.workspace && e && Blockly.Events.recordUndo) {
      if (
        (Blockly.RenderedConnection.superClass_.respawnShadow_.call(this),
        !(e = this.targetBlock()))
      )
        throw Error(
          "Couldn't respawn the shadow block that should exist here."
        );
      e.initSvg(), e.render(!1), t.rendered && t.render();
    }
  }),
  (Blockly.RenderedConnection.prototype.neighbours = function (t) {
    return this.dbOpposite_.getNeighbours(this, t);
  }),
  (Blockly.RenderedConnection.prototype.connect_ = function (t) {
    Blockly.RenderedConnection.superClass_.connect_.call(this, t);
    var e = this.getSourceBlock();
    (t = t.getSourceBlock()),
      e.rendered && e.updateDisabled(),
      t.rendered && t.updateDisabled(),
      e.rendered &&
        t.rendered &&
        (this.type == Blockly.NEXT_STATEMENT ||
        this.type == Blockly.PREVIOUS_STATEMENT
          ? t.render()
          : e.render());
  }),
  (Blockly.RenderedConnection.prototype.onCheckChanged_ = function () {
    !this.isConnected() ||
      (this.targetConnection && this.checkType(this.targetConnection)) ||
      ((this.isSuperior() ? this.targetBlock() : this.sourceBlock_).unplug(),
      this.sourceBlock_.bumpNeighbours());
  }),
  (Blockly.Marker = function () {
    (this.drawer_ = this.curNode_ = this.colour = null), (this.type = "marker");
  }),
  (Blockly.Marker.prototype.setDrawer = function (t) {
    this.drawer_ = t;
  }),
  (Blockly.Marker.prototype.getDrawer = function () {
    return this.drawer_;
  }),
  (Blockly.Marker.prototype.getCurNode = function () {
    return this.curNode_;
  }),
  (Blockly.Marker.prototype.setCurNode = function (t) {
    var e = this.curNode_;
    (this.curNode_ = t), this.drawer_ && this.drawer_.draw(e, this.curNode_);
  }),
  (Blockly.Marker.prototype.draw = function () {
    this.drawer_ && this.drawer_.draw(this.curNode_, this.curNode_);
  }),
  (Blockly.Marker.prototype.hide = function () {
    this.drawer_ && this.drawer_.hide();
  }),
  (Blockly.Marker.prototype.dispose = function () {
    this.getDrawer() && this.getDrawer().dispose();
  }),
  (Blockly.Cursor = function () {
    Blockly.Cursor.superClass_.constructor.call(this), (this.type = "cursor");
  }),
  Blockly.utils.object.inherits(Blockly.Cursor, Blockly.Marker),
  (Blockly.Cursor.prototype.next = function () {
    var t = this.getCurNode();
    if (!t) return null;
    for (
      t = t.next();
      t &&
      t.next() &&
      (t.getType() == Blockly.ASTNode.types.NEXT ||
        t.getType() == Blockly.ASTNode.types.BLOCK);

    )
      t = t.next();
    return t && this.setCurNode(t), t;
  }),
  (Blockly.Cursor.prototype.in = function () {
    var t = this.getCurNode();
    return t
      ? ((t.getType() != Blockly.ASTNode.types.PREVIOUS &&
          t.getType() != Blockly.ASTNode.types.OUTPUT) ||
          (t = t.next()),
        (t = t.in()) && this.setCurNode(t),
        t)
      : null;
  }),
  (Blockly.Cursor.prototype.prev = function () {
    var t = this.getCurNode();
    if (!t) return null;
    for (
      t = t.prev();
      t &&
      t.prev() &&
      (t.getType() == Blockly.ASTNode.types.NEXT ||
        t.getType() == Blockly.ASTNode.types.BLOCK);

    )
      t = t.prev();
    return t && this.setCurNode(t), t;
  }),
  (Blockly.Cursor.prototype.out = function () {
    var t = this.getCurNode();
    return t
      ? ((t = t.out()) &&
          t.getType() == Blockly.ASTNode.types.BLOCK &&
          (t = t.prev() || t),
        t && this.setCurNode(t),
        t)
      : null;
  }),
  (Blockly.Cursor.prototype.onBlocklyAction = function (t) {
    if (
      this.getCurNode() &&
      this.getCurNode().getType() === Blockly.ASTNode.types.FIELD &&
      this.getCurNode().getLocation().onBlocklyAction(t)
    )
      return !0;
    switch (t.name) {
      case Blockly.navigation.actionNames.PREVIOUS:
        return this.prev(), !0;
      case Blockly.navigation.actionNames.OUT:
        return this.out(), !0;
      case Blockly.navigation.actionNames.NEXT:
        return this.next(), !0;
      case Blockly.navigation.actionNames.IN:
        return this.in(), !0;
      default:
        return !1;
    }
  }),
  (Blockly.BasicCursor = function () {
    Blockly.BasicCursor.superClass_.constructor.call(this);
  }),
  Blockly.utils.object.inherits(Blockly.BasicCursor, Blockly.Cursor),
  (Blockly.BasicCursor.prototype.next = function () {
    var t = this.getCurNode();
    return t
      ? ((t = this.getNextNode_(t, this.validNode_)) && this.setCurNode(t), t)
      : null;
  }),
  (Blockly.BasicCursor.prototype.in = function () {
    return this.next();
  }),
  (Blockly.BasicCursor.prototype.prev = function () {
    var t = this.getCurNode();
    return t
      ? ((t = this.getPreviousNode_(t, this.validNode_)) && this.setCurNode(t),
        t)
      : null;
  }),
  (Blockly.BasicCursor.prototype.out = function () {
    return this.prev();
  }),
  (Blockly.BasicCursor.prototype.getNextNode_ = function (t, e) {
    if (!t) return null;
    var o = t.in() || t.next();
    return e(o)
      ? o
      : o
      ? this.getNextNode_(o, e)
      : e((t = this.findSiblingOrParent_(t.out())))
      ? t
      : t
      ? this.getNextNode_(t, e)
      : null;
  }),
  (Blockly.BasicCursor.prototype.getPreviousNode_ = function (t, e) {
    if (!t) return null;
    var o = t.prev();
    return e((o = o ? this.getRightMostChild_(o) : t.out()))
      ? o
      : o
      ? this.getPreviousNode_(o, e)
      : null;
  }),
  (Blockly.BasicCursor.prototype.validNode_ = function (t) {
    var e = !1;
    return (
      ((t = t && t.getType()) != Blockly.ASTNode.types.OUTPUT &&
        t != Blockly.ASTNode.types.INPUT &&
        t != Blockly.ASTNode.types.FIELD &&
        t != Blockly.ASTNode.types.NEXT &&
        t != Blockly.ASTNode.types.PREVIOUS &&
        t != Blockly.ASTNode.types.WORKSPACE) ||
        (e = !0),
      e
    );
  }),
  (Blockly.BasicCursor.prototype.findSiblingOrParent_ = function (t) {
    if (!t) return null;
    var e = t.next();
    return e || this.findSiblingOrParent_(t.out());
  }),
  (Blockly.BasicCursor.prototype.getRightMostChild_ = function (t) {
    if (!t.in()) return t;
    for (t = t.in(); t.next(); ) t = t.next();
    return this.getRightMostChild_(t);
  }),
  (Blockly.TabNavigateCursor = function () {
    Blockly.TabNavigateCursor.superClass_.constructor.call(this);
  }),
  Blockly.utils.object.inherits(Blockly.TabNavigateCursor, Blockly.BasicCursor),
  (Blockly.TabNavigateCursor.prototype.validNode_ = function (t) {
    var e = !1,
      o = t && t.getType();
    return (
      t &&
        ((t = t.getLocation()),
        o == Blockly.ASTNode.types.FIELD &&
          t &&
          t.isTabNavigable() &&
          t.isClickable() &&
          (e = !0)),
      e
    );
  }),
  (Blockly.utils.Rect = function (t, e, o, i) {
    (this.top = t), (this.bottom = e), (this.left = o), (this.right = i);
  }),
  (Blockly.utils.Rect.prototype.contains = function (t, e) {
    return (
      t >= this.left && t <= this.right && e >= this.top && e <= this.bottom
    );
  }),
  (Blockly.BlockSvg = function (t, e, o) {
    (this.svgGroup_ = Blockly.utils.dom.createSvgElement("g", {}, null)),
      (this.svgGroup_.translate_ = ""),
      (this.style = t.getRenderer().getConstants().getBlockStyle(null)),
      (this.pathObject = t
        .getRenderer()
        .makePathObject(this.svgGroup_, this.style)),
      (this.rendered = !1),
      (this.workspace = t),
      (this.previousConnection =
        this.nextConnection =
        this.outputConnection =
          null),
      (this.useDragSurface_ =
        Blockly.utils.is3dSupported() && !!t.getBlockDragSurface());
    var i = this.pathObject.svgPath;
    (i.tooltip = this),
      Blockly.Tooltip.bindMouseEvents(i),
      Blockly.BlockSvg.superClass_.constructor.call(this, t, e, o),
      this.svgGroup_.dataset && (this.svgGroup_.dataset.id = this.id);
  }),
  Blockly.utils.object.inherits(Blockly.BlockSvg, Blockly.Block),
  (Blockly.BlockSvg.prototype.height = 0),
  (Blockly.BlockSvg.prototype.width = 0),
  (Blockly.BlockSvg.prototype.opacity_ = 1),
  (Blockly.BlockSvg.prototype.dragStartXY_ = null),
  (Blockly.BlockSvg.prototype.isGlowingBlock_ = !1),
  (Blockly.BlockSvg.prototype.isGlowingStack_ = !1),
  (Blockly.BlockSvg.prototype.isHighlightingBlock_ = !1),
  (Blockly.BlockSvg.prototype.warningTextDb_ = null),
  (Blockly.BlockSvg.INLINE = -1),
  (Blockly.BlockSvg.COLLAPSED_WARNING_ID = "TEMP_COLLAPSED_WARNING_"),
  (Blockly.BlockSvg.prototype.initSvg = function () {
    if (!this.workspace.rendered) throw TypeError("Workspace is headless.");
    for (var t, e = 0; (t = this.inputList[e]); e++) t.init();
    for (t = this.getIcons(), e = 0; e < t.length; e++) t[e].createIcon();
    this.applyColour(),
      this.pathObject.updateMovable(this.isMovable()),
      (e = this.getSvgRoot()),
      this.workspace.options.readOnly ||
        this.eventsInit_ ||
        !e ||
        Blockly.bindEventWithChecks_(e, "mousedown", this, this.onMouseDown_),
      (this.eventsInit_ = !0),
      e.parentNode || this.workspace.getCanvas().appendChild(e),
      !this.workspace.options.readOnly &&
        this.outputConnection &&
        this.bindReporterHoverEvents_();
  }),
  (Blockly.BlockSvg.prototype.select = function () {
    if (this.isMovable())
      if (this.isShadow() && this.getParent()) this.getParent().select();
      else if (Blockly.selected != this) {
        var t = null;
        if (Blockly.selected) {
          (t = Blockly.selected.id), Blockly.Events.disable();
          try {
            Blockly.selected.unselect();
          } finally {
            Blockly.Events.enable();
          }
        }
        ((t = new Blockly.Events.Ui(null, "selected", t, this.id)).workspaceId =
          this.workspace.id),
          Blockly.Events.fire(t),
          (Blockly.selected = this),
          this.addSelect();
      }
  }),
  (Blockly.BlockSvg.prototype.unselect = function () {
    if (Blockly.selected == this) {
      var t = new Blockly.Events.Ui(null, "selected", this.id, null);
      (t.workspaceId = this.workspace.id),
        Blockly.Events.fire(t),
        (Blockly.selected = null),
        this.removeSelect();
    }
  }),
  (Blockly.BlockSvg.prototype.setHighlightWarning = function (t) {
    this.rendered &&
      ((this.isHighlightingWarningBlock_ = t) && !this.svgPathWarningHighlight_
        ? ((t =
            Blockly.mainWorkspace.options.warningGlowFilterId ||
            "blocklyHighlightWarningFilter"),
          (this.svgPathWarningHighlight_ = this.svgPath_.cloneNode(!0)),
          this.svgPathWarningHighlight_.setAttribute("fill", "none"),
          this.svgPathWarningHighlight_.setAttribute(
            "filter",
            "url(#" + t + ")"
          ),
          this.getSvgRoot().appendChild(this.svgPathWarningHighlight_))
        : !this.isHighlightingWarningBlock_ &&
          this.svgPathWarningHighlight_ &&
          (this.getSvgRoot().removeChild(this.svgPathWarningHighlight_),
          (this.svgPathWarningHighlight_ = null)));
  }),
  (Blockly.BlockSvg.prototype.mutator = null),
  (Blockly.BlockSvg.prototype.comment = null),
  (Blockly.BlockSvg.prototype.commentIcon_ = null),
  (Blockly.BlockSvg.prototype.warning = null),
  (Blockly.BlockSvg.prototype.breakpoint = null),
  (Blockly.BlockSvg.prototype.getIcons = function () {
    var t = [];
    return (
      this.breakpoint && t.push(this.breakpoint),
      this.mutator && t.push(this.mutator),
      this.commentIcon_ && t.push(this.commentIcon_),
      this.warning && t.push(this.warning),
      t
    );
  }),
  (Blockly.BlockSvg.prototype.setParent = function (t) {
    var e = this.parentBlock_;
    if (t != e) {
      Blockly.utils.dom.startTextWidthCache(),
        Blockly.BlockSvg.superClass_.setParent.call(this, t),
        Blockly.utils.dom.stopTextWidthCache();
      var o = this.getSvgRoot();
      if (!this.workspace.isClearing && o) {
        var i = this.getRelativeToSurfaceXY();
        t
          ? (t.getSvgRoot().appendChild(o),
            (t = this.getRelativeToSurfaceXY()),
            this.moveConnections(t.x - i.x, t.y - i.y))
          : e &&
            (this.workspace.getCanvas().appendChild(o),
            this.translate(i.x, i.y)),
          this.applyColour();
      }
    }
  }),
  (Blockly.BlockSvg.prototype.getRelativeToSurfaceXY = function () {
    var t = 0,
      e = 0,
      o = this.useDragSurface_
        ? this.workspace.getBlockDragSurface().getGroup()
        : null,
      i = this.getSvgRoot();
    if (i)
      do {
        var n = Blockly.utils.getRelativeXY(i);
        (t += n.x),
          (e += n.y),
          this.useDragSurface_ &&
            this.workspace.getBlockDragSurface().getCurrentBlock() == i &&
            ((t += (n = this.workspace
              .getBlockDragSurface()
              .getSurfaceTranslation()).x),
            (e += n.y)),
          (i = i.parentNode);
      } while (i && i != this.workspace.getCanvas() && i != o);
    return new Blockly.utils.Coordinate(t, e);
  }),
  (Blockly.BlockSvg.prototype.moveBy = function (t, e) {
    if (this.parentBlock_) throw Error("Block has parent.");
    var o = Blockly.Events.isEnabled();
    if (o) var i = new Blockly.Events.BlockMove(this);
    var n = this.getRelativeToSurfaceXY();
    this.translate(n.x + t, n.y + e),
      this.moveConnections(t, e),
      o && (i.recordNew(), Blockly.Events.fire(i)),
      this.workspace.resizeContents();
  }),
  (Blockly.BlockSvg.prototype.translate = function (t, e) {
    this.getSvgRoot().setAttribute(
      "transform",
      "translate(" + t + "," + e + ")"
    );
  }),
  (Blockly.BlockSvg.prototype.moveToDragSurface = function () {
    if (this.useDragSurface_) {
      var t = this.getRelativeToSurfaceXY();
      this.clearTransformAttributes_(),
        this.workspace.getBlockDragSurface().translateSurface(t.x, t.y),
        (t = this.getSvgRoot()) &&
          this.workspace.getBlockDragSurface().setBlocksAndShow(t);
    }
  }),
  (Blockly.BlockSvg.prototype.moveTo = function (t) {
    var e = this.getRelativeToSurfaceXY();
    this.moveBy(t.x - e.x, t.y - e.y);
  }),
  (Blockly.BlockSvg.prototype.moveOffDragSurface = function (t) {
    this.useDragSurface_ &&
      (this.translate(t.x, t.y),
      this.workspace
        .getBlockDragSurface()
        .clearAndHide(this.workspace.getCanvas()));
  }),
  (Blockly.BlockSvg.prototype.moveDuringDrag = function (t) {
    this.useDragSurface_
      ? this.workspace.getBlockDragSurface().translateSurface(t.x, t.y)
      : ((this.svgGroup_.translate_ = "translate(" + t.x + "," + t.y + ")"),
        this.svgGroup_.setAttribute(
          "transform",
          this.svgGroup_.translate_ + this.svgGroup_.skew_
        ));
  }),
  (Blockly.BlockSvg.prototype.clearTransformAttributes_ = function () {
    this.getSvgRoot().removeAttribute("transform");
  }),
  (Blockly.BlockSvg.prototype.snapToGrid = function () {
    if (
      this.workspace &&
      !this.workspace.isDragging() &&
      !this.getParent() &&
      !this.isInFlyout
    ) {
      var t = this.workspace.getGrid();
      if (t && t.shouldSnap()) {
        var e = t.getSpacing(),
          o = e / 2,
          i = this.getRelativeToSurfaceXY();
        (t = Math.round((i.x - o) / e) * e + o - i.x),
          (e = Math.round((i.y - o) / e) * e + o - i.y),
          (t = Math.round(t)),
          (e = Math.round(e)),
          (0 == t && 0 == e) || this.moveBy(t, e);
      }
    }
  }),
  (Blockly.BlockSvg.prototype.getBoundingRectangle = function () {
    var t = this.getRelativeToSurfaceXY(),
      e = this.getHeightWidth();
    if (this.RTL)
      var o = t.x - e.width,
        i = t.x;
    else (o = t.x), (i = t.x + e.width);
    return new Blockly.utils.Rect(t.y, t.y + e.height, o, i);
  }),
  (Blockly.BlockSvg.prototype.markDirty = function () {
    for (var t, e = 0; (t = this.inputList[e]); e++) t.markDirty();
  }),
  (Blockly.BlockSvg.prototype.setOpacity = function (t) {
    (this.opacity_ = t), this.rendered && this.updateColour();
  }),
  (Blockly.BlockSvg.prototype.getOpacity = function () {
    return this.opacity_;
  }),
  (Blockly.BlockSvg.prototype.setCollapsed = function (t) {
    if (this.collapsed_ != t) {
      for (var e, o = [], i = 0; (e = this.inputList[i]); i++)
        o.push.apply(o, e.setVisible(!t));
      if (t) {
        for (e = this.getIcons(), i = 0; i < e.length; i++) e[i].setVisible(!1);
        (i = this.toString(Blockly.COLLAPSE_CHARS, "", !0)),
          (i = this.appendDummyInput("_TEMP_COLLAPSED_INPUT").appendField(i));
        var n,
          l = this;
        for (
          (e = this.workspace
            .getRenderer()
            .getConstants().EXPAND_IMAGE_DATAURI) &&
            i.appendField(
              new Blockly.FieldImage(
                e,
                24,
                24,
                "",
                function () {
                  l.setCollapsed(!1);
                },
                !1
              )
            ),
            i.init(),
            e = this.getDescendants(!0),
            (i = this.getNextBlock()) &&
              ((i = e.indexOf(i)), e.splice(i, e.length - i)),
            i = 1;
          (n = e[i]);
          i++
        )
          if (n.warning) {
            this.setWarningText(
              Blockly.Msg.COLLAPSED_WARNINGS_WARNING,
              Blockly.BlockSvg.COLLAPSED_WARNING_ID
            );
            break;
          }
      } else
        this.removeInput("_TEMP_COLLAPSED_INPUT"),
          this.warning &&
            (this.warning.setText("", Blockly.BlockSvg.COLLAPSED_WARNING_ID),
            Object.keys(this.warning.text_).length ||
              this.setWarningText(null));
      if (
        (Blockly.BlockSvg.superClass_.setCollapsed.call(this, t),
        o.length || (o[0] = this),
        this.rendered)
      )
        for (i = 0; (n = o[i]); i++) n.render();
    }
  }),
  (Blockly.BlockSvg.prototype.tab = function (t, e) {
    var o = new Blockly.TabNavigateCursor();
    o.setCurNode(Blockly.ASTNode.createFieldNode(t)),
      (t = o.getCurNode()),
      o.onBlocklyAction(
        e ? Blockly.navigation.ACTION_NEXT : Blockly.navigation.ACTION_PREVIOUS
      ),
      (e = o.getCurNode()) && e !== t && e.getLocation().showEditor();
  }),
  (Blockly.BlockSvg.prototype.onMouseDown_ = function (t) {
    var e = this.workspace && this.workspace.getGesture(t);
    e && e.handleBlockStart(t, this);
  }),
  (Blockly.BlockSvg.prototype.showHelp = function () {
    var t = "function" == typeof this.helpUrl ? this.helpUrl() : this.helpUrl;
    t && alert(t);
  }),
  (Blockly.BlockSvg.prototype.generateContextMenu = function () {
    if (this.workspace.options.readOnly || !this.contextMenu) return null;
    var t = this,
      e = [],
      o = null == t.previousConnection && null == t.outputConnection;
    if (!this.isInFlyout) {
      if (
        (this.isDeletable() &&
          this.isMovable() &&
          e.push(Blockly.ContextMenu.blockDuplicateOption(t)),
        this.workspace.options.comments &&
          !this.collapsed_ &&
          this.isEditable() &&
          !Blockly.pxtBlocklyUtils.isShadowArgumentReporter(t) &&
          e.push(Blockly.ContextMenu.blockCommentOption(t)),
        this.isMovable())
      )
        if (this.collapsed_)
          this.workspace.options.collapse &&
            o &&
            (((o = { enabled: !0 }).text = Blockly.Msg.EXPAND_BLOCK),
            (o.callback = function () {
              t.setCollapsed(!1);
            }),
            e.push(o));
        else {
          if (this.workspace.options.inline)
            for (var i = 1; i < this.inputList.length; i++)
              if (
                this.inputList[i - 1].type != Blockly.NEXT_STATEMENT &&
                this.inputList[i].type != Blockly.NEXT_STATEMENT
              ) {
                i = { enabled: !0 };
                var n = this.getInputsInline();
                (i.text = n
                  ? Blockly.Msg.EXTERNAL_INPUTS
                  : Blockly.Msg.INLINE_INPUTS),
                  (i.callback = function () {
                    t.setInputsInline(!n);
                  }),
                  e.push(i);
                break;
              }
          this.workspace.options.collapse &&
            o &&
            (((o = { enabled: !0 }).text = Blockly.Msg.COLLAPSE_BLOCK),
            (o.callback = function () {
              t.setCollapsed(!0);
            }),
            e.push(o));
        }
      this.workspace.options.disable &&
        this.isEditable() &&
        ((o = {
          text: this.isEnabled()
            ? Blockly.Msg.DISABLE_BLOCK
            : Blockly.Msg.ENABLE_BLOCK,
          enabled: !this.getInheritedDisabled(),
          callback: function () {
            var e = Blockly.Events.getGroup();
            e || Blockly.Events.setGroup(!0),
              t.setEnabled(!t.isEnabled()),
              e || Blockly.Events.setGroup(!1);
          },
        }),
        e.push(o)),
        this.isDeletable() && e.push(Blockly.ContextMenu.blockDeleteOption(t));
    }
    return (
      e.push(Blockly.ContextMenu.blockHelpOption(t)),
      this.customContextMenu && this.customContextMenu(e),
      e
    );
  }),
  (Blockly.BlockSvg.prototype.showContextMenu = function (t) {
    if (
      this.parentBlock_ &&
      this.isShadow_ &&
      !Blockly.pxtBlocklyUtils.isShadowArgumentReporter(this)
    )
      this.parentBlock_.showContextMenu_(t);
    else {
      var e = this.generateContextMenu();
      e &&
        e.length &&
        (Blockly.ContextMenu.show(t, e, this.RTL),
        (Blockly.ContextMenu.currentBlock = this));
    }
  }),
  (Blockly.BlockSvg.prototype.moveConnections = function (t, e) {
    if (this.rendered) {
      for (var o = this.getConnections_(!1), i = 0; i < o.length; i++)
        o[i].moveBy(t, e);
      for (o = this.getIcons(), i = 0; i < o.length; i++)
        o[i].computeIconLocation();
      for (i = 0; i < this.childBlocks_.length; i++)
        this.childBlocks_[i].moveConnections(t, e);
      Blockly.WidgetDiv.repositionForWindowResize(),
        Blockly.DropDownDiv.repositionForWindowResize();
    }
  }),
  (Blockly.BlockSvg.prototype.setDragging = function (t) {
    if (t) {
      var e = this.getSvgRoot();
      (e.translate_ = ""),
        (e.skew_ = ""),
        (Blockly.draggingConnections = Blockly.draggingConnections.concat(
          this.getConnections_(!0)
        )),
        Blockly.utils.dom.addClass(this.svgGroup_, "blocklyDragging");
    } else
      (Blockly.draggingConnections = []),
        Blockly.utils.dom.removeClass(this.svgGroup_, "blocklyDragging");
    for (e = 0; e < this.childBlocks_.length; e++)
      this.childBlocks_[e].setDragging(t);
  }),
  (Blockly.BlockSvg.prototype.setMovable = function (t) {
    Blockly.BlockSvg.superClass_.setMovable.call(this, t),
      t || this.unselect(),
      this.pathObject.updateMovable(t);
  }),
  (Blockly.BlockSvg.prototype.setEditable = function (t) {
    Blockly.BlockSvg.superClass_.setEditable.call(this, t),
      (t = this.getIcons());
    for (var e = 0; e < t.length; e++) t[e].updateEditable();
  }),
  (Blockly.BlockSvg.prototype.setShadow = function (t) {
    Blockly.BlockSvg.superClass_.setShadow.call(this, t), this.applyColour();
  }),
  (Blockly.BlockSvg.prototype.setInsertionMarker = function (t, e) {
    this.isInsertionMarker_ != t &&
      (this.isInsertionMarker_ = t) &&
      (this.setColour(Blockly.Colours.insertionMarker),
      this.pathObject.updateInsertionMarker(!0));
  }),
  (Blockly.BlockSvg.prototype.getSvgRoot = function () {
    return this.svgGroup_;
  }),
  (Blockly.BlockSvg.prototype.dispose = function (t, e) {
    if (this.workspace) {
      Blockly.Tooltip.hide(), Blockly.utils.dom.startTextWidthCache();
      var o = this.workspace;
      if (
        (Blockly.selected == this &&
          (this.unselect(), this.workspace.cancelCurrentGesture()),
        Blockly.ContextMenu.currentBlock == this && Blockly.ContextMenu.hide(),
        this.workspace.keyboardAccessibilityMode &&
          Blockly.navigation.moveCursorOnBlockDelete(this),
        e &&
          this.rendered &&
          (this.unplug(t), Blockly.blockAnimations.disposeUiEffect(this)),
        (this.rendered = !1),
        this.warningTextDb_)
      ) {
        for (var i in this.warningTextDb_) clearTimeout(this.warningTextDb_[i]);
        this.warningTextDb_ = null;
      }
      for (e = this.getIcons(), i = 0; i < e.length; i++) e[i].dispose();
      Blockly.BlockSvg.superClass_.dispose.call(this, !!t),
        Blockly.utils.dom.removeNode(this.svgGroup_),
        o.resizeContents(),
        (this.svgGroup_ = null),
        Blockly.utils.dom.stopTextWidthCache();
    }
  }),
  (Blockly.BlockSvg.prototype.applyColour = function () {
    this.pathObject.applyColour(this);
    for (var t = this.getIcons(), e = 0; e < t.length; e++) t[e].applyColour();
    for (t = 0; (e = this.inputList[t]); t++)
      for (var o, i = 0; (o = e.fieldRow[i]); i++) o.applyColour();
  }),
  (Blockly.BlockSvg.prototype.updateDisabled = function () {
    var t = this.getChildren(!1);
    this.applyColour();
    for (var e, o = 0; (e = t[o]); o++) e.updateDisabled();
  }),
  (Blockly.BlockSvg.prototype.getCommentIcon = function () {
    return this.commentIcon_;
  }),
  (Blockly.BlockSvg.prototype.enableBreakpoint = function (t) {
    var e = !1;
    t
      ? this.breakpoint ||
        ((this.breakpoint = new Blockly.Breakpoint(this)),
        (e = !0),
        this.breakpoint.enableBreakpoint())
      : this.breakpoint && (this.breakpoint.dispose(), (e = !0)),
      e && this.rendered && (this.render(), this.bumpNeighbours());
  }),
  (Blockly.BlockSvg.prototype.setCommentText = function (t) {
    if (!Blockly.Comment) throw Error("Missing require for Blockly.Comment");
    this.commentModel.text != t &&
      (Blockly.BlockSvg.superClass_.setCommentText.call(this, t),
      (t = null != t),
      !!this.commentIcon_ == t
        ? this.commentIcon_.updateText()
        : (t
            ? (this.comment = this.commentIcon_ = new Blockly.Comment(this))
            : (this.commentIcon_.dispose(),
              (this.comment = this.commentIcon_ = null)),
          this.rendered && (this.render(), this.bumpNeighbours())));
  }),
  (Blockly.BlockSvg.prototype.setWarningText = function (t, e) {
    if (!Blockly.Warning) throw Error("Missing require for Blockly.Warning");
    this.warningTextDb_ || (this.warningTextDb_ = Object.create(null));
    var o = e || "";
    if (o)
      this.warningTextDb_[o] &&
        (clearTimeout(this.warningTextDb_[o]), delete this.warningTextDb_[o]);
    else
      for (var i in this.warningTextDb_)
        clearTimeout(this.warningTextDb_[i]), delete this.warningTextDb_[i];
    if (this.workspace.isDragging()) {
      var n = this;
      this.warningTextDb_[o] = setTimeout(function () {
        n.workspace && (delete n.warningTextDb_[o], n.setWarningText(t, o));
      }, 100);
    } else {
      for (
        this.isInFlyout && (t = null), e = this.getSurroundParent(), i = null;
        e;

      )
        e.isCollapsed() && (i = e), (e = e.getSurroundParent());
      i &&
        t &&
        i.setWarningText(
          Blockly.Msg.COLLAPSED_WARNINGS_WARNING,
          Blockly.BlockSvg.COLLAPSED_WARNING_ID
        ),
        (e = !1),
        "string" == typeof t
          ? (this.warning ||
              ((this.warning = new Blockly.Warning(this)), (e = !0)),
            this.warning.setText(t, o))
          : this.warning && !o
          ? (this.warning.dispose(), (e = !0))
          : this.warning &&
            ((e = this.warning.getText()),
            this.warning.setText("", o),
            (i = this.warning.getText()) || this.warning.dispose(),
            (e = e != i)),
        e && this.rendered && (this.render(), this.bumpNeighbours());
    }
  }),
  (Blockly.BlockSvg.prototype.setMutator = function (t) {
    this.mutator && this.mutator !== t && this.mutator.dispose(),
      t && (t.setBlock(this), (this.mutator = t), t.createIcon()),
      this.rendered && (this.render(), this.bumpNeighbours());
  }),
  (Blockly.BlockSvg.prototype.setDisabled = function (t) {
    console.warn(
      "Deprecated call to Blockly.BlockSvg.prototype.setDisabled, use Blockly.BlockSvg.prototype.setEnabled instead."
    ),
      this.setEnabled(!t);
  }),
  (Blockly.BlockSvg.prototype.setEnabled = function (t) {
    this.isEnabled() != t &&
      (Blockly.BlockSvg.superClass_.setEnabled.call(this, t),
      this.rendered && this.updateDisabled());
  }),
  (Blockly.BlockSvg.prototype.setHighlighted = function (t) {
    this.rendered && this.pathObject.updateHighlighted(t);
  }),
  (Blockly.BlockSvg.prototype.setHighlightWarning = function (t) {
    this.rendered && this.pathObject.updateHighlightedWarning(t);
  }),
  (Blockly.BlockSvg.prototype.addSelect = function () {
    this.pathObject.updateSelected(!0);
  }),
  (Blockly.BlockSvg.prototype.removeSelect = function () {
    this.pathObject.updateSelected(!1);
  }),
  (Blockly.BlockSvg.prototype.setDeleteStyle = function (t) {
    this.pathObject.updateDraggingDelete(t);
  }),
  (Blockly.BlockSvg.prototype.getColour = function () {
    return this.style.colourPrimary;
  }),
  (Blockly.BlockSvg.prototype.getColourSecondary = function () {
    return this.style.colourSecondary;
  }),
  (Blockly.BlockSvg.prototype.getColourTertiary = function () {
    return this.style.colourTertiary;
  }),
  (Blockly.BlockSvg.prototype.setColour = function (t, e, o) {
    Blockly.BlockSvg.superClass_.setColour.call(this, t),
      (t = this.workspace
        .getRenderer()
        .getConstants()
        .getBlockStyleForColour(this.colour_)),
      this.pathObject.setStyle(t.style),
      (this.style = t.style),
      (this.styleName_ = t.name),
      e && (this.style.colourSecondary = e),
      o && (this.style.colourTertiary = o),
      this.applyColour();
  }),
  (Blockly.BlockSvg.prototype.setStyle = function (t) {
    var e = this.workspace.getRenderer().getConstants().getBlockStyle(t);
    if (((this.styleName_ = t), !e)) throw Error("Invalid style name: " + t);
    (this.hat = e.hat),
      this.pathObject.setStyle(e),
      (this.colour_ = e.colourPrimary),
      (this.style = e),
      this.applyColour();
  }),
  (Blockly.BlockSvg.prototype.bringToFront = function () {
    var t = this;
    do {
      var e = t.getSvgRoot(),
        o = e.parentNode,
        i = o.childNodes;
      i[i.length - 1] !== e && o.appendChild(e), (t = t.getParent());
    } while (t);
  }),
  (Blockly.BlockSvg.prototype.setPreviousStatement = function (t, e) {
    Blockly.BlockSvg.superClass_.setPreviousStatement.call(this, t, e),
      this.rendered && (this.render(), this.bumpNeighbours());
  }),
  (Blockly.BlockSvg.prototype.setNextStatement = function (t, e) {
    Blockly.BlockSvg.superClass_.setNextStatement.call(this, t, e),
      this.rendered && (this.render(), this.bumpNeighbours());
  }),
  (Blockly.BlockSvg.prototype.setOutput = function (t, e) {
    Blockly.BlockSvg.superClass_.setOutput.call(this, t, e),
      this.rendered && (this.render(), this.bumpNeighbours());
  }),
  (Blockly.BlockSvg.prototype.setInputsInline = function (t) {
    Blockly.BlockSvg.superClass_.setInputsInline.call(this, t),
      this.rendered && (this.render(), this.bumpNeighbours());
  }),
  (Blockly.BlockSvg.prototype.removeInput = function (t, e) {
    Blockly.BlockSvg.superClass_.removeInput.call(this, t, e),
      this.rendered && (this.render(), this.bumpNeighbours());
  }),
  (Blockly.BlockSvg.prototype.moveNumberedInputBefore = function (t, e) {
    Blockly.BlockSvg.superClass_.moveNumberedInputBefore.call(this, t, e),
      this.rendered && (this.render(), this.bumpNeighbours());
  }),
  (Blockly.BlockSvg.prototype.appendInput_ = function (t, e) {
    return (
      (t = Blockly.BlockSvg.superClass_.appendInput_.call(this, t, e)),
      this.rendered && (this.render(), this.bumpNeighbours()),
      t
    );
  }),
  (Blockly.BlockSvg.prototype.setConnectionTracking = function (t) {
    if (
      (this.previousConnection && this.previousConnection.setTracking(t),
      this.outputConnection && this.outputConnection.setTracking(t),
      this.nextConnection)
    ) {
      this.nextConnection.setTracking(t);
      var e = this.nextConnection.targetBlock();
      e && e.setConnectionTracking(t);
    }
    if (!this.collapsed_)
      for (e = 0; e < this.inputList.length; e++) {
        var o = this.inputList[e].connection;
        o &&
          (o.setTracking(t),
          (o = o.targetBlock()) && o.setConnectionTracking(t));
      }
  }),
  (Blockly.BlockSvg.prototype.getConnections_ = function (t) {
    var e = [];
    if (
      (t || this.rendered) &&
      (this.outputConnection && e.push(this.outputConnection),
      this.previousConnection && e.push(this.previousConnection),
      this.nextConnection && e.push(this.nextConnection),
      t || !this.collapsed_)
    ) {
      t = 0;
      for (var o; (o = this.inputList[t]); t++)
        o.connection && e.push(o.connection);
    }
    return e;
  }),
  (Blockly.BlockSvg.prototype.lastConnectionInStack = function () {
    return Blockly.BlockSvg.superClass_.lastConnectionInStack.call(this);
  }),
  (Blockly.BlockSvg.prototype.getMatchingConnection = function (t, e) {
    return Blockly.BlockSvg.superClass_.getMatchingConnection.call(this, t, e);
  }),
  (Blockly.BlockSvg.prototype.makeConnection_ = function (t) {
    return new Blockly.RenderedConnection(this, t);
  }),
  (Blockly.BlockSvg.prototype.bumpNeighbours = function () {
    if (this.workspace && !this.workspace.isDragging()) {
      var t = this.getRootBlock();
      if (!t.isInFlyout)
        for (var e, o = this.getConnections_(!1), i = 0; (e = o[i]); i++) {
          e.isConnected() && e.isSuperior() && e.targetBlock().bumpNeighbours();
          for (
            var n, l = e.neighbours(Blockly.SNAP_RADIUS), r = 0;
            (n = l[r]);
            r++
          )
            (e.isConnected() && n.isConnected()) ||
              (n.getSourceBlock().getRootBlock() != t &&
                (e.isSuperior() ? n.bumpAwayFrom(e) : e.bumpAwayFrom(n)));
        }
    }
  }),
  (Blockly.BlockSvg.prototype.scheduleSnapAndBump = function () {
    var t = this,
      e = Blockly.Events.getGroup();
    setTimeout(function () {
      Blockly.Events.setGroup(e), t.snapToGrid(), Blockly.Events.setGroup(!1);
    }, Blockly.BUMP_DELAY / 2),
      setTimeout(function () {
        Blockly.Events.setGroup(e),
          t.bumpNeighbours(),
          Blockly.Events.setGroup(!1);
      }, Blockly.BUMP_DELAY);
  }),
  (Blockly.BlockSvg.prototype.bindReporterHoverEvents_ = function () {
    var t = this;
    Blockly.bindEvent_(this.svgGroup_, "mouseover", null, function (e) {
      var o = t;
      if (!o.isInFlyout) {
        for (; o.isShadow_ && o.parentBlock_; ) o = o.parentBlock_;
        o.parentBlock_ &&
          o.outputConnection &&
          (Blockly.utils.dom.addClass(
            o.pathObject.svgPath,
            "blocklyReporterHover"
          ),
          e.stopPropagation());
      }
    }),
      Blockly.bindEvent_(this.svgGroup_, "mouseout", null, function () {
        t.isInFlyout ||
          Blockly.utils.dom.removeClass(
            t.pathObject.svgPath,
            "blocklyReporterHover"
          );
      });
  }),
  (Blockly.BlockSvg.prototype.positionNearConnection = function (t, e) {
    (t.type != Blockly.NEXT_STATEMENT && t.type != Blockly.INPUT_VALUE) ||
      this.moveBy(e.x - t.x, e.y - t.y);
  }),
  (Blockly.BlockSvg.prototype.getParent = function () {
    return Blockly.BlockSvg.superClass_.getParent.call(this);
  }),
  (Blockly.BlockSvg.prototype.getRootBlock = function () {
    return Blockly.BlockSvg.superClass_.getRootBlock.call(this);
  }),
  (Blockly.BlockSvg.prototype.render = function (t) {
    Blockly.utils.dom.startTextWidthCache(),
      (this.rendered = !0),
      this.workspace.getRenderer().render(this),
      this.updateConnectionLocations_(),
      !1 !== t &&
        ((t = this.getParent())
          ? t.render(!0)
          : this.workspace.resizeContents()),
      Blockly.utils.dom.stopTextWidthCache(),
      (t = this.workspace.getCursor()),
      this.workspace.keyboardAccessibilityMode &&
        this.pathObject.cursorSvg_ &&
        t.draw();
  }),
  (Blockly.BlockSvg.prototype.updateConnectionLocations_ = function () {
    var t = this.getRelativeToSurfaceXY();
    this.previousConnection && this.previousConnection.moveToOffset(t),
      this.outputConnection && this.outputConnection.moveToOffset(t);
    for (var e = 0; e < this.inputList.length; e++) {
      var o = this.inputList[e].connection;
      o && (o.moveToOffset(t), o.isConnected() && o.tighten());
    }
    this.nextConnection &&
      (this.nextConnection.moveToOffset(t),
      this.nextConnection.isConnected() && this.nextConnection.tighten());
  }),
  (Blockly.BlockSvg.prototype.setCursorSvg = function (t) {
    this.pathObject.setCursorSvg(t);
  }),
  (Blockly.BlockSvg.prototype.setMarkerSvg = function (t) {
    this.pathObject.setMarkerSvg(t);
  }),
  (Blockly.BlockSvg.prototype.getHeightWidth = function () {
    var t = this.height,
      e = this.width,
      o = this.getNextBlock();
    if (o) {
      o = o.getHeightWidth();
      var i = this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;
      (t += o.height - i), (e = Math.max(e, o.width));
    }
    return { height: t, width: e };
  }),
  (Blockly.BlockSvg.prototype.highlightForReplacement = function (t) {
    this.pathObject.updateReplacementHighlight(t);
  }),
  (Blockly.BlockSvg.prototype.highlightShapeForInput = function (t, e) {
    this.pathObject.updateShapeForInputHighlight(t, e);
  }),
  (Blockly.blockRendering.rendererMap_ = {}),
  (Blockly.blockRendering.useDebugger = !1),
  (Blockly.blockRendering.register = function (t, e) {
    if (Blockly.blockRendering.rendererMap_[t])
      throw Error("Renderer has already been registered.");
    Blockly.blockRendering.rendererMap_[t] = e;
  }),
  (Blockly.blockRendering.unregister = function (t) {
    Blockly.blockRendering.rendererMap_[t]
      ? delete Blockly.blockRendering.rendererMap_[t]
      : console.warn(
          'No renderer mapping for name "' + t + '" found to unregister'
        );
  }),
  (Blockly.blockRendering.startDebugger = function () {
    Blockly.blockRendering.useDebugger = !0;
  }),
  (Blockly.blockRendering.stopDebugger = function () {
    Blockly.blockRendering.useDebugger = !1;
  }),
  (Blockly.blockRendering.init = function (t) {
    if (!Blockly.blockRendering.rendererMap_[t])
      throw Error("Renderer not registered: ", t);
    var e = function (t) {
      e.superClass_.constructor.call(this, t);
    };
    return (
      Blockly.utils.object.inherits(e, Blockly.blockRendering.rendererMap_[t]),
      (t = new e(t)).init(),
      t
    );
  }),
  (Blockly.ConnectionDB = function () {
    this.connections_ = [];
  }),
  (Blockly.ConnectionDB.prototype.addConnection = function (t, e) {
    (e = this.calculateIndexForYPos_(e)), this.connections_.splice(e, 0, t);
  }),
  (Blockly.ConnectionDB.prototype.findIndexOfConnection_ = function (t, e) {
    if (!this.connections_.length) return -1;
    var o = this.calculateIndexForYPos_(e);
    if (o >= this.connections_.length) return -1;
    e = t.y;
    for (var i = o; 0 <= i && this.connections_[i].y == e; ) {
      if (this.connections_[i] == t) return i;
      i--;
    }
    for (; o < this.connections_.length && this.connections_[o].y == e; ) {
      if (this.connections_[o] == t) return o;
      o++;
    }
    return -1;
  }),
  (Blockly.ConnectionDB.prototype.calculateIndexForYPos_ = function (t) {
    if (!this.connections_.length) return 0;
    for (var e = 0, o = this.connections_.length; e < o; ) {
      var i = Math.floor((e + o) / 2);
      if (this.connections_[i].y < t) e = i + 1;
      else {
        if (!(this.connections_[i].y > t)) {
          e = i;
          break;
        }
        o = i;
      }
    }
    return e;
  }),
  (Blockly.ConnectionDB.prototype.removeConnection = function (t, e) {
    if (-1 == (t = this.findIndexOfConnection_(t, e)))
      throw Error("Unable to find connection in connectionDB.");
    this.connections_.splice(t, 1);
  }),
  (Blockly.ConnectionDB.prototype.getNeighbours = function (t, e) {
    function o(t) {
      var o = n - i[t].x,
        r = l - i[t].y;
      return Math.sqrt(o * o + r * r) <= e && a.push(i[t]), r < e;
    }
    var i = this.connections_,
      n = t.x,
      l = t.y;
    t = 0;
    for (var r = i.length - 2, s = r; t < s; )
      i[s].y < l ? (t = s) : (r = s), (s = Math.floor((t + r) / 2));
    var a = [];
    if (((r = t = s), i.length)) {
      for (; 0 <= t && o(t); ) t--;
      do {
        r++;
      } while (r < i.length && o(r));
    }
    return a;
  }),
  (Blockly.ConnectionDB.prototype.isInYRange_ = function (t, e, o) {
    return Math.abs(this.connections_[t].y - e) <= o;
  }),
  (Blockly.ConnectionDB.prototype.searchForClosest = function (t, e, o) {
    if (!this.connections_.length) return { connection: null, radius: e };
    var i = t.y,
      n = t.x;
    (t.x = n + o.x), (t.y = i + o.y);
    var l = this.calculateIndexForYPos_(t.y);
    o = null;
    for (var r, s = e, a = l - 1; 0 <= a && this.isInYRange_(a, t.y, e); )
      (r = this.connections_[a]),
        t.isConnectionAllowed(r, s) && ((o = r), (s = r.distanceFrom(t))),
        a--;
    for (; l < this.connections_.length && this.isInYRange_(l, t.y, e); )
      (r = this.connections_[l]),
        t.isConnectionAllowed(r, s) && ((o = r), (s = r.distanceFrom(t))),
        l++;
    return (t.x = n), (t.y = i), { connection: o, radius: s };
  }),
  (Blockly.ConnectionDB.init = function () {
    var t = [];
    return (
      (t[Blockly.INPUT_VALUE] = new Blockly.ConnectionDB()),
      (t[Blockly.OUTPUT_VALUE] = new Blockly.ConnectionDB()),
      (t[Blockly.NEXT_STATEMENT] = new Blockly.ConnectionDB()),
      (t[Blockly.PREVIOUS_STATEMENT] = new Blockly.ConnectionDB()),
      t
    );
  }),
  (Blockly.TouchGesture = function (t, e) {
    Blockly.TouchGesture.superClass_.constructor.call(this, t, e),
      (this.isMultiTouch_ = !1),
      (this.cachedPoints_ = Object.create(null)),
      (this.startDistance_ = this.previousScale_ = 0),
      (this.isPinchZoomEnabled_ = this.onStartWrapper_ = null);
  }),
  Blockly.utils.object.inherits(Blockly.TouchGesture, Blockly.Gesture),
  (Blockly.TouchGesture.ZOOM_IN_MULTIPLIER = 5),
  (Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER = 6),
  (Blockly.TouchGesture.prototype.doStart = function (t) {
    (this.isPinchZoomEnabled_ =
      this.startWorkspace_.options.zoomOptions &&
      this.startWorkspace_.options.zoomOptions.pinch),
      Blockly.TouchGesture.superClass_.doStart.call(this, t),
      !this.isEnding_ &&
        Blockly.Touch.isTouchEvent(t) &&
        this.handleTouchStart(t);
  }),
  (Blockly.TouchGesture.prototype.bindMouseEvents = function (t) {
    (this.onStartWrapper_ = Blockly.bindEventWithChecks_(
      document,
      "mousedown",
      null,
      this.handleStart.bind(this),
      !0
    )),
      (this.onMoveWrapper_ = Blockly.bindEventWithChecks_(
        document,
        "mousemove",
        null,
        this.handleMove.bind(this),
        !0
      )),
      (this.onUpWrapper_ = Blockly.bindEventWithChecks_(
        document,
        "mouseup",
        null,
        this.handleUp.bind(this),
        !0
      )),
      t.preventDefault(),
      t.stopPropagation();
  }),
  (Blockly.TouchGesture.prototype.handleStart = function (t) {
    !this.isDragging() &&
      Blockly.Touch.isTouchEvent(t) &&
      (this.handleTouchStart(t), this.isMultiTouch() && Blockly.longStop_());
  }),
  (Blockly.TouchGesture.prototype.handleMove = function (t) {
    this.isDragging()
      ? Blockly.Touch.shouldHandleEvent(t) &&
        Blockly.TouchGesture.superClass_.handleMove.call(this, t)
      : this.isMultiTouch()
      ? (Blockly.Touch.isTouchEvent(t) && this.handleTouchMove(t),
        Blockly.longStop_())
      : Blockly.TouchGesture.superClass_.handleMove.call(this, t);
  }),
  (Blockly.TouchGesture.prototype.handleUp = function (t) {
    Blockly.Touch.isTouchEvent(t) &&
      !this.isDragging() &&
      this.handleTouchEnd(t),
      !this.isMultiTouch() || this.isDragging()
        ? Blockly.Touch.shouldHandleEvent(t) &&
          Blockly.TouchGesture.superClass_.handleUp.call(this, t)
        : (t.preventDefault(), t.stopPropagation(), this.dispose());
  }),
  (Blockly.TouchGesture.prototype.isMultiTouch = function () {
    return this.isMultiTouch_;
  }),
  (Blockly.TouchGesture.prototype.dispose = function () {
    Blockly.TouchGesture.superClass_.dispose.call(this),
      this.onStartWrapper_ && Blockly.unbindEvent_(this.onStartWrapper_);
  }),
  (Blockly.TouchGesture.prototype.handleTouchStart = function (t) {
    var e = Blockly.Touch.getTouchIdentifierFromEvent(t);
    (this.cachedPoints_[e] = this.getTouchPoint(t)),
      2 == (e = Object.keys(this.cachedPoints_)).length &&
        ((this.startDistance_ = Blockly.utils.Coordinate.distance(
          this.cachedPoints_[e[0]],
          this.cachedPoints_[e[1]]
        )),
        (this.isMultiTouch_ = !0),
        t.preventDefault());
  }),
  (Blockly.TouchGesture.prototype.handleTouchMove = function (t) {
    var e = Blockly.Touch.getTouchIdentifierFromEvent(t);
    (this.cachedPoints_[e] = this.getTouchPoint(t)),
      (e = Object.keys(this.cachedPoints_)),
      this.isPinchZoomEnabled_ && 2 === e.length
        ? this.handlePinch_(t)
        : Blockly.TouchGesture.superClass_.handleMove.call(this, t);
  }),
  (Blockly.TouchGesture.prototype.handlePinch_ = function (t) {
    var e = Object.keys(this.cachedPoints_);
    if (
      ((e =
        Blockly.utils.Coordinate.distance(
          this.cachedPoints_[e[0]],
          this.cachedPoints_[e[1]]
        ) / this.startDistance_),
      0 < this.previousScale_ && 1 / 0 > this.previousScale_)
    ) {
      var o = e - this.previousScale_;
      o =
        0 < o
          ? o * Blockly.TouchGesture.ZOOM_IN_MULTIPLIER
          : o * Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER;
      var i = this.startWorkspace_,
        n = Blockly.utils.mouseToSvg(
          t,
          i.getParentSvg(),
          i.getInverseScreenCTM()
        );
      i.zoom(n.x, n.y, o);
    }
    (this.previousScale_ = e), t.preventDefault();
  }),
  (Blockly.TouchGesture.prototype.handleTouchEnd = function (t) {
    (t = Blockly.Touch.getTouchIdentifierFromEvent(t)),
      this.cachedPoints_[t] && delete this.cachedPoints_[t],
      2 > Object.keys(this.cachedPoints_).length &&
        ((this.cachedPoints_ = Object.create(null)), (this.previousScale_ = 0));
  }),
  (Blockly.TouchGesture.prototype.getTouchPoint = function (t) {
    return this.startWorkspace_
      ? new Blockly.utils.Coordinate(
          t.pageX ? t.pageX : t.changedTouches[0].pageX,
          t.pageY ? t.pageY : t.changedTouches[0].pageY
        )
      : null;
  }),
  (Blockly.MarkerManager = function (t) {
    (this.cursorSvg_ = this.cursor_ = null),
      (this.markers_ = {}),
      (this.workspace_ = t);
  }),
  (Blockly.MarkerManager.prototype.registerMarker = function (t, e) {
    this.markers_[t] && this.unregisterMarker(t),
      e.setDrawer(
        this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_, e)
      ),
      this.setMarkerSvg(e.getDrawer().createDom()),
      (this.markers_[t] = e);
  }),
  (Blockly.MarkerManager.prototype.unregisterMarker = function (t) {
    var e = this.markers_[t];
    if (!e)
      throw Error(
        "Marker with id " +
          t +
          " does not exist. Can only unregistermarkers that exist."
      );
    e.dispose(), delete this.markers_[t];
  }),
  (Blockly.MarkerManager.prototype.getCursor = function () {
    return this.cursor_;
  }),
  (Blockly.MarkerManager.prototype.getMarker = function (t) {
    return this.markers_[t];
  }),
  (Blockly.MarkerManager.prototype.setCursor = function (t) {
    this.cursor_ &&
      this.cursor_.getDrawer() &&
      this.cursor_.getDrawer().dispose(),
      (this.cursor_ = t) &&
        ((t = this.workspace_
          .getRenderer()
          .makeMarkerDrawer(this.workspace_, this.cursor_)),
        this.cursor_.setDrawer(t),
        this.setCursorSvg(this.cursor_.getDrawer().createDom()));
  }),
  (Blockly.MarkerManager.prototype.setCursorSvg = function (t) {
    t
      ? (this.workspace_.getBlockCanvas().appendChild(t), (this.cursorSvg_ = t))
      : (this.cursorSvg_ = null);
  }),
  (Blockly.MarkerManager.prototype.setMarkerSvg = function (t) {
    t
      ? this.workspace_.getBlockCanvas() &&
        (this.cursorSvg_
          ? this.workspace_.getBlockCanvas().insertBefore(t, this.cursorSvg_)
          : this.workspace_.getBlockCanvas().appendChild(t))
      : (this.markerSvg_ = null);
  }),
  (Blockly.MarkerManager.prototype.dispose = function () {
    for (var t, e = Object.keys(this.markers_), o = 0; (t = e[o]); o++)
      this.unregisterMarker(t);
    (this.markers_ = null), this.cursor_.dispose(), (this.cursor_ = null);
  }),
  (Blockly.ThemeManager = function (t, e) {
    (this.workspace_ = t),
      (this.theme_ = e),
      (this.subscribedWorkspaces_ = []),
      (this.componentDB_ = Object.create(null));
  }),
  (Blockly.ThemeManager.prototype.getTheme = function () {
    return this.theme_;
  }),
  (Blockly.ThemeManager.prototype.setTheme = function (t) {
    if (this.theme_ !== t) {
      var e,
        o = this.theme_;
      for (
        this.theme_ = t,
          (t = this.workspace_.getInjectionDiv()) &&
            (o && Blockly.utils.dom.removeClass(t, o.name + "-theme"),
            Blockly.utils.dom.addClass(t, this.theme_.name + "-theme")),
          o = 0;
        (t = this.subscribedWorkspaces_[o]);
        o++
      )
        t.refreshTheme();
      for (o = 0, t = Object.keys(this.componentDB_); (e = t[o]); o++)
        for (var i, n = 0; (i = this.componentDB_[e][n]); n++) {
          var l = i.element;
          i = i.propertyName;
          var r = this.theme_ && this.theme_.getComponentStyle(e);
          l.style[i] = r || "";
        }
      Blockly.hideChaff();
    }
  }),
  (Blockly.ThemeManager.prototype.subscribeWorkspace = function (t) {
    this.subscribedWorkspaces_.push(t);
  }),
  (Blockly.ThemeManager.prototype.unsubscribeWorkspace = function (t) {
    if (0 > (t = this.subscribedWorkspaces_.indexOf(t)))
      throw Error(
        "Cannot unsubscribe a workspace that hasn't been subscribed."
      );
    this.subscribedWorkspaces_.splice(t, 1);
  }),
  (Blockly.ThemeManager.prototype.subscribe = function (t, e, o) {
    this.componentDB_[e] || (this.componentDB_[e] = []),
      this.componentDB_[e].push({ element: t, propertyName: o }),
      (e = this.theme_ && this.theme_.getComponentStyle(e)),
      (t.style[o] = e || "");
  }),
  (Blockly.ThemeManager.prototype.unsubscribe = function (t) {
    if (t)
      for (var e, o = Object.keys(this.componentDB_), i = 0; (e = o[i]); i++) {
        for (var n = this.componentDB_[e], l = n.length - 1; 0 <= l; l--)
          n[l].element === t && n.splice(l, 1);
        this.componentDB_[e].length || delete this.componentDB_[e];
      }
  }),
  (Blockly.ThemeManager.prototype.dispose = function () {
    this.componentDB_ =
      this.subscribedWorkspaces_ =
      this.theme_ =
      this.owner_ =
        null;
  }),
  (Blockly.WorkspaceAudio = function (t) {
    (this.parentWorkspace_ = t), (this.SOUNDS_ = Object.create(null));
  }),
  (Blockly.WorkspaceAudio.prototype.lastSound_ = null),
  (Blockly.WorkspaceAudio.prototype.dispose = function () {
    this.SOUNDS_ = this.parentWorkspace_ = null;
  }),
  (Blockly.WorkspaceAudio.prototype.load = function (t, e) {
    if (t.length) {
      try {
        var o = new Blockly.utils.global.Audio();
      } catch (t) {
        return;
      }
      for (var i, n = 0; n < t.length; n++) {
        var l = t[n],
          r = l.match(/\.(\w+)$/);
        if (r && o.canPlayType("audio/" + r[1])) {
          i = new Blockly.utils.global.Audio(l);
          break;
        }
      }
      i && i.play && (this.SOUNDS_[e] = i);
    }
  }),
  (Blockly.WorkspaceAudio.prototype.preload = function () {
    for (var t in this.SOUNDS_) {
      var e = this.SOUNDS_[t];
      e.volume = 0.01;
      var o = e.play();
      if (
        (void 0 !== o ? o.then(e.pause).catch(function () {}) : e.pause(),
        Blockly.utils.userAgent.IPAD || Blockly.utils.userAgent.IPHONE)
      )
        break;
    }
  }),
  (Blockly.WorkspaceAudio.prototype.play = function (t, e) {
    var o = this.SOUNDS_[t];
    o
      ? ((t = new Date()),
        (null != this.lastSound_ &&
          t - this.lastSound_ < Blockly.SOUND_LIMIT) ||
          ((this.lastSound_ = t),
          ((o =
            Blockly.utils.userAgent.IPAD || Blockly.utils.userAgent.ANDROID
              ? o
              : o.cloneNode()).volume = void 0 === e ? 1 : e),
          o.play()))
      : this.parentWorkspace_ &&
        this.parentWorkspace_.getAudioManager().play(t, e);
  }),
  (Blockly.WorkspaceSvg = function (t, e, o) {
    Blockly.WorkspaceSvg.superClass_.constructor.call(this, t),
      (this.getMetrics =
        t.getMetrics || Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_),
      (this.setMetrics =
        t.setMetrics || Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_),
      (this.connectionDBList = Blockly.ConnectionDB.init()),
      e && (this.blockDragSurface_ = e),
      o && (this.workspaceDragSurface_ = o),
      (this.useWorkspaceDragSurface_ =
        !!this.workspaceDragSurface_ && Blockly.utils.is3dSupported()),
      (this.highlightedBlocks_ = []),
      (this.audioManager_ = new Blockly.WorkspaceAudio(t.parentWorkspace)),
      (this.grid_ = this.options.gridPattern
        ? new Blockly.Grid(t.gridPattern, t.gridOptions)
        : null),
      (this.markerManager_ = new Blockly.MarkerManager(this)),
      Blockly.Variables &&
        Blockly.Variables.flyoutCategory &&
        this.registerToolboxCategoryCallback(
          Blockly.VARIABLE_CATEGORY_NAME,
          Blockly.Variables.flyoutCategory
        ),
      Blockly.VariablesDynamic &&
        Blockly.VariablesDynamic.flyoutCategory &&
        this.registerToolboxCategoryCallback(
          Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME,
          Blockly.VariablesDynamic.flyoutCategory
        ),
      t.newFunctions && Blockly.Functions && Blockly.Functions.flyoutCategory
        ? this.registerToolboxCategoryCallback(
            Blockly.PROCEDURE_CATEGORY_NAME,
            Blockly.Functions.flyoutCategory
          )
        : Blockly.Procedures &&
          Blockly.Procedures.flyoutCategory &&
          (this.registerToolboxCategoryCallback(
            Blockly.PROCEDURE_CATEGORY_NAME,
            Blockly.Procedures.flyoutCategory
          ),
          this.addChangeListener(Blockly.Procedures.mutatorOpenListener)),
      (this.themeManager_ = this.options.parentWorkspace
        ? this.options.parentWorkspace.getThemeManager()
        : new Blockly.ThemeManager(
            this,
            this.options.theme || Blockly.Themes.Classic
          )),
      (this.renderer_ = Blockly.blockRendering.init(
        this.options.renderer || "geras"
      )),
      (this.cachedParentSvg_ = null),
      this.themeManager_.subscribeWorkspace(this),
      this.renderer_.getConstants().refreshTheme(this.getTheme()),
      (this.keyboardAccessibilityMode = !1);
  }),
  Blockly.utils.object.inherits(Blockly.WorkspaceSvg, Blockly.Workspace),
  (Blockly.WorkspaceSvg.prototype.resizeHandlerWrapper_ = null),
  (Blockly.WorkspaceSvg.prototype.rendered = !0),
  (Blockly.WorkspaceSvg.prototype.isVisible_ = !0),
  (Blockly.WorkspaceSvg.prototype.isFlyout = !1),
  (Blockly.WorkspaceSvg.prototype.isMutator = !1),
  (Blockly.WorkspaceSvg.prototype.resizesEnabled_ = !0),
  (Blockly.WorkspaceSvg.prototype.scrollX = 0),
  (Blockly.WorkspaceSvg.prototype.scrollY = 0),
  (Blockly.WorkspaceSvg.prototype.startScrollX = 0),
  (Blockly.WorkspaceSvg.prototype.startScrollY = 0),
  (Blockly.WorkspaceSvg.prototype.dragDeltaXY_ = null),
  (Blockly.WorkspaceSvg.prototype.scale = 1),
  (Blockly.WorkspaceSvg.prototype.trashcan = null),
  (Blockly.WorkspaceSvg.prototype.scrollbar = null),
  (Blockly.WorkspaceSvg.prototype.flyout_ = null),
  (Blockly.WorkspaceSvg.prototype.toolbox_ = null),
  (Blockly.WorkspaceSvg.prototype.currentGesture_ = null),
  (Blockly.WorkspaceSvg.prototype.blockDragSurface_ = null),
  (Blockly.WorkspaceSvg.prototype.workspaceDragSurface_ = null),
  (Blockly.WorkspaceSvg.prototype.useWorkspaceDragSurface_ = !1),
  (Blockly.WorkspaceSvg.prototype.isDragSurfaceActive_ = !1),
  (Blockly.WorkspaceSvg.prototype.injectionDiv_ = null),
  (Blockly.WorkspaceSvg.prototype.lastRecordedPageScroll_ = null),
  (Blockly.WorkspaceSvg.prototype.injectionDiv_ = null),
  (Blockly.WorkspaceSvg.prototype.flyoutButtonCallbacks_ = {}),
  (Blockly.WorkspaceSvg.prototype.toolboxCategoryCallbacks_ = {}),
  (Blockly.WorkspaceSvg.prototype.targetWorkspace = null),
  (Blockly.WorkspaceSvg.prototype.inverseScreenCTM_ = null),
  (Blockly.WorkspaceSvg.prototype.inverseScreenCTMDirty_ = !0),
  (Blockly.WorkspaceSvg.prototype.getMarkerManager = function () {
    return this.markerManager_;
  }),
  (Blockly.WorkspaceSvg.prototype.setCursorSvg = function (t) {
    this.markerManager_.setCursorSvg(t);
  }),
  (Blockly.WorkspaceSvg.prototype.setMarkerSvg = function (t) {
    this.markerManager_.setMarkerSvg(t);
  }),
  (Blockly.WorkspaceSvg.prototype.getMarker = function (t) {
    return this.markerManager_ ? this.markerManager_.getMarker(t) : null;
  }),
  (Blockly.WorkspaceSvg.prototype.getCursor = function () {
    return this.markerManager_ ? this.markerManager_.getCursor() : null;
  }),
  (Blockly.WorkspaceSvg.prototype.getRenderer = function () {
    return this.renderer_;
  }),
  (Blockly.WorkspaceSvg.prototype.getThemeManager = function () {
    return this.themeManager_;
  }),
  (Blockly.WorkspaceSvg.prototype.getTheme = function () {
    return this.themeManager_.getTheme();
  }),
  (Blockly.WorkspaceSvg.prototype.setTheme = function (t) {
    t || (t = Blockly.Themes.Classic), this.themeManager_.setTheme(t);
  }),
  (Blockly.WorkspaceSvg.prototype.refreshTheme = function () {
    this.getRenderer().getConstants().refreshTheme(this.getTheme()),
      this.updateBlockStyles_(
        this.getAllBlocks(!1).filter(function (t) {
          return void 0 !== t.getStyleName();
        })
      ),
      this.refreshToolboxSelection(),
      this.toolbox_ && this.toolbox_.updateColourFromTheme();
    var t = new Blockly.Events.Ui(null, "theme", null, null);
    (t.workspaceId = this.id), Blockly.Events.fire(t);
  }),
  (Blockly.WorkspaceSvg.prototype.updateBlockStyles_ = function (t) {
    for (var e, o = 0; (e = t[o]); o++) {
      var i = e.getStyleName();
      i && (e.setStyle(i), e.mutator && e.mutator.updateBlockStyle());
    }
  }),
  (Blockly.WorkspaceSvg.prototype.getInverseScreenCTM = function () {
    if (this.inverseScreenCTMDirty_) {
      var t = this.getParentSvg().getScreenCTM();
      t &&
        ((this.inverseScreenCTM_ = t.inverse()),
        (this.inverseScreenCTMDirty_ = !1));
    }
    return this.inverseScreenCTM_;
  }),
  (Blockly.WorkspaceSvg.prototype.updateInverseScreenCTM = function () {
    this.inverseScreenCTMDirty_ = !0;
  }),
  (Blockly.WorkspaceSvg.prototype.isVisible = function () {
    return this.isVisible_;
  }),
  (Blockly.WorkspaceSvg.prototype.getSvgXY = function (t) {
    var e = 0,
      o = 0,
      i = 1;
    (Blockly.utils.dom.containsNode(this.getCanvas(), t) ||
      Blockly.utils.dom.containsNode(this.getBubbleCanvas(), t)) &&
      (i = this.scale);
    do {
      var n = Blockly.utils.getRelativeXY(t);
      (t != this.getCanvas() && t != this.getBubbleCanvas()) || (i = 1),
        (e += n.x * i),
        (o += n.y * i),
        (t = t.parentNode);
    } while (t && t != this.getParentSvg());
    return new Blockly.utils.Coordinate(e, o);
  }),
  (Blockly.WorkspaceSvg.prototype.getOriginOffsetInPixels = function () {
    return Blockly.utils.getInjectionDivXY_(this.getCanvas());
  }),
  (Blockly.WorkspaceSvg.prototype.getInjectionDiv = function () {
    if (!this.injectionDiv_)
      for (var t = this.svgGroup_; t; ) {
        if (
          -1 !=
          (" " + (t.getAttribute("class") || "") + " ").indexOf(
            " injectionDiv "
          )
        ) {
          this.injectionDiv_ = t;
          break;
        }
        t = t.parentNode;
      }
    return this.injectionDiv_;
  }),
  (Blockly.WorkspaceSvg.prototype.getBlockCanvas = function () {
    return this.svgBlockCanvas_;
  }),
  (Blockly.WorkspaceSvg.prototype.setResizeHandlerWrapper = function (t) {
    this.resizeHandlerWrapper_ = t;
  }),
  (Blockly.WorkspaceSvg.prototype.createDom = function (t) {
    if (
      ((this.svgGroup_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyWorkspace" },
        null
      )),
      t &&
        ((this.svgBackground_ = Blockly.utils.dom.createSvgElement(
          "rect",
          { height: "100%", width: "100%", class: t },
          this.svgGroup_
        )),
        "blocklyMainBackground" == t && this.grid_
          ? (this.svgBackground_.style.fill =
              "url(#" + this.grid_.getPatternId() + ")")
          : this.themeManager_.subscribe(
              this.svgBackground_,
              "workspaceBackgroundColour",
              "fill"
            )),
      (this.svgBlockCanvas_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyBlockCanvas" },
        this.svgGroup_
      )),
      (this.svgBubbleCanvas_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyBubbleCanvas" },
        this.svgGroup_
      )),
      this.isFlyout ||
        (Blockly.bindEventWithChecks_(
          this.svgGroup_,
          "mousedown",
          this,
          this.onMouseDown_,
          !1,
          !0
        ),
        Blockly.bindEventWithChecks_(
          this.svgGroup_,
          "wheel",
          this,
          this.onMouseWheel_
        )),
      this.options.hasCategories)
    ) {
      if (!Blockly.Toolbox) throw Error("Missing require for Blockly.Toolbox");
      this.toolbox_ = new Blockly.Toolbox(this);
    }
    return (
      this.grid_ && this.grid_.update(this.scale),
      this.recordDeleteAreas(),
      this.markerManager_.setCursor(new Blockly.Cursor()),
      this.markerManager_.registerMarker(
        Blockly.navigation.MARKER_NAME,
        new Blockly.Marker()
      ),
      (t = this.getRenderer().getConstants()).injectCSS(
        this.getRenderer().name
      ),
      t.createDom(this.svgGroup_),
      this.svgGroup_
    );
  }),
  (Blockly.WorkspaceSvg.prototype.dispose = function () {
    if (
      ((this.rendered = !1),
      this.currentGesture_ && this.currentGesture_.cancel(),
      this.svgGroup_ &&
        (Blockly.utils.dom.removeNode(this.svgGroup_), (this.svgGroup_ = null)),
      (this.svgBubbleCanvas_ = this.svgBlockCanvas_ = null),
      this.toolbox_ && (this.toolbox_.dispose(), (this.toolbox_ = null)),
      this.flyout_ && (this.flyout_.dispose(), (this.flyout_ = null)),
      this.trashcan && (this.trashcan.dispose(), (this.trashcan = null)),
      this.scrollbar && (this.scrollbar.dispose(), (this.scrollbar = null)),
      this.zoomControls_ &&
        (this.zoomControls_.dispose(), (this.zoomControls_ = null)),
      this.audioManager_ &&
        (this.audioManager_.dispose(), (this.audioManager_ = null)),
      this.grid_ && (this.grid_.dispose(), (this.grid_ = null)),
      this.renderer_.getConstants().dispose(),
      this.themeManager_ &&
        (this.themeManager_.unsubscribeWorkspace(this),
        this.themeManager_.unsubscribe(this.svgBackground_),
        this.options.parentWorkspace ||
          (this.themeManager_.dispose(), (this.themeManager_ = null))),
      this.markerManager_ &&
        (this.markerManager_.dispose(), (this.markerManager_ = null)),
      Blockly.WorkspaceSvg.superClass_.dispose.call(this),
      (this.flyoutButtonCallbacks_ =
        this.toolboxCategoryCallbacks_ =
        this.connectionDBList =
          null),
      !this.options.parentWorkspace)
    ) {
      var t = this.getParentSvg().parentNode;
      t && Blockly.utils.dom.removeNode(t);
    }
    this.resizeHandlerWrapper_ &&
      (Blockly.unbindEvent_(this.resizeHandlerWrapper_),
      (this.resizeHandlerWrapper_ = null));
  }),
  (Blockly.WorkspaceSvg.prototype.newBlock = function (t, e) {
    return (
      (t = new Blockly.BlockSvg(this, t, e)),
      this.loadingEventsDisabled || t.onLoadedIntoWorkspace(),
      t
    );
  }),
  (Blockly.WorkspaceSvg.prototype.addTrashcan = function () {
    if (!Blockly.Trashcan) throw Error("Missing require for Blockly.Trashcan");
    this.trashcan = new Blockly.Trashcan(this);
    var t = this.trashcan.createDom();
    this.svgGroup_.insertBefore(t, this.svgBlockCanvas_);
  }),
  (Blockly.WorkspaceSvg.prototype.addZoomControls = function () {
    if (!Blockly.ZoomControls)
      throw Error("Missing require for Blockly.ZoomControls");
    this.zoomControls_ = new Blockly.ZoomControls(this);
    var t = this.zoomControls_.createDom();
    this.svgGroup_.appendChild(t);
  }),
  (Blockly.WorkspaceSvg.prototype.addFlyout = function (t) {
    var e = {
      parentWorkspace: this,
      RTL: this.RTL,
      oneBasedIndex: this.options.oneBasedIndex,
      horizontalLayout: this.horizontalLayout,
      toolboxPosition: this.options.toolboxPosition,
      renderer: this.options.renderer,
    };
    if (this.horizontalLayout) {
      if (!Blockly.HorizontalFlyout)
        throw Error("Missing require for Blockly.HorizontalFlyout");
      this.flyout_ = new Blockly.HorizontalFlyout(e);
    } else {
      if (!Blockly.VerticalFlyout)
        throw Error("Missing require for Blockly.VerticalFlyout");
      this.flyout_ = new Blockly.VerticalFlyout(e);
    }
    return (this.flyout_.autoClose = !1), this.flyout_.createDom(t);
  }),
  (Blockly.WorkspaceSvg.prototype.getFlyout = function (t) {
    return this.flyout_ || t
      ? this.flyout_
      : this.toolbox_
      ? this.toolbox_.getFlyout()
      : null;
  }),
  (Blockly.WorkspaceSvg.prototype.getToolbox = function () {
    return this.toolbox_;
  }),
  (Blockly.WorkspaceSvg.prototype.updateScreenCalculations_ = function () {
    this.updateInverseScreenCTM(), this.recordDeleteAreas();
  }),
  (Blockly.WorkspaceSvg.prototype.resizeContents = function () {
    this.resizesEnabled_ &&
      this.rendered &&
      (this.scrollbar && this.scrollbar.resize(),
      this.updateInverseScreenCTM());
  }),
  (Blockly.WorkspaceSvg.prototype.resize = function () {
    this.toolbox_ && this.toolbox_.position(),
      this.flyout_ && this.flyout_.position(),
      this.trashcan && this.trashcan.position(),
      this.zoomControls_ && this.zoomControls_.position(),
      this.scrollbar && this.scrollbar.resize(),
      this.updateScreenCalculations_();
  }),
  (Blockly.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled =
    function () {
      var t = Blockly.utils.getDocumentScroll();
      Blockly.utils.Coordinate.equals(this.lastRecordedPageScroll_, t) ||
        ((this.lastRecordedPageScroll_ = t), this.updateScreenCalculations_());
    }),
  (Blockly.WorkspaceSvg.prototype.getCanvas = function () {
    return this.svgBlockCanvas_;
  }),
  (Blockly.WorkspaceSvg.prototype.getBubbleCanvas = function () {
    return this.svgBubbleCanvas_;
  }),
  (Blockly.WorkspaceSvg.prototype.getParentSvg = function () {
    if (!this.cachedParentSvg_)
      for (var t = this.svgGroup_; t; ) {
        if ("svg" == t.tagName) {
          this.cachedParentSvg_ = t;
          break;
        }
        t = t.parentNode;
      }
    return this.cachedParentSvg_;
  }),
  (Blockly.WorkspaceSvg.prototype.translate = function (t, e) {
    if (this.useWorkspaceDragSurface_ && this.isDragSurfaceActive_)
      this.workspaceDragSurface_.translateSurface(t, e);
    else {
      var o = "translate(" + t + "," + e + ") scale(" + this.scale + ")";
      this.svgBlockCanvas_.setAttribute("transform", o),
        this.svgBubbleCanvas_.setAttribute("transform", o);
    }
    this.blockDragSurface_ &&
      this.blockDragSurface_.translateAndScaleGroup(t, e, this.scale),
      this.grid_ && this.grid_.moveTo(t, e);
  }),
  (Blockly.WorkspaceSvg.prototype.resetDragSurface = function () {
    if (this.useWorkspaceDragSurface_) {
      this.isDragSurfaceActive_ = !1;
      var t = this.workspaceDragSurface_.getSurfaceTranslation();
      this.workspaceDragSurface_.clearAndHide(this.svgGroup_),
        (t = "translate(" + t.x + "," + t.y + ") scale(" + this.scale + ")"),
        this.svgBlockCanvas_.setAttribute("transform", t),
        this.svgBubbleCanvas_.setAttribute("transform", t);
    }
  }),
  (Blockly.WorkspaceSvg.prototype.setupDragSurface = function () {
    if (this.useWorkspaceDragSurface_ && !this.isDragSurfaceActive_) {
      this.isDragSurfaceActive_ = !0;
      var t = this.svgBlockCanvas_.previousSibling,
        e = parseInt(this.getParentSvg().getAttribute("width"), 10),
        o = parseInt(this.getParentSvg().getAttribute("height"), 10),
        i = Blockly.utils.getRelativeXY(this.getCanvas());
      this.workspaceDragSurface_.setContentsAndShow(
        this.getCanvas(),
        this.getBubbleCanvas(),
        t,
        e,
        o,
        this.scale
      ),
        this.workspaceDragSurface_.translateSurface(i.x, i.y);
    }
  }),
  (Blockly.WorkspaceSvg.prototype.getBlockDragSurface = function () {
    return this.blockDragSurface_;
  }),
  (Blockly.WorkspaceSvg.prototype.getWidth = function () {
    var t = this.getMetrics();
    return t ? t.viewWidth / this.scale : 0;
  }),
  (Blockly.WorkspaceSvg.prototype.setVisible = function (t) {
    if (
      (this.scrollbar && this.scrollbar.setContainerVisible(t),
      this.getFlyout() && this.getFlyout().setContainerVisible(t),
      (this.getParentSvg().style.display = t ? "block" : "none"),
      this.toolbox_ &&
        (this.toolbox_.HtmlDiv.style.display = t ? "block" : "none"),
      t)
    ) {
      for (var e = this.getAllBlocks(!1), o = e.length - 1; 0 <= o; o--)
        e[o].markDirty();
      this.render(), this.resize();
    } else Blockly.hideChaff(!0), Blockly.DropDownDiv.hideWithoutAnimation();
    this.isVisible_ = t;
  }),
  (Blockly.WorkspaceSvg.prototype.render = function () {
    for (var t = this.getAllBlocks(!1), e = t.length - 1; 0 <= e; e--)
      t[e].render(!1);
    if (this.currentGesture_)
      for (
        t = this.currentGesture_.getInsertionMarkers(), e = 0;
        e < t.length;
        e++
      )
        t[e].render(!1);
  }),
  (Blockly.WorkspaceSvg.prototype.traceOn = function () {
    console.warn("Deprecated call to traceOn, delete this.");
  }),
  (Blockly.WorkspaceSvg.prototype.highlightBlock = function (t, e) {
    if (void 0 === e) {
      for (var o, i = 0; (o = this.highlightedBlocks_[i]); i++)
        o.setHighlighted(!1);
      this.highlightedBlocks_.length = 0;
    }
    (o = t ? this.getBlockById(t) : null) &&
      ((t = void 0 === e || e)
        ? -1 == this.highlightedBlocks_.indexOf(o) &&
          this.highlightedBlocks_.push(o)
        : Blockly.utils.arrayRemove(this.highlightedBlocks_, o),
      o.setHighlighted(t));
  }),
  (Blockly.WorkspaceSvg.prototype.paste = function (t) {
    this.rendered &&
      (this.currentGesture_ && this.currentGesture_.cancel(),
      "comment" == t.tagName.toLowerCase()
        ? this.pasteWorkspaceComment_(t)
        : this.pasteBlock_(t));
  }),
  (Blockly.WorkspaceSvg.prototype.pasteBlock_ = function (t) {
    Blockly.Events.disable();
    try {
      var e = Blockly.Xml.domToBlock(t, this),
        o = this.getMarker(Blockly.navigation.MARKER_NAME).getCurNode();
      if (this.keyboardAccessibilityMode && o && o.isConnection()) {
        var i = o.getLocation();
        return void Blockly.navigation.insertBlock(e, i);
      }
      var n = parseInt(t.getAttribute("x"), 10),
        l = parseInt(t.getAttribute("y"), 10);
      if (!isNaN(n) && !isNaN(l)) {
        this.RTL && (n = -n);
        do {
          t = !1;
          var r,
            s = this.getAllBlocks(!1);
          for (o = 0; (r = s[o]); o++) {
            var a = r.getRelativeToSurfaceXY();
            if (1 >= Math.abs(n - a.x) && 1 >= Math.abs(l - a.y)) {
              t = !0;
              break;
            }
          }
          if (!t) {
            var c,
              g = e.getConnections_(!1);
            for (o = 0; (c = g[o]); o++)
              if (
                c.closest(
                  Blockly.SNAP_RADIUS,
                  new Blockly.utils.Coordinate(n, l)
                ).connection
              ) {
                t = !0;
                break;
              }
          }
          t &&
            ((n = this.RTL ? n - Blockly.SNAP_RADIUS : n + Blockly.SNAP_RADIUS),
            (l += 2 * Blockly.SNAP_RADIUS));
        } while (t);
        e.moveBy(n, l);
      }
    } finally {
      Blockly.Events.enable();
    }
    Blockly.Events.isEnabled() &&
      !e.isShadow() &&
      Blockly.Events.fire(new Blockly.Events.BlockCreate(e)),
      e.select();
  }),
  (Blockly.WorkspaceSvg.prototype.pasteWorkspaceComment_ = function (t) {
    Blockly.Events.disable();
    try {
      var e = Blockly.WorkspaceCommentSvg.fromXml(t, this),
        o = parseInt(t.getAttribute("x"), 10),
        i = parseInt(t.getAttribute("y"), 10);
      isNaN(o) || isNaN(i) || (this.RTL && (o = -o), e.moveBy(o + 50, i + 50));
    } finally {
      Blockly.Events.enable();
    }
    Blockly.Events.isEnabled() && Blockly.WorkspaceComment.fireCreateEvent(e),
      e.select();
  }),
  (Blockly.WorkspaceSvg.prototype.refreshToolboxSelection = function () {
    var t = this.isFlyout ? this.targetWorkspace : this;
    t &&
      !t.currentGesture_ &&
      t.toolbox_ &&
      t.toolbox_.getFlyout() &&
      t.toolbox_.refreshSelection();
  }),
  (Blockly.WorkspaceSvg.prototype.renameVariableById = function (t, e) {
    Blockly.WorkspaceSvg.superClass_.renameVariableById.call(this, t, e),
      this.refreshToolboxSelection();
  }),
  (Blockly.WorkspaceSvg.prototype.deleteVariableById = function (t) {
    Blockly.WorkspaceSvg.superClass_.deleteVariableById.call(this, t),
      this.refreshToolboxSelection();
  }),
  (Blockly.WorkspaceSvg.prototype.createVariable = function (t, e, o) {
    return (
      (t = Blockly.WorkspaceSvg.superClass_.createVariable.call(this, t, e, o)),
      this.refreshToolboxSelection(),
      t
    );
  }),
  (Blockly.WorkspaceSvg.prototype.recordDeleteAreas = function () {
    (this.deleteAreaTrash_ =
      this.trashcan && this.svgGroup_.parentNode
        ? this.trashcan.getClientRect()
        : null),
      (this.deleteAreaToolbox_ = this.flyout_
        ? this.flyout_.getClientRect()
        : this.toolbox_
        ? this.toolbox_.getClientRect()
        : null);
  }),
  (Blockly.WorkspaceSvg.prototype.isDeleteArea = function (t) {
    return this.deleteAreaTrash_ &&
      this.deleteAreaTrash_.contains(t.clientX, t.clientY)
      ? Blockly.DELETE_AREA_TRASH
      : this.deleteAreaToolbox_ &&
        this.deleteAreaToolbox_.contains(t.clientX, t.clientY)
      ? Blockly.DELETE_AREA_TOOLBOX
      : Blockly.DELETE_AREA_NONE;
  }),
  (Blockly.WorkspaceSvg.prototype.onMouseDown_ = function (t) {
    var e = this.getGesture(t);
    e && e.handleWsStart(t, this);
  }),
  (Blockly.WorkspaceSvg.prototype.startDrag = function (t, e) {
    ((t = Blockly.utils.mouseToSvg(
      t,
      this.getParentSvg(),
      this.getInverseScreenCTM()
    )).x /= this.scale),
      (t.y /= this.scale),
      (this.dragDeltaXY_ = Blockly.utils.Coordinate.difference(e, t));
  }),
  (Blockly.WorkspaceSvg.prototype.moveDrag = function (t) {
    return (
      ((t = Blockly.utils.mouseToSvg(
        t,
        this.getParentSvg(),
        this.getInverseScreenCTM()
      )).x /= this.scale),
      (t.y /= this.scale),
      Blockly.utils.Coordinate.sum(this.dragDeltaXY_, t)
    );
  }),
  (Blockly.WorkspaceSvg.prototype.isDragging = function () {
    return null != this.currentGesture_ && this.currentGesture_.isDragging();
  }),
  (Blockly.WorkspaceSvg.prototype.isDraggable = function () {
    return this.options.moveOptions && this.options.moveOptions.drag;
  });
(Blockly.WorkspaceSvg.prototype.isContentBounded = function () {
  return (
    (this.options.moveOptions && this.options.moveOptions.scrollbars) ||
    (this.options.moveOptions && this.options.moveOptions.wheel) ||
    (this.options.moveOptions && this.options.moveOptions.drag) ||
    (this.options.zoomOptions && this.options.zoomOptions.controls) ||
    (this.options.zoomOptions && this.options.zoomOptions.wheel) ||
    (this.options.zoomOptions && this.options.zoomOptions.pinch)
  );
}),
  (Blockly.WorkspaceSvg.prototype.isMovable = function () {
    return (
      (this.options.moveOptions && this.options.moveOptions.scrollbars) ||
      (this.options.moveOptions && this.options.moveOptions.wheel) ||
      (this.options.moveOptions && this.options.moveOptions.drag) ||
      (this.options.zoomOptions && this.options.zoomOptions.wheel) ||
      (this.options.zoomOptions && this.options.zoomOptions.pinch)
    );
  }),
  (Blockly.WorkspaceSvg.prototype.onMouseWheel_ = function (t) {
    if (Blockly.Gesture.inProgress()) t.preventDefault(), t.stopPropagation();
    else {
      var e = this.options.zoomOptions && this.options.zoomOptions.wheel,
        o = this.options.moveOptions && this.options.moveOptions.wheel;
      if (e || o) {
        var i = Blockly.utils.getScrollDeltaPixels(t);
        !e || (!t.ctrlKey && o)
          ? ((e = this.scrollX - i.x),
            (o = this.scrollY - i.y),
            t.shiftKey &&
              !i.x &&
              ((e = this.scrollX - i.y), (o = this.scrollY)),
            this.scroll(e, o))
          : ((i = -i.y / 50),
            (e = Blockly.utils.mouseToSvg(
              t,
              this.getParentSvg(),
              this.getInverseScreenCTM()
            )),
            this.zoom(e.x, e.y, i)),
          t.ctrlKey || t.metaKey
            ? ((i = -t.deltaY / 50),
              (e = Blockly.utils.mouseToSvg(
                t,
                this.getParentSvg(),
                this.getInverseScreenCTM()
              )),
              this.zoom(e.x, e.y, i))
            : (Blockly.WidgetDiv.hide(!0),
              Blockly.DropDownDiv.hideWithoutAnimation(),
              (e = this.scrollX - t.deltaX),
              (o = this.scrollY - t.deltaY),
              (this.startDragMetrics = this.getMetrics()),
              this.scroll(e, o)),
          t.preventDefault();
      }
    }
  }),
  (Blockly.WorkspaceSvg.prototype.getBlocksBoundingBox = function () {
    var t = this.getTopBlocks(!1),
      e = this.getTopComments(!1);
    if (!(t = t.concat(e)).length) return new Blockly.utils.Rect(0, 0, 0, 0);
    e = t[0].getBoundingRectangle();
    for (var o = 1; o < t.length; o++) {
      var i = t[o].getBoundingRectangle();
      i.top < e.top && (e.top = i.top),
        i.bottom > e.bottom && (e.bottom = i.bottom),
        i.left < e.left && (e.left = i.left),
        i.right > e.right && (e.right = i.right);
    }
    return e;
  }),
  (Blockly.WorkspaceSvg.prototype.cleanUp = function () {
    this.setResizesEnabled(!1), Blockly.Events.setGroup(!0);
    for (var t, e = this.getTopBlocks(!0), o = 0, i = 0; (t = e[i]); i++)
      if (t.isMovable()) {
        var n = t.getRelativeToSurfaceXY();
        t.moveBy(-n.x, o - n.y),
          t.snapToGrid(),
          (o =
            t.getRelativeToSurfaceXY().y +
            t.getHeightWidth().height +
            this.renderer_.getConstants().MIN_BLOCK_HEIGHT);
      }
    Blockly.Events.setGroup(!1), this.setResizesEnabled(!0);
  }),
  (Blockly.WorkspaceSvg.prototype.showContextMenu = function (t) {
    function e() {
      Blockly.Events.setGroup(n);
      var t = u.shift();
      t && (t.workspace ? (t.dispose(!1, !0), setTimeout(e, p)) : e()),
        Blockly.Events.setGroup(!1);
    }
    if (!this.options.readOnly && !this.isFlyout) {
      var o = [],
        i = this.getTopBlocks(!0),
        n = Blockly.utils.genUid(),
        l = this,
        r = {};
      if (
        ((r.text = Blockly.Msg.UNDO),
        (r.enabled = 0 < this.undoStack_.length),
        (r.callback = this.undo.bind(this, !1)),
        o.push(r),
        ((r = {}).text = Blockly.Msg.REDO),
        (r.enabled = 0 < this.redoStack_.length),
        (r.callback = this.undo.bind(this, !0)),
        o.push(r),
        this.options.comments &&
          o.push(Blockly.ContextMenu.workspaceCommentOption(l, t)),
        this.isMovable() &&
          (((r = {}).text = Blockly.Msg.CLEAN_UP),
          (r.enabled = 1 < i.length),
          (r.callback = this.cleanUp.bind(this)),
          o.push(r)),
        this.options.collapse)
      ) {
        for (var s = (r = !1), a = 0; a < i.length; a++)
          for (var c = i[a]; c; )
            c.isCollapsed() ? (r = !0) : (s = !0), (c = c.getNextBlock());
        var g = function (t) {
          for (var e = 0, o = 0; o < i.length; o++)
            for (var n = i[o]; n; )
              setTimeout(n.setCollapsed.bind(n, t), e),
                (n = n.getNextBlock()),
                (e += p);
        };
        ((s = { enabled: s }).text = Blockly.Msg.COLLAPSE_ALL),
          (s.callback = function () {
            g(!0);
          }),
          o.push(s),
          ((r = { enabled: r }).text = Blockly.Msg.EXPAND_ALL),
          (r.callback = function () {
            g(!1);
          }),
          o.push(r);
      }
      var u = Blockly.WorkspaceSvg.buildDeleteList_(i),
        h = 0;
      for (a = 0; a < u.length; a++) u[a].isShadow() || h++;
      var p = 10;
      (r = {
        text:
          1 == u.length
            ? Blockly.Msg.DELETE_BLOCK
            : Blockly.Msg.DELETE_X_BLOCKS.replace("%1", String(u.length)),
        enabled: 0 < u.length,
        callback: function () {
          l.currentGesture_ && l.currentGesture_.cancel(),
            2 > h
              ? e()
              : Blockly.confirm(
                  Blockly.Msg.DELETE_ALL_BLOCKS.replace("%1", u.length),
                  function (t) {
                    t && e();
                  }
                );
        },
      }),
        o.push(r),
        this.configureContextMenu && this.configureContextMenu(o, t),
        Blockly.ContextMenu.show(t, o, this.RTL);
    }
  }),
  (Blockly.WorkspaceSvg.buildDeleteList_ = function (t) {
    function e(t) {
      if (t.isDeletable()) o = o.concat(t.getDescendants());
      else {
        t = t.getChildren();
        for (var i = 0; i < t.length; i++) e(t[i]);
      }
    }
    for (var o = [], i = 0; i < t.length; i++) e(t[i]);
    return o;
  }),
  (Blockly.WorkspaceSvg.prototype.updateToolbox = function (t) {
    if ((t = Blockly.Options.parseToolboxTree(t))) {
      if (!this.options.languageTree)
        throw Error("Existing toolbox is null.  Can't create new toolbox.");
      if (t.getElementsByTagName("category").length) {
        if (!this.toolbox_)
          throw Error(
            "Existing toolbox has no categories.  Can't change mode."
          );
        (this.options.languageTree = t), this.toolbox_.renderTree(t);
      } else {
        if (!this.flyout_)
          throw Error("Existing toolbox has categories.  Can't change mode.");
        (this.options.languageTree = t), this.flyout_.show(t.childNodes);
      }
    } else if (this.options.languageTree)
      throw Error("Can't nullify an existing toolbox.");
  }),
  (Blockly.WorkspaceSvg.prototype.markFocused = function () {
    this.options.parentWorkspace
      ? this.options.parentWorkspace.markFocused()
      : ((Blockly.mainWorkspace = this), this.setBrowserFocus());
  }),
  (Blockly.WorkspaceSvg.prototype.setBrowserFocus = function () {
    document.activeElement &&
      document.activeElement.blur &&
      document.activeElement.blur();
    try {
      this.getParentSvg().focus({ preventScroll: !0 });
    } catch (t) {
      try {
        this.getParentSvg().parentNode.setActive();
      } catch (t) {
        this.getParentSvg().parentNode.focus({ preventScroll: !0 });
      }
    }
  }),
  (Blockly.WorkspaceSvg.prototype.zoom = function (t, e, o) {
    o = Math.pow(this.options.zoomOptions.scaleSpeed, o);
    var i = this.scale * o;
    if (this.scale != i) {
      i > this.options.zoomOptions.maxScale
        ? (o = this.options.zoomOptions.maxScale / this.scale)
        : i < this.options.zoomOptions.minScale &&
          (o = this.options.zoomOptions.minScale / this.scale);
      var n = this.getCanvas().getCTM(),
        l = this.getParentSvg().createSVGPoint();
      (l.x = t),
        (l.y = e),
        (t = (l = l.matrixTransform(n.inverse())).x),
        (e = l.y),
        (n = n.translate(t * (1 - o), e * (1 - o)).scale(o)),
        (this.scrollX = n.e),
        (this.scrollY = n.f),
        this.setScale(i),
        Blockly.WidgetDiv.hide(!0),
        Blockly.DropDownDiv.hideWithoutAnimation();
    }
  }),
  (Blockly.WorkspaceSvg.prototype.zoomCenter = function (t) {
    var e = this.getMetrics();
    if (this.flyout_) {
      var o = e.svgWidth / 2;
      e = e.svgHeight / 2;
    } else
      (o = e.viewWidth / 2 + e.absoluteLeft),
        (e = e.viewHeight / 2 + e.absoluteTop);
    this.zoom(o, e, t);
  }),
  (Blockly.WorkspaceSvg.prototype.zoomToFit = function () {
    if (this.isMovable()) {
      var t = this.getMetrics(),
        e = t.viewWidth;
      t = t.viewHeight;
      var o = this.getBlocksBoundingBox(),
        i = o.right - o.left;
      (o = o.bottom - o.top),
        i &&
          (this.flyout_ &&
            (this.horizontalLayout
              ? ((t += this.flyout_.getHeight()),
                (o += this.flyout_.getHeight() / this.scale))
              : ((e += this.flyout_.getWidth()),
                (i += this.flyout_.getWidth() / this.scale))),
          this.setScale(Math.min(e / i, t / o)),
          this.scrollCenter());
    } else
      console.warn(
        "Tried to move a non-movable workspace. This could result in blocks becoming inaccessible."
      );
  }),
  (Blockly.WorkspaceSvg.prototype.beginCanvasTransition = function () {
    Blockly.utils.dom.addClass(
      this.svgBlockCanvas_,
      "blocklyCanvasTransitioning"
    ),
      Blockly.utils.dom.addClass(
        this.svgBubbleCanvas_,
        "blocklyCanvasTransitioning"
      );
  }),
  (Blockly.WorkspaceSvg.prototype.endCanvasTransition = function () {
    Blockly.utils.dom.removeClass(
      this.svgBlockCanvas_,
      "blocklyCanvasTransitioning"
    ),
      Blockly.utils.dom.removeClass(
        this.svgBubbleCanvas_,
        "blocklyCanvasTransitioning"
      );
  }),
  (Blockly.WorkspaceSvg.prototype.scrollCenter = function () {
    if (this.isMovable()) {
      var t = this.getMetrics(),
        e = (t.contentWidth - t.viewWidth) / 2,
        o = (t.contentHeight - t.viewHeight) / 2;
      (e = -e - t.contentLeft), (o = -o - t.contentTop), this.scroll(e, o);
    } else
      console.warn(
        "Tried to move a non-movable workspace. This could result in blocks becoming inaccessible."
      );
  }),
  (Blockly.WorkspaceSvg.prototype.centerOnBlock = function (t, e) {
    if (this.isMovable()) {
      if ((t = t ? this.getBlockById(t) : null)) {
        e &&
          Blockly.utils.dom.addClass(
            this.svgBlockCanvas_,
            "blocklyTransitioning"
          );
        var o = t.getRelativeToSurfaceXY(),
          i = this.scale;
        (e = (o.x + ((this.RTL ? -1 : 1) * t.width) / 2) * i),
          (t = (o.y + t.height / 2) * i),
          (e =
            -(e - (o = this.getMetrics()).contentLeft - o.viewWidth / 2) -
            o.contentLeft),
          (t = -(t - o.contentTop - o.viewHeight / 2) - o.contentTop),
          Blockly.hideChaff(),
          this.scroll(e, t);
        var n = this.svgBlockCanvas_;
        setTimeout(function () {
          Blockly.utils.dom.removeClass(n, "blocklyTransitioning");
        }, Blockly.Colours.canvasTransitionLength);
      }
    } else
      console.warn(
        "Tried to move a non-movable workspace. This could result in blocks becoming inaccessible."
      );
  }),
  (Blockly.WorkspaceSvg.prototype.setScale = function (t) {
    this.options.zoomOptions.maxScale && t > this.options.zoomOptions.maxScale
      ? (t = this.options.zoomOptions.maxScale)
      : this.options.zoomOptions.minScale &&
        t < this.options.zoomOptions.minScale &&
        (t = this.options.zoomOptions.minScale),
      (this.scale = t),
      Blockly.hideChaff(!1),
      this.flyout_ && (this.flyout_.reflow(), this.recordDeleteAreas()),
      this.grid_ && this.grid_.update(this.scale),
      (t = this.getMetrics()),
      (this.scrollX -= t.absoluteLeft),
      (this.scrollY -= t.absoluteTop),
      (t.viewLeft += t.absoluteLeft),
      (t.viewTop += t.absoluteTop),
      this.scroll(this.scrollX, this.scrollY),
      this.scrollbar &&
        (this.flyout_
          ? (this.scrollbar.hScroll.resizeViewHorizontal(t),
            this.scrollbar.vScroll.resizeViewVertical(t))
          : (this.scrollbar.hScroll.resizeContentHorizontal(t),
            this.scrollbar.vScroll.resizeContentVertical(t)));
  }),
  (Blockly.WorkspaceSvg.prototype.scroll = function (t, e) {
    Blockly.hideChaff(!0);
    var o = this.getMetrics(),
      i = o.contentWidth + o.contentLeft - o.viewWidth,
      n = o.contentHeight + o.contentTop - o.viewHeight;
    (t = Math.min(t, -o.contentLeft)),
      (e = Math.min(e, -o.contentTop)),
      (t = Math.max(t, -i)),
      (e = Math.max(e, -n)),
      (this.scrollX = t),
      (this.scrollY = e),
      this.scrollbar &&
        (this.scrollbar.hScroll.setHandlePosition(
          -(t + o.contentLeft) * this.scrollbar.hScroll.ratio_
        ),
        this.scrollbar.vScroll.setHandlePosition(
          -(e + o.contentTop) * this.scrollbar.vScroll.ratio_
        )),
      (t += o.absoluteLeft),
      (e += o.absoluteTop),
      Blockly.WidgetDiv.hide(!0),
      Blockly.DropDownDiv.hideWithoutAnimation(),
      this.translate(t, e);
  }),
  (Blockly.WorkspaceSvg.prototype.updateStackGlowScale_ = function () {
    this.options.stackGlowBlur &&
      this.options.stackGlowBlur.setAttribute(
        "stdDeviation",
        Blockly.STACK_GLOW_RADIUS / this.scale
      ),
      this.options.selectedGlowBlur &&
        this.options.selectedGlowBlur.setAttribute(
          "stdDeviation",
          Blockly.STACK_GLOW_RADIUS / this.scale
        );
  }),
  (Blockly.WorkspaceSvg.getDimensionsPx_ = function (t) {
    var e = 0,
      o = 0;
    return (
      t && ((e = t.getWidth()), (o = t.getHeight())), { width: e, height: o }
    );
  }),
  (Blockly.WorkspaceSvg.getContentDimensions_ = function (t, e) {
    return t.isContentBounded()
      ? Blockly.WorkspaceSvg.getContentDimensionsBounded_(t, e)
      : Blockly.WorkspaceSvg.getContentDimensionsExact_(t);
  }),
  (Blockly.WorkspaceSvg.getContentDimensionsExact_ = function (t) {
    var e = t.getBlocksBoundingBox(),
      o = t.scale;
    t = e.top * o;
    var i = e.bottom * o,
      n = e.left * o;
    return {
      top: t,
      bottom: i,
      left: n,
      right: (e = e.right * o),
      width: e - n,
      height: i - t,
    };
  }),
  (Blockly.WorkspaceSvg.getContentDimensionsBounded_ = function (t, e) {
    t = Blockly.WorkspaceSvg.getContentDimensionsExact_(t);
    var o = e.width,
      i = o / 2,
      n = (e = e.height) / 2,
      l = Math.min(t.left - i, t.right - o),
      r = Math.min(t.top - n, t.bottom - e);
    return {
      left: l,
      top: r,
      height: Math.max(t.bottom + n, t.top + e) - r,
      width: Math.max(t.right + i, t.left + o) - l,
    };
  }),
  (Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_ = function () {
    var t = Blockly.WorkspaceSvg.getDimensionsPx_(this.toolbox_),
      e = Blockly.WorkspaceSvg.getDimensionsPx_(this.flyout_),
      o = Blockly.svgSize(this.getParentSvg()),
      i = { height: o.height, width: o.width };
    this.toolbox_
      ? this.toolboxPosition == Blockly.TOOLBOX_AT_TOP ||
        this.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM
        ? (i.height -= t.height)
        : (this.toolboxPosition != Blockly.TOOLBOX_AT_LEFT &&
            this.toolboxPosition != Blockly.TOOLBOX_AT_RIGHT) ||
          (i.width -= t.width)
      : this.flyout_ &&
        (this.toolboxPosition == Blockly.TOOLBOX_AT_TOP ||
        this.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM
          ? (i.height -= e.height)
          : (this.toolboxPosition != Blockly.TOOLBOX_AT_LEFT &&
              this.toolboxPosition != Blockly.TOOLBOX_AT_RIGHT) ||
            (i.width -= e.width));
    var n = Blockly.WorkspaceSvg.getContentDimensions_(this, i),
      l = 0;
    this.toolbox_ && this.toolboxPosition == Blockly.TOOLBOX_AT_LEFT
      ? (l = t.width)
      : this.flyout_ &&
        this.toolboxPosition == Blockly.TOOLBOX_AT_LEFT &&
        (l = e.width);
    var r = 0;
    return (
      this.toolbox_ && this.toolboxPosition == Blockly.TOOLBOX_AT_TOP
        ? (r = t.height)
        : this.flyout_ &&
          this.toolboxPosition == Blockly.TOOLBOX_AT_TOP &&
          (r = e.height),
      {
        contentHeight: n.height,
        contentWidth: n.width,
        contentTop: n.top,
        contentLeft: n.left,
        viewHeight: i.height,
        viewWidth: i.width,
        viewTop: -this.scrollY,
        viewLeft: -this.scrollX,
        absoluteTop: r,
        absoluteLeft: l,
        svgHeight: o.height,
        svgWidth: o.width,
        toolboxWidth: t.width,
        toolboxHeight: t.height,
        flyoutWidth: e.width,
        flyoutHeight: e.height,
        toolboxPosition: this.toolboxPosition,
      }
    );
  }),
  (Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_ = function (t) {
    var e = this.getMetrics();
    "number" == typeof t.x &&
      (this.scrollX = -e.contentWidth * t.x - e.contentLeft),
      "number" == typeof t.y &&
        (this.scrollY = -e.contentHeight * t.y - e.contentTop),
      this.translate(
        this.scrollX + e.absoluteLeft,
        this.scrollY + e.absoluteTop
      );
  }),
  (Blockly.WorkspaceSvg.prototype.getBlockById = function (t) {
    return Blockly.WorkspaceSvg.superClass_.getBlockById.call(this, t);
  }),
  (Blockly.WorkspaceSvg.prototype.getTopBlocks = function (t) {
    return Blockly.WorkspaceSvg.superClass_.getTopBlocks.call(this, t);
  }),
  (Blockly.WorkspaceSvg.prototype.setResizesEnabled = function (t) {
    var e = !this.resizesEnabled_ && t;
    (this.resizesEnabled_ = t), e && this.resizeContents();
  }),
  (Blockly.WorkspaceSvg.prototype.clear = function () {
    this.setResizesEnabled(!1),
      Blockly.WorkspaceSvg.superClass_.clear.call(this),
      this.setResizesEnabled(!0);
  }),
  (Blockly.WorkspaceSvg.prototype.registerButtonCallback = function (t, e) {
    if ("function" != typeof e)
      throw TypeError("Button callbacks must be functions.");
    this.flyoutButtonCallbacks_[t] = e;
  }),
  (Blockly.WorkspaceSvg.prototype.getButtonCallback = function (t) {
    return (t = this.flyoutButtonCallbacks_[t]) ? t : null;
  }),
  (Blockly.WorkspaceSvg.prototype.removeButtonCallback = function (t) {
    this.flyoutButtonCallbacks_[t] = null;
  }),
  (Blockly.WorkspaceSvg.prototype.registerToolboxCategoryCallback = function (
    t,
    e
  ) {
    if ("function" != typeof e)
      throw TypeError("Toolbox category callbacks must be functions.");
    this.toolboxCategoryCallbacks_[t] = e;
  }),
  (Blockly.WorkspaceSvg.prototype.getToolboxCategoryCallback = function (t) {
    return this.toolboxCategoryCallbacks_[t] || null;
  }),
  (Blockly.WorkspaceSvg.prototype.removeToolboxCategoryCallback = function (t) {
    this.toolboxCategoryCallbacks_[t] = null;
  }),
  (Blockly.WorkspaceSvg.prototype.getGesture = function (t) {
    var e =
        "mousedown" == t.type ||
        "touchstart" == t.type ||
        "pointerdown" == t.type,
      o = this.currentGesture_;
    return o
      ? e && o.hasStarted()
        ? (console.warn("Tried to start the same gesture twice."),
          o.cancel(),
          null)
        : o
      : e
      ? (this.currentGesture_ = new Blockly.TouchGesture(t, this))
      : null;
  }),
  (Blockly.WorkspaceSvg.prototype.clearGesture = function () {
    this.currentGesture_ = null;
  }),
  (Blockly.WorkspaceSvg.prototype.cancelCurrentGesture = function () {
    this.currentGesture_ && this.currentGesture_.cancel();
  }),
  (Blockly.WorkspaceSvg.prototype.startDragWithFakeEvent = function (t, e) {
    Blockly.Touch.clearTouchIdentifier(),
      Blockly.Touch.checkTouchIdentifier(t),
      e.workspace.getGesture(t).forceStartBlockDrag(t, e);
  }),
  (Blockly.WorkspaceSvg.prototype.getAudioManager = function () {
    return this.audioManager_;
  }),
  (Blockly.WorkspaceSvg.prototype.getGrid = function () {
    return this.grid_;
  }),
  (Blockly.inject = function (t, e) {
    if (
      (Blockly.checkBlockColourConstants(),
      "string" == typeof t &&
        (t = document.getElementById(t) || document.querySelector(t)),
      !t || !Blockly.utils.dom.containsNode(document, t))
    )
      throw Error("Error: container is not in current document.");
    e = new Blockly.Options(e || {});
    var o = document.createElement("div");
    (o.className = "injectionDiv"),
      (o.tabIndex = 0),
      Blockly.utils.aria.setState(
        o,
        Blockly.utils.aria.State.LABEL,
        Blockly.Msg.WORKSPACE_ARIA_LABEL
      ),
      t.appendChild(o),
      Blockly.utils.dom.startTextWidthCache(),
      (t = Blockly.createDom_(o, e));
    var i = new Blockly.BlockDragSurfaceSvg(o),
      n = new Blockly.WorkspaceDragSurfaceSvg(o),
      l = Blockly.createMainWorkspace_(t, e, i, n);
    return (
      Blockly.user.keyMap.setKeyMap(e.keyMap),
      Blockly.init_(l),
      (Blockly.mainWorkspace = l),
      Blockly.svgResize(l),
      o.addEventListener("focusin", function () {
        Blockly.mainWorkspace = l;
      }),
      l
    );
  }),
  (Blockly.createDom_ = function (t, e) {
    t.setAttribute("dir", "LTR"),
      (Blockly.Component.defaultRightToLeft = e.RTL),
      Blockly.Css.inject(e.hasCss, e.pathToMedia),
      (t = Blockly.utils.dom.createSvgElement(
        "svg",
        {
          xmlns: Blockly.utils.dom.SVG_NS,
          "xmlns:html": Blockly.utils.dom.HTML_NS,
          "xmlns:xlink": Blockly.utils.dom.XLINK_NS,
          version: "1.1",
          class: "blocklySvg",
          tabindex: "0",
        },
        t
      ));
    var o = Blockly.utils.dom.createSvgElement("defs", {}, t),
      i = String(Math.random()).substring(2);
    return (e.gridPattern = Blockly.Grid.createDom(i, e.gridOptions, o)), t;
  }),
  (Blockly.createMainWorkspace_ = function (t, e, o, i) {
    e.parentWorkspace = null;
    var n = new Blockly.WorkspaceSvg(e, o, i);
    return (
      (n.scale = e.zoomOptions.startScale),
      t.appendChild(n.createDom("blocklyMainBackground")),
      Blockly.utils.dom.addClass(
        n.getInjectionDiv(),
        (n.options.renderer || "geras") + "-renderer"
      ),
      Blockly.utils.dom.addClass(
        n.getInjectionDiv(),
        n.getTheme().name + "-theme"
      ),
      !e.hasCategories &&
        e.languageTree &&
        ((o = n.addFlyout("svg")), Blockly.utils.dom.insertAfter(o, t)),
      e.hasTrashcan && n.addTrashcan(),
      e.zoomOptions && e.zoomOptions.controls && n.addZoomControls(),
      n
        .getThemeManager()
        .subscribe(t, "workspaceBackgroundColour", "background-color"),
      n.translate(0, 0),
      e.readOnly ||
        n.isMovable() ||
        n.addChangeListener(function (t) {
          if (
            !n.isDragging() &&
            !n.isMovable() &&
            -1 != Blockly.Events.BUMP_EVENTS.indexOf(t.type)
          ) {
            var e = Object.create(null),
              o = n.getMetrics(),
              i = n.scale;
            if (
              ((e.RTL = n.RTL),
              (e.viewLeft = o.viewLeft / i),
              (e.viewTop = o.viewTop / i),
              (e.viewRight = (o.viewLeft + o.viewWidth) / i),
              (e.viewBottom = (o.viewTop + o.viewHeight) / i),
              n.isContentBounded()
                ? ((o = n.getBlocksBoundingBox()),
                  (e.contentLeft = o.left),
                  (e.contentTop = o.top),
                  (e.contentRight = o.right),
                  (e.contentBottom = o.bottom))
                : ((e.contentLeft = o.contentLeft / i),
                  (e.contentTop = o.contentTop / i),
                  (e.contentRight = (o.contentLeft + o.contentWidth) / i),
                  (e.contentBottom = (o.contentTop + o.contentHeight) / i)),
              e.contentTop < e.viewTop ||
                e.contentBottom > e.viewBottom ||
                e.contentLeft < e.viewLeft ||
                e.contentRight > e.viewRight)
            ) {
              switch (
                ((o = null),
                t &&
                  ((o = Blockly.Events.getGroup()),
                  Blockly.Events.setGroup(t.group)),
                t.type)
              ) {
                case Blockly.Events.BLOCK_CREATE:
                case Blockly.Events.BLOCK_MOVE:
                  var l = n.getBlockById(t.blockId);
                  l && (l = l.getRootBlock());
                  break;
                case Blockly.Events.COMMENT_CREATE:
                case Blockly.Events.COMMENT_MOVE:
                  l = n.getCommentById(t.commentId);
              }
              if (l) {
                ((i = l.getBoundingRectangle()).height = i.bottom - i.top),
                  (i.width = i.right - i.left);
                var r = e.viewTop,
                  s = e.viewBottom - i.height;
                (s = Math.max(r, s)),
                  (r = Blockly.utils.math.clamp(r, i.top, s) - i.top),
                  (s = e.viewLeft);
                var a = e.viewRight - i.width;
                e.RTL ? (s = Math.min(a, s)) : (a = Math.max(s, a)),
                  (e = Blockly.utils.math.clamp(s, i.left, a) - i.left),
                  l.moveBy(e, r);
              }
              t &&
                (!t.group &&
                  l &&
                  console.log(
                    "WARNING: Moved object in bounds but there was no event group. This may break undo."
                  ),
                null !== o && Blockly.Events.setGroup(o));
            }
          }
        }),
      Blockly.svgResize(n),
      Blockly.WidgetDiv.createDom(),
      Blockly.DropDownDiv.createDom(),
      Blockly.Tooltip.createDom(),
      n
    );
  }),
  (Blockly.init_ = function (t) {
    var e = t.options,
      o = t.getParentSvg();
    if (
      (Blockly.bindEventWithChecks_(
        o.parentNode,
        "contextmenu",
        null,
        function (t) {
          Blockly.utils.isTargetInput(t) || t.preventDefault();
        }
      ),
      (o = Blockly.bindEventWithChecks_(window, "resize", null, function () {
        Blockly.utils.resizeTracker(t),
          Blockly.hideChaffOnResize(!0),
          Blockly.svgResize(t);
      })),
      t.setResizeHandlerWrapper(o),
      Blockly.inject.bindDocumentEvents_(),
      e.languageTree)
    ) {
      o = t.getToolbox();
      var i = t.getFlyout(!0);
      o
        ? o.init()
        : i &&
          (i.init(t),
          i.show(e.languageTree.childNodes),
          i.scrollToStart(),
          e.horizontalLayout
            ? ((t.scrollY = i.height_),
              e.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM &&
                (t.scrollY *= -1))
            : ((t.scrollX = i.width_),
              e.toolboxPosition == Blockly.TOOLBOX_AT_RIGHT &&
                (t.scrollX *= -1)),
          t.translate(t.scrollX, t.scrollY));
    }
    (o = Blockly.Scrollbar.scrollbarThickness),
      e.hasTrashcan && (o = t.trashcan.init(o)),
      e.zoomOptions && e.zoomOptions.controls && t.zoomControls_.init(o),
      e.moveOptions && e.moveOptions.scrollbars
        ? ((t.scrollbar = new Blockly.ScrollbarPair(t)), t.scrollbar.resize())
        : t.setMetrics({ x: 0.5, y: 0.5 }),
      e.hasSounds && Blockly.inject.loadSounds_(e.pathToMedia, t);
  }),
  (Blockly.inject.bindDocumentEvents_ = function () {
    Blockly.documentEventsBound_ ||
      (Blockly.bindEventWithChecks_(document, "scroll", null, function () {
        for (var t, e = Blockly.Workspace.getAll(), o = 0; (t = e[o]); o++)
          t.updateInverseScreenCTM && t.updateInverseScreenCTM();
      }),
      Blockly.bindEventWithChecks_(
        document,
        "keydown",
        null,
        Blockly.onKeyDown
      ),
      Blockly.bindEvent_(document, "touchend", null, Blockly.longStop_),
      Blockly.bindEvent_(document, "touchcancel", null, Blockly.longStop_),
      Blockly.utils.userAgent.IPAD &&
        Blockly.bindEventWithChecks_(
          window,
          "orientationchange",
          document,
          function () {
            Blockly.svgResize(Blockly.getMainWorkspace());
          }
        )),
      (Blockly.documentEventsBound_ = !0);
  }),
  (Blockly.inject.loadSounds_ = function (t, e) {
    var o = e.getAudioManager();
    o.load([t + "click.mp3", t + "click.wav", t + "click.ogg"], "click"),
      o.load(
        [t + "disconnect.wav", t + "disconnect.mp3", t + "disconnect.ogg"],
        "disconnect"
      ),
      o.load([t + "delete.mp3", t + "delete.ogg", t + "delete.wav"], "delete");
    var i = [];
    (t = function () {
      for (; i.length; ) Blockly.unbindEvent_(i.pop());
      o.preload();
    }),
      i.push(Blockly.bindEventWithChecks_(document, "mousemove", null, t, !0)),
      i.push(Blockly.bindEventWithChecks_(document, "touchstart", null, t, !0));
  }),
  (Blockly.Names = function (t, e) {
    if (
      ((this.variablePrefix_ = e || ""),
      (this.reservedDict_ = Object.create(null)),
      t)
    )
      for (t = t.split(","), e = 0; e < t.length; e++)
        this.reservedDict_[t[e]] = !0;
    this.reset();
  }),
  (Blockly.Names.DEVELOPER_VARIABLE_TYPE = "DEVELOPER_VARIABLE"),
  (Blockly.Names.prototype.reset = function () {
    (this.db_ = Object.create(null)),
      (this.dbReverse_ = Object.create(null)),
      (this.variableMap_ = null);
  }),
  (Blockly.Names.prototype.setVariableMap = function (t) {
    this.variableMap_ = t;
  }),
  (Blockly.Names.prototype.getNameForUserVariable_ = function (t) {
    return this.variableMap_
      ? (t = this.variableMap_.getVariableById(t))
        ? t.name
        : null
      : (console.log(
          "Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the folowing code in your generator's init() function:\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());"
        ),
        null);
  }),
  (Blockly.Names.prototype.getName = function (t, e) {
    if (e == Blockly.VARIABLE_CATEGORY_NAME) {
      var o = this.getNameForUserVariable_(t);
      o && (t = o);
    }
    o = t.toLowerCase() + "_" + e;
    var i =
      e == Blockly.VARIABLE_CATEGORY_NAME ||
      e == Blockly.Names.DEVELOPER_VARIABLE_TYPE
        ? this.variablePrefix_
        : "";
    return o in this.db_
      ? i + this.db_[o]
      : ((t = this.getDistinctName(t, e)),
        (this.db_[o] = t.substr(i.length)),
        t);
  }),
  (Blockly.Names.prototype.getDistinctName = function (t, e) {
    t = this.safeName_(t);
    for (var o = ""; this.dbReverse_[t + o] || t + o in this.reservedDict_; )
      o = o ? o + 1 : 2;
    return (
      (t += o),
      (this.dbReverse_[t] = !0),
      (e == Blockly.VARIABLE_CATEGORY_NAME ||
      e == Blockly.Names.DEVELOPER_VARIABLE_TYPE
        ? this.variablePrefix_
        : "") + t
    );
  }),
  (Blockly.Names.prototype.safeName_ = function (t) {
    return (
      t
        ? ((t = encodeURI(t.replace(/ /g, "_")).replace(/[^\w]/g, "_")),
          -1 != "0123456789".indexOf(t[0]) && (t = "my_" + t))
        : (t = Blockly.Msg.UNNAMED_KEY || "unnamed"),
      t
    );
  }),
  (Blockly.Names.equals = function (t, e) {
    return t.toLowerCase() == e.toLowerCase();
  }),
  (Blockly.Procedures = {}),
  (Blockly.Procedures.NAME_TYPE = Blockly.PROCEDURE_CATEGORY_NAME),
  (Blockly.Procedures.DEFAULT_ARG = "x"),
  (Blockly.Procedures.allProcedures = function (t) {
    t = t.getAllBlocks(!1);
    for (var e = [], o = [], i = 0; i < t.length; i++)
      if (t[i].getProcedureDef) {
        var n = t[i].getProcedureDef();
        n && (n[2] ? e.push(n) : o.push(n));
      }
    return (
      o.sort(Blockly.Procedures.procTupleComparator_),
      e.sort(Blockly.Procedures.procTupleComparator_),
      [o, e]
    );
  }),
  (Blockly.Procedures.procTupleComparator_ = function (t, e) {
    return t[0].toLowerCase().localeCompare(e[0].toLowerCase());
  }),
  (Blockly.Procedures.findLegalName = function (t, e) {
    if (e.isInFlyout) return t;
    for (
      t = t || Blockly.Msg.UNNAMED_KEY || "unnamed";
      !Blockly.Procedures.isLegalName_(t, e.workspace, e);

    ) {
      var o = t.match(/^(.*?)(\d+)$/);
      t = o ? o[1] + (parseInt(o[2], 10) + 1) : t + "2";
    }
    return t;
  }),
  (Blockly.Procedures.isLegalName_ = function (t, e, o) {
    return !Blockly.Procedures.isNameUsed(t, e, o);
  }),
  (Blockly.Procedures.isNameUsed = function (t, e, o) {
    e = e.getAllBlocks(!1);
    for (var i = 0; i < e.length; i++)
      if (e[i] != o) {
        var n = "";
        if (
          (e[i].getProcedureDef
            ? (n = e[i].getProcedureDef()[0])
            : e[i].getName && (n = e[i].getName()),
          Blockly.Names.equals(n, t))
        )
          return !0;
      }
    return !1;
  }),
  (Blockly.Procedures.rename = function (t) {
    t = t.trim();
    var e = Blockly.Procedures.findLegalName(t, this.getSourceBlock()),
      o = this.getValue();
    if (!e) return o;
    if (o != t && o != e) {
      t = this.getSourceBlock().workspace.getAllBlocks(!1);
      for (var i = 0; i < t.length; i++)
        t[i].renameProcedure && t[i].renameProcedure(o, e);
    }
    return e;
  }),
  (Blockly.Procedures.flyoutCategory = function (t) {
    function e(t, e) {
      for (var i = 0; i < t.length; i++) {
        var n = t[i][0],
          l = t[i][1],
          r = Blockly.utils.xml.createElement("block");
        r.setAttribute("type", e), r.setAttribute("gap", 16);
        var s = Blockly.utils.xml.createElement("mutation");
        for (
          s.setAttribute("name", n), r.appendChild(s), n = 0;
          n < l.length;
          n++
        ) {
          var a = Blockly.utils.xml.createElement("arg");
          a.setAttribute("name", l[n]), s.appendChild(a);
        }
        o.push(r);
      }
    }
    var o = [];
    if (Blockly.Blocks.procedures_defnoreturn) {
      var i = Blockly.utils.xml.createElement("block");
      i.setAttribute("type", "procedures_defnoreturn"),
        i.setAttribute("gap", 16);
      var n = Blockly.utils.xml.createElement("field");
      n.setAttribute("name", "NAME"),
        n.appendChild(
          Blockly.utils.xml.createTextNode(
            Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE
          )
        ),
        i.appendChild(n),
        o.push(i);
    }
    return (
      Blockly.Blocks.procedures_defreturn &&
        ((i = Blockly.utils.xml.createElement("block")).setAttribute(
          "type",
          "procedures_defreturn"
        ),
        i.setAttribute("gap", 16),
        (n = Blockly.utils.xml.createElement("field")).setAttribute(
          "name",
          "NAME"
        ),
        n.appendChild(
          Blockly.utils.xml.createTextNode(
            Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE
          )
        ),
        i.appendChild(n),
        o.push(i)),
      Blockly.Blocks.procedures_ifreturn &&
        ((i = Blockly.utils.xml.createElement("block")).setAttribute(
          "type",
          "procedures_ifreturn"
        ),
        i.setAttribute("gap", 16),
        o.push(i)),
      o.length && o[o.length - 1].setAttribute("gap", 24),
      e(
        (t = Blockly.Procedures.allProcedures(t))[0],
        "procedures_callnoreturn"
      ),
      e(t[1], "procedures_callreturn"),
      o
    );
  }),
  (Blockly.Procedures.updateMutatorFlyout_ = function (t) {
    for (
      var e, o = [], i = t.getBlocksByType("procedures_mutatorarg", !1), n = 0;
      (e = i[n]);
      n++
    )
      o.push(e.getFieldValue("NAME"));
    (i = Blockly.utils.xml.createElement("xml")),
      (n = Blockly.utils.xml.createElement("block")).setAttribute(
        "type",
        "procedures_mutatorarg"
      ),
      (e = Blockly.utils.xml.createElement("field")).setAttribute(
        "name",
        "NAME"
      ),
      (o = Blockly.Variables.generateUniqueNameFromOptions(
        Blockly.Procedures.DEFAULT_ARG,
        o
      )),
      (o = Blockly.utils.xml.createTextNode(o)),
      e.appendChild(o),
      n.appendChild(e),
      i.appendChild(n),
      t.updateToolbox(i);
  }),
  (Blockly.Procedures.mutatorOpenListener = function (t) {
    if (
      t.type == Blockly.Events.UI &&
      "mutatorOpen" == t.element &&
      t.newValue
    ) {
      var e = (t = Blockly.Workspace.getById(t.workspaceId).getBlockById(
        t.blockId
      )).type;
      ("procedures_defnoreturn" != e && "procedures_defreturn" != e) ||
        ((t = t.mutator.getWorkspace()),
        Blockly.Procedures.updateMutatorFlyout_(t),
        t.addChangeListener(Blockly.Procedures.mutatorChangeListener_));
    }
  }),
  (Blockly.Procedures.mutatorChangeListener_ = function (t) {
    (t.type != Blockly.Events.BLOCK_CREATE &&
      t.type != Blockly.Events.BLOCK_DELETE &&
      t.type != Blockly.Events.BLOCK_CHANGE) ||
      ((t = Blockly.Workspace.getById(t.workspaceId)),
      Blockly.Procedures.updateMutatorFlyout_(t));
  }),
  (Blockly.Procedures.getCallers = function (t, e) {
    var o = [];
    e = e.getAllBlocks(!1);
    for (var i = 0; i < e.length; i++)
      if (e[i].getProcedureCall) {
        var n = e[i].getProcedureCall();
        n && Blockly.Names.equals(n, t) && o.push(e[i]);
      }
    return o;
  }),
  (Blockly.Procedures.mutateCallers = function (t) {
    var e,
      o = Blockly.Events.recordUndo,
      i = t.getProcedureDef()[0],
      n = t.mutationToDom(!0);
    for (
      t = Blockly.Procedures.getCallers(i, t.workspace), i = 0;
      (e = t[i]);
      i++
    ) {
      var l = e.mutationToDom();
      (l = l && Blockly.Xml.domToText(l)), e.domToMutation(n);
      var r = e.mutationToDom();
      l != (r = r && Blockly.Xml.domToText(r)) &&
        ((Blockly.Events.recordUndo = !1),
        Blockly.Events.fire(
          new Blockly.Events.BlockChange(e, "mutation", null, l, r)
        ),
        (Blockly.Events.recordUndo = o));
    }
  }),
  (Blockly.Procedures.getDefinition = function (t, e) {
    e = e.getTopBlocks(!1);
    for (var o = 0; o < e.length; o++)
      if (e[o].getProcedureDef) {
        var i = e[o].getProcedureDef();
        if (i && Blockly.Names.equals(i[0], t)) return e[o];
      }
    return null;
  }),
  (Blockly.Functions = {}),
  (Blockly.Functions.NAME_TYPE = Blockly.PROCEDURE_CATEGORY_NAME),
  (Blockly.Functions.flyoutCategory = function (t) {
    var e = [];
    Blockly.Functions.addCreateButton_(t, e),
      (t = Blockly.Functions.getAllFunctionDefinitionBlocks(t));
    for (var o = 0; o < t.length; o++) {
      var i = t[o].getName(),
        n = t[o].getArguments(),
        l = Blockly.utils.xml.createElement("block");
      l.setAttribute("type", "function_call"), l.setAttribute("gap", 16);
      var r = Blockly.utils.xml.createElement("mutation");
      for (
        r.setAttribute("name", i), l.appendChild(r), i = 0;
        i < n.length;
        i++
      ) {
        var s = Blockly.utils.xml.createElement("arg");
        s.setAttribute("name", n[i].name),
          s.setAttribute("type", n[i].type),
          s.setAttribute("id", n[i].id),
          r.appendChild(s);
      }
      e.push(l);
    }
    return e;
  }),
  (Blockly.Functions.addCreateButton_ = function (t, e) {
    var o = document.createElement("button");
    o.setAttribute("text", Blockly.Msg.FUNCTION_CREATE_NEW),
      o.setAttribute("callbackKey", "CREATE_FUNCTION"),
      t.registerButtonCallback("CREATE_FUNCTION", function () {
        Blockly.Functions.createFunctionCallback_(t);
      }),
      e.push(o);
  }),
  (Blockly.Functions.getCallers = function (t, e) {
    var o = [];
    e = e.getAllBlocks();
    for (var i = 0; i < e.length; i++)
      (e[i].type == Blockly.FUNCTION_CALL_BLOCK_TYPE ||
        e[i].type === Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE) &&
        e[i].getName &&
        e[i].getName() == t &&
        o.push(e[i]);
    return o;
  }),
  (Blockly.Functions.getDefinition = function (t, e) {
    e = e.getTopBlocks(!1);
    for (var o = 0; o < e.length; o++)
      if (
        e[o].type == Blockly.FUNCTION_DEFINITION_BLOCK_TYPE &&
        e[o].getName &&
        e[o].getName() == t
      )
        return e[o];
    return null;
  }),
  (Blockly.Functions.getAllFunctionDefinitionBlocks = function (t) {
    t = t.getTopBlocks(!1);
    for (var e = [], o = 0; o < t.length; o++)
      t[o].type === Blockly.FUNCTION_DEFINITION_BLOCK_TYPE && e.push(t[o]);
    return e;
  }),
  (Blockly.Functions.isCustomType = function (t) {
    return !("boolean" == t || "string" == t || "number" == t);
  }),
  (Blockly.Functions.newFunctionMutation = function (t) {
    return (
      (t =
        '<xml><mutation name="' +
        Blockly.Functions.findLegalName(
          Blockly.Msg.FUNCTIONS_DEFAULT_FUNCTION_NAME,
          t
        ) +
        '" functionid="' +
        Blockly.utils.genUid() +
        '"></mutation></xml>'),
      (t = Blockly.Xml.textToDom(t).firstChild).removeAttribute("xmlns"),
      t
    );
  }),
  (Blockly.Functions.incrementNameSuffix = function (t) {
    var e = t.match(/^(.*?)(\d+)$/);
    return e ? e[1] + (parseInt(e[2], 10) + 1) : t + "2";
  }),
  (Blockly.Functions.findUniqueParamName = function (t, e) {
    for (; !Blockly.Functions.isUniqueParamName(t, e); )
      t = Blockly.Functions.incrementNameSuffix(t);
    return t;
  }),
  (Blockly.Functions.isUniqueParamName = function (t, e) {
    return !e || -1 == e.indexOf(t);
  }),
  (Blockly.Functions.createFunctionCallback_ = function (t) {
    Blockly.hideChaff(),
      Blockly.selected && Blockly.selected.unselect(),
      Blockly.Functions.editFunctionExternalHandler(
        Blockly.Functions.newFunctionMutation(t),
        Blockly.Functions.createFunctionCallbackFactory_(t)
      );
  }),
  (Blockly.Functions.createFunctionCallbackFactory_ = function (t) {
    return function (e) {
      if (e) {
        if (
          ((e =
            '<xml><block type="' +
            Blockly.FUNCTION_DEFINITION_BLOCK_TYPE +
            '">' +
            Blockly.Xml.domToText(e) +
            "</block></xml>"),
          (e = Blockly.Xml.textToDom(e)),
          Blockly.Events.setGroup(!0),
          (e = Blockly.Xml.domToBlock(e.firstChild, t)).updateDisplay_(),
          t.getMetrics)
        ) {
          var o = t.getMetrics(),
            i = e.getHeightWidth();
          e.moveBy(
            o.viewLeft + o.viewWidth / 2 - i.width / 2,
            o.viewTop + o.viewHeight / 2 - i.height / 2
          ),
            e.scheduleSnapAndBump();
        }
        t.centerOnBlock(e.id), Blockly.Events.setGroup(!1);
      }
    };
  }),
  (Blockly.Functions.editFunctionCallback_ = function (t) {
    if (
      t.type == Blockly.FUNCTION_CALL_BLOCK_TYPE ||
      t.type == Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE
    ) {
      var e = t.workspace.isFlyout ? t.workspace.targetWorkspace : t.workspace;
      t = Blockly.Functions.getDefinition(t.getName(), e);
    }
    Blockly.hideChaff(),
      Blockly.selected && Blockly.selected.unselect(),
      Blockly.Functions.editFunctionExternalHandler(
        t.mutationToDom(),
        Blockly.Functions.editFunctionCallbackFactory_(t)
      );
  }),
  (Blockly.Functions.editFunctionCallbackFactory_ = function (t) {
    return function (e) {
      e &&
        (Blockly.Functions.mutateCallersAndDefinition(
          t.getName(),
          t.workspace,
          e
        ),
        t.updateDisplay_());
    };
  }),
  (Blockly.Functions.editFunctionExternalHandler = function (t, e) {
    console.warn(
      "External function editor must be overriden: Blockly.Functions.editFunctionExternalHandler",
      t,
      e
    );
  }),
  (Blockly.Functions.makeEditOption = function (t) {
    return {
      enabled: !0,
      text: Blockly.Msg.FUNCTIONS_EDIT_OPTION,
      callback: function () {
        Blockly.Functions.editFunctionCallback_(t);
      },
    };
  }),
  (Blockly.Functions.makeCreateCallOption = function (t) {
    var e = t.getField("function_name").getText(),
      o = goog.dom.createDom("mutation");
    return (
      o.setAttribute("name", e),
      (o = goog.dom.createDom("block", null, o)).setAttribute(
        "type",
        "function_call"
      ),
      {
        enabled: 0 < t.workspace.remainingCapacity(),
        text: Blockly.Msg.FUNCTIONS_CREATE_CALL_OPTION.replace("%1", e),
        callback: Blockly.ContextMenu.callbackFactory(t, o),
      }
    );
  }),
  (Blockly.Functions.makeGoToDefinitionOption = function (t) {
    return {
      enabled: !0,
      text: Blockly.Msg.FUNCTIONS_GO_TO_DEFINITION_OPTION,
      callback: function () {
        var e = t.getField("function_name").getText();
        (e = Blockly.Functions.getDefinition(e, t.workspace)) &&
          t.workspace.centerOnBlock(e.id);
      },
    };
  }),
  (Blockly.Functions.getReporterArgumentType = function (t) {
    switch (t) {
      case "Boolean":
      case "Number":
      case "String":
        return t.toLowerCase();
      default:
        return t;
    }
  }),
  (Blockly.Functions.namesInUse = function (t, e, o) {
    var i = {};
    return (
      t.getAllVariables().forEach(function (t) {
        i[t.name] = !0;
      }),
      t.getAllBlocks().forEach(function (t) {
        t == e ||
          (o && t.getFunctionId && t.getFunctionId() == o) ||
          (t.type == Blockly.FUNCTION_DEFINITION_BLOCK_TYPE
            ? (i[t.getName()] = !0)
            : ("procedures_defreturn" != t.type &&
                "procedures_defnoreturn" != t.type) ||
              (i[t.getProcedureDef()[0]] = !0));
      }),
      i
    );
  }),
  (Blockly.Functions.idsInUse = function (t) {
    var e = [];
    return (
      t.getAllBlocks().forEach(function (t) {
        t.type == Blockly.FUNCTION_DEFINITION_BLOCK_TYPE &&
          e.push(t.getFunctionId());
      }),
      e
    );
  }),
  (Blockly.Functions.findLegalName = function (t, e, o) {
    if (o && o.isInFlyout) return t;
    for (e = Blockly.Functions.namesInUse(e, o); e[t]; )
      t = Blockly.Functions.incrementNameSuffix(t);
    return t;
  }),
  (Blockly.Functions.rename = function (t) {
    t = t.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "");
    var e = Blockly.Functions.findLegalName(
        t,
        this.sourceBlock_.workspace,
        this.sourceBlock_
      ),
      o = this.getValue();
    if (!t) return o;
    if (!e) return t;
    if (!o) return (this.sourceBlock_.name_ = e);
    if (o != t && o != e) {
      (t = this.sourceBlock_).name_ = e;
      var i = t.mutationToDom();
      (t.name_ = o),
        Blockly.Functions.mutateCallersAndDefinition(o, t.workspace, i);
    }
    return e;
  }),
  (Blockly.Functions.validateFunctionExternal = function (t, e) {
    var o = t.getAttribute("name");
    if (!o) return Blockly.alert(Blockly.Msg.FUNCTION_WARNING_EMPTY_NAME), !1;
    for (var i = {}, n = 0; n < t.childNodes.length; ++n) {
      var l = t.childNodes[n].getAttribute("name");
      if (!l) return Blockly.alert(Blockly.Msg.FUNCTION_WARNING_EMPTY_NAME), !1;
      if (i[l])
        return Blockly.alert(Blockly.Msg.FUNCTION_WARNING_DUPLICATE_ARG), !1;
      i[l] = !0;
    }
    return i[o]
      ? (Blockly.alert(Blockly.Msg.FUNCTION_WARNING_ARG_NAME_IS_FUNCTION_NAME),
        !1)
      : ((t = t.getAttribute("functionid")),
        !Blockly.Functions.namesInUse(e, null, t)[o] ||
          (Blockly.alert(Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1", o)),
          !1));
  }),
  (Blockly.Functions.getArgMap = function (t, e) {
    for (var o = {}, i = 0; i < t.childNodes.length; ++i) {
      var n = t.childNodes[i],
        l = e ? n.getAttribute("id") : n.getAttribute("name");
      (n = e ? n.getAttribute("name") : n.getAttribute("id")), (o[l] = n);
    }
    return o;
  }),
  (Blockly.Functions.mutateCallersAndDefinition = function (t, e, o) {
    var i = Blockly.Functions.getDefinition(t, e);
    i
      ? ((t = Blockly.Functions.getCallers(t, i.workspace)).push(i),
        Blockly.Events.setGroup(!0),
        t.forEach(function (t) {
          var e = t.mutationToDom(),
            n = e && Blockly.Xml.domToText(e);
          t.domToMutation(o);
          var l = t.mutationToDom(),
            r = l && Blockly.Xml.domToText(l);
          if (n != r)
            if (
              (Blockly.Events.fire(
                new Blockly.Events.BlockChange(t, "mutation", null, n, r)
              ),
              t.id == i.id)
            ) {
              var s = Blockly.Functions.getArgMap(e),
                a = Blockly.Functions.getArgMap(l, !0);
              i.getDescendants().forEach(function (t) {
                if (Blockly.Functions.isFunctionArgumentReporter(t)) {
                  var e = t.getFieldValue("VALUE"),
                    o = s[e];
                  a[o]
                    ? a[o] !== e && t.setFieldValue(a[o], "VALUE")
                    : t.dispose();
                }
              });
            } else
              setTimeout(function () {
                t.bumpNeighbours();
              }, Blockly.BUMP_DELAY);
        }),
        Blockly.Events.setGroup(!1))
      : console.warn(
          "Attempted to change function " +
            t +
            ", but no definition block was found on the workspace"
        );
  }),
  (Blockly.Functions.isFunctionArgumentReporter = function (t) {
    return (
      "argument_reporter_boolean" == t.type ||
      "argument_reporter_number" == t.type ||
      "argument_reporter_string" == t.type ||
      "argument_reporter_custom" == t.type
    );
  }),
  (Blockly.Functions.createFlyout = function (t, e) {
    var o = {
        disabledPatternId: t.options.disabledPatternId,
        parentWorkspace: t,
        RTL: t.RTL,
        oneBasedIndex: t.options.oneBasedIndex,
        horizontalLayout: t.horizontalLayout,
        toolboxPosition: t.options.toolboxPosition,
        zoomOptions: t.options.zoomOptions,
        renderer: t.options.renderer,
        newFunctions: t.options.newFunctions,
      },
      i = (o = o.horizontalLayout
        ? new Blockly.HorizontalFlyout(o)
        : new Blockly.VerticalFlyout(o)).createDom("svg");
    return goog.dom.insertSiblingAfter(i, e), o.init(t), o;
  }),
  (Blockly.VariableModel = function (t, e, o, i) {
    (this.workspace = t),
      (this.name = e),
      (this.type = o || ""),
      (this.id_ = i || Blockly.utils.genUid()),
      Blockly.Events.fire(new Blockly.Events.VarCreate(this));
  }),
  (Blockly.VariableModel.prototype.getId = function () {
    return this.id_;
  }),
  (Blockly.VariableModel.compareByName = function (t, e) {
    return (t = t.name.toLowerCase()) < (e = e.name.toLowerCase())
      ? -1
      : t == e
      ? 0
      : 1;
  }),
  (Blockly.Variables = {}),
  (Blockly.Variables.NAME_TYPE = Blockly.VARIABLE_CATEGORY_NAME),
  (Blockly.Variables.allUsedVarModels = function (t) {
    var e = t.getAllBlocks(!1).filter(function (t) {
      return !t.disabled;
    });
    t = Object.create(null);
    for (var o = 0; o < e.length; o++) {
      var i = e[o].getVarModels();
      if (i)
        for (var n = 0; n < i.length; n++) {
          var l = i[n],
            r = l.getId();
          r && (t[r] = l);
        }
    }
    for (r in ((e = []), t)) e.push(t[r]);
    return e;
  }),
  (Blockly.Variables.allUsedVariables = function () {
    console.warn(
      "Deprecated call to Blockly.Variables.allUsedVariables. Use Blockly.Variables.allUsedVarModels instead.\nIf this is a major issue please file a bug on GitHub."
    );
  }),
  (Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_ = {}),
  (Blockly.Variables.allDeveloperVariables = function (t) {
    t = t.getAllBlocks(!1);
    for (var e, o = Object.create(null), i = 0; (e = t[i]); i++) {
      var n = e.getDeveloperVariables;
      if (
        (!n &&
          e.getDeveloperVars &&
          ((n = e.getDeveloperVars),
          Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[
            e.type
          ] ||
            (console.warn(
              "Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '" +
                e.type +
                "')"
            ),
            (Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[
              e.type
            ] = !0))),
        n)
      )
        for (e = n(), n = 0; n < e.length; n++) o[e[n]] = !0;
    }
    return Object.keys(o);
  }),
  (Blockly.Variables.flyoutCategory = function (t) {
    var e = [],
      o = document.createElement("button");
    return (
      o.setAttribute("text", "%{BKY_NEW_VARIABLE}"),
      o.setAttribute("callbackKey", "CREATE_VARIABLE"),
      t.registerButtonCallback(Blockly.CREATE_VARIABLE_ID, function (t) {
        Blockly.Variables.createVariableButtonHandler(t.getTargetWorkspace());
      }),
      e.push(o),
      (t = Blockly.Variables.flyoutCategoryBlocks(t)),
      e.concat(t)
    );
  }),
  (Blockly.Variables.flyoutCategoryBlocks = function (t) {
    var e = [];
    if (0 < (t = t.getVariablesOfType("")).length) {
      var o = t[t.length - 1];
      if (Blockly.Blocks.variables_set) {
        var i = Blockly.utils.xml.createElement("block");
        i.setAttribute("type", "variables_set"),
          i.setAttribute("gap", Blockly.Blocks.math_change ? 8 : 24),
          i.appendChild(Blockly.Variables.generateVariableFieldDom(o));
        var n = Blockly.Xml.textToDom(
          '<value name="varset"><shadow type="textinline"><field name="text">0</field></shadow></value>'
        );
        i.appendChild(n), e.push(i);
      }
      if (
        (Blockly.Blocks.math_change &&
          ((i = Blockly.utils.xml.createElement("block")).setAttribute(
            "type",
            "math_change"
          ),
          i.setAttribute("gap", Blockly.Blocks.variables_get ? 20 : 8),
          i.appendChild(Blockly.Variables.generateVariableFieldDom(o)),
          (o = Blockly.Xml.textToDom(
            '<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'
          )),
          i.appendChild(o),
          e.push(i)),
        Blockly.Blocks.variables_get)
      )
        for (
          t.sort(Blockly.VariableModel.compareByName), o = 0;
          (n = t[o]);
          o++
        )
          (i = Blockly.utils.xml.createElement("block")).setAttribute(
            "type",
            "variables_get"
          ),
            i.setAttribute("gap", 8),
            i.appendChild(Blockly.Variables.generateVariableFieldDom(n)),
            e.push(i);
    }
    return e;
  }),
  (Blockly.Variables.VAR_LETTER_OPTIONS = "ijkmnopqrstuvwxyzabcdefgh"),
  (Blockly.Variables.generateUniqueName = function (t) {
    return Blockly.Variables.generateUniqueNameFromOptions(
      Blockly.Variables.VAR_LETTER_OPTIONS.charAt(0),
      t.getAllVariableNames()
    );
  }),
  (Blockly.Variables.generateUniqueNameFromOptions = function (t, e) {
    if (!e.length) return t;
    for (
      var o = Blockly.Variables.VAR_LETTER_OPTIONS, i = "", n = o.indexOf(t);
      ;

    ) {
      for (var l = !1, r = 0; r < e.length; r++)
        if (e[r].toLowerCase() == t) {
          l = !0;
          break;
        }
      if (!l) return t;
      ++n == o.length && ((n = 0), (i = Number(i) + 1)), (t = o.charAt(n) + i);
    }
  }),
  (Blockly.Variables.createVariableButtonHandler = function (t, e, o) {
    var i = o || "",
      n = function (o) {
        Blockly.Variables.promptName(
          Blockly.Msg.NEW_VARIABLE_TITLE,
          o,
          function (o) {
            if (o) {
              var l = Blockly.Variables.nameUsedWithAnyType_(o, t),
                r = Blockly.Functions.getDefinition(o, t);
              l || r
                ? ((r =
                    r || l.type == i
                      ? Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace(
                          "%1",
                          l.name
                        )
                      : (r =
                          Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE)
                          .replace("%1", l.name)
                          .replace("%2", l.type)),
                  Blockly.alert(r, function () {
                    n(o);
                  }))
                : (t.createVariable(o, i), e && e(o));
            } else e && e(null);
          }
        );
      };
    n("");
  }),
  (Blockly.Variables.createVariable =
    Blockly.Variables.createVariableButtonHandler),
  (Blockly.Variables.renameVariable = function (t, e, o) {
    var i = function (n) {
      var l = Blockly.Msg.RENAME_VARIABLE_TITLE.replace("%1", e.name);
      Blockly.Variables.promptName(l, n, function (n) {
        if (n) {
          var l = Blockly.Variables.nameUsedWithOtherType_(n, e.type, t);
          l
            ? ((l =
                Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace(
                  "%1",
                  l.name
                ).replace("%2", l.type)),
              Blockly.alert(l, function () {
                i(n);
              }))
            : (t.renameVariableById(e.getId(), n), o && o(n));
        } else o && o(null);
      });
    };
    i(e.name || "");
  }),
  (Blockly.Variables.promptName = function (t, e, o) {
    Blockly.prompt(t, e, function (t) {
      t &&
        ((t = t.replace(/[\s\xa0]+/g, " ").trim()) ==
          Blockly.Msg.RENAME_VARIABLE ||
          t == Blockly.Msg.NEW_VARIABLE) &&
        (t = null),
        o(t);
    });
  }),
  (Blockly.Variables.nameUsedWithOtherType_ = function (t, e, o) {
    (o = o.getVariableMap().getAllVariables()), (t = t.toLowerCase());
    for (var i, n = 0; (i = o[n]); n++)
      if (i.name.toLowerCase() == t && i.type != e) return i;
    return null;
  }),
  (Blockly.Variables.nameUsedWithAnyType_ = function (t, e) {
    (e = e.getVariableMap().getAllVariables()), (t = t.toLowerCase());
    for (var o, i = 0; (o = e[i]); i++) if (o.name.toLowerCase() == t) return o;
    return null;
  }),
  (Blockly.Variables.generateVariableFieldXmlString = function (t) {
    var e = t.type;
    return (
      '<field name="VAR" id="' +
      t.getId() +
      '" variabletype="' +
      goog.string.htmlEscape(e) +
      '">' +
      goog.string.htmlEscape(t.name) +
      "</field>"
    );
  }),
  (Blockly.Variables.generateVariableFieldDom = function (t) {
    var e = Blockly.utils.xml.createElement("field");
    return (
      e.setAttribute("name", "VAR"),
      e.setAttribute("id", t.getId()),
      e.setAttribute("variabletype", t.type),
      (t = Blockly.utils.xml.createTextNode(t.name)),
      e.appendChild(t),
      e
    );
  }),
  (Blockly.Variables.getOrCreateVariablePackage = function (t, e, o, i) {
    var n = Blockly.Variables.getVariable(t, e, o, i);
    return n || (n = Blockly.Variables.createVariable_(t, e, o, i)), n;
  }),
  (Blockly.Variables.getVariable = function (t, e, o, i) {
    var n = t.getPotentialVariableMap(),
      l = null;
    if (
      e &&
      (!(l = t.getVariableById(e)) && n && (l = n.getVariableById(e)), l)
    )
      return l;
    if (o) {
      if (null == i)
        throw Error("Tried to look up a variable by name without a type");
      !(l = t.getVariable(o, i)) && n && (l = n.getVariable(o, i));
    }
    return l;
  }),
  (Blockly.Variables.createVariable_ = function (t, e, o, i) {
    var n = t.getPotentialVariableMap();
    return (
      o ||
        (o = Blockly.Variables.generateUniqueName(
          t.isFlyout ? t.targetWorkspace : t
        )),
      n ? n.createVariable(o, i, e) : t.createVariable(o, i, e)
    );
  }),
  (Blockly.Variables.getAddedVariables = function (t, e) {
    t = t.getAllVariables();
    var o = [];
    if (e.length != t.length)
      for (var i = 0; i < t.length; i++) {
        var n = t[i];
        -1 == e.indexOf(n) && o.push(n);
      }
    return o;
  }),
  (Blockly.WidgetDiv = {}),
  (Blockly.WidgetDiv.owner_ = null),
  (Blockly.WidgetDiv.dispose_ = null),
  (Blockly.WidgetDiv.rendererClassName_ = null),
  (Blockly.WidgetDiv.themeClassName_ = null),
  (Blockly.WidgetDiv.createDom = function () {
    Blockly.WidgetDiv.DIV ||
      ((Blockly.WidgetDiv.DIV = document.createElement("div")),
      (Blockly.WidgetDiv.DIV.className = "blocklyWidgetDiv"),
      document.body.appendChild(Blockly.WidgetDiv.DIV));
  }),
  (Blockly.WidgetDiv.show = function (t, e, o) {
    Blockly.WidgetDiv.hide(),
      (Blockly.WidgetDiv.owner_ = t),
      (Blockly.WidgetDiv.dispose_ = o),
      ((t = Blockly.WidgetDiv.DIV).style.direction = e ? "rtl" : "ltr"),
      (t.style.display = "block"),
      (Blockly.WidgetDiv.rendererClassName_ =
        Blockly.getMainWorkspace().getRenderer().name + "-renderer"),
      (Blockly.WidgetDiv.themeClassName_ =
        Blockly.getMainWorkspace().getTheme().name + "-theme"),
      Blockly.utils.dom.addClass(t, Blockly.WidgetDiv.rendererClassName_),
      Blockly.utils.dom.addClass(t, Blockly.WidgetDiv.themeClassName_);
  }),
  (Blockly.WidgetDiv.repositionForWindowResize = function () {
    if (
      Blockly.WidgetDiv.owner_ &&
      Blockly.WidgetDiv.owner_.getScaledBBox &&
      Blockly.WidgetDiv.isDisplayed()
    ) {
      var t = Blockly.WidgetDiv.owner_.getScaledBBox();
      (Blockly.WidgetDiv.DIV.style.left = t.left + "px"),
        (Blockly.WidgetDiv.DIV.style.top = t.top + "px");
    } else Blockly.WidgetDiv.hide();
  }),
  (Blockly.WidgetDiv.hide = function () {
    var t = Blockly.WidgetDiv.DIV;
    if (Blockly.WidgetDiv.owner_) {
      (Blockly.WidgetDiv.owner_ = null),
        (t.style.display = "none"),
        (t.style.left = ""),
        (t.style.top = ""),
        Blockly.WidgetDiv.dispose_ && Blockly.WidgetDiv.dispose_(),
        (Blockly.WidgetDiv.dispose_ = null),
        (t.innerHTML = "");
      var e = Blockly.getMainWorkspace();
      e && e.markFocused();
    }
    Blockly.WidgetDiv.rendererClassName_ &&
      (Blockly.utils.dom.removeClass(t, Blockly.WidgetDiv.rendererClassName_),
      (Blockly.WidgetDiv.rendererClassName_ = null)),
      Blockly.WidgetDiv.themeClassName_ &&
        (Blockly.utils.dom.removeClass(t, Blockly.WidgetDiv.themeClassName_),
        (Blockly.WidgetDiv.themeClassName_ = null));
  }),
  (Blockly.WidgetDiv.isVisible = function () {
    return !!Blockly.WidgetDiv.owner_;
  }),
  (Blockly.WidgetDiv.isDisplayed = function () {
    return "none" != Blockly.WidgetDiv.DIV.style.display;
  }),
  (Blockly.WidgetDiv.hideIfOwner = function (t) {
    Blockly.WidgetDiv.owner_ == t && Blockly.WidgetDiv.hide();
  }),
  (Blockly.WidgetDiv.positionInternal_ = function (t, e, o) {
    (Blockly.WidgetDiv.DIV.style.left = t + "px"),
      (Blockly.WidgetDiv.DIV.style.top = e + "px"),
      (Blockly.WidgetDiv.DIV.style.height = o + "px");
  }),
  (Blockly.WidgetDiv.positionWithAnchor = function (t, e, o, i) {
    var n = Blockly.WidgetDiv.calculateY_(t, e, o);
    (t = Blockly.WidgetDiv.calculateX_(t, e, o, i)),
      0 > n
        ? Blockly.WidgetDiv.positionInternal_(t, 0, o.height + n)
        : Blockly.WidgetDiv.positionInternal_(t, n, o.height);
  }),
  (Blockly.WidgetDiv.calculateX_ = function (t, e, o, i) {
    return i
      ? ((e = Math.max(e.right - o.width, t.left)),
        Math.min(e, t.right - o.width))
      : ((e = Math.min(e.left, t.right - o.width)), Math.max(e, t.left));
  }),
  (Blockly.WidgetDiv.calculateY_ = function (t, e, o) {
    return e.bottom + o.height >= t.bottom ? e.top - o.height : e.bottom;
  }),
  (Blockly.VERSION = "3.0.29"),
  (Blockly.mainWorkspace = null),
  (Blockly.selected = null),
  (Blockly.draggingConnections = []),
  (Blockly.clipboardXml_ = null),
  (Blockly.clipboardSource_ = null),
  (Blockly.clipboardTypeCounts_ = null),
  (Blockly.cache3dSupported_ = null),
  (Blockly.svgSize = function (t) {
    return { width: t.cachedWidth_, height: t.cachedHeight_ };
  }),
  (Blockly.resizeSvgContents = function (t) {
    t.resizeContents();
  }),
  (Blockly.svgResize = function (t) {
    for (; t.options.parentWorkspace; ) t = t.options.parentWorkspace;
    var e = t.getParentSvg(),
      o = e.parentNode;
    if (o) {
      var i = o.offsetWidth;
      (o = o.offsetHeight),
        e.cachedWidth_ != i &&
          (e.setAttribute("width", i + "px"), (e.cachedWidth_ = i)),
        e.cachedHeight_ != o &&
          (e.setAttribute("height", o + "px"), (e.cachedHeight_ = o)),
        t.resize();
    }
  }),
  (Blockly.onKeyDown = function (t) {
    var e = Blockly.mainWorkspace;
    if (
      e &&
      !(Blockly.utils.isTargetInput(t) || (e.rendered && !e.isVisible()))
    )
      if (e.options.readOnly) Blockly.navigation.onKeyPress(t);
      else {
        var o = !1;
        if (t.keyCode == Blockly.utils.KeyCodes.ESC)
          Blockly.hideChaff(),
            Blockly.navigation.onBlocklyAction(Blockly.navigation.ACTION_EXIT);
        else {
          if (Blockly.navigation.onKeyPress(t)) return;
          if (
            t.keyCode == Blockly.utils.KeyCodes.BACKSPACE ||
            t.keyCode == Blockly.utils.KeyCodes.DELETE
          ) {
            if ((t.preventDefault(), Blockly.Gesture.inProgress())) return;
            Blockly.selected && Blockly.selected.isDeletable() && (o = !0);
          } else if (t.altKey || t.ctrlKey || t.metaKey) {
            if (Blockly.Gesture.inProgress()) return;
            Blockly.selected &&
              Blockly.selected.isDeletable() &&
              Blockly.selected.isMovable() &&
              (t.keyCode == Blockly.utils.KeyCodes.C
                ? (Blockly.hideChaff(), Blockly.copy_(Blockly.selected))
                : t.keyCode != Blockly.utils.KeyCodes.X ||
                  Blockly.selected.workspace.isFlyout ||
                  (Blockly.copy_(Blockly.selected),
                  (o = !0),
                  Blockly.hideChaff(),
                  Blockly.selected.dispose(!0, !0))),
              t.keyCode == Blockly.utils.KeyCodes.V
                ? Blockly.clipboardXml_ &&
                  ((t = Blockly.clipboardSource_).isFlyout &&
                    (t = t.targetWorkspace),
                  Blockly.clipboardTypeCounts_ &&
                    t.isCapacityAvailable(Blockly.clipboardTypeCounts_) &&
                    (Blockly.Events.setGroup(!0),
                    t.paste(Blockly.clipboardXml_),
                    Blockly.Events.setGroup(!1)))
                : t.keyCode == Blockly.utils.KeyCodes.Z &&
                  (Blockly.hideChaff(), e.undo(t.shiftKey));
          }
        }
        o &&
          !Blockly.selected.workspace.isFlyout &&
          (Blockly.Events.setGroup(!0),
          Blockly.hideChaff(),
          Blockly.selected.dispose(!0, !0),
          Blockly.Events.setGroup(!1));
      }
  }),
  (Blockly.copy_ = function (t) {
    if (t.isComment) var e = t.toXmlWithXY();
    else {
      (e = Blockly.Xml.blockToDom(t, !0)), Blockly.Xml.deleteNext(e);
      var o = t.getRelativeToSurfaceXY();
      e.setAttribute("x", t.RTL ? -o.x : o.x), e.setAttribute("y", o.y);
    }
    (Blockly.clipboardXml_ = e),
      (Blockly.clipboardSource_ = t.workspace),
      (Blockly.clipboardTypeCounts_ = t.isComment
        ? null
        : Blockly.utils.getBlockTypeCounts(t, !0));
  }),
  (Blockly.duplicate = function (t) {
    var e = Blockly.clipboardXml_,
      o = Blockly.clipboardSource_;
    Blockly.copy_(t),
      t.workspace.paste(Blockly.clipboardXml_),
      (Blockly.clipboardXml_ = e),
      (Blockly.clipboardSource_ = o);
  }),
  (Blockly.onContextMenu_ = function (t) {
    Blockly.utils.isTargetInput(t) || t.preventDefault();
  }),
  (Blockly.hideChaff = function (t) {
    Blockly.hideChaffInternal_(t),
      Blockly.WidgetDiv.hide(!0),
      Blockly.DropDownDiv.hideWithoutAnimation();
  }),
  (Blockly.hideChaffOnResize = function (t) {
    Blockly.hideChaffInternal_(t),
      Blockly.WidgetDiv.repositionForWindowResize(),
      Blockly.DropDownDiv.repositionForWindowResize();
  }),
  (Blockly.hideChaffInternal_ = function (t) {
    Blockly.utils.isOnScreenKeyboardResize() ||
      (Blockly.Tooltip.hide(),
      Blockly.WidgetDiv.hide(),
      Blockly.DropDownDiv.hideWithoutAnimation()),
      t ||
        ((t = Blockly.getMainWorkspace()).trashcan &&
          t.trashcan.flyout &&
          t.trashcan.flyout.hide(),
        (t = t.getToolbox()) &&
          t.getFlyout() &&
          t.getFlyout().autoClose &&
          t.clearSelection());
  }),
  (Blockly.getMainWorkspace = function () {
    return Blockly.mainWorkspace;
  }),
  (Blockly.alert = function (t, e) {
    alert(t), e && e();
  }),
  (Blockly.confirm = function (t, e) {
    e(confirm(t));
  }),
  (Blockly.prompt = function (t, e, o, i) {
    o(prompt(t, e, i));
  }),
  (Blockly.jsonInitFactory_ = function (t) {
    return function () {
      this.jsonInit(t);
    };
  }),
  (Blockly.defineBlocksWithJsonArray = function (t) {
    for (var e = 0; e < t.length; e++) {
      var o = t[e];
      if (o) {
        var i = o.type;
        null == i || "" === i
          ? console.warn(
              "Block definition #" +
                e +
                " in JSON array is missing a type attribute. Skipping."
            )
          : (Blockly.Blocks[i] &&
              console.warn(
                "Block definition #" +
                  e +
                  ' in JSON array overwrites prior definition of "' +
                  i +
                  '".'
              ),
            (Blockly.Blocks[i] = { init: Blockly.jsonInitFactory_(o) }));
      } else
        console.warn(
          "Block definition #" + e + " in JSON array is " + o + ". Skipping."
        );
    }
  }),
  (Blockly.bindEventWithChecks_ = function (t, e, o, i, n, l) {
    var r = !1,
      s = function (t) {
        var e = !n;
        t = Blockly.Touch.splitEventByTouches(t);
        for (var l, s = 0; (l = t[s]); s++)
          (e && !Blockly.Touch.shouldHandleEvent(l)) ||
            (Blockly.Touch.setClientFromTouch(l),
            o ? i.call(o, l) : i(l),
            (r = !0));
      },
      a = [];
    if (Blockly.utils.global.PointerEvent && e in Blockly.Touch.TOUCH_MAP)
      for (var c, g = 0; (c = Blockly.Touch.TOUCH_MAP[e][g]); g++)
        t.addEventListener(c, s, !1), a.push([t, c, s]);
    else if (
      (t.addEventListener(e, s, !1),
      a.push([t, e, s]),
      e in Blockly.Touch.TOUCH_MAP)
    ) {
      var u = function (t) {
        s(t), r && !l && t.preventDefault();
      };
      for (g = 0; (c = Blockly.Touch.TOUCH_MAP[e][g]); g++)
        t.addEventListener(c, u, !1), a.push([t, c, u]);
    }
    return a;
  }),
  (Blockly.bindEvent_ = function (t, e, o, i) {
    var n = function (t) {
        o ? i.call(o, t) : i(t);
      },
      l = [];
    if (Blockly.utils.global.PointerEvent && e in Blockly.Touch.TOUCH_MAP)
      for (var r, s = 0; (r = Blockly.Touch.TOUCH_MAP[e][s]); s++)
        t.addEventListener(r, n, !1), l.push([t, r, n]);
    else if (
      (t.addEventListener(e, n, !1),
      l.push([t, e, n]),
      e in Blockly.Touch.TOUCH_MAP)
    ) {
      var a = function (t) {
        if (t.changedTouches && 1 == t.changedTouches.length) {
          var e = t.changedTouches[0];
          (t.clientX = e.clientX), (t.clientY = e.clientY);
        }
        n(t), t.preventDefault();
      };
      for (s = 0; (r = Blockly.Touch.TOUCH_MAP[e][s]); s++)
        t.addEventListener(r, a, !1), l.push([t, r, a]);
    }
    return l;
  }),
  (Blockly.unbindEvent_ = function (t) {
    for (; t.length; ) {
      var e = t.pop(),
        o = e[2];
      e[0].removeEventListener(e[1], o, !1);
    }
    return o;
  }),
  (Blockly.isNumber = function (t) {
    return /^\s*-?\d+(\.\d+)?\s*$/.test(t);
  }),
  (Blockly.hueToHex = function (t) {
    return Blockly.utils.colour.hsvToHex(
      t,
      Blockly.HSV_SATURATION,
      255 * Blockly.HSV_VALUE
    );
  }),
  (Blockly.checkBlockColourConstants = function () {
    Blockly.checkBlockColourConstant_(
      "LOGIC_HUE",
      ["Blocks", "logic", "HUE"],
      void 0
    ),
      Blockly.checkBlockColourConstant_(
        "LOGIC_HUE",
        ["Constants", "Logic", "HUE"],
        210
      ),
      Blockly.checkBlockColourConstant_(
        "LOOPS_HUE",
        ["Blocks", "loops", "HUE"],
        void 0
      ),
      Blockly.checkBlockColourConstant_(
        "LOOPS_HUE",
        ["Constants", "Loops", "HUE"],
        120
      ),
      Blockly.checkBlockColourConstant_(
        "MATH_HUE",
        ["Blocks", "math", "HUE"],
        void 0
      ),
      Blockly.checkBlockColourConstant_(
        "MATH_HUE",
        ["Constants", "Math", "HUE"],
        230
      ),
      Blockly.checkBlockColourConstant_(
        "TEXTS_HUE",
        ["Blocks", "texts", "HUE"],
        void 0
      ),
      Blockly.checkBlockColourConstant_(
        "TEXTS_HUE",
        ["Constants", "Text", "HUE"],
        160
      ),
      Blockly.checkBlockColourConstant_(
        "LISTS_HUE",
        ["Blocks", "lists", "HUE"],
        void 0
      ),
      Blockly.checkBlockColourConstant_(
        "LISTS_HUE",
        ["Constants", "Lists", "HUE"],
        260
      ),
      Blockly.checkBlockColourConstant_(
        "COLOUR_HUE",
        ["Blocks", "colour", "HUE"],
        void 0
      ),
      Blockly.checkBlockColourConstant_(
        "COLOUR_HUE",
        ["Constants", "Colour", "HUE"],
        20
      ),
      Blockly.checkBlockColourConstant_(
        "VARIABLES_HUE",
        ["Blocks", "variables", "HUE"],
        void 0
      ),
      Blockly.checkBlockColourConstant_(
        "VARIABLES_HUE",
        ["Constants", "Variables", "HUE"],
        330
      ),
      Blockly.checkBlockColourConstant_(
        "VARIABLES_DYNAMIC_HUE",
        ["Constants", "VariablesDynamic", "HUE"],
        310
      ),
      Blockly.checkBlockColourConstant_(
        "PROCEDURES_HUE",
        ["Blocks", "procedures", "HUE"],
        void 0
      );
  }),
  (Blockly.checkBlockColourConstant_ = function (t, e, o) {
    for (var i = "Blockly", n = Blockly, l = 0; l < e.length; ++l)
      (i += "." + e[l]), n && (n = n[e[l]]);
    n &&
      n !== o &&
      ((t = (
        void 0 === o
          ? '%1 has been removed. Use Blockly.Msg["%2"].'
          : '%1 is deprecated and unused. Override Blockly.Msg["%2"].'
      )
        .replace("%1", i)
        .replace("%2", t)),
      console.warn(t));
  }),
  (Blockly.Warning = function (t) {
    Blockly.Warning.superClass_.constructor.call(this, t),
      this.createIcon(),
      (this.text_ = {});
  }),
  Blockly.utils.object.inherits(Blockly.Warning, Blockly.Icon),
  (Blockly.Warning.prototype.collapseHidden = !1),
  (Blockly.Warning.prototype.drawIcon_ = function (t) {
    Blockly.utils.dom.createSvgElement(
      "path",
      {
        class: "blocklyIconShape",
        d: "M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z",
      },
      t
    ),
      Blockly.utils.dom.createSvgElement(
        "path",
        {
          class: "blocklyIconSymbol",
          d: "m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z",
        },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "rect",
        {
          class: "blocklyIconSymbol",
          x: "7",
          y: "11",
          height: "2",
          width: "2",
        },
        t
      );
  }),
  (Blockly.Warning.textToDom_ = function (t) {
    var e = Blockly.utils.dom.createSvgElement(
      "text",
      {
        class: "blocklyText blocklyBubbleText blocklyNoPointerEvents",
        y: Blockly.Bubble.BORDER_WIDTH,
      },
      null
    );
    t = t.split("\n");
    for (var o = 0; o < t.length; o++) {
      var i = Blockly.utils.dom.createSvgElement(
          "tspan",
          { dy: "1em", x: Blockly.Bubble.BORDER_WIDTH },
          e
        ),
        n = document.createTextNode(t[o]);
      i.appendChild(n);
    }
    return e;
  }),
  (Blockly.Warning.prototype.setVisible = function (t) {
    t != this.isVisible() &&
      (Blockly.Events.fire(
        new Blockly.Events.Ui(this.block_, "warningOpen", !t, t)
      ),
      t ? this.createBubble() : this.disposeBubble());
  }),
  (Blockly.Warning.prototype.createBubble = function () {
    if (
      ((this.paragraphElement_ = Blockly.Warning.textToDom_(this.getText())),
      (this.bubble_ = new Blockly.Bubble(
        this.block_.workspace,
        this.paragraphElement_,
        this.block_.pathObject.svgPath,
        this.iconXY_,
        null,
        null
      )),
      this.bubble_.setSvgId(this.block_.id),
      this.block_.RTL)
    )
      for (
        var t, e = this.paragraphElement_.getBBox().width, o = 0;
        (t = this.paragraphElement_.childNodes[o]);
        o++
      )
        t.setAttribute("text-anchor", "end"),
          t.setAttribute("x", e + Blockly.Bubble.BORDER_WIDTH);
    this.applyColour();
  }),
  (Blockly.Warning.prototype.disposeBubble = function () {
    this.bubble_.dispose(),
      (this.paragraphElement_ = this.body_ = this.bubble_ = null);
  }),
  (Blockly.Warning.prototype.bodyFocus_ = function (t) {
    this.bubble_.promote();
  }),
  (Blockly.Warning.prototype.setText = function (t, e) {
    this.text_[e] != t &&
      (t ? (this.text_[e] = t) : delete this.text_[e],
      this.isVisible() && (this.setVisible(!1), this.setVisible(!0)));
  }),
  (Blockly.Warning.prototype.getText = function () {
    var t,
      e = [];
    for (t in this.text_) e.push(this.text_[t]);
    return e.join("\n");
  }),
  (Blockly.Warning.prototype.dispose = function () {
    (this.block_.warning = null), Blockly.Icon.prototype.dispose.call(this);
  }),
  (Blockly.Comment = function (t) {
    Blockly.Comment.superClass_.constructor.call(this, t),
      (this.model_ = t.commentModel),
      (this.model_.text = this.model_.text || ""),
      (this.cachedText_ = ""),
      (this.onInputWrapper_ =
        this.onChangeWrapper_ =
        this.onWheelWrapper_ =
        this.onMouseUpWrapper_ =
          null),
      this.createIcon();
  }),
  Blockly.utils.object.inherits(Blockly.Comment, Blockly.Icon),
  (Blockly.Comment.prototype.drawIcon_ = function (t) {
    Blockly.utils.dom.createSvgElement(
      "path",
      {
        class: "blocklyIconShape",
        d: "m 2,2 0,9.2211 3.0026599,0 1.6008929,1.5989 1.8138195,-1.5989 6.6046683,0 0,-9.2211 -13.0220406,0 z",
        style: "fill: #fff;",
      },
      t
    ),
      Blockly.utils.dom.createSvgElement(
        "rect",
        {
          class: "blocklyIconSymbol",
          x: "4",
          y: "8",
          height: "1",
          width: "6",
          style: "fill: #575E75;",
        },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "rect",
        {
          class: "blocklyIconSymbol",
          x: "4",
          y: "6",
          height: "1",
          width: "6",
          style: "fill: #575E75;",
        },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "rect",
        {
          class: "blocklyIconSymbol",
          x: "4",
          y: "4",
          height: "1",
          width: "8",
          style: "fill: #575E75;",
        },
        t
      );
  }),
  (Blockly.Comment.prototype.createEditor_ = function () {
    return (
      (this.svgGroup_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyCommentBubble" },
        null
      )),
      (this.svgGroup_.translate_ = ""),
      this.createTextEditor_(),
      this.svgGroup_.appendChild(this.foreignObject_),
      this.createTopBarIcons_(),
      this.resizeTextarea_(),
      this.block_.isEditable() &&
        (Blockly.bindEventWithChecks_(
          this.deleteIcon_,
          "mousedown",
          this,
          this.deleteMouseDown_
        ),
        Blockly.bindEventWithChecks_(
          this.deleteIcon_,
          "mouseup",
          this,
          this.deleteMouseUp_
        ),
        Blockly.bindEventWithChecks_(
          this.minimizeArrow_,
          "mousedown",
          this,
          this.minimizeMouseUp_
        )),
      this.svgGroup_
    );
  }),
  (Blockly.Comment.prototype.createTextEditor_ = function () {
    this.foreignObject_ = Blockly.utils.dom.createSvgElement(
      "foreignObject",
      {
        x: Blockly.Bubble.BORDER_WIDTH,
        y:
          Blockly.Bubble.BORDER_WIDTH +
          Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT,
      },
      null
    );
    var t = document.createElementNS(Blockly.utils.dom.HTML_NS, "body");
    t.setAttribute("xmlns", Blockly.utils.dom.HTML_NS),
      (t.className = "blocklyMinimalBody");
    var e = (this.textarea_ = document.createElementNS(
      Blockly.utils.dom.HTML_NS,
      "textarea"
    ));
    return (
      (e.className = "blocklyCommentTextarea"),
      e.setAttribute("dir", this.block_.RTL ? "RTL" : "LTR"),
      (e.value = this.model_.text),
      this.block_.isEditable() || e.setAttribute("readonly", !0),
      t.appendChild(e),
      this.foreignObject_.appendChild(t),
      this.block_.isEditable() &&
        ((this.onMouseUpWrapper_ = Blockly.bindEventWithChecks_(
          e,
          "mouseup",
          this,
          this.startEdit_,
          !0,
          !0
        )),
        (this.onWheelWrapper_ = Blockly.bindEventWithChecks_(
          e,
          "wheel",
          this,
          function (t) {
            t.stopPropagation();
          }
        )),
        (this.onChangeWrapper_ = Blockly.bindEventWithChecks_(
          e,
          "change",
          this,
          function (t) {
            this.cachedText_ != this.model_.text &&
              Blockly.Events.fire(
                new Blockly.Events.BlockChange(
                  this.block_,
                  "comment",
                  null,
                  this.cachedText_,
                  this.model_.text
                )
              );
          }
        )),
        (this.onInputWrapper_ = Blockly.bindEventWithChecks_(
          e,
          "input",
          this,
          function (t) {
            this.model_.text = e.value;
          }
        )),
        setTimeout(e.focus.bind(e), 0)),
      this.foreignObject_
    );
  }),
  (Blockly.Comment.prototype.createTopBarIcons_ = function () {
    (this.minimizeArrow_ = Blockly.utils.dom.createSvgElement(
      "image",
      {
        x: Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET,
        y:
          Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT / 2 +
          Blockly.WorkspaceCommentSvg.BORDER_WIDTH -
          Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE / 2,
        width: Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE,
        height: Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE,
      },
      this.svgGroup_
    )),
      this.minimizeArrow_.setAttributeNS(
        "http://www.w3.org/1999/xlink",
        "xlink:href",
        Blockly.mainWorkspace.options.pathToMedia + "comment-arrow-down.svg"
      ),
      (this.deleteIcon_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyCommentDeleteIcon" },
        this.svgGroup_
      )),
      Blockly.utils.dom.createSvgElement(
        "rect",
        {
          x: "-12.5",
          y: "1",
          width: "27.5",
          height: "27.5",
          fill: "transparent",
          class: "blocklyDeleteIconShape",
        },
        this.deleteIcon_
      ),
      Blockly.WorkspaceCommentSvg.drawDeleteIcon(this.deleteIcon_);
  }),
  (Blockly.Comment.prototype.deleteMouseDown_ = function (t) {
    t.stopPropagation();
  }),
  (Blockly.Comment.prototype.deleteMouseUp_ = function (t) {
    this.block_.setCommentText(null),
      t.stopPropagation(),
      Blockly.Touch.clearTouchIdentifier();
  }),
  (Blockly.Comment.prototype.minimizeMouseUp_ = function (t) {
    this.block_.comment.setVisible(!1),
      t.stopPropagation(),
      Blockly.Touch.clearTouchIdentifier();
  }),
  (Blockly.Comment.prototype.updateEditable = function () {
    Blockly.Comment.superClass_.updateEditable.call(this),
      this.isVisible() && (this.disposeBubble_(), this.createBubble_());
  }),
  (Blockly.Comment.prototype.onBubbleResize_ = function () {
    this.isVisible() &&
      ((this.model_.size = this.bubble_.getBubbleSize()),
      this.resizeTextarea_());
  }),
  (Blockly.Comment.prototype.resizeTextarea_ = function () {
    var t = this.model_.size,
      e = 2 * Blockly.Bubble.BORDER_WIDTH,
      o = Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT;
    this.foreignObject_.setAttribute("width", Math.max(t.width - e, 0)),
      this.foreignObject_.setAttribute("height", Math.max(t.height - e - o, 0)),
      (this.textarea_.style.width = t.width - e - 4 + "px"),
      (this.textarea_.style.height = t.height - e - o - 4 + "px"),
      this.RTL
        ? (this.minimizeArrow_.setAttribute(
            "x",
            t.width -
              Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE -
              Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET
          ),
          this.minimizeArrow_.setAttribute(
            "transform",
            "translate(" + -t.width + ", 1)"
          ),
          this.deleteIcon_.setAttribute(
            "transform",
            "translate(" +
              (-t.width +
                Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE +
                Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET) +
              ",0) scale(-1 1)"
          ))
        : this.deleteIcon_.setAttribute(
            "transform",
            "translate(" +
              (t.width -
                Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE -
                Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET) +
              ",0)"
          );
  }),
  (Blockly.Comment.prototype.setVisible = function (t) {
    t != this.isVisible() &&
      (Blockly.Events.fire(
        new Blockly.Events.Ui(this.block_, "commentOpen", !t, t)
      ),
      (this.model_.pinned = t)
        ? this.createBubble_()
        : ((this.model_.xy = this.getRelativePosition()),
          this.disposeBubble_()));
  }),
  (Blockly.Comment.prototype.setRelativePosition = function (t) {
    (this.model_.xy = t),
      this.bubble_ &&
        ((this.bubble_.relativeLeft_ = t.x),
        (this.bubble_.relativeTop_ = t.y),
        this.bubble_.positionBubble_(),
        this.bubble_.renderArrow_());
  }),
  (Blockly.Comment.prototype.getRelativePosition = function () {
    return this.bubble_
      ? new Blockly.utils.Coordinate(
          this.bubble_.relativeLeft_,
          this.bubble_.relativeTop_
        )
      : this.model_.xy;
  }),
  (Blockly.Comment.prototype.createBubble_ = function () {
    Blockly.utils.userAgent.IE
      ? this.createNonEditableBubble_()
      : this.createEditableBubble_();
  }),
  (Blockly.Comment.prototype.createEditableBubble_ = function () {
    (this.bubble_ = new Blockly.Bubble(
      this.block_.workspace,
      this.createEditor_(),
      this.block_.pathObject.svgPath,
      this.iconXY_,
      this.model_.size.width,
      this.model_.size.height
    )),
      this.bubble_.setSvgId(this.block_.id),
      this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),
      this.applyColour(),
      this.setRelativePosition(this.model_.xy);
  }),
  (Blockly.Comment.prototype.createNonEditableBubble_ = function () {
    Blockly.Warning.prototype.createBubble.call(this);
  }),
  (Blockly.Comment.prototype.disposeBubble_ = function () {
    this.paragraphElement_
      ? Blockly.Warning.prototype.disposeBubble.call(this)
      : (this.onMouseUpWrapper_ &&
          (Blockly.unbindEvent_(this.onMouseUpWrapper_),
          (this.onMouseUpWrapper_ = null)),
        this.onWheelWrapper_ &&
          (Blockly.unbindEvent_(this.onWheelWrapper_),
          (this.onWheelWrapper_ = null)),
        this.onChangeWrapper_ &&
          (Blockly.unbindEvent_(this.onChangeWrapper_),
          (this.onChangeWrapper_ = null)),
        this.onInputWrapper_ &&
          (Blockly.unbindEvent_(this.onInputWrapper_),
          (this.onInputWrapper_ = null)),
        this.bubble_.dispose(),
        (this.foreignObject_ = this.textarea_ = this.bubble_ = null));
  }),
  (Blockly.Comment.prototype.startEdit_ = function (t) {
    this.bubble_.promote() && this.textarea_.focus(),
      (this.cachedText_ = this.model_.text);
  }),
  (Blockly.Comment.prototype.getBubbleSize = function () {
    return this.model_.size;
  }),
  (Blockly.Comment.prototype.setBubbleSize = function (t, e) {
    this.bubble_
      ? this.bubble_.setBubbleSize(t, e)
      : ((this.model_.size.width = t), (this.model_.size.height = e));
  }),
  (Blockly.Comment.prototype.getText = function () {
    return this.model_.text || "";
  }),
  (Blockly.Comment.prototype.setText = function (t) {
    this.model_.text != t && ((this.model_.text = t), this.updateText());
  }),
  (Blockly.Comment.prototype.updateText = function () {
    this.textarea_
      ? (this.textarea_.value = this.model_.text)
      : this.paragraphElement_ &&
        (this.paragraphElement_.firstChild.textContent = this.model_.text);
  }),
  (Blockly.Comment.prototype.dispose = function () {
    (this.block_.comment = null), Blockly.Icon.prototype.dispose.call(this);
  }),
  Blockly.Css.register(
    ".blocklyCommentTextarea {,background-color: #FAF6BD;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,color: $colour_text;,overflow: hidden;,font-size: 12pt;,line-height: 22px;,}".split(
      ","
    )
  ),
  (Blockly.FlyoutCursor = function () {
    Blockly.FlyoutCursor.superClass_.constructor.call(this);
  }),
  Blockly.utils.object.inherits(Blockly.FlyoutCursor, Blockly.Cursor),
  (Blockly.FlyoutCursor.prototype.onBlocklyAction = function (t) {
    switch (t.name) {
      case Blockly.navigation.actionNames.PREVIOUS:
        return this.prev(), !0;
      case Blockly.navigation.actionNames.NEXT:
        return this.next(), !0;
      default:
        return !1;
    }
  }),
  (Blockly.FlyoutCursor.prototype.next = function () {
    var t = this.getCurNode();
    return t ? ((t = t.next()) && this.setCurNode(t), t) : null;
  }),
  (Blockly.FlyoutCursor.prototype.in = function () {
    return null;
  }),
  (Blockly.FlyoutCursor.prototype.prev = function () {
    var t = this.getCurNode();
    return t ? ((t = t.prev()) && this.setCurNode(t), t) : null;
  }),
  (Blockly.FlyoutCursor.prototype.out = function () {
    return null;
  }),
  (Blockly.Flyout = function (t) {
    (t.getMetrics = this.getMetrics_.bind(this)),
      (t.setMetrics = this.setMetrics_.bind(this)),
      (this.workspace_ = new Blockly.WorkspaceSvg(t)),
      (this.workspace_.isFlyout = !0),
      (this.RTL = !!t.RTL),
      (this.toolboxPosition_ = t.toolboxPosition),
      (this.eventWrappers_ = []),
      (this.mats_ = []),
      (this.buttons_ = []),
      (this.listeners_ = []),
      (this.permanentlyDisabled_ = []),
      (this.tabWidth_ = this.workspace_.getRenderer().getConstants().TAB_WIDTH);
  }),
  (Blockly.Flyout.prototype.autoClose = !0),
  (Blockly.Flyout.prototype.isVisible_ = !1),
  (Blockly.Flyout.prototype.containerVisible_ = !0),
  (Blockly.Flyout.prototype.CORNER_RADIUS = 8),
  (Blockly.Flyout.prototype.MARGIN = Blockly.Flyout.prototype.CORNER_RADIUS),
  (Blockly.Flyout.prototype.GAP_X = 3 * Blockly.Flyout.prototype.MARGIN),
  (Blockly.Flyout.prototype.GAP_Y = 3 * Blockly.Flyout.prototype.MARGIN),
  (Blockly.Flyout.prototype.SCROLLBAR_PADDING = 2),
  (Blockly.Flyout.prototype.width_ = 0),
  (Blockly.Flyout.prototype.height_ = 0),
  (Blockly.Flyout.prototype.dragAngleRange_ = 70),
  (Blockly.Flyout.prototype.svgGroup_ = null),
  (Blockly.Flyout.prototype.scrollbar_ = null),
  (Blockly.Flyout.prototype.targetWorkspace_ = null),
  (Blockly.Flyout.prototype.createDom = function (t) {
    return (
      (this.svgGroup_ = Blockly.utils.dom.createSvgElement(
        t,
        { class: "blocklyFlyout", style: "display: none" },
        null
      )),
      (this.svgBackground_ = Blockly.utils.dom.createSvgElement(
        "path",
        { class: "blocklyFlyoutBackground" },
        this.svgGroup_
      )),
      this.svgGroup_.appendChild(this.workspace_.createDom()),
      this.workspace_
        .getThemeManager()
        .subscribe(this.svgBackground_, "flyoutBackgroundColour", "fill"),
      this.workspace_
        .getThemeManager()
        .subscribe(this.svgBackground_, "flyoutOpacity", "fill-opacity"),
      this.workspace_.getMarkerManager().setCursor(new Blockly.FlyoutCursor()),
      this.svgGroup_
    );
  }),
  (Blockly.Flyout.prototype.init = function (t) {
    (this.targetWorkspace_ = t),
      (this.workspace_.targetWorkspace = t),
      (this.scrollbar_ = new Blockly.Scrollbar(
        this.workspace_,
        this.horizontalLayout_,
        !1,
        "blocklyFlyoutScrollbar"
      )),
      this.hide(),
      Array.prototype.push.apply(
        this.eventWrappers_,
        Blockly.bindEventWithChecks_(this.svgGroup_, "wheel", this, this.wheel_)
      ),
      this.autoClose ||
        ((this.filterWrapper_ = this.filterForCapacity_.bind(this)),
        this.targetWorkspace_.addChangeListener(this.filterWrapper_)),
      Array.prototype.push.apply(
        this.eventWrappers_,
        Blockly.bindEventWithChecks_(
          this.svgBackground_,
          "mousedown",
          this,
          this.onMouseDown_
        )
      ),
      (this.workspace_.getGesture = this.targetWorkspace_.getGesture.bind(
        this.targetWorkspace_
      )),
      this.workspace_.setVariableMap(this.targetWorkspace_.getVariableMap()),
      this.workspace_.createPotentialVariableMap();
  }),
  (Blockly.Flyout.prototype.dispose = function () {
    this.hide(),
      this.clearOldEventListeners_(),
      Blockly.unbindEvent_(this.eventWrappers_),
      this.filterWrapper_ &&
        (this.targetWorkspace_.removeChangeListener(this.filterWrapper_),
        (this.filterWrapper_ = null)),
      this.scrollbar_ && (this.scrollbar_.dispose(), (this.scrollbar_ = null)),
      this.workspace_ &&
        (this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),
        (this.workspace_.targetWorkspace = null),
        this.workspace_.dispose(),
        (this.workspace_ = null)),
      this.svgGroup_ &&
        (Blockly.utils.dom.removeNode(this.svgGroup_), (this.svgGroup_ = null)),
      (this.targetWorkspace_ = this.svgBackground_ = null);
  }),
  (Blockly.Flyout.prototype.getWidth = function () {
    return this.width_;
  }),
  (Blockly.Flyout.prototype.getHeight = function () {
    return this.height_;
  }),
  (Blockly.Flyout.prototype.getWorkspace = function () {
    return this.workspace_;
  }),
  (Blockly.Flyout.prototype.isVisible = function () {
    return this.isVisible_;
  }),
  (Blockly.Flyout.prototype.setVisible = function (t) {
    var e = t != this.isVisible();
    (this.isVisible_ = t), e && this.updateDisplay_();
  }),
  (Blockly.Flyout.prototype.setContainerVisible = function (t) {
    var e = t != this.containerVisible_;
    (this.containerVisible_ = t), e && this.updateDisplay_();
  }),
  (Blockly.Flyout.prototype.updateDisplay_ = function () {
    var t = !!this.containerVisible_ && this.isVisible();
    (this.svgGroup_.style.display = t ? "block" : "none"),
      this.scrollbar_.setContainerVisible(t);
  }),
  (Blockly.Flyout.prototype.positionAt_ = function (t, e, o, i) {
    this.svgGroup_.setAttribute("width", t),
      this.svgGroup_.setAttribute("height", e),
      "svg" == this.svgGroup_.tagName
        ? Blockly.utils.dom.setCssTransform(
            this.svgGroup_,
            "translate(" + o + "px," + i + "px)"
          )
        : this.svgGroup_.setAttribute(
            "transform",
            "translate(" + o + "," + i + ")"
          ),
      this.scrollbar_ &&
        (this.scrollbar_.setOrigin(o, i),
        this.scrollbar_.resize(),
        this.scrollbar_.setPosition_(
          this.scrollbar_.position_.x,
          this.scrollbar_.position_.y
        ));
  }),
  (Blockly.Flyout.prototype.hide = function () {
    this.isVisible() && this.setVisible(!1);
  }),
  (Blockly.Flyout.prototype.clearOldEventListeners_ = function () {
    for (var t, e = 0; (t = this.listeners_[e]); e++) Blockly.unbindEvent_(t);
    (this.listeners_.length = 0),
      this.reflowWrapper_ &&
        (this.workspace_.removeChangeListener(this.reflowWrapper_),
        (this.reflowWrapper_ = null));
  }),
  (Blockly.Flyout.prototype.show = function (t) {
    if (
      (this.workspace_.setResizesEnabled(!1),
      this.hide(),
      this.clearOldEventListeners_(),
      this.clearOldBlocks_(),
      "string" == typeof t)
    ) {
      if (
        "function" !=
        typeof (t =
          this.workspace_.targetWorkspace.getToolboxCategoryCallback(t))
      )
        throw TypeError(
          "Couldn't find a callback function when opening a toolbox category."
        );
      if (((t = t(this.workspace_.targetWorkspace)), !Array.isArray(t)))
        throw TypeError(
          "Result of toolbox category callback must be an array."
        );
    }
    this.setVisible(!0);
    var e = [],
      o = [];
    this.permanentlyDisabled_.length = 0;
    for (
      var i, n = this.horizontalLayout_ ? this.GAP_X : this.GAP_Y, l = 0;
      (i = t[l]);
      l++
    )
      if (i.tagName)
        switch (i.tagName.toUpperCase()) {
          case "BLOCK":
            var r = Blockly.Xml.domToBlock(i, this.workspace_);
            r.isEnabled() || this.permanentlyDisabled_.push(r),
              e.push({ type: "block", block: r }),
              (i = parseInt(i.getAttribute("gap"), 10)),
              o.push(isNaN(i) ? n : i);
            break;
          case "SEP":
            (i = parseInt(i.getAttribute("gap"), 10)),
              !isNaN(i) && 0 < o.length ? (o[o.length - 1] = i) : o.push(n);
            break;
          case "LABEL":
          case "BUTTON":
            if (
              ((r = "LABEL" == i.tagName.toUpperCase()), !Blockly.FlyoutButton)
            )
              throw Error("Missing require for Blockly.FlyoutButton");
            (i = new Blockly.FlyoutButton(
              this.workspace_,
              this.targetWorkspace_,
              i,
              r
            )),
              e.push({ type: "button", button: i }),
              o.push(n);
        }
    this.layout_(e, o),
      this.listeners_.push(
        Blockly.bindEventWithChecks_(
          this.svgBackground_,
          "mouseover",
          this,
          function () {
            for (
              var t, e = this.workspace_.getTopBlocks(!1), o = 0;
              (t = e[o]);
              o++
            )
              t.removeSelect();
          }
        )
      ),
      this.horizontalLayout_ ? (this.height_ = 0) : (this.width_ = 0),
      this.workspace_.setResizesEnabled(!0),
      this.reflow(),
      this.filterForCapacity_(),
      this.position(),
      (this.reflowWrapper_ = this.reflow.bind(this)),
      this.workspace_.addChangeListener(this.reflowWrapper_);
  }),
  (Blockly.Flyout.prototype.clearOldBlocks_ = function () {
    for (var t, e = this.workspace_.getTopBlocks(!1), o = 0; (t = e[o]); o++)
      t.workspace == this.workspace_ && t.dispose(!1, !1);
    for (o = 0; o < this.mats_.length; o++)
      (e = this.mats_[o]) && Blockly.utils.dom.removeNode(e);
    for (o = this.mats_.length = 0; (e = this.buttons_[o]); o++) e.dispose();
    (this.buttons_.length = 0),
      this.workspace_.getPotentialVariableMap().clear();
  }),
  (Blockly.Flyout.prototype.addBlockListeners_ = function (t, e, o) {
    this.listeners_.push(
      Blockly.bindEventWithChecks_(
        t,
        "mousedown",
        null,
        this.blockMouseDown_(e)
      )
    ),
      this.listeners_.push(
        Blockly.bindEventWithChecks_(
          o,
          "mousedown",
          null,
          this.blockMouseDown_(e)
        )
      ),
      this.listeners_.push(Blockly.bindEvent_(t, "mouseenter", e, e.addSelect)),
      this.listeners_.push(
        Blockly.bindEvent_(t, "mouseleave", e, e.removeSelect)
      ),
      this.listeners_.push(Blockly.bindEvent_(o, "mouseenter", e, e.addSelect)),
      this.listeners_.push(
        Blockly.bindEvent_(o, "mouseleave", e, e.removeSelect)
      );
  }),
  (Blockly.Flyout.prototype.blockMouseDown_ = function (t) {
    var e = this;
    return function (o) {
      var i = e.targetWorkspace_.getGesture(o);
      i && (i.setStartBlock(t), i.handleFlyoutStart(o, e));
    };
  }),
  (Blockly.Flyout.prototype.onMouseDown_ = function (t) {
    var e = this.targetWorkspace_.getGesture(t);
    e && e.handleFlyoutStart(t, this);
  }),
  (Blockly.Flyout.prototype.isBlockCreatable_ = function (t) {
    return t.isEnabled();
  }),
  (Blockly.Flyout.prototype.createBlock = function (t) {
    var e = null;
    Blockly.Events.disable();
    var o = this.targetWorkspace_.getAllVariables();
    this.targetWorkspace_.setResizesEnabled(!1);
    try {
      (e = this.placeNewBlock_(t)), Blockly.hideChaff();
    } finally {
      Blockly.Events.enable();
    }
    if (
      ((t = Blockly.Variables.getAddedVariables(this.targetWorkspace_, o)),
      Blockly.Events.isEnabled())
    )
      for (
        Blockly.Events.setGroup(!0),
          Blockly.Events.fire(new Blockly.Events.Create(e)),
          o = 0;
        o < t.length;
        o++
      )
        Blockly.Events.fire(new Blockly.Events.VarCreate(t[o]));
    return this.autoClose ? this.hide() : this.filterForCapacity_(), e;
  }),
  (Blockly.Flyout.prototype.initFlyoutButton_ = function (t, e, o) {
    var i = t.createDom();
    t.moveTo(e, o),
      t.show(),
      this.listeners_.push(
        Blockly.bindEventWithChecks_(i, "mousedown", this, this.onMouseDown_)
      ),
      this.buttons_.push(t);
  }),
  (Blockly.Flyout.prototype.createRect_ = function (t, e, o, i, n) {
    return (
      ((e = Blockly.utils.dom.createSvgElement(
        "rect",
        { "fill-opacity": 0, x: e, y: o, height: i.height, width: i.width },
        null
      )).tooltip = t),
      Blockly.Tooltip.bindMouseEvents(e),
      this.workspace_.getCanvas().insertBefore(e, t.getSvgRoot()),
      (t.flyoutRect_ = e),
      (this.mats_[n] = e)
    );
  }),
  (Blockly.Flyout.prototype.moveRectToBlock_ = function (t, e) {
    var o = e.getHeightWidth();
    t.setAttribute("width", o.width),
      t.setAttribute("height", o.height),
      (e = e.getRelativeToSurfaceXY()),
      t.setAttribute("y", e.y),
      t.setAttribute("x", this.RTL ? e.x - o.width : e.x);
  }),
  (Blockly.Flyout.prototype.filterForCapacity_ = function () {
    for (var t, e = this.workspace_.getTopBlocks(!1), o = 0; (t = e[o]); o++)
      if (-1 == this.permanentlyDisabled_.indexOf(t))
        for (
          var i = this.targetWorkspace_.isCapacityAvailable(
            Blockly.utils.getBlockTypeCounts(t)
          );
          t;

        )
          t.setEnabled(i), (t = t.getNextBlock());
  }),
  (Blockly.Flyout.prototype.reflow = function () {
    this.reflowWrapper_ &&
      this.workspace_.removeChangeListener(this.reflowWrapper_),
      this.reflowInternal_(),
      this.reflowWrapper_ &&
        this.workspace_.addChangeListener(this.reflowWrapper_);
  }),
  (Blockly.Flyout.prototype.isScrollable = function () {
    return !!this.scrollbar_ && this.scrollbar_.isVisible();
  }),
  (Blockly.Flyout.prototype.placeNewBlock_ = function (t) {
    var e = this.targetWorkspace_;
    if (!t.getSvgRoot()) throw Error("oldBlock is not rendered.");
    "function_call" == t.type &&
      t.inputList.forEach(function (t) {
        if (
          t.connection &&
          t.connection.targetConnection &&
          "variables_get" == t.connection.targetBlock().type
        ) {
          var o = (t =
            t.connection.targetBlock()).inputList[0].fieldRow[0].getText();
          (o = Blockly.Variables.getOrCreateVariablePackage(
            e,
            null,
            o,
            ""
          ).getId()),
            t.setFieldValue(o, "VAR");
        }
      });
    var o = Blockly.Xml.blockToDom(t, !0);
    if (
      (e.setResizesEnabled(!1),
      !(o = Blockly.Xml.domToBlock(o, e)).getSvgRoot())
    )
      throw Error("block is not rendered.");
    var i = e.getOriginOffsetInPixels(),
      n = this.workspace_.getOriginOffsetInPixels();
    return (
      (t = t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),
      (t = Blockly.utils.Coordinate.sum(n, t)),
      (i = Blockly.utils.Coordinate.difference(t, i)).scale(1 / e.scale),
      o.moveBy(i.x, i.y),
      o
    );
  }),
  (Blockly.Flyout.prototype.onBlocklyAction = function (t) {
    return this.workspace_.getCursor().onBlocklyAction(t);
  }),
  (Blockly.HorizontalFlyout = function (t) {
    (t.getMetrics = this.getMetrics_.bind(this)),
      (t.setMetrics = this.setMetrics_.bind(this)),
      Blockly.HorizontalFlyout.superClass_.constructor.call(this, t),
      (this.horizontalLayout_ = !0);
  }),
  Blockly.utils.object.inherits(Blockly.HorizontalFlyout, Blockly.Flyout),
  (Blockly.HorizontalFlyout.prototype.getMetrics_ = function () {
    if (!this.isVisible()) return null;
    try {
      var t = this.workspace_.getCanvas().getBBox();
    } catch (e) {
      t = { height: 0, y: 0, width: 0, x: 0 };
    }
    var e = this.SCROLLBAR_PADDING,
      o = this.SCROLLBAR_PADDING;
    this.toolboxPosition_ == Blockly.TOOLBOX_AT_BOTTOM && (e = 0);
    var i = this.height_;
    return (
      this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP &&
        (i -= this.SCROLLBAR_PADDING),
      {
        viewHeight: i,
        viewWidth: this.width_ - 2 * this.SCROLLBAR_PADDING,
        contentHeight: (t.height + 2 * this.MARGIN) * this.workspace_.scale,
        contentWidth: (t.width + 2 * this.MARGIN) * this.workspace_.scale,
        viewTop: -this.workspace_.scrollY,
        viewLeft: -this.workspace_.scrollX,
        contentTop: 0,
        contentLeft: 0,
        absoluteTop: e,
        absoluteLeft: o,
      }
    );
  }),
  (Blockly.HorizontalFlyout.prototype.setMetrics_ = function (t) {
    var e = this.getMetrics_();
    e &&
      ("number" == typeof t.x &&
        (this.workspace_.scrollX = -e.contentWidth * t.x),
      this.workspace_.translate(
        this.workspace_.scrollX + e.absoluteLeft,
        this.workspace_.scrollY + e.absoluteTop
      ));
  }),
  (Blockly.HorizontalFlyout.prototype.position = function () {
    if (this.isVisible()) {
      var t = this.targetWorkspace_.getMetrics();
      t &&
        ((this.width_ = t.viewWidth),
        this.setBackgroundPath_(
          t.viewWidth - 2 * this.CORNER_RADIUS,
          this.height_ - this.CORNER_RADIUS
        ),
        this.positionAt_(
          this.width_,
          this.height_,
          0,
          this.targetWorkspace_.toolboxPosition == this.toolboxPosition_
            ? t.toolboxHeight
              ? this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP
                ? t.toolboxHeight
                : t.viewHeight - this.height_
              : this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP
              ? 0
              : t.viewHeight
            : this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP
            ? 0
            : t.viewHeight + t.absoluteTop - this.height_
        ));
    }
  }),
  (Blockly.HorizontalFlyout.prototype.setBackgroundPath_ = function (t, e) {
    var o = this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP,
      i = ["M 0," + (o ? 0 : this.CORNER_RADIUS)];
    o
      ? (i.push("h", t + 2 * this.CORNER_RADIUS),
        i.push("v", e),
        i.push(
          "a",
          this.CORNER_RADIUS,
          this.CORNER_RADIUS,
          0,
          0,
          1,
          -this.CORNER_RADIUS,
          this.CORNER_RADIUS
        ),
        i.push("h", -t),
        i.push(
          "a",
          this.CORNER_RADIUS,
          this.CORNER_RADIUS,
          0,
          0,
          1,
          -this.CORNER_RADIUS,
          -this.CORNER_RADIUS
        ))
      : (i.push(
          "a",
          this.CORNER_RADIUS,
          this.CORNER_RADIUS,
          0,
          0,
          1,
          this.CORNER_RADIUS,
          -this.CORNER_RADIUS
        ),
        i.push("h", t),
        i.push(
          "a",
          this.CORNER_RADIUS,
          this.CORNER_RADIUS,
          0,
          0,
          1,
          this.CORNER_RADIUS,
          this.CORNER_RADIUS
        ),
        i.push("v", e),
        i.push("h", -t - 2 * this.CORNER_RADIUS)),
      i.push("z"),
      this.svgBackground_.setAttribute("d", i.join(" "));
  }),
  (Blockly.HorizontalFlyout.prototype.scrollToStart = function () {
    this.scrollbar_.set(this.RTL ? 1 / 0 : 0);
  }),
  (Blockly.HorizontalFlyout.prototype.wheel_ = function (t) {
    var e = Blockly.utils.getScrollDeltaPixels(t),
      o = e.x || e.y;
    o &&
      ((o = (e = this.getMetrics_()).viewLeft + o),
      (o = Math.min(o, e.contentWidth - e.viewWidth)),
      (o = Math.max(o, 0)),
      this.scrollbar_.set(o),
      Blockly.WidgetDiv.hide(),
      Blockly.DropDownDiv.hideWithoutAnimation()),
      t.preventDefault(),
      t.stopPropagation();
  }),
  (Blockly.HorizontalFlyout.prototype.layout_ = function (t, e) {
    this.workspace_.scale = this.targetWorkspace_.scale;
    var o = this.MARGIN,
      i = o + this.tabWidth_;
    this.RTL && (t = t.reverse());
    for (var n, l = 0; (n = t[l]); l++)
      if ("block" == n.type) {
        for (
          var r, s = (n = n.block).getDescendants(!1), a = 0;
          (r = s[a]);
          a++
        )
          r.isInFlyout = !0;
        n.render(),
          (s = n.getSvgRoot()),
          (a = n.getHeightWidth()),
          (r = n.outputConnection ? this.tabWidth_ : 0),
          (r = this.RTL ? i + a.width : i - r),
          n.moveBy(r, o),
          (r = this.createRect_(n, r, o, a, l)),
          (i += a.width + e[l]),
          this.addBlockListeners_(s, n, r);
      } else
        "button" == n.type &&
          (this.initFlyoutButton_(n.button, i, o),
          (i += n.button.width + e[l]));
  }),
  (Blockly.HorizontalFlyout.prototype.isDragTowardWorkspace = function (t) {
    t = (Math.atan2(t.y, t.x) / Math.PI) * 180;
    var e = this.dragAngleRange_;
    return (t < 90 + e && t > 90 - e) || (t > -90 - e && t < -90 + e);
  }),
  (Blockly.HorizontalFlyout.prototype.getClientRect = function () {
    if (!this.svgGroup_) return null;
    var t = this.svgGroup_.getBoundingClientRect(),
      e = t.top;
    return this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP
      ? new Blockly.utils.Rect(-1e9, e + t.height, -1e9, 1e9)
      : new Blockly.utils.Rect(e, 1e9, -1e9, 1e9);
  }),
  (Blockly.HorizontalFlyout.prototype.reflowInternal_ = function () {
    this.workspace_.scale = this.targetWorkspace_.scale;
    for (
      var t, e = 0, o = this.workspace_.getTopBlocks(!1), i = 0;
      (t = o[i]);
      i++
    )
      e = Math.max(e, t.getHeightWidth().height);
    if (
      ((e += 1.5 * this.MARGIN),
      (e *= this.workspace_.scale),
      (e += Blockly.Scrollbar.scrollbarThickness),
      this.height_ != e)
    ) {
      for (i = 0; (t = o[i]); i++)
        t.flyoutRect_ && this.moveRectToBlock_(t.flyoutRect_, t);
      (this.height_ = e), this.position();
    }
  }),
  (Blockly.VerticalFlyout = function (t) {
    (t.getMetrics = this.getMetrics_.bind(this)),
      (t.setMetrics = this.setMetrics_.bind(this)),
      Blockly.VerticalFlyout.superClass_.constructor.call(this, t),
      (this.horizontalLayout_ = !1);
  }),
  Blockly.utils.object.inherits(Blockly.VerticalFlyout, Blockly.Flyout),
  (Blockly.VerticalFlyout.prototype.getMetrics_ = function () {
    if (!this.isVisible()) return null;
    try {
      var t = this.workspace_.getCanvas().getBBox();
    } catch (e) {
      t = { height: 0, y: 0, width: 0, x: 0 };
    }
    var e = this.SCROLLBAR_PADDING,
      o = this.height_ - 2 * this.SCROLLBAR_PADDING,
      i = this.width_;
    return (
      this.RTL || (i -= this.SCROLLBAR_PADDING),
      {
        viewHeight: o,
        viewWidth: i,
        contentHeight: t.height * this.workspace_.scale + 2 * this.MARGIN,
        contentWidth: t.width * this.workspace_.scale + 2 * this.MARGIN,
        viewTop: -this.workspace_.scrollY + t.y,
        viewLeft: -this.workspace_.scrollX,
        contentTop: t.y,
        contentLeft: t.x,
        absoluteTop: e,
        absoluteLeft: 0,
      }
    );
  }),
  (Blockly.VerticalFlyout.prototype.setMetrics_ = function (t) {
    var e = this.getMetrics_();
    e &&
      ("number" == typeof t.y &&
        (this.workspace_.scrollY = -e.contentHeight * t.y),
      this.workspace_.translate(
        this.workspace_.scrollX + e.absoluteLeft,
        this.workspace_.scrollY + e.absoluteTop
      ));
  }),
  (Blockly.VerticalFlyout.prototype.position = function () {
    if (this.isVisible()) {
      var t = this.targetWorkspace_.getMetrics();
      t &&
        ((this.height_ = t.viewHeight),
        this.setBackgroundPath_(
          this.width_ - this.CORNER_RADIUS,
          t.viewHeight - 2 * this.CORNER_RADIUS
        ),
        this.positionAt_(
          this.width_,
          this.height_,
          this.targetWorkspace_.toolboxPosition == this.toolboxPosition_
            ? t.toolboxWidth
              ? this.toolboxPosition_ == Blockly.TOOLBOX_AT_LEFT
                ? t.toolboxWidth
                : t.viewWidth - this.width_
              : this.toolboxPosition_ == Blockly.TOOLBOX_AT_LEFT
              ? 0
              : t.viewWidth
            : this.toolboxPosition_ == Blockly.TOOLBOX_AT_LEFT
            ? 0
            : t.viewWidth + t.absoluteLeft - this.width_,
          0
        ));
    }
  }),
  (Blockly.VerticalFlyout.prototype.setBackgroundPath_ = function (t, e) {
    var o = this.toolboxPosition_ == Blockly.TOOLBOX_AT_RIGHT,
      i = t + this.CORNER_RADIUS;
    (i = ["M " + (o ? i : 0) + ",0"]).push("h", o ? -t : t),
      i.push(
        "a",
        this.CORNER_RADIUS,
        this.CORNER_RADIUS,
        0,
        0,
        o ? 0 : 1,
        o ? -this.CORNER_RADIUS : this.CORNER_RADIUS,
        this.CORNER_RADIUS
      ),
      i.push("v", Math.max(0, e)),
      i.push(
        "a",
        this.CORNER_RADIUS,
        this.CORNER_RADIUS,
        0,
        0,
        o ? 0 : 1,
        o ? this.CORNER_RADIUS : -this.CORNER_RADIUS,
        this.CORNER_RADIUS
      ),
      i.push("h", o ? t : -t),
      i.push("z"),
      this.svgBackground_.setAttribute("d", i.join(" "));
  }),
  (Blockly.VerticalFlyout.prototype.scrollToStart = function () {
    this.scrollbar_.set(0);
  }),
  (Blockly.VerticalFlyout.prototype.wheel_ = function (t) {
    var e = Blockly.utils.getScrollDeltaPixels(t);
    if (e.y) {
      var o = this.getMetrics_();
      (e = o.viewTop - o.contentTop + e.y),
        (e = Math.min(e, o.contentHeight - o.viewHeight)),
        (e = Math.max(e, 0)),
        this.scrollbar_.set(e),
        Blockly.WidgetDiv.hide();
    }
    t.preventDefault(), t.stopPropagation();
  }),
  (Blockly.VerticalFlyout.prototype.layout_ = function (t, e) {
    this.workspace_.scale = this.targetWorkspace_.scale;
    for (
      var o, i = this.MARGIN, n = this.RTL ? i : i + this.tabWidth_, l = 0;
      (o = t[l]);
      l++
    )
      if ("block" == o.type) {
        for (
          var r, s = (o = o.block).getDescendants(!1), a = 0;
          (r = s[a]);
          a++
        )
          r.isInFlyout = !0;
        o.render(),
          (s = o.getSvgRoot()),
          (a = o.getHeightWidth()),
          (r = o.outputConnection ? n - this.tabWidth_ : n),
          o.moveBy(r, i),
          (r = this.createRect_(o, this.RTL ? r - a.width : r, i, a, l)),
          this.addBlockListeners_(s, o, r),
          (i += a.height + e[l]);
      } else
        "button" == o.type &&
          (this.initFlyoutButton_(o.button, n, i),
          (i += o.button.height + e[l]));
  }),
  (Blockly.VerticalFlyout.prototype.isDragTowardWorkspace = function (t) {
    t = (Math.atan2(t.y, t.x) / Math.PI) * 180;
    var e = this.dragAngleRange_;
    return (t < e && t > -e) || t < -180 + e || t > 180 - e;
  }),
  (Blockly.VerticalFlyout.prototype.getClientRect = function () {
    if (!this.svgGroup_) return null;
    var t = this.svgGroup_.getBoundingClientRect(),
      e = t.left;
    return this.toolboxPosition_ == Blockly.TOOLBOX_AT_LEFT
      ? new Blockly.utils.Rect(-1e9, 1e9, -1e9, e + t.width)
      : new Blockly.utils.Rect(-1e9, 1e9, e, 1e9);
  }),
  (Blockly.VerticalFlyout.prototype.reflowInternal_ = function () {
    this.workspace_.scale = this.targetWorkspace_.scale;
    for (
      var t, e = 0, o = this.workspace_.getTopBlocks(!1), i = 0;
      (t = o[i]);
      i++
    ) {
      var n = t.getHeightWidth().width;
      t.outputConnection && (n -= this.tabWidth_), (e = Math.max(e, n));
    }
    for (i = 0; (t = this.buttons_[i]); i++) e = Math.max(e, t.width);
    if (
      ((e += 1.5 * this.MARGIN + this.tabWidth_),
      (e *= this.workspace_.scale),
      (e += Blockly.Scrollbar.scrollbarThickness),
      (i = this.targetWorkspace_.getMetrics()) &&
        (e = Math.min(e, i.viewWidth)),
      this.width_ != e)
    ) {
      for (i = 0; (t = o[i]); i++) {
        if (this.RTL) {
          n = t.getRelativeToSurfaceXY().x;
          var l = e / this.workspace_.scale - this.MARGIN;
          t.outputConnection || (l -= this.tabWidth_), t.moveBy(l - n, 0);
        }
        t.flyoutRect_ && this.moveRectToBlock_(t.flyoutRect_, t);
      }
      if (this.RTL)
        for (i = 0; (t = this.buttons_[i]); i++)
          (o = t.getPosition().y),
            t.moveTo(
              e / this.workspace_.scale -
                t.width -
                this.MARGIN -
                this.tabWidth_,
              o
            );
      (this.width_ = e), this.position();
    }
  }),
  (Blockly.FlyoutButton = function (t, e, o, i) {
    (this.workspace_ = t),
      (this.targetWorkspace_ = e),
      (this.text_ = o.getAttribute("text")),
      (this.position_ = new Blockly.utils.Coordinate(0, 0)),
      (this.isLabel_ = i),
      (this.helpButtonIcon_ = o.getAttribute("web-help-button") || null),
      (this.callbackKey_ =
        o.getAttribute("callbackKey") || o.getAttribute("callbackkey")),
      (this.cssClass_ = o.getAttribute("web-class") || null),
      (this.icon_ = o.getAttribute("web-icon") || null),
      (this.iconClass_ = o.getAttribute("web-icon-class") || null),
      (this.iconColor_ = o.getAttribute("web-icon-color") || null),
      (this.line_ = o.getAttribute("web-line") || null),
      (this.lineWidth_ = o.getAttribute("web-line-width") || null),
      (this.onMouseUpWrapper_ = null);
  }),
  (Blockly.FlyoutButton.MARGIN = 40),
  (Blockly.FlyoutButton.prototype.width = 0),
  (Blockly.FlyoutButton.prototype.height = 40),
  (Blockly.FlyoutButton.HELP_IMAGE_URI =
    "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAyNiAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTMiIGN5PSIxMyIgcj0iMTMiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNy45NTIgOS4xODQwMkMxNy45NTIgMTAuMjU2IDE3LjgxNiAxMS4wNzIgMTcuNTQ0IDExLjYzMkMxNy4yODggMTIuMTkyIDE2Ljc1MiAxMi43OTIgMTUuOTM2IDEzLjQzMkMxNS4xMiAxNC4wNzIgMTQuNTc2IDE0LjU4NCAxNC4zMDQgMTQuOTY4QzE0LjA0OCAxNS4zMzYgMTMuOTIgMTUuNzM2IDEzLjkyIDE2LjE2OFYxNi45NkgxMS44MDhDMTEuNDI0IDE2LjQ2NCAxMS4yMzIgMTUuODQgMTEuMjMyIDE1LjA4OEMxMS4yMzIgMTQuNjg4IDExLjM4NCAxNC4yODggMTEuNjg4IDEzLjg4OEMxMS45OTIgMTMuNDg4IDEyLjUzNiAxMi45NjggMTMuMzIgMTIuMzI4QzE0LjEwNCAxMS42NzIgMTQuNjI0IDExLjE2OCAxNC44OCAxMC44MTZDMTUuMTM2IDEwLjQ0OCAxNS4yNjQgOS45NjgwMiAxNS4yNjQgOS4zNzYwMkMxNS4yNjQgOC4yMDgwMiAxNC40MTYgNy42MjQwMiAxMi43MiA3LjYyNDAyQzExLjc2IDcuNjI0MDIgMTAuNzUyIDcuNzM2MDIgOS42OTYgNy45NjAwMkw5LjE0NCA4LjA4MDAyTDkgNi4wODgwMkMxMC40ODggNS41NjAwMiAxMS44NCA1LjI5NjAyIDEzLjA1NiA1LjI5NjAyQzE0LjczNiA1LjI5NjAyIDE1Ljk2OCA1LjYwODAyIDE2Ljc1MiA2LjIzMjAyQzE3LjU1MiA2Ljg0MDAyIDE3Ljk1MiA3LjgyNDAyIDE3Ljk1MiA5LjE4NDAyWk0xMS40IDIyVjE4LjY0SDE0LjE4NFYyMkgxMS40WiIgZmlsbD0iIzU5NUU3NCIvPgo8L3N2Zz4K"),
  (Blockly.FlyoutButton.prototype.createDom = function () {
    var t = this.isLabel_ ? "blocklyFlyoutLabel" : "blocklyFlyoutButton";
    if (
      (this.cssClass_ && (t += " " + this.cssClass_),
      (this.svgGroup_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: t },
        this.workspace_.getCanvas()
      )),
      !this.isLabel_)
    )
      var e = Blockly.utils.dom.createSvgElement(
        "rect",
        { class: "blocklyFlyoutButtonShadow", rx: 4, ry: 4, x: 1, y: 1 },
        this.svgGroup_
      );
    t = Blockly.utils.dom.createSvgElement(
      "rect",
      {
        class: this.isLabel_
          ? "blocklyFlyoutLabelBackground"
          : "blocklyFlyoutButtonBackground",
        rx: 4,
        ry: 4,
      },
      this.svgGroup_
    );
    var o = Blockly.utils.dom.createSvgElement(
        "text",
        {
          class: this.isLabel_ ? "blocklyFlyoutLabelText" : "blocklyText",
          x: 0,
          y: 0,
          "text-anchor": "middle",
        },
        this.svgGroup_
      ),
      i = Blockly.utils.replaceMessageReferences(this.text_);
    return (
      this.workspace_.RTL && (i += "‏"),
      (o.textContent = i),
      this.isLabel_ &&
        ((this.svgText_ = o),
        this.workspace_
          .getThemeManager()
          .subscribe(this.svgText_, "flyoutForegroundColour", "fill")),
      (this.width = Blockly.utils.dom.getTextWidth(o)),
      (this.icon_ || this.iconClass_) &&
        ((i = Blockly.utils.dom.createSvgElement(
          "text",
          {
            class: this.iconClass_
              ? "blocklyFlyoutLabelIcon " + this.iconClass_
              : "blocklyFlyoutLabelIcon",
            x: 0,
            y: 0,
            "text-anchor": "start",
          },
          this.svgGroup_
        )),
        this.icon_ && (i.textContent = this.icon_),
        this.iconColor_ && i.setAttribute("style", "fill: " + this.iconColor_),
        i.setAttribute("dominant-baseline", "central"),
        i.setAttribute(
          "dy",
          Blockly.utils.userAgent.EDGE_OR_IE
            ? Blockly.Field.IE_TEXT_OFFSET
            : "0"
        ),
        i.setAttribute(
          "x",
          this.targetWorkspace_.RTL
            ? this.width + Blockly.FlyoutButton.MARGIN
            : 0
        ),
        i.setAttribute("y", this.height / 2),
        (this.width +=
          Blockly.utils.dom.getTextWidth(i) + Blockly.FlyoutButton.MARGIN)),
      this.helpButtonIcon_ &&
        ((this.helpButtonImage_ = Blockly.utils.dom.createSvgElement(
          "image",
          {
            class: "blocklyFlyoutButton",
            height: "25px",
            width: "25px",
            x:
              (this.workspace_.RTL
                ? -this.width + Blockly.FlyoutButton.MARGIN + 15
                : this.width + 15) + "px",
            y: "10px",
          },
          this.svgGroup_
        )),
        this.helpButtonImage_.setAttributeNS(
          "http://www.w3.org/1999/xlink",
          "xlink:href",
          Blockly.FlyoutButton.HELP_IMAGE_URI
        )),
      this.line_ &&
        ((i = Blockly.utils.dom.createSvgElement(
          "line",
          {
            class: "blocklyFlyoutLine",
            "stroke-dasharray": this.line_,
            "text-anchor": "middle",
          },
          this.svgGroup_
        )).setAttribute("x1", 0),
        i.setAttribute(
          "x2",
          null != this.lineWidth_ ? this.lineWidth_ : this.width
        ),
        i.setAttribute("y1", this.height),
        i.setAttribute("y2", this.height)),
      this.isLabel_ ||
        ((this.width += 2 * Blockly.FlyoutButton.MARGIN),
        e.setAttribute("width", this.width),
        e.setAttribute("height", this.height)),
      t.setAttribute("width", this.width),
      t.setAttribute("height", this.height),
      o.setAttribute("text-anchor", "middle"),
      o.setAttribute("dominant-baseline", "central"),
      o.setAttribute(
        "dy",
        Blockly.utils.userAgent.EDGE_OR_IE ? Blockly.Field.IE_TEXT_OFFSET : "0"
      ),
      o.setAttribute("x", this.width / 2),
      o.setAttribute("y", this.height / 2),
      (this.onMouseUpWrapper_ = Blockly.bindEventWithChecks_(
        this.helpButtonIcon_ && this.callback_
          ? this.helpButtonImage_
          : this.svgGroup_,
        "mouseup",
        this,
        this.onMouseUp_
      )),
      this.svgGroup_
    );
  }),
  (Blockly.FlyoutButton.prototype.show = function () {
    this.updateTransform_(), this.svgGroup_.setAttribute("display", "block");
  }),
  (Blockly.FlyoutButton.prototype.updateTransform_ = function () {
    this.svgGroup_.setAttribute(
      "transform",
      "translate(" + this.position_.x + "," + this.position_.y + ")"
    );
  }),
  (Blockly.FlyoutButton.prototype.moveTo = function (t, e) {
    (this.position_.x = t), (this.position_.y = e), this.updateTransform_();
  }),
  (Blockly.FlyoutButton.prototype.getPosition = function () {
    return this.position_;
  }),
  (Blockly.FlyoutButton.prototype.getTargetWorkspace = function () {
    return this.targetWorkspace_;
  }),
  (Blockly.FlyoutButton.prototype.getText = function () {
    return this.text_;
  }),
  (Blockly.FlyoutButton.prototype.getPosition = function () {
    return this.position_;
  }),
  (Blockly.FlyoutButton.prototype.dispose = function () {
    this.onMouseUpWrapper_ && Blockly.unbindEvent_(this.onMouseUpWrapper_),
      this.svgGroup_ && Blockly.utils.dom.removeNode(this.svgGroup_),
      this.svgText_ &&
        this.workspace_.getThemeManager().unsubscribe(this.svgText_);
  }),
  (Blockly.FlyoutButton.prototype.onMouseUp_ = function (t) {
    (t = this.targetWorkspace_.getGesture(t)) && t.cancel(),
      this.isLabel_ && this.callbackKey_
        ? console.warn(
            "Labels should not have callbacks. Label text: " + this.text_
          )
        : this.isLabel_ ||
          (this.callbackKey_ &&
            this.targetWorkspace_.getButtonCallback(this.callbackKey_))
        ? this.isLabel_ ||
          this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this)
        : console.warn(
            "Buttons should have callbacks. Button text: " + this.text_
          );
  }),
  Blockly.Css.register([
    ".blocklyFlyoutButton {",
    "fill: #F4F4F4;",
    "}",
    ".blocklyFlyoutButtonBackground {",
    "stroke: #fff;",
    "}",
    ".blocklyFlyoutButton .blocklyText {",
    "fill: $colour_text;",
    "}",
    ".blocklyFlyoutButtonShadow {",
    "fill: none;",
    "}",
    ".blocklyFlyoutButton:hover {",
    "fill: #EAEAEA;",
    "cursor: pointer;",
    "}",
    ".blocklyFlyoutLabel {",
    "cursor: default;",
    "}",
    ".blocklyFlyoutLabelBackground {",
    "opacity: 0;",
    "}",
    ".blocklyFlyoutLabelText {",
    'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',
    "font-size: 14pt;",
    "fill: $colour_text;",
    "font-weight: bold;",
    "}",
  ]),
  (Blockly.Generator = function (t) {
    (this.name_ = t),
      (this.FUNCTION_NAME_PLACEHOLDER_REGEXP_ = new RegExp(
        this.FUNCTION_NAME_PLACEHOLDER_,
        "g"
      ));
  }),
  (Blockly.Generator.NAME_TYPE = "generated_function"),
  (Blockly.Generator.prototype.INFINITE_LOOP_TRAP = null),
  (Blockly.Generator.prototype.STATEMENT_PREFIX = null),
  (Blockly.Generator.prototype.STATEMENT_SUFFIX = null),
  (Blockly.Generator.prototype.INDENT = "  "),
  (Blockly.Generator.prototype.COMMENT_WRAP = 60),
  (Blockly.Generator.prototype.ORDER_OVERRIDES = []),
  (Blockly.Generator.prototype.workspaceToCode = function (t) {
    t ||
      (console.warn(
        "No workspace specified in workspaceToCode call.  Guessing."
      ),
      (t = Blockly.getMainWorkspace()));
    var e = [];
    this.init(t), (t = t.getTopBlocks(!0));
    for (var o, i = 0; (o = t[i]); i++) {
      var n = this.blockToCode(o);
      Array.isArray(n) && (n = n[0]),
        n &&
          (o.outputConnection &&
            ((n = this.scrubNakedValue(n)),
            this.STATEMENT_PREFIX &&
              !o.suppressPrefixSuffix &&
              (n = this.injectId(this.STATEMENT_PREFIX, o) + n),
            this.STATEMENT_SUFFIX &&
              !o.suppressPrefixSuffix &&
              (n += this.injectId(this.STATEMENT_SUFFIX, o))),
          e.push(n));
    }
    return (
      (e = e.join("\n")),
      (e = (e = (e = this.finish(e)).replace(/^\s+\n/, "")).replace(
        /\n\s+$/,
        "\n"
      )).replace(/[ \t]+\n/g, "\n")
    );
  }),
  (Blockly.Generator.prototype.prefixLines = function (t, e) {
    return e + t.replace(/(?!\n$)\n/g, "\n" + e);
  }),
  (Blockly.Generator.prototype.allNestedComments = function (t) {
    var e = [];
    t = t.getDescendants(!0);
    for (var o = 0; o < t.length; o++) {
      var i = t[o].getCommentText();
      i && e.push(i);
    }
    return e.length && e.push(""), e.join("\n");
  }),
  (Blockly.Generator.prototype.blockToCode = function (t, e) {
    if (!t) return "";
    if (!t.isEnabled()) return e ? "" : this.blockToCode(t.getNextBlock());
    var o = this[t.type];
    if ("function" != typeof o)
      throw Error(
        'Language "' +
          this.name_ +
          '" does not know how to generate  code for block type "' +
          t.type +
          '".'
      );
    if (((o = o.call(t, t)), Array.isArray(o))) {
      if (!t.outputConnection)
        throw TypeError("Expecting string from statement block: " + t.type);
      return [this.scrub_(t, o[0], e), o[1]];
    }
    if ("string" == typeof o)
      return (
        this.STATEMENT_PREFIX &&
          !t.suppressPrefixSuffix &&
          (o = this.injectId(this.STATEMENT_PREFIX, t) + o),
        this.STATEMENT_SUFFIX &&
          !t.suppressPrefixSuffix &&
          (o += this.injectId(this.STATEMENT_SUFFIX, t)),
        this.scrub_(t, o, e)
      );
    if (null === o) return "";
    throw SyntaxError("Invalid code generated: " + o);
  }),
  (Blockly.Generator.prototype.valueToCode = function (t, e, o) {
    if (isNaN(o))
      throw TypeError("Expecting valid order from block: " + t.type);
    var i = t.getInputTargetBlock(e);
    if (!i) return "";
    if ("" === (e = this.blockToCode(i))) return "";
    if (!Array.isArray(e))
      throw TypeError("Expecting tuple from value block: " + i.type);
    if (((t = e[0]), (e = e[1]), isNaN(e)))
      throw TypeError("Expecting valid order from value block: " + i.type);
    if (!t) return "";
    i = !1;
    var n = Math.floor(o),
      l = Math.floor(e);
    if (n <= l && (n != l || (0 != n && 99 != n)))
      for (i = !0, n = 0; n < this.ORDER_OVERRIDES.length; n++)
        if (
          this.ORDER_OVERRIDES[n][0] == o &&
          this.ORDER_OVERRIDES[n][1] == e
        ) {
          i = !1;
          break;
        }
    return i && (t = "(" + t + ")"), t;
  }),
  (Blockly.Generator.prototype.statementToCode = function (t, e) {
    if (
      ((t = t.getInputTargetBlock(e)),
      "string" != typeof (e = this.blockToCode(t)))
    )
      throw TypeError("Expecting code from statement block: " + (t && t.type));
    return e && (e = this.prefixLines(e, this.INDENT)), e;
  }),
  (Blockly.Generator.prototype.addLoopTrap = function (t, e) {
    return (
      this.INFINITE_LOOP_TRAP &&
        (t =
          this.prefixLines(
            this.injectId(this.INFINITE_LOOP_TRAP, e),
            this.INDENT
          ) + t),
      this.STATEMENT_SUFFIX &&
        !e.suppressPrefixSuffix &&
        (t =
          this.prefixLines(
            this.injectId(this.STATEMENT_SUFFIX, e),
            this.INDENT
          ) + t),
      this.STATEMENT_PREFIX &&
        !e.suppressPrefixSuffix &&
        (t += this.prefixLines(
          this.injectId(this.STATEMENT_PREFIX, e),
          this.INDENT
        )),
      t
    );
  }),
  (Blockly.Generator.prototype.injectId = function (t, e) {
    return (e = e.id.replace(/\$/g, "$$$$")), t.replace(/%1/g, "'" + e + "'");
  }),
  (Blockly.Generator.prototype.RESERVED_WORDS_ = ""),
  (Blockly.Generator.prototype.addReservedWords = function (t) {
    this.RESERVED_WORDS_ += t + ",";
  }),
  (Blockly.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_ =
    "{leCUI8hutHZI4480Dc}"),
  (Blockly.Generator.prototype.provideFunction_ = function (t, e) {
    if (!this.definitions_[t]) {
      var o,
        i = this.variableDB_.getDistinctName(
          t,
          Blockly.PROCEDURE_CATEGORY_NAME
        );
      for (
        this.functionNames_[t] = i,
          e = e.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_, i);
        o != e;

      )
        (o = e), (e = e.replace(/^(( {2})*) {2}/gm, "$1\0"));
      (e = e.replace(/\0/g, this.INDENT)), (this.definitions_[t] = e);
    }
    return this.functionNames_[t];
  }),
  (Blockly.Generator.prototype.init = function (t) {}),
  (Blockly.Generator.prototype.scrub_ = function (t, e, o) {
    return e;
  }),
  (Blockly.Generator.prototype.finish = function (t) {
    return t;
  }),
  (Blockly.Generator.prototype.scrubNakedValue = function (t) {
    return t;
  }),
  (Blockly.tree = {}),
  (Blockly.tree.BaseNode = function (t, e) {
    Blockly.Component.call(this),
      (this.config_ = e),
      (this.content_ = t),
      (this.expanded_ = this.selected_ = !1),
      (this.toolTip_ = null),
      (this.isUserCollapsible_ = !0),
      (this.depth_ = -1);
  }),
  Blockly.utils.object.inherits(Blockly.tree.BaseNode, Blockly.Component),
  (Blockly.tree.BaseNode.allNodes = {}),
  (Blockly.tree.BaseNode.prototype.disposeInternal = function () {
    Blockly.tree.BaseNode.superClass_.disposeInternal.call(this),
      this.tree && (this.tree = null),
      this.setElementInternal(null);
  }),
  (Blockly.tree.BaseNode.prototype.initAccessibility = function () {
    var t = this.getElement();
    if (t) {
      var e = this.getLabelElement();
      if (
        (e && !e.id && (e.id = this.getId() + ".label"),
        Blockly.utils.aria.setRole(t, Blockly.utils.aria.Role.TREEITEM),
        Blockly.utils.aria.setState(t, Blockly.utils.aria.State.SELECTED, !1),
        Blockly.utils.aria.setState(
          t,
          Blockly.utils.aria.State.LEVEL,
          this.getDepth()
        ),
        e &&
          Blockly.utils.aria.setState(
            t,
            Blockly.utils.aria.State.LABELLEDBY,
            e.id
          ),
        (e = this.getIconElement()) &&
          Blockly.utils.aria.setRole(e, Blockly.utils.aria.Role.PRESENTATION),
        (e = this.getChildrenElement()) &&
          (Blockly.utils.aria.setRole(e, Blockly.utils.aria.Role.GROUP),
          e.hasChildNodes()))
      )
        for (
          Blockly.utils.aria.setState(t, Blockly.utils.aria.State.EXPANDED, !1),
            t = this.getChildCount(),
            e = 1;
          e <= t;
          e++
        ) {
          var o = this.getChildAt(e - 1).getElement();
          Blockly.utils.aria.setState(o, Blockly.utils.aria.State.SETSIZE, t),
            Blockly.utils.aria.setState(
              o,
              Blockly.utils.aria.State.POSINSET,
              e
            );
        }
    }
  }),
  (Blockly.tree.BaseNode.prototype.createDom = function () {
    var t = document.createElement("div");
    t.appendChild(this.toDom()), this.setElementInternal(t);
  }),
  (Blockly.tree.BaseNode.prototype.enterDocument = function () {
    Blockly.tree.BaseNode.superClass_.enterDocument.call(this),
      (Blockly.tree.BaseNode.allNodes[this.getId()] = this),
      this.initAccessibility();
  }),
  (Blockly.tree.BaseNode.prototype.exitDocument = function () {
    Blockly.tree.BaseNode.superClass_.exitDocument.call(this),
      delete Blockly.tree.BaseNode.allNodes[this.getId()];
  }),
  (Blockly.tree.BaseNode.prototype.addChildAt = function (t, e) {
    var o = this.getChildAt(e - 1),
      i = this.getChildAt(e);
    if (
      (Blockly.tree.BaseNode.superClass_.addChildAt.call(this, t, e),
      (t.previousSibling_ = o),
      (t.nextSibling_ = i),
      o ? (o.nextSibling_ = t) : (this.firstChild_ = t),
      i ? (i.previousSibling_ = t) : (this.lastChild_ = t),
      (e = this.getTree()) && t.setTreeInternal(e),
      t.setDepth_(this.getDepth() + 1),
      (e = this.getElement()) &&
        (this.updateExpandIcon(),
        Blockly.utils.aria.setState(
          e,
          Blockly.utils.aria.State.EXPANDED,
          this.getExpanded()
        ),
        this.getExpanded()))
    ) {
      (e = this.getChildrenElement()), t.getElement() || t.createDom();
      var n = t.getElement(),
        l = i && i.getElement();
      e.insertBefore(n, l),
        this.isInDocument() && t.enterDocument(),
        i ||
          (o
            ? o.updateExpandIcon()
            : (Blockly.utils.style.setElementShown(e, !0),
              this.setExpanded(this.getExpanded())));
    }
  }),
  (Blockly.tree.BaseNode.prototype.add = function (t) {
    if (t.getParent())
      throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);
    this.addChildAt(t, this.getChildCount());
  }),
  (Blockly.tree.BaseNode.prototype.getTree = function () {
    return null;
  }),
  (Blockly.tree.BaseNode.prototype.getDepth = function () {
    var t = this.depth_;
    return 0 > t && ((t = this.computeDepth_()), this.setDepth_(t)), t;
  }),
  (Blockly.tree.BaseNode.prototype.computeDepth_ = function () {
    var t = this.getParent();
    return t ? t.getDepth() + 1 : 0;
  }),
  (Blockly.tree.BaseNode.prototype.setDepth_ = function (t) {
    if (t != this.depth_) {
      this.depth_ = t;
      var e = this.getRowElement();
      if (e) {
        var o = this.getPixelIndent_() + "px";
        this.isRightToLeft()
          ? (e.style.paddingRight = o)
          : (e.style.paddingLeft = o);
      }
      this.forEachChild(function (e) {
        e.setDepth_(t + 1);
      });
    }
  }),
  (Blockly.tree.BaseNode.prototype.contains = function (t) {
    for (; t; ) {
      if (t == this) return !0;
      t = t.getParent();
    }
    return !1;
  }),
  (Blockly.tree.BaseNode.prototype.getChildren = function () {
    var t = [];
    return (
      this.forEachChild(function (e) {
        t.push(e);
      }),
      t
    );
  }),
  (Blockly.tree.BaseNode.prototype.getFirstChild = function () {
    return this.getChildAt(0);
  }),
  (Blockly.tree.BaseNode.prototype.getLastChild = function () {
    return this.getChildAt(this.getChildCount() - 1);
  }),
  (Blockly.tree.BaseNode.prototype.getPreviousSibling = function () {
    return this.previousSibling_;
  }),
  (Blockly.tree.BaseNode.prototype.getNextSibling = function () {
    return this.nextSibling_;
  }),
  (Blockly.tree.BaseNode.prototype.isLastSibling = function () {
    return !this.nextSibling_;
  }),
  (Blockly.tree.BaseNode.prototype.isSelected = function () {
    return this.selected_;
  }),
  (Blockly.tree.BaseNode.prototype.select = function () {
    var t = this.getTree();
    t && t.setSelectedItem(this);
  }),
  (Blockly.tree.BaseNode.prototype.selectFirst = function () {
    var t = this.getTree();
    t && this.firstChild_ && t.setSelectedItem(this.firstChild_);
  }),
  (Blockly.tree.BaseNode.prototype.setSelectedInternal = function (t) {
    if (this.selected_ != t) {
      (this.selected_ = t), this.updateRow();
      var e = this.getElement();
      e &&
        (Blockly.utils.aria.setState(e, Blockly.utils.aria.State.SELECTED, t),
        t &&
          ((t = this.getTree().getElement()),
          Blockly.utils.aria.setState(
            t,
            Blockly.utils.aria.State.ACTIVEDESCENDANT,
            this.getId()
          )));
    }
  }),
  (Blockly.tree.BaseNode.prototype.getExpanded = function () {
    return this.expanded_;
  }),
  (Blockly.tree.BaseNode.prototype.setExpandedInternal = function (t) {
    this.expanded_ = t;
  }),
  (Blockly.tree.BaseNode.prototype.setExpanded = function (t) {
    var e,
      o = t != this.expanded_;
    this.expanded_ = t;
    var i = this.getTree(),
      n = this.getElement();
    this.hasChildren()
      ? (!t && i && this.contains(i.getSelectedItem()) && this.select(),
        n &&
          ((e = this.getChildrenElement()) &&
            (Blockly.utils.style.setElementShown(e, t),
            Blockly.utils.aria.setState(
              n,
              Blockly.utils.aria.State.EXPANDED,
              t
            ),
            t &&
              this.isInDocument() &&
              !e.hasChildNodes() &&
              (this.forEachChild(function (t) {
                e.appendChild(t.toDom());
              }),
              this.forEachChild(function (t) {
                t.enterDocument();
              }))),
          this.updateExpandIcon()))
      : (e = this.getChildrenElement()) &&
        Blockly.utils.style.setElementShown(e, !1),
      n && this.updateIcon_(),
      o && (t ? this.doNodeExpanded() : this.doNodeCollapsed());
  }),
  (Blockly.tree.BaseNode.prototype.doNodeExpanded = function () {}),
  (Blockly.tree.BaseNode.prototype.doNodeCollapsed = function () {}),
  (Blockly.tree.BaseNode.prototype.toggle = function () {
    this.setExpanded(!this.getExpanded());
  }),
  (Blockly.tree.BaseNode.prototype.isUserCollapsible = function () {
    return this.isUserCollapsible_;
  }),
  (Blockly.tree.BaseNode.prototype.toDom = function () {
    var t = this.getExpanded() && this.hasChildren(),
      e = document.createElement("div");
    return (
      (e.style.backgroundPosition = this.getBackgroundPosition()),
      t || (e.style.display = "none"),
      t &&
        this.forEachChild(function (t) {
          e.appendChild(t.toDom());
        }),
      ((t = document.createElement("div")).id = this.getId()),
      t.appendChild(this.getRowDom()),
      t.appendChild(e),
      t
    );
  }),
  (Blockly.tree.BaseNode.prototype.getPixelIndent_ = function () {
    return Math.max(0, (this.getDepth() - 1) * this.config_.indentWidth);
  }),
  (Blockly.tree.BaseNode.prototype.getRowDom = function () {
    var t = document.createElement("div");
    return (
      (t.className = this.getRowClassName()),
      (t.style["padding-" + (this.isRightToLeft() ? "right" : "left")] =
        this.getPixelIndent_() + "px"),
      t.appendChild(this.getIconDom()),
      t.appendChild(this.getLabelDom()),
      t
    );
  }),
  (Blockly.tree.BaseNode.prototype.getRowClassName = function () {
    var t = "";
    return (
      this.isSelected() && (t = " " + (this.config_.cssSelectedRow || "")),
      this.config_.cssTreeRow + t
    );
  }),
  (Blockly.tree.BaseNode.prototype.getLabelDom = function () {
    var t = document.createElement("span");
    return (
      (t.className = this.config_.cssItemLabel || ""),
      (t.textContent = this.getText()),
      t
    );
  }),
  (Blockly.tree.BaseNode.prototype.getIconDom = function () {
    var t = document.createElement("span");
    return (
      (t.style.display = "inline-block"),
      (t.className = this.getCalculatedIconClass()),
      t
    );
  }),
  (Blockly.tree.BaseNode.prototype.getCalculatedIconClass = function () {
    throw Error("unimplemented abstract method");
  }),
  (Blockly.tree.BaseNode.prototype.getBackgroundPosition = function () {
    return (
      (this.isLastSibling()
        ? "-100"
        : (this.getDepth() - 1) * this.config_.indentWidth) + "px 0"
    );
  }),
  (Blockly.tree.BaseNode.prototype.getElement = function () {
    var t = Blockly.tree.BaseNode.superClass_.getElement.call(this);
    return (
      t ||
        ((t = document.getElementById(this.getId())),
        this.setElementInternal(t)),
      t
    );
  }),
  (Blockly.tree.BaseNode.prototype.getRowElement = function () {
    var t = this.getElement();
    return t ? t.firstChild : null;
  }),
  (Blockly.tree.BaseNode.prototype.getIconElement = function () {
    var t = this.getRowElement();
    return t ? t.firstChild : null;
  }),
  (Blockly.tree.BaseNode.prototype.getLabelElement = function () {
    var t = this.getRowElement();
    return t && t.lastChild ? t.lastChild.previousSibling : null;
  }),
  (Blockly.tree.BaseNode.prototype.getChildrenElement = function () {
    var t = this.getElement();
    return t ? t.lastChild : null;
  }),
  (Blockly.tree.BaseNode.prototype.getIconClass = function () {
    return this.iconClass_;
  }),
  (Blockly.tree.BaseNode.prototype.getExpandedIconClass = function () {
    return this.expandedIconClass_;
  }),
  (Blockly.tree.BaseNode.prototype.setText = function (t) {
    this.content_ = t;
  }),
  (Blockly.tree.BaseNode.prototype.getText = function () {
    return this.content_;
  }),
  (Blockly.tree.BaseNode.prototype.updateRow = function () {
    var t = this.getRowElement();
    t && (t.className = this.getRowClassName());
  }),
  (Blockly.tree.BaseNode.prototype.updateExpandIcon = function () {
    var t = this.getChildrenElement();
    t && (t.style.backgroundPosition = this.getBackgroundPosition());
  }),
  (Blockly.tree.BaseNode.prototype.updateIcon_ = function () {
    this.getIconElement().className = this.getCalculatedIconClass();
  }),
  (Blockly.tree.BaseNode.prototype.onMouseDown = function (t) {
    "expand" == t.target.getAttribute("type") && this.hasChildren()
      ? this.isUserCollapsible_ && this.toggle()
      : (this.select(), this.updateRow());
  }),
  (Blockly.tree.BaseNode.prototype.onClick_ = function (t) {
    t.preventDefault();
  }),
  (Blockly.tree.BaseNode.prototype.onKeyDown = function (t) {
    var e = !0;
    switch (t.keyCode) {
      case Blockly.utils.KeyCodes.RIGHT:
        if (t.altKey) break;
        e = this.selectChild();
        break;
      case Blockly.utils.KeyCodes.LEFT:
        if (t.altKey) break;
        e = this.selectParent();
        break;
      case Blockly.utils.KeyCodes.DOWN:
        e = this.selectNext();
        break;
      case Blockly.utils.KeyCodes.UP:
        e = this.selectPrevious();
        break;
      default:
        e = !1;
    }
    return e && t.preventDefault(), e;
  }),
  (Blockly.tree.BaseNode.prototype.selectNext = function () {
    var t = this.getNextShownNode();
    return t && t.select(), !0;
  }),
  (Blockly.tree.BaseNode.prototype.selectPrevious = function () {
    var t = this.getPreviousShownNode();
    return t && t.select(), !0;
  }),
  (Blockly.tree.BaseNode.prototype.selectParent = function () {
    if (this.hasChildren() && this.getExpanded() && this.isUserCollapsible_)
      this.setExpanded(!1);
    else {
      var t = this.getParent(),
        e = this.getTree();
      t && t != e && t.select();
    }
    return !0;
  }),
  (Blockly.tree.BaseNode.prototype.selectChild = function () {
    return (
      !!this.hasChildren() &&
      (this.getExpanded()
        ? this.getFirstChild().select()
        : this.setExpanded(!0),
      !0)
    );
  }),
  (Blockly.tree.BaseNode.prototype.getLastShownDescendant = function () {
    return this.getExpanded() && this.hasChildren()
      ? this.getLastChild().getLastShownDescendant()
      : this;
  }),
  (Blockly.tree.BaseNode.prototype.getNextShownNode = function () {
    if (this.hasChildren() && this.getExpanded()) return this.getFirstChild();
    for (var t, e = this; e != this.getTree(); ) {
      if (null != (t = e.getNextSibling())) return t;
      e = e.getParent();
    }
    return null;
  }),
  (Blockly.tree.BaseNode.prototype.getPreviousShownNode = function () {
    var t = this.getPreviousSibling();
    if (null != t) return t.getLastShownDescendant();
    t = this.getParent();
    var e = this.getTree();
    return t == e || this == e ? null : t;
  }),
  (Blockly.tree.BaseNode.prototype.getConfig = function () {
    return this.config_;
  }),
  (Blockly.tree.BaseNode.prototype.setTreeInternal = function (t) {
    this.tree != t &&
      ((this.tree = t),
      this.forEachChild(function (e) {
        e.setTreeInternal(t);
      }));
  }),
  (Blockly.tree.TreeNode = function (t, e, o) {
    (this.toolbox_ = t), Blockly.tree.BaseNode.call(this, e, o);
  }),
  Blockly.utils.object.inherits(Blockly.tree.TreeNode, Blockly.tree.BaseNode),
  (Blockly.tree.TreeNode.prototype.getTree = function () {
    if (this.tree) return this.tree;
    var t = this.getParent();
    return t && (t = t.getTree()) ? (this.setTreeInternal(t), t) : null;
  }),
  (Blockly.tree.TreeNode.prototype.getCalculatedIconClass = function () {
    var t = this.getExpanded(),
      e = this.getExpandedIconClass();
    if (t && e) return e;
    if (((e = this.getIconClass()), !t && e)) return e;
    if (((e = this.getConfig()), this.hasChildren())) {
      if (t && e.cssExpandedFolderIcon)
        return e.cssTreeIcon + " " + e.cssExpandedFolderIcon;
      if (!t && e.cssCollapsedFolderIcon)
        return e.cssTreeIcon + " " + e.cssCollapsedFolderIcon;
    } else if (e.cssFileIcon) return e.cssTreeIcon + " " + e.cssFileIcon;
    return "";
  }),
  (Blockly.tree.TreeNode.prototype.onClick_ = function (t) {
    this.hasChildren() && this.isUserCollapsible()
      ? (this.toggle(), this.select())
      : this.isSelected()
      ? this.getTree().setSelectedItem(null)
      : this.select(),
      this.updateRow();
  }),
  (Blockly.tree.TreeNode.prototype.onMouseDown = function (t) {}),
  (Blockly.tree.TreeNode.prototype.onKeyDown = function (t) {
    if (this.tree.toolbox_.horizontalLayout_) {
      var e = {},
        o = Blockly.utils.KeyCodes.DOWN,
        i = Blockly.utils.KeyCodes.UP;
      (e[Blockly.utils.KeyCodes.RIGHT] = this.isRightToLeft() ? i : o),
        (e[Blockly.utils.KeyCodes.LEFT] = this.isRightToLeft() ? o : i),
        (e[Blockly.utils.KeyCodes.UP] = Blockly.utils.KeyCodes.LEFT),
        (e[Blockly.utils.KeyCodes.DOWN] = Blockly.utils.KeyCodes.RIGHT),
        Object.defineProperties(t, {
          keyCode: { value: e[t.keyCode] || t.keyCode },
        });
    }
    return Blockly.tree.TreeNode.superClass_.onKeyDown.call(this, t);
  }),
  (Blockly.tree.TreeNode.prototype.onSizeChanged = function (t) {
    this.onSizeChanged_ = t;
  }),
  (Blockly.tree.TreeNode.prototype.resizeToolbox_ = function () {
    this.onSizeChanged_ && this.onSizeChanged_.call(this.toolbox_);
  }),
  (Blockly.tree.TreeNode.prototype.doNodeExpanded =
    Blockly.tree.TreeNode.prototype.resizeToolbox_),
  (Blockly.tree.TreeNode.prototype.doNodeCollapsed =
    Blockly.tree.TreeNode.prototype.resizeToolbox_),
  (Blockly.tree.TreeControl = function (t, e) {
    (this.toolbox_ = t),
      (this.onKeydownWrapper_ =
        this.onClickWrapper_ =
        this.onBlurWrapper_ =
        this.onFocusWrapper_ =
          null),
      Blockly.tree.BaseNode.call(this, "", e),
      this.setExpandedInternal(!0),
      this.setSelectedInternal(!0),
      (this.selectedItem_ = this);
  }),
  Blockly.utils.object.inherits(
    Blockly.tree.TreeControl,
    Blockly.tree.BaseNode
  ),
  (Blockly.tree.TreeControl.prototype.getTree = function () {
    return this;
  }),
  (Blockly.tree.TreeControl.prototype.getToolbox = function () {
    return this.toolbox_;
  }),
  (Blockly.tree.TreeControl.prototype.getDepth = function () {
    return 0;
  }),
  (Blockly.tree.TreeControl.prototype.handleFocus_ = function (t) {
    (this.focused_ = !0),
      (t = this.getElement()),
      Blockly.utils.dom.addClass(t, "focused"),
      this.selectedItem_ && this.selectedItem_.select();
  }),
  (Blockly.tree.TreeControl.prototype.handleBlur_ = function (t) {
    (this.focused_ = !1),
      (t = this.getElement()),
      Blockly.utils.dom.removeClass(t, "focused");
  }),
  (Blockly.tree.TreeControl.prototype.hasFocus = function () {
    return this.focused_;
  }),
  (Blockly.tree.TreeControl.prototype.getExpanded = function () {
    return !0;
  }),
  (Blockly.tree.TreeControl.prototype.setExpanded = function (t) {
    this.setExpandedInternal(t);
  }),
  (Blockly.tree.TreeControl.prototype.getIconElement = function () {
    var t = this.getRowElement();
    return t ? t.firstChild : null;
  }),
  (Blockly.tree.TreeControl.prototype.updateExpandIcon = function () {}),
  (Blockly.tree.TreeControl.prototype.getRowClassName = function () {
    return (
      Blockly.tree.TreeControl.superClass_.getRowClassName.call(this) +
      " " +
      this.getConfig().cssHideRoot
    );
  }),
  (Blockly.tree.TreeControl.prototype.getCalculatedIconClass = function () {
    var t = this.getExpanded(),
      e = this.getExpandedIconClass();
    return t && e
      ? e
      : ((e = this.getIconClass()),
        !t && e
          ? e
          : ((e = this.getConfig()),
            t && e.cssExpandedRootIcon
              ? e.cssTreeIcon + " " + e.cssExpandedRootIcon
              : ""));
  }),
  (Blockly.tree.TreeControl.prototype.setSelectedItem = function (t) {
    if (
      t != this.selectedItem_ &&
      (!this.onBeforeSelected_ || this.onBeforeSelected_.call(this.toolbox_, t))
    ) {
      var e = this.getSelectedItem();
      this.selectedItem_ && this.selectedItem_.setSelectedInternal(!1),
        (this.selectedItem_ = t) && t.setSelectedInternal(!0),
        this.onAfterSelected_ &&
          this.onAfterSelected_.call(this.toolbox_, e, t);
    }
  }),
  (Blockly.tree.TreeControl.prototype.onBeforeSelected = function (t) {
    this.onBeforeSelected_ = t;
  }),
  (Blockly.tree.TreeControl.prototype.onAfterSelected = function (t) {
    this.onAfterSelected_ = t;
  }),
  (Blockly.tree.TreeControl.prototype.getSelectedItem = function () {
    return this.selectedItem_;
  }),
  (Blockly.tree.TreeControl.prototype.initAccessibility = function () {
    Blockly.tree.TreeControl.superClass_.initAccessibility.call(this);
    var t = this.getElement();
    Blockly.utils.aria.setRole(t, Blockly.utils.aria.Role.TREE),
      Blockly.utils.aria.setState(
        t,
        Blockly.utils.aria.State.LABELLEDBY,
        this.getLabelElement().id
      );
  }),
  (Blockly.tree.TreeControl.prototype.enterDocument = function () {
    Blockly.tree.TreeControl.superClass_.enterDocument.call(this);
    var t = this.getElement();
    (t.className = this.getConfig().cssRoot),
      t.setAttribute("hideFocus", "true"),
      this.attachEvents_(),
      this.initAccessibility();
  }),
  (Blockly.tree.TreeControl.prototype.exitDocument = function () {
    Blockly.tree.TreeControl.superClass_.exitDocument.call(this),
      this.detachEvents_();
  }),
  (Blockly.tree.TreeControl.prototype.attachEvents_ = function () {
    var t = this.getElement();
    (t.tabIndex = 0),
      (this.onFocusWrapper_ = Blockly.bindEvent_(
        t,
        "focus",
        this,
        this.handleFocus_
      )),
      (this.onBlurWrapper_ = Blockly.bindEvent_(
        t,
        "blur",
        this,
        this.handleBlur_
      )),
      (this.onClickWrapper_ = Blockly.bindEventWithChecks_(
        t,
        "click",
        this,
        this.handleMouseEvent_
      )),
      (this.onKeydownWrapper_ = Blockly.bindEvent_(
        t,
        "keydown",
        this,
        this.handleKeyEvent_
      ));
  }),
  (Blockly.tree.TreeControl.prototype.detachEvents_ = function () {
    this.onFocusWrapper_ &&
      (Blockly.unbindEvent_(this.onFocusWrapper_),
      (this.onFocusWrapper_ = null)),
      this.onBlurWrapper_ &&
        (Blockly.unbindEvent_(this.onBlurWrapper_),
        (this.onBlurWrapper_ = null)),
      this.onClickWrapper_ &&
        (Blockly.unbindEvent_(this.onClickWrapper_),
        (this.onClickWrapper_ = null)),
      this.onKeydownWrapper_ &&
        (Blockly.unbindEvent_(this.onKeydownWrapper_),
        (this.onKeydownWrapper_ = null));
  }),
  (Blockly.tree.TreeControl.prototype.handleMouseEvent_ = function (t) {
    var e = this.getNodeFromEvent_(t);
    if (e)
      switch (t.type) {
        case "mousedown":
          e.onMouseDown(t);
          break;
        case "click":
          e.onClick_(t);
      }
  }),
  (Blockly.tree.TreeControl.prototype.handleKeyEvent_ = function (t) {
    var e = !1;
    return (
      (e = (this.selectedItem_ && this.selectedItem_.onKeyDown(t)) || e) &&
        (Blockly.utils.style.scrollIntoContainerView(
          this.selectedItem_.getElement(),
          this.getElement().parentNode
        ),
        t.preventDefault()),
      e
    );
  }),
  (Blockly.tree.TreeControl.prototype.getNodeFromEvent_ = function (t) {
    for (var e = t.target; null != e; ) {
      if ((t = Blockly.tree.BaseNode.allNodes[e.id])) return t;
      if (e == this.getElement()) break;
      e = e.parentNode;
    }
    return null;
  }),
  (Blockly.tree.TreeControl.prototype.createNode = function (t) {
    return new Blockly.tree.TreeNode(this.toolbox_, t || "", this.getConfig());
  }),
  (Blockly.Toolbox = function (t) {
    (this.workspace_ = t),
      (this.RTL = t.options.RTL),
      (this.horizontalLayout_ = t.options.horizontalLayout),
      (this.toolboxPosition = t.options.toolboxPosition),
      (this.config_ = {
        indentWidth: 19,
        cssRoot: "blocklyTreeRoot",
        cssHideRoot: "blocklyHidden",
        cssTreeRow: "blocklyTreeRow",
        cssItemLabel: "blocklyTreeLabel",
        cssTreeIcon: "blocklyTreeIcon",
        cssExpandedFolderIcon: "blocklyTreeIconOpen",
        cssFileIcon: "blocklyTreeIconNone",
        cssSelectedRow: "blocklyTreeSelected",
      }),
      (this.treeSeparatorConfig_ = { cssTreeRow: "blocklyTreeSeparator" }),
      this.horizontalLayout_ &&
        ((this.config_.cssTreeRow += t.RTL
          ? " blocklyHorizontalTreeRtl"
          : " blocklyHorizontalTree"),
        (this.treeSeparatorConfig_.cssTreeRow =
          "blocklyTreeSeparatorHorizontal " +
          (t.RTL ? "blocklyHorizontalTreeRtl" : "blocklyHorizontalTree")),
        (this.config_.cssTreeIcon = "")),
      (this.flyout_ = null);
  }),
  (Blockly.Toolbox.prototype.width = 0),
  (Blockly.Toolbox.prototype.height = 0),
  (Blockly.Toolbox.prototype.selectedOption_ = null),
  (Blockly.Toolbox.prototype.lastCategory_ = null),
  (Blockly.Toolbox.prototype.init = function () {
    var t = this.workspace_,
      e = this.workspace_.getParentSvg();
    (this.HtmlDiv = document.createElement("div")),
      (this.HtmlDiv.className = "blocklyToolboxDiv blocklyNonSelectable"),
      this.HtmlDiv.setAttribute("dir", t.RTL ? "RTL" : "LTR"),
      e.parentNode.insertBefore(this.HtmlDiv, e);
    var o = t.getThemeManager();
    if (
      (o.subscribe(this.HtmlDiv, "toolboxBackgroundColour", "background-color"),
      o.subscribe(this.HtmlDiv, "toolboxForegroundColour", "color"),
      Blockly.bindEventWithChecks_(
        this.HtmlDiv,
        "mousedown",
        this,
        function (t) {
          Blockly.utils.isRightButton(t) || t.target == this.HtmlDiv
            ? Blockly.hideChaff(!1)
            : Blockly.hideChaff(!0),
            Blockly.Touch.clearTouchIdentifier();
        },
        !1,
        !0
      ),
      (o = {
        parentWorkspace: t,
        RTL: t.RTL,
        oneBasedIndex: t.options.oneBasedIndex,
        horizontalLayout: t.horizontalLayout,
        toolboxPosition: t.options.toolboxPosition,
        renderer: t.options.renderer,
      }),
      t.horizontalLayout)
    ) {
      if (!Blockly.HorizontalFlyout)
        throw Error("Missing require for Blockly.HorizontalFlyout");
      this.flyout_ = new Blockly.HorizontalFlyout(o);
    } else {
      if (!Blockly.VerticalFlyout)
        throw Error("Missing require for Blockly.VerticalFlyout");
      this.flyout_ = new Blockly.VerticalFlyout(o);
    }
    if (!this.flyout_)
      throw Error(
        "One of Blockly.VerticalFlyout or Blockly.Horizontal must berequired."
      );
    Blockly.utils.dom.insertAfter(this.flyout_.createDom("svg"), e),
      this.flyout_.init(t),
      (this.config_.cleardotPath = t.options.pathToMedia + "1x1.gif"),
      (this.config_.cssCollapsedFolderIcon =
        "blocklyTreeIconClosed" + (t.RTL ? "Rtl" : "Ltr")),
      this.renderTree(t.options.languageTree);
  }),
  (Blockly.Toolbox.prototype.renderTree = function (t) {
    this.tree_ && (this.tree_.dispose(), (this.lastCategory_ = null));
    var e = new Blockly.tree.TreeControl(this, this.config_);
    (this.tree_ = e),
      e.setSelectedItem(null),
      e.onBeforeSelected(this.handleBeforeTreeSelected_),
      e.onAfterSelected(this.handleAfterTreeSelected_);
    var o = null;
    if (t) {
      if (
        ((this.tree_.blocks = []),
        (this.hasColours_ = !1),
        (o = this.syncTrees_(
          t,
          this.tree_,
          this.workspace_.options.pathToMedia
        )),
        this.tree_.blocks.length)
      )
        throw Error(
          "Toolbox cannot have both blocks and categories in the root level."
        );
      this.workspace_.resizeContents();
    }
    e.render(this.HtmlDiv),
      o && e.setSelectedItem(o),
      this.addColour_(),
      this.position(),
      this.horizontalLayout_ &&
        Blockly.utils.aria.setState(
          this.tree_.getElement(),
          Blockly.utils.aria.State.ORIENTATION,
          "horizontal"
        );
  }),
  (Blockly.Toolbox.prototype.handleBeforeTreeSelected_ = function (t) {
    if (t == this.tree_) return !1;
    if (
      (this.lastCategory_ &&
        (this.lastCategory_.getRowElement().style.backgroundColor = ""),
      t)
    ) {
      var e = t.hexColour || "#57e";
      (t.getRowElement().style.backgroundColor = e), this.addColour_(t);
    }
    return !0;
  }),
  (Blockly.Toolbox.prototype.handleAfterTreeSelected_ = function (t, e) {
    e && e.blocks && e.blocks.length
      ? (this.flyout_.show(e.blocks),
        this.lastCategory_ != e && this.flyout_.scrollToStart(),
        this.workspace_.keyboardAccessibilityMode &&
          Blockly.navigation.setState(Blockly.navigation.STATE_TOOLBOX))
      : (this.flyout_.hide(),
        !this.workspace_.keyboardAccessibilityMode ||
          e instanceof Blockly.Toolbox.TreeSeparator ||
          Blockly.navigation.setState(Blockly.navigation.STATE_WS)),
      t != e &&
        t != this &&
        (((t = new Blockly.Events.Ui(
          null,
          "category",
          t && t.getText(),
          e && e.getText()
        )).workspaceId = this.workspace_.id),
        Blockly.Events.fire(t)),
      e && (this.lastCategory_ = e);
  }),
  (Blockly.Toolbox.prototype.handleNodeSizeChanged_ = function () {
    Blockly.svgResize(this.workspace_);
  }),
  (Blockly.Toolbox.prototype.onBlocklyAction = function (t) {
    var e = this.tree_.getSelectedItem();
    if (!e) return !1;
    switch (t.name) {
      case Blockly.navigation.actionNames.PREVIOUS:
        return e.selectPrevious();
      case Blockly.navigation.actionNames.OUT:
        return e.selectParent();
      case Blockly.navigation.actionNames.NEXT:
        return e.selectNext();
      case Blockly.navigation.actionNames.IN:
        return e.selectChild();
      default:
        return !1;
    }
  }),
  (Blockly.Toolbox.prototype.dispose = function () {
    this.flyout_.dispose(),
      this.tree_.dispose(),
      this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),
      Blockly.utils.dom.removeNode(this.HtmlDiv),
      (this.lastCategory_ = null);
  }),
  (Blockly.Toolbox.prototype.getWidth = function () {
    return this.width;
  }),
  (Blockly.Toolbox.prototype.getHeight = function () {
    return this.height;
  }),
  (Blockly.Toolbox.prototype.getFlyout = function () {
    return this.flyout_;
  }),
  (Blockly.Toolbox.prototype.setFlyout = function (t) {
    this.flyout_ = t;
  }),
  (Blockly.Toolbox.prototype.position = function () {
    var t = this.HtmlDiv;
    if (t) {
      var e = Blockly.svgSize(this.workspace_.getParentSvg());
      this.horizontalLayout_
        ? ((t.style.left = "0"),
          (t.style.height = "auto"),
          (t.style.width = e.width + "px"),
          (this.height = t.offsetHeight),
          this.toolboxPosition == Blockly.TOOLBOX_AT_TOP
            ? (t.style.top = "0")
            : (t.style.bottom = "0"))
        : (this.toolboxPosition == Blockly.TOOLBOX_AT_RIGHT
            ? (t.style.right = "0")
            : (t.style.left = "0"),
          (t.style.height = e.height + "px"),
          (this.width = t.offsetWidth)),
        this.flyout_.position();
    }
  }),
  (Blockly.Toolbox.prototype.syncTrees_ = function (t, e, o) {
    for (var i, n = null, l = null, r = 0; (i = t.childNodes[r]); r++)
      if (i.tagName)
        switch (i.tagName.toUpperCase()) {
          case "CATEGORY":
            l = Blockly.utils.replaceMessageReferences(i.getAttribute("name"));
            var s = this.tree_.createNode(l);
            s.onSizeChanged(this.handleNodeSizeChanged_),
              (s.blocks = []),
              e.add(s);
            var a = i.getAttribute("custom");
            a ? (s.blocks = a) : (a = this.syncTrees_(i, s, o)) && (n = a),
              (a = i.getAttribute("categorystyle"));
            var c = i.getAttribute("colour");
            c && a
              ? ((s.hexColour = ""),
                console.warn(
                  'Toolbox category "' +
                    l +
                    '" can not have both a style and a colour'
                ))
              : a
              ? this.setColourFromStyle_(a, s, l)
              : this.setColour_(c, s, l),
              "true" == i.getAttribute("expanded")
                ? (s.blocks.length && (n = s), s.setExpanded(!0))
                : s.setExpanded(!1),
              (l = i);
            break;
          case "SEP":
            if (l && "CATEGORY" == l.tagName.toUpperCase()) {
              e.add(
                new Blockly.Toolbox.TreeSeparator(this.treeSeparatorConfig_)
              );
              break;
            }
          case "BLOCK":
          case "SHADOW":
          case "LABEL":
          case "BUTTON":
            e.blocks.push(i), (l = i);
        }
    return n;
  }),
  (Blockly.Toolbox.prototype.setColour_ = function (t, e, o) {
    if (null === (t = Blockly.utils.replaceMessageReferences(t)) || "" === t)
      e.hexColour = "";
    else {
      var i = Number(t);
      isNaN(i)
        ? (i = Blockly.utils.colour.parse(t))
          ? ((e.hexColour = i), (this.hasColours_ = !0))
          : ((e.hexColour = ""),
            console.warn(
              'Toolbox category "' +
                o +
                '" has unrecognized colour attribute: ' +
                t
            ))
        : ((e.hexColour = Blockly.hueToHex(i)), (this.hasColours_ = !0));
    }
  }),
  (Blockly.Toolbox.prototype.setColourFromStyle_ = function (t, e, o) {
    e.styleName = t;
    var i = this.workspace_.getTheme();
    t &&
      i &&
      ((i = i.categoryStyles[t]) && i.colour
        ? this.setColour_(i.colour, e, o)
        : console.warn(
            'Style "' + t + '" must exist and contain a colour value'
          ));
  }),
  (Blockly.Toolbox.prototype.updateColourFromTheme_ = function (t) {
    if ((t = t || this.tree_)) {
      t = t.getChildren(!1);
      for (var e, o = 0; (e = t[o]); o++)
        e.styleName &&
          (this.setColourFromStyle_(e.styleName, e, ""), this.addColour_()),
          this.updateColourFromTheme_(e);
    }
  }),
  (Blockly.Toolbox.prototype.updateColourFromTheme = function () {
    var t = this.tree_;
    t && (this.updateColourFromTheme_(t), this.updateSelectedItemColour_(t));
  }),
  (Blockly.Toolbox.prototype.updateSelectedItemColour_ = function (t) {
    if ((t = t.getSelectedItem())) {
      var e = t.hexColour || "#57e";
      (t.getRowElement().style.backgroundColor = e), this.addColour_(t);
    }
  }),
  (Blockly.Toolbox.prototype.addColour_ = function (t) {
    t = (t || this.tree_).getChildren(!1);
    for (var e, o = 0; (e = t[o]); o++) {
      var i = e.getRowElement(),
        n = e.content_.toLowerCase();
      if (i) {
        if (this.hasColours_) {
          var l = document.createElement("div");
          (l.style.background = e.hexColour || "#ddd"),
            l.classList.add("menu-bubble"),
            l.insertAdjacentHTML(
              "afterbegin",
              '<span class="blocklyTreeIcon blocklyTreeIconCustom ' +
                n +
                '" id="blockly:1.label" role="presentation" style="display: inline-block;"></span>'
            );
        }
        1 > i.getElementsByClassName("menu-bubble").length &&
          1 === e.depth_ &&
          i.appendChild(l);
      }
      this.addColour_(e);
    }
  }),
  (Blockly.Toolbox.prototype.clearSelection = function () {
    this.tree_.setSelectedItem(null);
  }),
  (Blockly.Toolbox.prototype.addStyle = function (t) {
    Blockly.utils.dom.addClass(this.HtmlDiv, t);
  }),
  (Blockly.Toolbox.prototype.removeStyle = function (t) {
    Blockly.utils.dom.removeClass(this.HtmlDiv, t);
  }),
  (Blockly.Toolbox.prototype.getClientRect = function () {
    if (!this.HtmlDiv) return null;
    var t = this.HtmlDiv.getBoundingClientRect(),
      e = t.top,
      o = e + t.height,
      i = t.left;
    return (
      (t = i + t.width),
      this.toolboxPosition == Blockly.TOOLBOX_AT_TOP
        ? new Blockly.utils.Rect(-1e7, o, -1e7, 1e7)
        : this.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM
        ? new Blockly.utils.Rect(e, 1e7, -1e7, 1e7)
        : this.toolboxPosition == Blockly.TOOLBOX_AT_LEFT
        ? new Blockly.utils.Rect(-1e7, 1e7, -1e7, t)
        : new Blockly.utils.Rect(-1e7, 1e7, i, 1e7)
    );
  }),
  (Blockly.Toolbox.prototype.refreshSelection = function () {
    var t = this.tree_.getSelectedItem();
    t && t.blocks && this.flyout_.show(t.blocks);
  }),
  (Blockly.Toolbox.prototype.selectFirstCategory = function () {
    this.tree_.getSelectedItem() || this.tree_.selectFirst();
  }),
  (Blockly.Toolbox.TreeSeparator = function (t) {
    Blockly.tree.TreeNode.call(this, null, "", t);
  }),
  Blockly.utils.object.inherits(
    Blockly.Toolbox.TreeSeparator,
    Blockly.tree.TreeNode
  ),
  Blockly.Css.register([
    ".blocklyToolboxDelete {",
    'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',
    "}",
    ".blocklyToolboxGrab {",
    'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',
    "cursor: grabbing;",
    "cursor: -webkit-grabbing;",
    "}",
    ".blocklyToolboxDiv {",
    "background-color: $colour_toolbox;",
    "color: $colour_toolboxText;",
    "overflow-x: visible;",
    "overflow-y: auto;",
    "position: absolute;",
    "font-family: sans-serif;",
    "user-select: none;",
    "-moz-user-select: none;",
    "-ms-user-select: none;",
    "-webkit-user-select: none;",
    "z-index: 40;",
    "-webkit-tap-highlight-color: transparent;",
    "}",
    ".blocklyTreeRoot {",
    "padding: 4px 0;",
    "}",
    ".blocklyTreeRoot:focus {",
    "outline: none;",
    "}",
    ".menu-bubble {",
    "width: 32px;",
    "height: 32px;",
    "float: left;",
    "border-radius: 100%;",
    "margin-top: 11px;",
    "margin-right: 1rem;",
    "margin-left: 1rem;",
    "line-height: 32px;",
    "text-align: center;",
    "}",
    ".blocklyTreeRow {",
    "padding-left: 1rem;",
    "padding-right: 2rem;",
    "height: 54px;",
    "line-height: 54px;",
    "cursor: pointer;",
    "text-align: left;",
    "font-size: 0.65rem;",
    "border-bottom: 1px solid #E0E0E0;",
    "}",
    ".blocklyHorizontalTree {",
    "float: left;",
    "margin: 1px 5px 8px 0;",
    "}",
    ".blocklyHorizontalTreeRtl {",
    "float: right;",
    "margin: 1px 0 8px 5px;",
    "}",
    '.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',
    "margin-left: 8px;",
    "}",
    ".blocklyTreeRow:not(.blocklyTreeSelected):hover {",
    "background-color: #e4e4e4;",
    "}",
    ".blocklyTreeSeparator {",
    "border-bottom: solid #e5e5e5 1px;",
    "height: 0;",
    "margin: 5px 0;",
    "}",
    ".blocklyTreeSeparatorHorizontal {",
    "border-right: solid #e5e5e5 1px;",
    "width: 0;",
    "padding: 5px 0;",
    "margin: 0 5px;",
    "}",
    ".blocklyTreeLabel {",
    "cursor: default;",
    "font-family: sans-serif;",
    "font-size: 16px;",
    "padding: 0 3px;",
    "vertical-align: middle;",
    "}",
    ".blocklyToolboxDelete .blocklyTreeLabel {",
    'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',
    "}",
    ".blocklyTreeSelected .blocklyTreeLabel {",
    "color: #fff;",
    "}",
  ]),
  (Blockly.Trashcan = function (t) {
    if (
      ((this.workspace_ = t),
      (this.contents_ = []),
      (this.flyout = null),
      !(0 >= this.workspace_.options.maxTrashcanContents))
    ) {
      if (
        ((t = {
          scrollbars: !0,
          parentWorkspace: this.workspace_,
          RTL: this.workspace_.RTL,
          oneBasedIndex: this.workspace_.options.oneBasedIndex,
          renderer: this.workspace_.options.renderer,
        }),
        this.workspace_.horizontalLayout)
      ) {
        if (
          ((t.toolboxPosition =
            this.workspace_.toolboxPosition == Blockly.TOOLBOX_AT_TOP
              ? Blockly.TOOLBOX_AT_BOTTOM
              : Blockly.TOOLBOX_AT_TOP),
          !Blockly.HorizontalFlyout)
        )
          throw Error("Missing require for Blockly.HorizontalFlyout");
        this.flyout = new Blockly.HorizontalFlyout(t);
      } else {
        if (
          ((t.toolboxPosition =
            this.workspace_.toolboxPosition == Blockly.TOOLBOX_AT_RIGHT
              ? Blockly.TOOLBOX_AT_LEFT
              : Blockly.TOOLBOX_AT_RIGHT),
          !Blockly.VerticalFlyout)
        )
          throw Error("Missing require for Blockly.VerticalFlyout");
        this.flyout = new Blockly.VerticalFlyout(t);
      }
      this.workspace_.addChangeListener(this.onDelete_.bind(this));
    }
  }),
  (Blockly.Trashcan.prototype.WIDTH_ = 47),
  (Blockly.Trashcan.prototype.BODY_HEIGHT_ = 44),
  (Blockly.Trashcan.prototype.LID_HEIGHT_ = 16),
  (Blockly.Trashcan.prototype.MARGIN_BOTTOM_ = 20),
  (Blockly.Trashcan.prototype.MARGIN_SIDE_ = 20),
  (Blockly.Trashcan.prototype.MARGIN_HOTSPOT_ = 10),
  (Blockly.Trashcan.prototype.SPRITE_LEFT_ = 0),
  (Blockly.Trashcan.prototype.SPRITE_TOP_ = 32),
  (Blockly.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE = 0.1),
  (Blockly.Trashcan.prototype.isOpen = !1),
  (Blockly.Trashcan.prototype.minOpenness_ = 0),
  (Blockly.Trashcan.prototype.svgGroup_ = null),
  (Blockly.Trashcan.prototype.svgLid_ = null),
  (Blockly.Trashcan.prototype.lidTask_ = 0),
  (Blockly.Trashcan.prototype.lidOpen_ = 0),
  (Blockly.Trashcan.prototype.left_ = 0),
  (Blockly.Trashcan.prototype.top_ = 0),
  (Blockly.Trashcan.prototype.createDom = function () {
    this.svgGroup_ = Blockly.utils.dom.createSvgElement(
      "g",
      { class: "blocklyTrash" },
      null
    );
    var t = String(Math.random()).substring(2),
      e = Blockly.utils.dom.createSvgElement(
        "clipPath",
        { id: "blocklyTrashBodyClipPath" + t },
        this.svgGroup_
      );
    Blockly.utils.dom.createSvgElement(
      "rect",
      { width: this.WIDTH_, height: this.BODY_HEIGHT_, y: this.LID_HEIGHT_ },
      e
    );
    var o = Blockly.utils.dom.createSvgElement(
      "image",
      {
        width: Blockly.SPRITE.width,
        x: -this.SPRITE_LEFT_,
        height: Blockly.SPRITE.height,
        y: -this.SPRITE_TOP_,
        "clip-path": "url(#blocklyTrashBodyClipPath" + t + ")",
      },
      this.svgGroup_
    );
    return (
      o.setAttributeNS(
        Blockly.utils.dom.XLINK_NS,
        "xlink:href",
        this.workspace_.options.pathToMedia + Blockly.SPRITE.url
      ),
      (e = Blockly.utils.dom.createSvgElement(
        "clipPath",
        { id: "blocklyTrashLidClipPath" + t },
        this.svgGroup_
      )),
      Blockly.utils.dom.createSvgElement(
        "rect",
        { width: this.WIDTH_, height: this.LID_HEIGHT_ },
        e
      ),
      (this.svgLid_ = Blockly.utils.dom.createSvgElement(
        "image",
        {
          width: Blockly.SPRITE.width,
          x: -this.SPRITE_LEFT_,
          height: Blockly.SPRITE.height,
          y: -this.SPRITE_TOP_,
          "clip-path": "url(#blocklyTrashLidClipPath" + t + ")",
        },
        this.svgGroup_
      )),
      this.svgLid_.setAttributeNS(
        Blockly.utils.dom.XLINK_NS,
        "xlink:href",
        this.workspace_.options.pathToMedia + Blockly.SPRITE.url
      ),
      Blockly.bindEventWithChecks_(this.svgGroup_, "mouseup", this, this.click),
      Blockly.bindEvent_(o, "mouseover", this, this.mouseOver_),
      Blockly.bindEvent_(o, "mouseout", this, this.mouseOut_),
      this.animateLid_(),
      this.svgGroup_
    );
  }),
  (Blockly.Trashcan.prototype.init = function (t) {
    return (
      0 < this.workspace_.options.maxTrashcanContents &&
        (Blockly.utils.dom.insertAfter(
          this.flyout.createDom("svg"),
          this.workspace_.getParentSvg()
        ),
        this.flyout.init(this.workspace_)),
      (this.verticalSpacing_ = this.MARGIN_BOTTOM_ + t),
      this.setOpen(!1),
      this.verticalSpacing_ + this.BODY_HEIGHT_ + this.LID_HEIGHT_
    );
  }),
  (Blockly.Trashcan.prototype.dispose = function () {
    this.svgGroup_ &&
      (Blockly.utils.dom.removeNode(this.svgGroup_), (this.svgGroup_ = null)),
      (this.workspace_ = this.svgLid_ = null),
      clearTimeout(this.lidTask_);
  }),
  (Blockly.Trashcan.prototype.position = function () {
    if (this.verticalSpacing_) {
      var t = this.workspace_.getMetrics();
      t &&
        ((this.left_ =
          t.toolboxPosition == Blockly.TOOLBOX_AT_LEFT ||
          (this.workspace_.horizontalLayout && !this.workspace_.RTL)
            ? t.viewWidth +
              t.absoluteLeft -
              this.WIDTH_ -
              this.MARGIN_SIDE_ -
              Blockly.Scrollbar.scrollbarThickness
            : this.MARGIN_SIDE_ + Blockly.Scrollbar.scrollbarThickness),
        (this.top_ =
          t.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM
            ? this.verticalSpacing_
            : t.viewHeight +
              t.absoluteTop -
              (this.BODY_HEIGHT_ + this.LID_HEIGHT_) -
              this.verticalSpacing_),
        this.svgGroup_.setAttribute(
          "transform",
          "translate(" + this.left_ + "," + this.top_ + ")"
        ));
    }
  }),
  (Blockly.Trashcan.prototype.getClientRect = function () {
    if (!this.svgGroup_) return null;
    var t = this.svgGroup_.getBoundingClientRect(),
      e = t.top + this.SPRITE_TOP_ - this.MARGIN_HOTSPOT_;
    return (
      (t = t.left + this.SPRITE_LEFT_ - this.MARGIN_HOTSPOT_),
      new Blockly.utils.Rect(
        e,
        e + this.LID_HEIGHT_ + this.BODY_HEIGHT_ + 2 * this.MARGIN_HOTSPOT_,
        t,
        t + this.WIDTH_ + 2 * this.MARGIN_HOTSPOT_
      )
    );
  }),
  (Blockly.Trashcan.prototype.setOpen = function (t) {
    this.isOpen != t &&
      (clearTimeout(this.lidTask_), (this.isOpen = t), this.animateLid_());
  }),
  (Blockly.Trashcan.prototype.animateLid_ = function () {
    (this.lidOpen_ += this.isOpen ? 0.2 : -0.2),
      (this.lidOpen_ = Math.min(Math.max(this.lidOpen_, this.minOpenness_), 1)),
      this.setLidAngle_(45 * this.lidOpen_),
      (this.svgGroup_.style.opacity = 0.4 + 0.4 * this.lidOpen_),
      this.lidOpen_ > this.minOpenness_ &&
        1 > this.lidOpen_ &&
        (this.lidTask_ = setTimeout(this.animateLid_.bind(this), 20));
  }),
  (Blockly.Trashcan.prototype.setLidAngle_ = function (t) {
    var e =
      this.workspace_.toolboxPosition == Blockly.TOOLBOX_AT_RIGHT ||
      (this.workspace_.horizontalLayout && this.workspace_.RTL);
    this.svgLid_.setAttribute(
      "transform",
      "rotate(" +
        (e ? -t : t) +
        "," +
        (e ? 4 : this.WIDTH_ - 4) +
        "," +
        (this.LID_HEIGHT_ - 2) +
        ")"
    );
  }),
  (Blockly.Trashcan.prototype.close = function () {
    this.setOpen(!1);
  }),
  (Blockly.Trashcan.prototype.click = function () {
    if (this.contents_.length) {
      for (var t, e = [], o = 0; (t = this.contents_[o]); o++)
        e[o] = Blockly.Xml.textToDom(t);
      this.flyout.show(e);
    }
  }),
  (Blockly.Trashcan.prototype.mouseOver_ = function () {
    this.contents_.length && this.setOpen(!0);
  }),
  (Blockly.Trashcan.prototype.mouseOut_ = function () {
    this.setOpen(!1);
  }),
  (Blockly.Trashcan.prototype.onDelete_ = function (t) {
    if (
      !(0 >= this.workspace_.options.maxTrashcanContents) &&
      t.type == Blockly.Events.BLOCK_DELETE &&
      "shadow" != t.oldXml.tagName.toLowerCase() &&
      ((t = this.cleanBlockXML_(t.oldXml)), -1 == this.contents_.indexOf(t))
    ) {
      for (
        this.contents_.unshift(t);
        this.contents_.length > this.workspace_.options.maxTrashcanContents;

      )
        this.contents_.pop();
      (this.minOpenness_ = this.HAS_BLOCKS_LID_ANGLE),
        this.setLidAngle_(45 * this.minOpenness_);
    }
  }),
  (Blockly.Trashcan.prototype.cleanBlockXML_ = function (t) {
    for (var e = (t = t.cloneNode(!0)); e; ) {
      e.removeAttribute &&
        (e.removeAttribute("x"),
        e.removeAttribute("y"),
        e.removeAttribute("id"),
        e.removeAttribute("disabled"),
        "comment" == e.nodeName &&
          (e.removeAttribute("h"),
          e.removeAttribute("w"),
          e.removeAttribute("pinned")));
      var o = e.firstChild || e.nextSibling;
      if (!o)
        for (o = e.parentNode; o; ) {
          if (o.nextSibling) {
            o = o.nextSibling;
            break;
          }
          o = o.parentNode;
        }
      e = o;
    }
    return Blockly.Xml.domToText(t);
  }),
  (Blockly.VariablesDynamic = {}),
  (Blockly.VariablesDynamic.onCreateVariableButtonClick_String = function (t) {
    Blockly.Variables.createVariableButtonHandler(
      t.getTargetWorkspace(),
      void 0,
      "String"
    );
  }),
  (Blockly.VariablesDynamic.onCreateVariableButtonClick_Number = function (t) {
    Blockly.Variables.createVariableButtonHandler(
      t.getTargetWorkspace(),
      void 0,
      "Number"
    );
  }),
  (Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour = function (t) {
    Blockly.Variables.createVariableButtonHandler(
      t.getTargetWorkspace(),
      void 0,
      "Colour"
    );
  }),
  (Blockly.VariablesDynamic.flyoutCategory = function (t) {
    var e = [],
      o = document.createElement("button");
    return (
      o.setAttribute("text", Blockly.Msg.NEW_STRING_VARIABLE),
      o.setAttribute("callbackKey", "CREATE_VARIABLE_STRING"),
      e.push(o),
      (o = document.createElement("button")).setAttribute(
        "text",
        Blockly.Msg.NEW_NUMBER_VARIABLE
      ),
      o.setAttribute("callbackKey", "CREATE_VARIABLE_NUMBER"),
      e.push(o),
      (o = document.createElement("button")).setAttribute(
        "text",
        Blockly.Msg.NEW_COLOUR_VARIABLE
      ),
      o.setAttribute("callbackKey", "CREATE_VARIABLE_COLOUR"),
      e.push(o),
      t.registerButtonCallback(
        "CREATE_VARIABLE_STRING",
        Blockly.VariablesDynamic.onCreateVariableButtonClick_String
      ),
      t.registerButtonCallback(
        "CREATE_VARIABLE_NUMBER",
        Blockly.VariablesDynamic.onCreateVariableButtonClick_Number
      ),
      t.registerButtonCallback(
        "CREATE_VARIABLE_COLOUR",
        Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour
      ),
      (t = Blockly.VariablesDynamic.flyoutCategoryBlocks(t)),
      e.concat(t)
    );
  }),
  (Blockly.VariablesDynamic.flyoutCategoryBlocks = function (t) {
    var e = [];
    if (0 < (t = t.getAllVariables()).length) {
      if (Blockly.Blocks.variables_set_dynamic) {
        var o = t[t.length - 1],
          i = Blockly.utils.xml.createElement("block");
        i.setAttribute("type", "variables_set_dynamic"),
          i.setAttribute("gap", 24),
          i.appendChild(Blockly.Variables.generateVariableFieldDom(o)),
          e.push(i);
      }
      if (Blockly.Blocks.variables_get_dynamic) {
        t.sort(Blockly.VariableModel.compareByName), (o = 0);
        for (var n; (n = t[o]); o++)
          (i = Blockly.utils.xml.createElement("block")).setAttribute(
            "type",
            "variables_get_dynamic"
          ),
            i.setAttribute("gap", 8),
            i.appendChild(Blockly.Variables.generateVariableFieldDom(n)),
            e.push(i);
      }
    }
    return e;
  }),
  (Blockly.WorkspaceComment = function (t, e, o, i, n, l) {
    (this.id = l && !t.getCommentById(l) ? l : Blockly.utils.genUid()),
      t.addTopComment(this),
      (this.xy_ = new Blockly.utils.Coordinate(0, 0)),
      (this.height_ = o),
      (this.width_ = i),
      (this.isMinimized_ = n),
      (this.workspace = t),
      (this.RTL = t.RTL),
      (this.editable_ = this.movable_ = this.deletable_ = !0),
      (this.content_ = e.trim()),
      (this.isComment = !0),
      Blockly.WorkspaceComment.fireCreateEvent(this);
  }),
  (Blockly.WorkspaceComment.MAX_LABEL_LENGTH = 12),
  (Blockly.WorkspaceComment.COMMENT_TEXT_LIMIT = 8e3),
  (Blockly.WorkspaceComment.prototype.data = null),
  (Blockly.WorkspaceComment.prototype.dispose = function () {
    this.workspace &&
      (Blockly.Events.isEnabled() &&
        Blockly.Events.fire(new Blockly.Events.CommentDelete(this)),
      this.workspace.removeTopComment(this),
      (this.workspace = null));
  }),
  (Blockly.WorkspaceComment.prototype.getHeight = function () {
    return this.height_;
  }),
  (Blockly.WorkspaceComment.prototype.setHeight = function (t) {
    this.height_ = t;
  }),
  (Blockly.WorkspaceComment.prototype.getWidth = function () {
    return this.width_;
  }),
  (Blockly.WorkspaceComment.prototype.setWidth = function (t) {
    this.width_ = t;
  }),
  (Blockly.WorkspaceComment.prototype.getXY = function () {
    return new Blockly.utils.Coordinate(this.xy_.x, this.xy_.y);
  }),
  (Blockly.WorkspaceComment.prototype.moveBy = function (t, e) {
    var o = new Blockly.Events.CommentMove(this);
    this.xy_.translate(t, e), o.recordNew(), Blockly.Events.fire(o);
  }),
  (Blockly.WorkspaceComment.prototype.isDeletable = function () {
    return (
      this.deletable_ && !(this.workspace && this.workspace.options.readOnly)
    );
  }),
  (Blockly.WorkspaceComment.prototype.setDeletable = function (t) {
    this.deletable_ = t;
  }),
  (Blockly.WorkspaceComment.prototype.isMovable = function () {
    return (
      this.movable_ && !(this.workspace && this.workspace.options.readOnly)
    );
  }),
  (Blockly.WorkspaceComment.prototype.setMovable = function (t) {
    this.movable_ = t;
  }),
  (Blockly.WorkspaceComment.prototype.isEditable = function () {
    return (
      this.editable_ && !(this.workspace && this.workspace.options.readOnly)
    );
  }),
  (Blockly.WorkspaceComment.prototype.setEditable = function (t) {
    this.editable_ = t;
  }),
  (Blockly.WorkspaceComment.prototype.getContent = function () {
    return this.content_;
  }),
  (Blockly.WorkspaceComment.prototype.setContent = function (t) {
    this.content_ != t &&
      ((t = t.trim()),
      Blockly.Events.fire(
        new Blockly.Events.CommentChange(
          this,
          { text: this.content_ },
          { text: t }
        )
      ),
      (this.content_ = t));
  }),
  (Blockly.WorkspaceComment.prototype.isMinimized = function () {
    return this.isMinimized_;
  }),
  (Blockly.WorkspaceComment.prototype.getRelativeToSurfaceXY = function () {
    return this.xy_;
  }),
  (Blockly.WorkspaceComment.prototype.toXmlWithXY = function (t) {
    return (
      (t = this.toXml(t)).setAttribute("x", Math.round(this.xy_.x)),
      t.setAttribute("y", Math.round(this.xy_.y)),
      t.setAttribute("h", this.height_),
      t.setAttribute("w", this.width_),
      t
    );
  }),
  (Blockly.WorkspaceComment.prototype.getLabelText = function () {
    return this.content_.length > Blockly.WorkspaceComment.MAX_LABEL_LENGTH
      ? this.RTL
        ? "…" +
          this.content_.slice(0, Blockly.WorkspaceComment.MAX_LABEL_LENGTH)
        : this.content_.slice(0, Blockly.WorkspaceComment.MAX_LABEL_LENGTH) +
          "…"
      : this.content_;
  }),
  (Blockly.WorkspaceComment.prototype.toXml = function (t) {
    var e = Blockly.utils.xml.createElement("comment");
    return (
      t || (e.id = this.id),
      (e.textContent = this.getContent()),
      this.isMinimized_ && e.setAttribute("minimized", !0),
      this.data && e.setAttribute("data", this.data),
      e
    );
  }),
  (Blockly.WorkspaceComment.fireCreateEvent = function (t) {
    if (Blockly.Events.isEnabled()) {
      var e = Blockly.Events.getGroup();
      e || Blockly.Events.setGroup(!0);
      try {
        Blockly.Events.fire(new Blockly.Events.CommentCreate(t));
      } finally {
        e || Blockly.Events.setGroup(!1);
      }
    }
  }),
  (Blockly.WorkspaceComment.fromXml = function (t, e) {
    var o = Blockly.WorkspaceComment.parseAttributes(t);
    return (
      ((e = new Blockly.WorkspaceComment(
        e,
        o.content,
        o.h,
        o.w,
        o.minimized,
        o.id
      )).data = t.getAttribute("data")),
      (o = parseInt(t.getAttribute("x"), 10)),
      (t = parseInt(t.getAttribute("y"), 10)),
      isNaN(o) || isNaN(t) || e.moveBy(o, t),
      Blockly.WorkspaceComment.fireCreateEvent(e),
      e
    );
  }),
  (Blockly.WorkspaceComment.parseAttributes = function (t) {
    var e = t.getAttribute("h"),
      o = t.getAttribute("w");
    return {
      id: t.getAttribute("id"),
      h: e ? parseInt(e, 10) : 100,
      w: o ? parseInt(o, 10) : 100,
      x: parseInt(t.getAttribute("x"), 10),
      y: parseInt(t.getAttribute("y"), 10),
      minimized: "true" == t.getAttribute("minimized") || !1,
      content: t.textContent,
    };
  }),
  (Blockly.WorkspaceCommentSvg = function (t, e, o, i, n, l) {
    (this.onMouseMoveWrapper_ = this.onMouseUpWrapper_ = null),
      (this.svgGroup_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyComment" },
        null
      )),
      (this.svgGroup_.translate_ = ""),
      (this.svgRect_ = Blockly.utils.dom.createSvgElement("rect", {
        class: "blocklyCommentRect",
        x: 0,
        y: 0,
        rx: Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
        ry: Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
      })),
      this.svgGroup_.appendChild(this.svgRect_),
      (this.rendered_ = !1),
      (this.useDragSurface_ =
        Blockly.utils.is3dSupported() && !!t.blockDragSurface_),
      Blockly.WorkspaceCommentSvg.superClass_.constructor.call(
        this,
        t,
        e,
        o,
        i,
        n,
        l
      ),
      this.render();
  }),
  Blockly.utils.object.inherits(
    Blockly.WorkspaceCommentSvg,
    Blockly.WorkspaceComment
  ),
  (Blockly.WorkspaceCommentSvg.DEFAULT_SIZE = 200),
  (Blockly.WorkspaceCommentSvg.prototype.dispose = function () {
    this.workspace &&
      (Blockly.selected == this &&
        (this.unselect(), this.workspace.cancelCurrentGesture()),
      Blockly.Events.isEnabled() &&
        Blockly.Events.fire(new Blockly.Events.CommentDelete(this)),
      Blockly.utils.dom.removeNode(this.svgGroup_),
      (this.svgRect_ = this.svgGroup_ = null),
      this.disposeInternal_(),
      Blockly.Events.disable(),
      Blockly.WorkspaceCommentSvg.superClass_.dispose.call(this),
      Blockly.Events.enable());
  }),
  (Blockly.WorkspaceCommentSvg.prototype.initSvg = function () {
    if (!this.workspace.rendered) throw TypeError("Workspace is headless.");
    this.workspace.options.readOnly ||
      this.eventsInit_ ||
      (Blockly.bindEventWithChecks_(
        this.svgRectTarget_,
        "mousedown",
        this,
        this.pathMouseDown_
      ),
      Blockly.bindEventWithChecks_(
        this.svgHandleTarget_,
        "mousedown",
        this,
        this.pathMouseDown_
      )),
      (this.eventsInit_ = !0),
      this.updateMovable(),
      this.getSvgRoot().parentNode ||
        this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot());
  }),
  (Blockly.WorkspaceCommentSvg.prototype.pathMouseDown_ = function (t) {
    var e = this.workspace.getGesture(t);
    e && e.handleBubbleStart(t, this);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.showContextMenu = function (t) {
    if (!this.workspace.options.readOnly) {
      var e = [];
      this.isDeletable() &&
        this.isMovable() &&
        (e.push(Blockly.ContextMenu.commentDuplicateOption(this)),
        e.push(Blockly.ContextMenu.commentDeleteOption(this))),
        Blockly.ContextMenu.show(t, e, this.RTL);
    }
  }),
  (Blockly.WorkspaceCommentSvg.prototype.select = function () {
    if (Blockly.selected != this) {
      var t = null;
      if (Blockly.selected) {
        (t = Blockly.selected.id), Blockly.Events.disable();
        try {
          Blockly.selected.unselect();
        } finally {
          Blockly.Events.enable();
        }
      }
      ((t = new Blockly.Events.Ui(null, "selected", t, this.id)).workspaceId =
        this.workspace.id),
        Blockly.Events.fire(t),
        (Blockly.selected = this),
        this.addSelect();
    }
  }),
  (Blockly.WorkspaceCommentSvg.prototype.unselect = function () {
    if (Blockly.selected == this) {
      var t = new Blockly.Events.Ui(null, "selected", this.id, null);
      (t.workspaceId = this.workspace.id),
        Blockly.Events.fire(t),
        (Blockly.selected = null),
        this.removeSelect(),
        this.blurFocus();
    }
  }),
  (Blockly.WorkspaceCommentSvg.prototype.addSelect = function () {
    Blockly.utils.dom.addClass(this.svgGroup_, "blocklySelected"),
      this.setFocus();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.removeSelect = function () {
    Blockly.utils.dom.removeClass(this.svgGroup_, "blocklySelected"),
      this.blurFocus();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.addFocus = function () {
    Blockly.utils.dom.addClass(this.svgGroup_, "blocklyFocused");
  }),
  (Blockly.WorkspaceCommentSvg.prototype.removeFocus = function () {
    Blockly.utils.dom.removeClass(this.svgGroup_, "blocklyFocused");
  }),
  (Blockly.WorkspaceCommentSvg.prototype.getRelativeToSurfaceXY = function () {
    var t = 0,
      e = 0,
      o = this.useDragSurface_
        ? this.workspace.blockDragSurface_.getGroup()
        : null,
      i = this.getSvgRoot();
    if (i)
      do {
        var n = Blockly.utils.getRelativeXY(i);
        (t += n.x),
          (e += n.y),
          this.useDragSurface_ &&
            this.workspace.blockDragSurface_.getCurrentBlock() == i &&
            ((t += (n =
              this.workspace.blockDragSurface_.getSurfaceTranslation()).x),
            (e += n.y)),
          (i = i.parentNode);
      } while (i && i != this.workspace.getBubbleCanvas() && i != o);
    return (this.xy_ = new Blockly.utils.Coordinate(t, e));
  }),
  (Blockly.WorkspaceCommentSvg.prototype.moveBy = function (t, e) {
    var o = new Blockly.Events.CommentMove(this),
      i = this.getRelativeToSurfaceXY();
    this.translate(i.x + t, i.y + e),
      (this.xy_ = new Blockly.utils.Coordinate(i.x + t, i.y + e)),
      o.recordNew(),
      Blockly.Events.fire(o),
      this.workspace.resizeContents();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.translate = function (t, e) {
    (this.xy_ = new Blockly.utils.Coordinate(t, e)),
      this.getSvgRoot().setAttribute(
        "transform",
        "translate(" + t + "," + e + ")"
      );
  }),
  (Blockly.WorkspaceCommentSvg.prototype.moveToDragSurface = function () {
    if (this.useDragSurface_) {
      var t = this.getRelativeToSurfaceXY();
      this.clearTransformAttributes_(),
        this.workspace.blockDragSurface_.translateSurface(t.x, t.y),
        this.workspace.blockDragSurface_.setBlocksAndShow(this.getSvgRoot());
    }
  }),
  (Blockly.WorkspaceCommentSvg.prototype.moveOffDragSurface = function (t) {
    this.useDragSurface_ &&
      (this.translate(t.x, t.y),
      this.workspace.blockDragSurface_.clearAndHide(
        this.workspace.getCanvas()
      ));
  }),
  (Blockly.WorkspaceCommentSvg.prototype.moveDuringDrag = function (t, e) {
    t
      ? t.translateSurface(e.x, e.y)
      : ((this.svgGroup_.translate_ = "translate(" + e.x + "," + e.y + ")"),
        this.svgGroup_.setAttribute(
          "transform",
          this.svgGroup_.translate_ + this.svgGroup_.skew_
        ));
  }),
  (Blockly.WorkspaceCommentSvg.prototype.moveTo = function (t, e) {
    this.translate(t, e);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.clearTransformAttributes_ =
    function () {
      this.getSvgRoot().removeAttribute("transform");
    }),
  (Blockly.WorkspaceCommentSvg.prototype.getBubbleSize = function () {
    if (this.rendered_)
      return {
        width: parseInt(this.svgRect_.getAttribute("width")),
        height: parseInt(this.svgRect_.getAttribute("height")),
      };
    this.getHeightWidth();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.getBoundingRectangle = function () {
    var t = this.getRelativeToSurfaceXY(),
      e = this.getHeightWidth(),
      o = t.y,
      i = t.y + e.height;
    if (this.RTL) {
      var n = t.x - e.width;
      t = t.x;
    } else (n = t.x), (t = t.x + e.width);
    return new Blockly.utils.Rect(o, i, n, t);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.updateMovable = function () {
    this.isMovable()
      ? Blockly.utils.dom.addClass(this.svgGroup_, "blocklyDraggable")
      : Blockly.utils.dom.removeClass(this.svgGroup_, "blocklyDraggable");
  }),
  (Blockly.WorkspaceCommentSvg.prototype.setMovable = function (t) {
    Blockly.WorkspaceCommentSvg.superClass_.setMovable.call(this, t),
      this.updateMovable();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.setEditable = function (t) {
    Blockly.WorkspaceCommentSvg.superClass_.setEditable.call(this, t),
      this.textarea_ && (this.textarea_.readOnly = !t);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.setDragging = function (t) {
    t
      ? (((t = this.getSvgRoot()).translate_ = ""),
        (t.skew_ = ""),
        Blockly.utils.dom.addClass(this.svgGroup_, "blocklyDragging"))
      : Blockly.utils.dom.removeClass(this.svgGroup_, "blocklyDragging");
  }),
  (Blockly.WorkspaceCommentSvg.prototype.getSvgRoot = function () {
    return this.svgGroup_;
  }),
  (Blockly.WorkspaceCommentSvg.prototype.getContent = function () {
    return this.textarea_ ? this.textarea_.value : this.content_;
  }),
  (Blockly.WorkspaceCommentSvg.prototype.setContent = function (t) {
    Blockly.WorkspaceCommentSvg.superClass_.setContent.call(this, t),
      this.textarea_ && (this.textarea_.value = t);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.setDeleteStyle = function (t) {
    t
      ? Blockly.utils.dom.addClass(this.svgGroup_, "blocklyDraggingDelete")
      : Blockly.utils.dom.removeClass(this.svgGroup_, "blocklyDraggingDelete");
  }),
  (Blockly.WorkspaceCommentSvg.prototype.setAutoLayout = function () {}),
  (Blockly.WorkspaceCommentSvg.fromXml = function (t, e, o) {
    Blockly.Events.disable();
    try {
      var i = Blockly.WorkspaceComment.parseAttributes(t),
        n = new Blockly.WorkspaceCommentSvg(
          e,
          i.content,
          i.h,
          i.w,
          i.minimized,
          i.id
        );
      if (
        ((n.data = t.getAttribute("data")),
        e.rendered && (n.initSvg(), n.render(!1)),
        !isNaN(i.x) && !isNaN(i.y))
      )
        if (e.RTL) {
          var l = o || e.getWidth();
          n.moveBy(l - i.x, i.y);
        } else n.moveBy(i.x, i.y);
    } finally {
      Blockly.Events.enable();
    }
    return Blockly.WorkspaceComment.fireCreateEvent(n), n;
  }),
  (Blockly.WorkspaceCommentSvg.prototype.toXmlWithXY = function (t) {
    var e;
    this.workspace.RTL && (e = this.workspace.getWidth()), (t = this.toXml(t));
    var o = this.getRelativeToSurfaceXY();
    return (
      t.setAttribute("x", Math.round(this.workspace.RTL ? e - o.x : o.x)),
      t.setAttribute("y", Math.round(o.y)),
      t.setAttribute("h", this.getHeight()),
      t.setAttribute("w", this.getWidth()),
      t
    );
  }),
  (Blockly.WorkspaceCommentSvg.prototype.getHeightWidth = function () {
    console.warn("method is overriden by workspace_comment_render_svg.js");
  }),
  Blockly.Css.register([
    ".blocklyCommentForeignObject {",
    "position: relative;",
    "z-index: 0;",
    "}",
    ".blocklyComment > image {",
    "cursor: pointer",
    "}",
    ".blocklyCommentRect {",
    "fill: #FAF6BD;",
    "stroke: #F9F3A1;",
    "stroke-width: 1px",
    "}",
    ".blocklyCommentTarget {",
    "fill: transparent;",
    "stroke: #F9F3A1;",
    "}",
    ".blocklyCommentTargetFocused {",
    "fill: none;",
    "}",
    ".blocklyCommentText {",
    "fill: #000;",
    "pointer-events: none;",
    "}",
    ".blocklyCommentHandleTarget {",
    "fill: none;",
    "}",
    ".blocklyCommentHandleTargetFocused {",
    "fill: transparent;",
    "}",
    ".blocklyFocused>.blocklyCommentRect {",
    "fill: #FFB900;",
    "stroke: #B9B272;",
    "}",
    ".blocklySelected>.blocklyCommentTarget {",
    "stroke: #FFB900;",
    "stroke-width: 1px;",
    "}",
    ".blocklyCommentForeignObject {",
    "position: relative;",
    "z-index: 0;",
    "}",
    ".blocklyCommentRect {",
    "fill: #FAF6BD;",
    "stroke: #F9F3A1;",
    "stroke-width: 1px",
    "}",
    ".blocklyCommentTarget {",
    "fill: transparent;",
    "stroke: #F9F3A1;",
    "}",
    ".blocklyCommentTargetFocused {",
    "fill: none;",
    "}",
    ".blocklyCommentHandleTarget {",
    "fill: none;",
    "}",
    ".blocklyCommentHandleTargetFocused {",
    "fill: transparent;",
    "}",
    ".blocklyUneditableComment {",
    "fill: $colour_text;",
    "}",
    ".blocklyCommentDeleteIcon {",
    "cursor: pointer;",
    "fill: #000;",
    "display: none",
    "}",
    ".blocklyFocused > .blocklyCommentDeleteIcon, .blocklyCommentBubble > .blocklyCommentDeleteIcon {",
    "display: block",
    "}",
    ".blocklyDeleteIconShape.blocklyDeleteIconHighlighted {",
    "fill: rgba(255, 255, 255, 0.20);",
    "}",
    ".blocklyCommentDeleteIcon {",
    "cursor: pointer;",
    "fill: #000;",
    "display: none",
    "}",
    ".blocklySelected > .blocklyCommentDeleteIcon {",
    "display: block",
    "}",
  ]),
  (Blockly.WorkspaceCommentSvg.render = {}),
  (Blockly.WorkspaceCommentSvg.BORDER_WIDTH = 1),
  (Blockly.WorkspaceCommentSvg.RESIZE_SIZE =
    12 * Blockly.WorkspaceCommentSvg.BORDER_WIDTH),
  (Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET = 12),
  (Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT = 32),
  (Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE = 16),
  (Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE = 12),
  (Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET = 6),
  (Blockly.WorkspaceCommentSvg.MINIMIZE_WIDTH = 200),
  (Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH = 35),
  (Blockly.WorkspaceCommentSvg.UNEDITABLE_LINE_GAP = 30),
  (Blockly.WorkspaceCommentSvg.prototype.getHeightWidth = function () {
    return { width: this.getWidth(), height: this.getHeight() };
  }),
  (Blockly.WorkspaceCommentSvg.prototype.render = function () {
    if (!this.rendered_) {
      var t = this.getHeightWidth();
      !this.isEditable() || Blockly.utils.userAgent.IE
        ? (this.createUneditableText_(),
          this.svgGroup_.appendChild(this.uneditableTextGroup_))
        : ((this.commentEditor_ = this.createEditor_()),
          this.svgGroup_.appendChild(this.commentEditor_));
      var e = this.commentEditor_ || this.uneditableTextGroup_;
      if (
        ((this.svgHandleTarget_ = Blockly.utils.dom.createSvgElement(
          "rect",
          {
            class: "blocklyCommentHandleTarget",
            fill: "transparent",
            rx: Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
            ry: Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
            height: Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT,
          },
          this.svgGroup_
        )),
        (this.svgRectTarget_ = Blockly.utils.dom.createSvgElement(
          "rect",
          {
            class: "blocklyDraggable blocklyCommentTarget",
            x: 0,
            y: 0,
            rx: 4 * Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
            ry: 4 * Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
          },
          this.svgGroup_
        )),
        this.isEditable() &&
          !Blockly.utils.userAgent.IE &&
          this.addResizeDom_(),
        this.createTopBarIcons_(),
        this.createTopBarLabel_(),
        this.isMinimized()
          ? (this.minimizeArrow_.setAttributeNS(
              "http://www.w3.org/1999/xlink",
              "xlink:href",
              Blockly.mainWorkspace.options.pathToMedia + "comment-arrow-up.svg"
            ),
            e.setAttribute("display", "none"),
            this.resizeGroup_.setAttribute("display", "none"))
          : (this.minimizeArrow_.setAttributeNS(
              "http://www.w3.org/1999/xlink",
              "xlink:href",
              Blockly.mainWorkspace.options.pathToMedia +
                "comment-arrow-down.svg"
            ),
            this.topBarLabel_.setAttribute("display", "none")),
        this.textarea_)
      )
        this.textarea_.value = this.content_;
      else
        for (
          e = 0;
          e < this.content_.length;
          e += Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH
        ) {
          var o = this.content_.substring(
            e,
            e + Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH
          );
          this.pushUneditableTextLine_(o);
        }
      this.isEditable() && !Blockly.utils.userAgent.IE
        ? this.setSize(t.width, t.height)
        : this.setSize(
            8 * Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH + 25,
            this.uneditableTextLineY - 10
          ),
        (this.rendered_ = !0),
        this.resizeGroup_ &&
          (Blockly.bindEventWithChecks_(
            this.resizeGroup_,
            "mousedown",
            this,
            this.resizeMouseDown_
          ),
          Blockly.bindEventWithChecks_(
            this.resizeGroup_,
            "mouseup",
            this,
            this.resizeMouseUp_
          )),
        Blockly.bindEventWithChecks_(
          this.minimizeArrow_,
          "mousedown",
          this,
          this.minimizeArrowMouseDown_
        ),
        Blockly.bindEventWithChecks_(
          this.minimizeArrow_,
          "mouseout",
          this,
          this.minimizeArrowMouseOut_
        ),
        Blockly.bindEventWithChecks_(
          this.minimizeArrow_,
          "mouseup",
          this,
          this.minimizeArrowMouseUp_
        ),
        this.isDeletable() &&
          (Blockly.bindEventWithChecks_(
            this.deleteIcon_,
            "mousedown",
            this,
            this.deleteMouseDown_
          ),
          Blockly.bindEventWithChecks_(
            this.deleteIcon_,
            "mouseout",
            this,
            this.deleteMouseOut_
          ),
          Blockly.bindEventWithChecks_(
            this.deleteIcon_,
            "mouseup",
            this,
            this.deleteMouseUp_
          ));
    }
  }),
  (Blockly.WorkspaceCommentSvg.prototype.createEditor_ = function () {
    this.foreignObject_ = Blockly.utils.dom.createSvgElement(
      "foreignObject",
      {
        x: Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
        y:
          Blockly.WorkspaceCommentSvg.BORDER_WIDTH +
          Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT,
        class: "blocklyCommentForeignObject",
      },
      null
    );
    var t = document.createElementNS(Blockly.utils.dom.HTML_NS, "body");
    t.setAttribute("xmlns", Blockly.utils.dom.HTML_NS),
      (t.className = "blocklyMinimalBody");
    var e = document.createElementNS(Blockly.utils.dom.HTML_NS, "textarea");
    return (
      (e.className = "blocklyCommentTextarea"),
      e.setAttribute("dir", this.RTL ? "RTL" : "LTR"),
      e.setAttribute("maxlength", Blockly.WorkspaceComment.COMMENT_TEXT_LIMIT),
      (e.readOnly = !this.isEditable()),
      t.appendChild(e),
      (this.textarea_ = e),
      (this.textarea_.style.margin =
        Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET + "px"),
      this.foreignObject_.appendChild(t),
      Blockly.bindEventWithChecks_(e, "wheel", this, function (t) {
        t.stopPropagation();
      }),
      Blockly.bindEventWithChecks_(e, "change", this, function (t) {
        this.text_ != e.value && this.setContent(e.value);
      }),
      (this.labelText_ = this.getLabelText()),
      this.foreignObject_
    );
  }),
  (Blockly.WorkspaceCommentSvg.prototype.addResizeDom_ = function () {
    this.resizeGroup_ = Blockly.utils.dom.createSvgElement(
      "g",
      { class: this.RTL ? "blocklyResizeSW" : "blocklyResizeSE" },
      this.svgGroup_
    );
    var t = Blockly.WorkspaceCommentSvg.RESIZE_SIZE;
    Blockly.utils.dom.createSvgElement(
      "polygon",
      { points: "0,0 0,x x,x x,0".replace(/x/g, t.toString()) },
      this.resizeGroup_
    ),
      Blockly.utils.dom.createSvgElement(
        "line",
        {
          class: "blocklyResizeLine",
          x1: t / 3,
          y1: t - 1,
          x2: t - 1,
          y2: t / 3,
        },
        this.resizeGroup_
      ),
      Blockly.utils.dom.createSvgElement(
        "line",
        {
          class: "blocklyResizeLine",
          x1: (2 * t) / 3,
          y1: t - 1,
          x2: t - 1,
          y2: (2 * t) / 3,
        },
        this.resizeGroup_
      );
  }),
  (Blockly.WorkspaceCommentSvg.prototype.createCommentTopBar_ = function () {
    (this.svgHandleTarget_ = Blockly.utils.dom.createSvgElement(
      "rect",
      {
        class: "blocklyDraggable blocklyCommentHandleTarget",
        fill: "transparent",
        rx: Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
        ry: Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
        height: Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT,
      },
      this.svgGroup_
    )),
      this.createTopBarIcons_(),
      this.createTopBarLabel_();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.createTopBarLabel_ = function () {
    this.topBarLabel_ = Blockly.utils.dom.createSvgElement(
      "text",
      {
        class: "blocklyCommentText",
        x: this.width_ / 2,
        y:
          Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT / 2 +
          Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
        "text-anchor": "middle",
        "dominant-baseline": "middle",
      },
      this.svgGroup_
    );
    var t = document.createTextNode(this.labelText_);
    this.topBarLabel_.appendChild(t);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.createTopBarIcons_ = function () {
    (this.minimizeArrow_ = Blockly.utils.dom.createSvgElement(
      "image",
      {
        x: Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET,
        y:
          Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT / 2 +
          Blockly.WorkspaceCommentSvg.BORDER_WIDTH -
          Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE / 2,
        width: Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE,
        height: Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE,
      },
      this.svgGroup_
    )),
      this.isDeletable() &&
        ((this.deleteIcon_ = Blockly.utils.dom.createSvgElement(
          "g",
          { class: "blocklyCommentDeleteIcon" },
          this.svgGroup_
        )),
        Blockly.utils.dom.createSvgElement(
          "rect",
          {
            x: "-12.5",
            y: "1",
            width: "27.5",
            height: "27.5",
            fill: "transparent",
            class: "blocklyDeleteIconShape",
          },
          this.deleteGroup_
        ),
        Blockly.WorkspaceCommentSvg.drawDeleteIcon(this.deleteIcon_));
  }),
  (Blockly.WorkspaceCommentSvg.drawDeleteIcon = function (t) {
    (t = Blockly.utils.dom.createSvgElement(
      "g",
      { transform: "scale (1.5) translate(-6, 1)" },
      t
    )),
      Blockly.utils.dom.createSvgElement(
        "rect",
        {
          x: 5,
          y: 2,
          width: "4",
          height: "2",
          stroke: "#fff",
          "stroke-width": "1",
          fill: "transparent",
        },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "line",
        {
          x1: 1,
          y1: 4,
          x2: 13,
          y2: 4,
          stroke: "#fff",
          "stroke-width": "1",
          "stroke-linecap": "round",
        },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "rect",
        {
          x: 2,
          y: 4,
          width: 10,
          height: 12,
          rx: "1",
          ry: "1",
          stroke: "#fff",
          "stroke-width": "1",
          fill: "transparent",
        },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "line",
        {
          x1: 5,
          y1: 7,
          x2: 5,
          y2: 13,
          stroke: "#fff",
          "stroke-width": "1",
          "stroke-linecap": "round",
        },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "line",
        {
          x1: 7,
          y1: 7,
          x2: 7,
          y2: 13,
          stroke: "#fff",
          "stroke-width": "1",
          "stroke-linecap": "round",
        },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "line",
        {
          x1: 9,
          y1: 7,
          x2: 9,
          y2: 13,
          stroke: "#fff",
          "stroke-width": "1",
          "stroke-linecap": "round",
        },
        t
      );
  }),
  (Blockly.WorkspaceCommentSvg.prototype.minimizeArrowMouseDown_ = function (
    t
  ) {
    (this.shouldToggleMinimize_ = !0), t.stopPropagation();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.minimizeArrowMouseOut_ = function (t) {
    this.shouldToggleMinimize_ = !1;
  }),
  (Blockly.WorkspaceCommentSvg.prototype.minimizeArrowMouseUp_ = function (t) {
    this.shouldToggleMinimize_ &&
      ((this.shouldToggleMinimize = !1), this.toggleMinimize_()),
      t.stopPropagation(),
      Blockly.Touch.clearTouchIdentifier();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.deleteMouseDown_ = function (t) {
    (this.shouldDelete_ = !0), t.stopPropagation();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.deleteMouseOut_ = function (t) {
    this.shouldDelete_ = !1;
  }),
  (Blockly.WorkspaceCommentSvg.prototype.deleteMouseUp_ = function (t) {
    this.shouldDelete_ && this.dispose(),
      t.stopPropagation(),
      Blockly.Touch.clearTouchIdentifier();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.resizeMouseDown_ = function (t) {
    (this.resizeStartSize_ = { width: this.width_, height: this.height_ }),
      this.unbindDragEvents_(),
      this.workspace.setResizesEnabled(!1),
      Blockly.utils.isRightButton(t) ||
        (this.workspace.startDrag(
          t,
          new Blockly.utils.Coordinate(
            this.workspace.RTL ? -this.width_ : this.width_,
            this.height_
          )
        ),
        (this.onMouseUpWrapper_ = Blockly.bindEventWithChecks_(
          document,
          "mouseup",
          this,
          this.resizeMouseUp_
        )),
        (this.onMouseMoveWrapper_ = Blockly.bindEventWithChecks_(
          document,
          "mousemove",
          this,
          this.resizeMouseMove_
        )),
        Blockly.hideChaff()),
      t.stopPropagation();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.setRenderedMinimizeState_ = function (
    t,
    e
  ) {
    var o = this.commentEditor_ || this.uneditableTextGroup_;
    t
      ? (this.minimizeArrow_.setAttributeNS(
          "http://www.w3.org/1999/xlink",
          "xlink:href",
          Blockly.mainWorkspace.options.pathToMedia + "comment-arrow-up.svg"
        ),
        o.setAttribute("display", "none"),
        this.resizeGroup_ && this.resizeGroup_.setAttribute("display", "none"),
        e && this.labelText_ != e && (this.topBarLabel_.textContent = e),
        this.topBarLabel_.removeAttribute("display"))
      : (this.minimizeArrow_.setAttributeNS(
          "http://www.w3.org/1999/xlink",
          "xlink:href",
          Blockly.mainWorkspace.options.pathToMedia + "comment-arrow-down.svg"
        ),
        this.topBarLabel_.setAttribute("display", "none"),
        o.removeAttribute("display"),
        this.resizeGroup_ && this.resizeGroup_.removeAttribute("display"));
  }),
  (Blockly.WorkspaceCommentSvg.prototype.unbindDragEvents_ = function () {
    this.onMouseUpWrapper_ &&
      (Blockly.unbindEvent_(this.onMouseUpWrapper_),
      (this.onMouseUpWrapper_ = null)),
      this.onMouseMoveWrapper_ &&
        (Blockly.unbindEvent_(this.onMouseMoveWrapper_),
        (this.onMouseMoveWrapper_ = null));
  }),
  (Blockly.WorkspaceCommentSvg.prototype.resizeMouseUp_ = function () {
    Blockly.Touch.clearTouchIdentifier(), this.unbindDragEvents_();
    var t = this.resizeStartSize_;
    (this.resizeStartSize_ = null),
      (this.width_ == t.width && this.height_ == t.height) ||
        (Blockly.Events.fire(
          new Blockly.Events.CommentChange(
            this,
            { width: t.width, height: t.height },
            { width: this.width_, height: this.height_ }
          )
        ),
        this.workspace.setResizesEnabled(!0));
  }),
  (Blockly.WorkspaceCommentSvg.prototype.resizeMouseMove_ = function (t) {
    (this.autoLayout_ = !1), (t = this.workspace.moveDrag(t));
    var e = !1;
    Blockly.Events.isEnabled() && (Blockly.Events.disable(), (e = !0)),
      this.setSize(this.RTL ? -t.x : t.x, t.y),
      e && Blockly.Events.enable();
  }),
  (Blockly.WorkspaceCommentSvg.prototype.resizeComment_ = function () {
    var t = 2 * Blockly.WorkspaceCommentSvg.BORDER_WIDTH,
      e = Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT,
      o = 2 * Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET,
      i = this.commentEditor_ || this.uneditableBackground_;
    i.setAttribute("width", this.width_ - t),
      i.setAttribute("height", this.height_ - t - e),
      this.RTL && i.setAttribute("x", -this.width_),
      this.textarea_ &&
        ((this.textarea_.style.width = this.width_ - o + "px"),
        (this.textarea_.style.height = this.height_ - t - o - e + "px"));
  }),
  (Blockly.WorkspaceCommentSvg.prototype.setSize = function (t, e) {
    var o = this.width_,
      i = this.height_,
      n = 2 * Blockly.WorkspaceCommentSvg.BORDER_WIDTH;
    this.isMinimized_
      ? ((t = Blockly.WorkspaceCommentSvg.MINIMIZE_WIDTH),
        (e = Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT))
      : ((t = Math.max(t, n + 50)),
        (e = Math.max(e, n + 20 + Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT)),
        (this.width_ = t),
        (this.height_ = e),
        Blockly.Events.fire(
          new Blockly.Events.CommentChange(
            this,
            { width: o, height: i },
            { width: this.width_, height: this.height_ }
          )
        )),
      this.svgRect_.setAttribute("width", t),
      this.svgRect_.setAttribute("height", e),
      this.svgRectTarget_.setAttribute("width", t),
      this.svgRectTarget_.setAttribute("height", e),
      this.svgHandleTarget_.setAttribute("width", t),
      this.svgHandleTarget_.setAttribute(
        "height",
        Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT
      ),
      this.RTL
        ? (this.minimizeArrow_.setAttribute(
            "x",
            t -
              Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE -
              Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET
          ),
          this.svgRect_.setAttribute("transform", "scale(-1 1)"),
          this.svgHandleTarget_.setAttribute("transform", "scale(-1 1)"),
          this.svgHandleTarget_.setAttribute(
            "transform",
            "translate(" + -t + ", 1)"
          ),
          this.minimizeArrow_.setAttribute(
            "transform",
            "translate(" + -t + ", 1)"
          ),
          this.isDeletable() &&
            this.deleteIcon_.setAttribute(
              "transform",
              "translate(" +
                (-t +
                  Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE +
                  Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET) +
                ",0) scale(-1 1)"
            ))
        : this.isDeletable() &&
          this.deleteIcon_.setAttribute(
            "transform",
            "translate(" +
              (t -
                Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE -
                Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET) +
              ",0)"
          ),
      (o = Blockly.WorkspaceCommentSvg.RESIZE_SIZE),
      this.resizeGroup_ &&
        (this.RTL
          ? this.resizeGroup_.setAttribute(
              "transform",
              "translate(" + (-t + o) + "," + (e - o) + ") scale(-1 1)"
            )
          : this.resizeGroup_.setAttribute(
              "transform",
              "translate(" + (t - n - o) + "," + (e - n - o) + ")"
            )),
      this.isMinimized_ &&
        (this.topBarLabel_.setAttribute("x", t / 2),
        this.topBarLabel_.setAttribute("y", e / 2)),
      this.resizeComment_();
  }),
  (Blockly.WorkspaceComment.prototype.toggleMinimize_ = function () {
    this.setMinimized(!this.isMinimized_);
  }),
  (Blockly.WorkspaceComment.prototype.setMinimized = function (t) {
    this.isMinimized_ != t &&
      (Blockly.Events.fire(
        new Blockly.Events.CommentChange(
          this,
          { minimized: this.isMinimized_ },
          { minimized: t }
        )
      ),
      (this.isMinimized_ = t)
        ? (this.rendered_ &&
            this.setRenderedMinimizeState_(!0, this.getLabelText()),
          this.setSize(
            Blockly.WorkspaceCommentSvg.MINIMIZE_WIDTH,
            Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT
          ))
        : (this.rendered_ && this.setRenderedMinimizeState_(!1),
          this.setContent(this.content_),
          this.setSize(this.width_, this.height_)));
  }),
  (Blockly.WorkspaceCommentSvg.prototype.disposeInternal_ = function () {
    (this.svgHandleTarget_ =
      this.svgRectTarget_ =
      this.svgRect_ =
      this.foreignObject_ =
      this.textarea_ =
        null),
      (this.disposed_ = !0);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.setFocus = function () {
    var t = this;
    (this.focused_ = !0),
      setTimeout(function () {
        t.disposed_ ||
          (t.textarea_.focus(),
          t.addFocus(),
          Blockly.utils.dom.addClass(
            t.svgRectTarget_,
            "blocklyCommentTargetFocused"
          ),
          Blockly.utils.dom.addClass(
            t.svgHandleTarget_,
            "blocklyCommentHandleTargetFocused"
          ));
      }, 0);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.blurFocus = function () {
    var t = this;
    (this.focused_ = !1),
      setTimeout(function () {
        t.disposed_ ||
          (t.textarea_.blur(),
          t.removeFocus(),
          Blockly.utils.dom.removeClass(
            t.svgRectTarget_,
            "blocklyCommentTargetFocused"
          ),
          Blockly.utils.dom.removeClass(
            t.svgHandleTarget_,
            "blocklyCommentHandleTargetFocused"
          ));
      }, 0);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.createUneditableText_ = function () {
    (this.uneditableTextGroup_ = Blockly.utils.dom.createSvgElement(
      "g",
      { class: "blocklyUneditableComment" },
      this.svgGroup_
    )),
      (this.uneditableBackground_ = Blockly.utils.dom.createSvgElement(
        "rect",
        {
          class: "blocklyUneditableMinimalBody",
          y: Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT.toString(),
        },
        this.svgGroup_
      )),
      this.uneditableTextGroup_.appendChild(this.uneditableBackground_),
      (this.uneditableTextLineY =
        2 * Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT);
  }),
  (Blockly.WorkspaceCommentSvg.prototype.pushUneditableTextLine_ = function (
    t
  ) {
    var e = Blockly.utils.dom.createSvgElement(
      "text",
      { x: 15, y: this.uneditableTextLineY },
      this.uneditableTextGroup_
    );
    (t = document.createTextNode(t)),
      e.appendChild(t),
      (this.uneditableTextLineY +=
        Blockly.WorkspaceCommentSvg.UNEDITABLE_LINE_GAP);
  }),
  (Blockly.ZoomControls = function (t) {
    this.workspace_ = t;
  }),
  (Blockly.ZoomControls.prototype.WIDTH_ = 32),
  (Blockly.ZoomControls.prototype.HEIGHT_ = 110),
  (Blockly.ZoomControls.prototype.MARGIN_BOTTOM_ = 20),
  (Blockly.ZoomControls.prototype.MARGIN_SIDE_ = 20),
  (Blockly.ZoomControls.prototype.svgGroup_ = null),
  (Blockly.ZoomControls.prototype.left_ = 0),
  (Blockly.ZoomControls.prototype.top_ = 0),
  (Blockly.ZoomControls.prototype.createDom = function () {
    this.svgGroup_ = Blockly.utils.dom.createSvgElement("g", {}, null);
    var t = String(Math.random()).substring(2);
    return (
      this.createZoomOutSvg_(t),
      this.createZoomInSvg_(t),
      this.workspace_.isMovable() && this.createZoomResetSvg_(t),
      this.svgGroup_
    );
  }),
  (Blockly.ZoomControls.prototype.init = function (t) {
    return (
      (this.verticalSpacing_ = this.MARGIN_BOTTOM_ + t),
      this.verticalSpacing_ + this.HEIGHT_
    );
  }),
  (Blockly.ZoomControls.prototype.dispose = function () {
    this.svgGroup_ && Blockly.utils.dom.removeNode(this.svgGroup_);
  }),
  (Blockly.ZoomControls.prototype.position = function () {
    if (this.verticalSpacing_) {
      var t = this.workspace_.getMetrics();
      t &&
        ((this.left_ =
          t.toolboxPosition == Blockly.TOOLBOX_AT_LEFT ||
          (this.workspace_.horizontalLayout && !this.workspace_.RTL)
            ? t.viewWidth +
              t.absoluteLeft -
              this.WIDTH_ -
              this.MARGIN_SIDE_ -
              Blockly.Scrollbar.scrollbarThickness
            : this.MARGIN_SIDE_ + Blockly.Scrollbar.scrollbarThickness),
        t.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM
          ? ((this.top_ = this.verticalSpacing_),
            this.zoomInGroup_.setAttribute("transform", "translate(0, 34)"),
            this.zoomResetGroup_ &&
              this.zoomResetGroup_.setAttribute(
                "transform",
                "translate(0, 77)"
              ))
          : ((this.top_ =
              t.viewHeight +
              t.absoluteTop -
              this.HEIGHT_ -
              this.verticalSpacing_),
            this.zoomInGroup_.setAttribute("transform", "translate(0, 43)"),
            this.zoomOutGroup_.setAttribute("transform", "translate(0, 77)")),
        this.svgGroup_.setAttribute(
          "transform",
          "translate(" + this.left_ + "," + this.top_ + ")"
        ));
    }
  }),
  (Blockly.ZoomControls.prototype.createZoomOutSvg_ = function (t) {
    var e = this.workspace_;
    this.zoomOutGroup_ = Blockly.utils.dom.createSvgElement(
      "g",
      { class: "blocklyZoom" },
      this.svgGroup_
    );
    var o = Blockly.utils.dom.createSvgElement(
      "clipPath",
      { id: "blocklyZoomoutClipPath" + t },
      this.zoomOutGroup_
    );
    Blockly.utils.dom.createSvgElement("rect", { width: 32, height: 32 }, o),
      (t = Blockly.utils.dom.createSvgElement(
        "image",
        {
          width: Blockly.SPRITE.width,
          height: Blockly.SPRITE.height,
          x: -64,
          y: -92,
          "clip-path": "url(#blocklyZoomoutClipPath" + t + ")",
        },
        this.zoomOutGroup_
      )).setAttributeNS(
        Blockly.utils.dom.XLINK_NS,
        "xlink:href",
        e.options.pathToMedia + Blockly.SPRITE.url
      ),
      Blockly.bindEventWithChecks_(t, "mousedown", null, function (t) {
        e.markFocused(),
          e.zoomCenter(-1),
          Blockly.Touch.clearTouchIdentifier(),
          t.stopPropagation(),
          t.preventDefault();
      });
  }),
  (Blockly.ZoomControls.prototype.createZoomInSvg_ = function (t) {
    var e = this.workspace_;
    this.zoomInGroup_ = Blockly.utils.dom.createSvgElement(
      "g",
      { class: "blocklyZoom" },
      this.svgGroup_
    );
    var o = Blockly.utils.dom.createSvgElement(
      "clipPath",
      { id: "blocklyZoominClipPath" + t },
      this.zoomInGroup_
    );
    Blockly.utils.dom.createSvgElement("rect", { width: 32, height: 32 }, o),
      (t = Blockly.utils.dom.createSvgElement(
        "image",
        {
          width: Blockly.SPRITE.width,
          height: Blockly.SPRITE.height,
          x: -32,
          y: -92,
          "clip-path": "url(#blocklyZoominClipPath" + t + ")",
        },
        this.zoomInGroup_
      )).setAttributeNS(
        Blockly.utils.dom.XLINK_NS,
        "xlink:href",
        e.options.pathToMedia + Blockly.SPRITE.url
      ),
      Blockly.bindEventWithChecks_(t, "mousedown", null, function (t) {
        e.markFocused(),
          e.zoomCenter(1),
          Blockly.Touch.clearTouchIdentifier(),
          t.stopPropagation(),
          t.preventDefault();
      });
  }),
  (Blockly.ZoomControls.prototype.createZoomResetSvg_ = function (t) {
    var e = this.workspace_;
    this.zoomResetGroup_ = Blockly.utils.dom.createSvgElement(
      "g",
      { class: "blocklyZoom" },
      this.svgGroup_
    );
    var o = Blockly.utils.dom.createSvgElement(
      "clipPath",
      { id: "blocklyZoomresetClipPath" + t },
      this.zoomResetGroup_
    );
    Blockly.utils.dom.createSvgElement("rect", { width: 32, height: 32 }, o),
      (t = Blockly.utils.dom.createSvgElement(
        "image",
        {
          width: Blockly.SPRITE.width,
          height: Blockly.SPRITE.height,
          y: -92,
          "clip-path": "url(#blocklyZoomresetClipPath" + t + ")",
        },
        this.zoomResetGroup_
      )).setAttributeNS(
        Blockly.utils.dom.XLINK_NS,
        "xlink:href",
        e.options.pathToMedia + Blockly.SPRITE.url
      ),
      Blockly.bindEventWithChecks_(t, "mousedown", null, function (t) {
        e.markFocused(),
          e.setScale(e.options.zoomOptions.startScale),
          e.beginCanvasTransition(),
          e.scrollCenter(),
          setTimeout(e.endCanvasTransition.bind(e), 500),
          Blockly.Touch.clearTouchIdentifier(),
          t.stopPropagation(),
          t.preventDefault();
      });
  }),
  Blockly.Css.register([
    ".blocklyZoom>image, .blocklyZoom>svg>image {",
    "opacity: .4;",
    "}",
    ".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {",
    "opacity: .6;",
    "}",
    ".blocklyZoom>image:active, .blocklyZoom>svg>image:active {",
    "opacity: .8;",
    "}",
  ]),
  (Blockly.Mutator = function (t) {
    Blockly.Mutator.superClass_.constructor.call(this, null),
      (this.quarkNames_ = t);
  }),
  Blockly.utils.object.inherits(Blockly.Mutator, Blockly.Icon),
  (Blockly.Mutator.prototype.workspaceWidth_ = 0),
  (Blockly.Mutator.prototype.workspaceHeight_ = 0),
  (Blockly.Mutator.prototype.setBlock = function (t) {
    this.block_ = t;
  }),
  (Blockly.Mutator.prototype.getWorkspace = function () {
    return this.workspace_;
  }),
  (Blockly.Mutator.prototype.drawIcon_ = function (t) {
    Blockly.utils.dom.createSvgElement(
      "rect",
      {
        class: "blocklyIconShape",
        rx: "10",
        ry: "10",
        height: "16",
        width: "16",
      },
      t
    ),
      Blockly.utils.dom.createSvgElement(
        "path",
        {
          class: "blocklyIconSymbol",
          d: "m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z",
        },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "circle",
        { class: "blocklyIconShape", r: "2.7", cx: "8", cy: "8" },
        t
      );
  }),
  (Blockly.Mutator.prototype.iconClick_ = function (t) {
    this.block_.isEditable() && Blockly.Icon.prototype.iconClick_.call(this, t);
  }),
  (Blockly.Mutator.prototype.createEditor_ = function () {
    if (
      ((this.svgDialog_ = Blockly.utils.dom.createSvgElement(
        "svg",
        { x: Blockly.Bubble.BORDER_WIDTH, y: Blockly.Bubble.BORDER_WIDTH },
        null
      )),
      this.quarkNames_.length)
    )
      for (
        var t, e = Blockly.utils.xml.createElement("xml"), o = 0;
        (t = this.quarkNames_[o]);
        o++
      ) {
        var i = Blockly.utils.xml.createElement("block");
        i.setAttribute("type", t), e.appendChild(i);
      }
    else e = null;
    return (
      (e = {
        disable: !1,
        languageTree: e,
        parentWorkspace: this.block_.workspace,
        pathToMedia: this.block_.workspace.options.pathToMedia,
        RTL: this.block_.RTL,
        toolboxPosition: this.block_.RTL
          ? Blockly.TOOLBOX_AT_RIGHT
          : Blockly.TOOLBOX_AT_LEFT,
        horizontalLayout: !1,
        getMetrics: this.getFlyoutMetrics_.bind(this),
        setMetrics: null,
        renderer: this.block_.workspace.options.renderer,
      }),
      (this.workspace_ = new Blockly.WorkspaceSvg(
        e,
        this.block_.workspace.dragSurface
      )),
      (this.workspace_.isMutator = !0),
      this.workspace_.addChangeListener(Blockly.Events.disableOrphans),
      (e = this.workspace_.addFlyout("g")),
      (o = this.workspace_.createDom("blocklyMutatorBackground")).insertBefore(
        e,
        this.workspace_.svgBlockCanvas_
      ),
      this.svgDialog_.appendChild(o),
      this.svgDialog_
    );
  }),
  (Blockly.Mutator.prototype.updateEditable = function () {
    Blockly.Mutator.superClass_.updateEditable.call(this),
      this.block_.isInFlyout ||
        (this.block_.isEditable()
          ? this.iconGroup_ &&
            Blockly.utils.dom.removeClass(
              this.iconGroup_,
              "blocklyIconGroupReadonly"
            )
          : (this.setVisible(!1),
            this.iconGroup_ &&
              Blockly.utils.dom.addClass(
                this.iconGroup_,
                "blocklyIconGroupReadonly"
              )));
  }),
  (Blockly.Mutator.prototype.resizeBubble_ = function () {
    var t = 2 * Blockly.Bubble.BORDER_WIDTH,
      e = this.workspace_.getCanvas().getBBox(),
      o = this.block_.RTL ? -e.x : e.width + e.x;
    e = e.height + 3 * t;
    var i = this.workspace_.getFlyout();
    i && ((i = i.getMetrics_()), (e = Math.max(e, i.contentHeight + 20))),
      (o += 3 * t),
      (Math.abs(this.workspaceWidth_ - o) > t ||
        Math.abs(this.workspaceHeight_ - e) > t) &&
        ((this.workspaceWidth_ = o),
        (this.workspaceHeight_ = e),
        this.bubble_.setBubbleSize(o + t, e + t),
        this.svgDialog_.setAttribute("width", this.workspaceWidth_),
        this.svgDialog_.setAttribute("height", this.workspaceHeight_)),
      this.block_.RTL &&
        ((t = "translate(" + this.workspaceWidth_ + ",0)"),
        this.workspace_.getCanvas().setAttribute("transform", t)),
      this.workspace_.resize();
  }),
  (Blockly.Mutator.prototype.onBubbleMove_ = function () {
    this.workspace_ && this.workspace_.recordDeleteAreas();
  }),
  (Blockly.Mutator.prototype.setVisible = function (t) {
    if (t != this.isVisible())
      if (
        (Blockly.Events.fire(
          new Blockly.Events.Ui(this.block_, "mutatorOpen", !t, t)
        ),
        t)
      ) {
        (this.bubble_ = new Blockly.Bubble(
          this.block_.workspace,
          this.createEditor_(),
          this.block_.pathObject.svgPath,
          this.iconXY_,
          null,
          null
        )),
          this.bubble_.setSvgId(this.block_.id),
          this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));
        var e = this.workspace_.options.languageTree;
        (t = this.workspace_.getFlyout()),
          e && (t.init(this.workspace_), t.show(e.childNodes)),
          (this.rootBlock_ = this.block_.decompose(this.workspace_)),
          (e = this.rootBlock_.getDescendants(!1));
        for (var o, i = 0; (o = e[i]); i++) o.render();
        if (
          (this.rootBlock_.setMovable(!1),
          this.rootBlock_.setDeletable(!1),
          t
            ? ((e = 2 * t.CORNER_RADIUS), (t = t.getWidth() + e))
            : (t = e = 16),
          this.block_.RTL && (t = -t),
          this.rootBlock_.moveBy(t, e),
          this.block_.saveConnections)
        ) {
          var n = this,
            l = this.block_;
          l.saveConnections(this.rootBlock_),
            (this.sourceListener_ = function () {
              l.saveConnections(n.rootBlock_);
            }),
            this.block_.workspace.addChangeListener(this.sourceListener_);
        }
        this.resizeBubble_(),
          this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),
          this.applyColour();
      } else
        (this.svgDialog_ = null),
          this.workspace_.dispose(),
          (this.rootBlock_ = this.workspace_ = null),
          this.bubble_.dispose(),
          (this.bubble_ = null),
          (this.workspaceHeight_ = this.workspaceWidth_ = 0),
          this.sourceListener_ &&
            (this.block_.workspace.removeChangeListener(this.sourceListener_),
            (this.sourceListener_ = null));
  }),
  (Blockly.Mutator.prototype.workspaceChanged_ = function (t) {
    if (
      t.type != Blockly.Events.UI &&
      (t.type != Blockly.Events.CHANGE || "disabled" != t.element)
    ) {
      if (!this.workspace_.isDragging()) {
        t = this.workspace_.getTopBlocks(!1);
        for (var e, o = 0; (e = t[o]); o++) {
          var i = e.getRelativeToSurfaceXY(),
            n = e.getHeightWidth();
          20 > i.y + n.height && e.moveBy(0, 20 - n.height - i.y);
        }
      }
      if (this.rootBlock_.workspace == this.workspace_) {
        if (
          (Blockly.Events.setGroup(!0),
          (t =
            (t = (e = this.block_).mutationToDom()) &&
            Blockly.Xml.domToText(t)),
          e.compose(this.rootBlock_),
          e.initSvg(),
          e.render(),
          Blockly.getMainWorkspace().keyboardAccessibilityMode &&
            Blockly.navigation.moveCursorOnBlockMutation(e),
          t != (o = (o = e.mutationToDom()) && Blockly.Xml.domToText(o)))
        ) {
          Blockly.Events.fire(
            new Blockly.Events.BlockChange(e, "mutation", null, t, o)
          );
          var l = Blockly.Events.getGroup();
          setTimeout(function () {
            Blockly.Events.setGroup(l),
              e.bumpNeighbours(),
              Blockly.Events.setGroup(!1);
          }, Blockly.BUMP_DELAY);
        }
        this.workspace_.isDragging() || this.resizeBubble_(),
          Blockly.Events.setGroup(!1);
      }
    }
  }),
  (Blockly.Mutator.prototype.getFlyoutMetrics_ = function () {
    return {
      viewHeight: this.workspaceHeight_,
      viewWidth: this.workspaceWidth_ - this.workspace_.getFlyout().getWidth(),
      absoluteTop: 0,
      absoluteLeft: this.workspace_.RTL
        ? 0
        : this.workspace_.getFlyout().getWidth(),
    };
  }),
  (Blockly.Mutator.prototype.dispose = function () {
    (this.block_.mutator = null), Blockly.Icon.prototype.dispose.call(this);
  }),
  (Blockly.Mutator.prototype.updateBlockStyle = function () {
    var t = this.workspace_;
    if (t && t.getAllBlocks(!1)) {
      for (var e = t.getAllBlocks(!1), o = 0; o < e.length; o++) {
        var i = e[o];
        i.setStyle(i.getStyleName());
      }
      for (
        t = t.getFlyout().workspace_.getAllBlocks(!1), o = 0;
        o < t.length;
        o++
      )
        (i = t[o]).setStyle(i.getStyleName());
    }
  }),
  (Blockly.Mutator.reconnect = function (t, e, o) {
    if (!t || !t.getSourceBlock().workspace) return !1;
    o = e.getInput(o).connection;
    var i = t.targetBlock();
    return (
      !((i && i != e) || o.targetConnection == t) &&
      (o.isConnected() && o.disconnect(), o.connect(t), !0)
    );
  }),
  (Blockly.Mutator.findParentWs = function (t) {
    var e = null;
    if (t && t.options) {
      var o = t.options.parentWorkspace;
      t.isFlyout
        ? o && o.options && (e = o.options.parentWorkspace)
        : o && (e = o);
    }
    return e;
  }),
  (Blockly.FieldTextInput = function (t, e, o, i) {
    (this.spellcheck_ = !0),
      null == t && (t = ""),
      Blockly.FieldTextInput.superClass_.constructor.call(this, t, e, i),
      (this.onKeyInputWrapper_ =
        this.onKeyDownWrapper_ =
        this.htmlInput_ =
          null),
      (this.fullBlockClickTarget_ = !1),
      this.setRestrictor(o),
      this.addArgType("text");
  }),
  Blockly.utils.object.inherits(Blockly.FieldTextInput, Blockly.Field),
  (Blockly.FieldTextInput.fromJson = function (t) {
    var e = Blockly.utils.replaceMessageReferences(t.text);
    return new Blockly.FieldTextInput(e, void 0, t);
  }),
  (Blockly.FieldTextInput.ANIMATION_TIME = 0.25),
  (Blockly.FieldTextInput.TEXT_MEASURE_PADDING_MAGIC = 45),
  (Blockly.FieldTextInput.prototype.htmlInput_ = null),
  (Blockly.FieldTextInput.prototype.SERIALIZABLE = !0),
  (Blockly.FieldTextInput.BORDERRADIUS = 4),
  (Blockly.FieldTextInput.prototype.CURSOR = "text"),
  (Blockly.FieldTextInput.prototype.configure_ = function (t) {
    Blockly.FieldTextInput.superClass_.configure_.call(this, t),
      "boolean" == typeof t.spellcheck && (this.spellcheck_ = t.spellcheck);
  }),
  (Blockly.FieldTextInput.prototype.initView = function () {
    if (this.constants_.FULL_BLOCK_FIELDS) {
      for (
        var t, e = 0, o = 0, i = 0;
        (t = this.sourceBlock_.inputList[i]);
        i++
      ) {
        for (var n = 0; t.fieldRow[n]; n++) e++;
        t.connection && o++;
      }
      this.fullBlockClickTarget_ =
        1 >= e && this.sourceBlock_.outputConnection && !o;
    } else this.fullBlockClickTarget_ = !1;
    this.fullBlockClickTarget_
      ? (this.clickTarget_ = this.sourceBlock_.getSvgRoot())
      : this.createBorderRect_(),
      this.createTextElement_();
  }),
  (Blockly.FieldTextInput.prototype.autoCapitalize_ = !0),
  (Blockly.FieldTextInput.prototype.onMouseOver_ = function (t) {
    this.sourceBlock_.isInFlyout ||
      ((t = this.sourceBlock_.workspace.getGesture(t)) && t.isDragging()) ||
      (this.sourceBlock_.pathObject.svgPath &&
        Blockly.utils.dom.addClass(
          this.sourceBlock_.pathObject.svgPath,
          "blocklyFieldHover"
        ));
  }),
  (Blockly.FieldTextInput.prototype.onMouseOut_ = function (t) {
    this.sourceBlock_.isInFlyout ||
      ((t = this.sourceBlock_.workspace.getGesture(t)) && t.isDragging()) ||
      (this.sourceBlock_.pathObject.svgPath &&
        Blockly.utils.dom.removeClass(
          this.sourceBlock_.pathObject.svgPath,
          "blocklyFieldHover"
        ));
  }),
  (Blockly.FieldTextInput.prototype.dispose = function () {
    this.mouseOverWrapper_ &&
      (Blockly.unbindEvent_(this.mouseOverWrapper_),
      (this.mouseOverWrapper_ = null)),
      this.mouseOutWrapper_ &&
        (Blockly.unbindEvent_(this.mouseOutWrapper_),
        (this.mouseOutWrapper_ = null)),
      Blockly.WidgetDiv.hideIfOwner(this),
      Blockly.FieldTextInput.superClass_.dispose.call(this);
  }),
  (Blockly.FieldTextInput.prototype.doClassValidation_ = function (t) {
    return null == t ? null : String(t);
  }),
  (Blockly.FieldTextInput.prototype.doValueInvalid_ = function (t) {
    this.isBeingEdited_ &&
      ((this.isTextValid_ = !1),
      (t = this.value_),
      (this.value_ = this.htmlInput_.untypedDefaultValue_),
      this.sourceBlock_ &&
        Blockly.Events.isEnabled() &&
        Blockly.Events.fire(
          new Blockly.Events.BlockChange(
            this.sourceBlock_,
            "field",
            this.name || null,
            t,
            this.value_
          )
        ));
  }),
  (Blockly.FieldTextInput.prototype.doValueUpdate_ = function (t) {
    (this.isTextValid_ = !0),
      (this.value_ = t),
      this.isBeingEdited_ || (this.isDirty_ = !0);
  }),
  (Blockly.FieldTextInput.prototype.applyColour = function () {
    this.sourceBlock_ &&
      this.constants_.FULL_BLOCK_FIELDS &&
      (this.borderRect_
        ? this.borderRect_.setAttribute(
            "stroke",
            this.sourceBlock_.style.colourTertiary
          )
        : this.sourceBlock_.pathObject.svgPath.setAttribute(
            "fill",
            this.constants_.FIELD_BORDER_RECT_COLOUR
          ));
  }),
  (Blockly.FieldTextInput.prototype.render_ = function () {
    if (
      (Blockly.FieldTextInput.superClass_.render_.call(this),
      this.isBeingEdited_)
    ) {
      this.resizeEditor_();
      var t = this.htmlInput_;
      this.isTextValid_
        ? (Blockly.utils.dom.removeClass(t, "blocklyInvalidInput"),
          Blockly.utils.aria.setState(t, Blockly.utils.aria.State.INVALID, !1))
        : (Blockly.utils.dom.addClass(t, "blocklyInvalidInput"),
          Blockly.utils.aria.setState(t, Blockly.utils.aria.State.INVALID, !0));
    }
  }),
  (Blockly.FieldTextInput.prototype.setSpellcheck = function (t) {
    t != this.spellcheck_ &&
      ((this.spellcheck_ = t),
      this.htmlInput_ &&
        this.htmlInput_.setAttribute("spellcheck", this.spellcheck_));
  }),
  (Blockly.FieldTextInput.prototype.setAutoCapitalize = function (t) {
    this.autoCapitalize_ = t;
  }),
  (Blockly.FieldTextInput.prototype.setRestrictor = function (t) {
    this.restrictor_ = t;
  }),
  (Blockly.FieldTextInput.prototype.showEditor_ = function (t, e, o, i, n) {
    (this.workspace_ = this.sourceBlock_.workspace),
      (o = o || !1),
      !(t = e || !1) &&
      (Blockly.utils.userAgent.MOBILE ||
        Blockly.utils.userAgent.ANDROID ||
        Blockly.utils.userAgent.IPAD)
        ? this.showPromptEditor_()
        : this.showInlineEditor_(t, o, i, n);
  }),
  (Blockly.FieldTextInput.prototype.showPromptEditor_ = function () {
    var t = this;
    Blockly.prompt(
      Blockly.Msg.CHANGE_VALUE_TITLE,
      this.getText(),
      function (e) {
        t.setValue(e);
      }
    );
  }),
  (Blockly.FieldTextInput.prototype.showInlineEditor_ = function (t, e, o, i) {
    Blockly.WidgetDiv.show(
      this,
      this.sourceBlock_.RTL,
      this.widgetDispose_.bind(this)
    ),
      (this.htmlInput_ = this.widgetCreate_(e, o, i)),
      (this.isBeingEdited_ = !0),
      i && i.call(this),
      t || (this.focus(), this.htmlInput_.setSelectionRange(0, 99999));
  }),
  (Blockly.FieldTextInput.prototype.widgetCreate_ = function (t, e, o) {
    (e = Blockly.WidgetDiv.DIV),
      Blockly.utils.dom.addClass(this.getClickTarget_(), "editing"),
      ((o = document.createElement("input")).className = "blocklyHtmlInput"),
      o.setAttribute("spellcheck", this.spellcheck_),
      t && o.setAttribute("readonly", "true"),
      this.autoCapitalize_ || o.setAttribute("autocapitalize", "none"),
      (t = this.workspace_.scale);
    var i = this.constants_.FIELD_TEXT_FONTSIZE * t + "pt";
    if (
      ((e.style.fontSize = i),
      (o.style.fontSize = i),
      (i = Blockly.FieldTextInput.BORDERRADIUS * t + "px"),
      this.fullBlockClickTarget_)
    ) {
      i = ((i = this.getScaledBBox()).bottom - i.top) / 2 + "px";
      var n = this.sourceBlock_.getParent()
        ? this.sourceBlock_.getParent().style.colourTertiary
        : this.sourceBlock_.style.colourTertiary;
      (o.style.border = 1 * t + "px solid " + n),
        (e.style.borderRadius = i),
        (e.style.transition = "box-shadow 0.25s ease 0s"),
        this.constants_.FIELD_TEXTINPUT_BOX_SHADOW &&
          (e.style.boxShadow =
            "rgba(255, 255, 255, 0.3) 0px 0px 0px " + 4 * t + "px");
    }
    return (
      (o.style.borderRadius = i),
      e.appendChild(o),
      (o.value = o.defaultValue = this.getEditorText_(this.value_)),
      (o.untypedDefaultValue_ = this.value_),
      (o.oldValue_ = null),
      this.resizeEditor_(),
      this.bindInputEvents_(o),
      o
    );
  }),
  (Blockly.FieldTextInput.prototype.widgetDispose_ = function () {
    (this.isBeingEdited_ = !1),
      (this.isTextValid_ = !0),
      this.forceRerender(),
      this.onFinishEditing_ && this.onFinishEditing_(this.value_),
      this.unbindInputEvents_(),
      this.htmlInput_.dropDownArrowMouseWrapper_ &&
        Blockly.unbindEvent_(this.htmlInput_.dropDownArrowMouseWrapper_);
    var t = Blockly.WidgetDiv.DIV.style;
    (t.width = "auto"),
      (t.height = "auto"),
      (t.fontSize = ""),
      (t.transition = ""),
      (t.boxShadow = ""),
      (this.htmlInput_ = null),
      Blockly.utils.dom.removeClass(this.getClickTarget_(), "editing");
  }),
  (Blockly.FieldTextInput.prototype.bindInputEvents_ = function (t) {
    (this.onKeyDownWrapper_ = Blockly.bindEventWithChecks_(
      t,
      "keydown",
      this,
      this.onHtmlInputKeyDown_
    )),
      (this.onKeyInputWrapper_ = Blockly.bindEventWithChecks_(
        t,
        "input",
        this,
        this.onHtmlInputChange_
      ));
  }),
  (Blockly.FieldTextInput.prototype.unbindInputEvents_ = function () {
    this.onKeyDownWrapper_ &&
      (Blockly.unbindEvent_(this.onKeyDownWrapper_),
      (this.onKeyDownWrapper_ = null)),
      this.onKeyInputWrapper_ &&
        (Blockly.unbindEvent_(this.onKeyInputWrapper_),
        (this.onKeyInputWrapper_ = null));
  }),
  (Blockly.FieldTextInput.prototype.onHtmlInputKeyDown_ = function (t) {
    t.keyCode == Blockly.utils.KeyCodes.ENTER
      ? (Blockly.WidgetDiv.hide(), Blockly.DropDownDiv.hideWithoutAnimation())
      : t.keyCode == Blockly.utils.KeyCodes.ESC
      ? ((this.htmlInput_.value = this.htmlInput_.defaultValue),
        Blockly.WidgetDiv.hide(),
        Blockly.DropDownDiv.hideWithoutAnimation())
      : t.keyCode == Blockly.utils.KeyCodes.TAB &&
        (Blockly.WidgetDiv.hide(),
        Blockly.DropDownDiv.hideWithoutAnimation(),
        this.sourceBlock_.tab(this, !t.shiftKey),
        t.preventDefault());
  }),
  (Blockly.FieldTextInput.GECKO_KEYCODE_WHITELIST = [97, 99, 118, 120]),
  (Blockly.FieldTextInput.prototype.onHtmlInputChange_ = function (t) {
    if ("keypress" === t.type && this.restrictor_) {
      var e = !1;
      if (Blockly.utils.userAgent.GECKO) {
        var o = t.charCode;
        32 > o || 127 == o
          ? (e = !0)
          : (t.metaKey || t.ctrlKey) &&
            (e =
              -1 < Blockly.FieldTextInput.GECKO_KEYCODE_WHITELIST.indexOf(o));
      } else o = t.keyCode;
      if (
        ((o = String.fromCharCode(o)),
        !e && !this.restrictor_.test(o) && t.preventDefault)
      )
        return void t.preventDefault();
    }
    (t = this.htmlInput_.value) !== this.htmlInput_.oldValue_ &&
      ((this.htmlInput_.oldValue_ = t),
      Blockly.Events.setGroup(!0),
      (t = this.getValueFromEditorText_(t)),
      this.setValue(t),
      this.forceRerender(),
      this.resizeEditor_(),
      Blockly.Events.setGroup(!1)),
      (this.text_ = this.htmlInput_.value),
      this.forceRerender(),
      Blockly.Events.setGroup(!1),
      this.resizeEditor_();
  }),
  (Blockly.FieldTextInput.prototype.focus = function () {
    this.htmlInput_.focus({ preventScroll: !0 }), this.htmlInput_.select();
  }),
  (Blockly.FieldTextInput.prototype.setEditorValue_ = function (t) {
    (this.isDirty_ = !0),
      this.isBeingEdited_ && (this.htmlInput_.value = this.getEditorText_(t)),
      this.setValue(t);
  }),
  (Blockly.FieldTextInput.prototype.resizeEditor_ = function () {
    var t = Blockly.WidgetDiv.DIV,
      e = this.getScaledBBox();
    (t.style.width = e.right - e.left + "px"),
      (t.style.height = e.bottom - e.top + "px"),
      (e = new Blockly.utils.Coordinate(
        this.sourceBlock_.RTL ? e.right - t.offsetWidth : e.left,
        e.top
      )),
      (t.style.left = e.x + "px"),
      (t.style.top = e.y + "px");
  }),
  (Blockly.FieldTextInput.prototype.getBorderRadius = function () {
    return this.sourceBlock_.getOutputShape() == Blockly.OUTPUT_SHAPE_ROUND
      ? Blockly.BlockSvg.NUMBER_FIELD_CORNER_RADIUS
      : Blockly.BlockSvg.TEXT_FIELD_CORNER_RADIUS;
  }),
  (Blockly.FieldTextInput.prototype.maybeSaveEdit_ = function () {
    var t = this.htmlInput_,
      e = t.value;
    this.sourceBlock_ &&
      (null === (e = this.callValidator(e))
        ? (e = t.defaultValue)
        : this.onFinishEditing_ && this.onFinishEditing_(e)),
      this.setText(e),
      this.sourceBlock_.rendered && this.sourceBlock_.render(),
      this.sourceBlock_.workspace &&
        Blockly.Events.fire(
          new Blockly.Events.Ui(this.sourceBlock_, "saveEdit", void 0, e)
        );
  }),
  (Blockly.FieldTextInput.numberValidator = function (t) {
    return (
      console.warn(
        "Blockly.FieldTextInput.numberValidator is deprecated. Use Blockly.FieldNumber instead."
      ),
      null === t
        ? null
        : ((t = (t = (t = String(t)).replace(/O/gi, "0")).replace(/,/g, "")),
          (t = Number(t || 0)),
          isNaN(t) ? null : String(t))
    );
  }),
  (Blockly.FieldTextInput.nonnegativeIntegerValidator = function (t) {
    return (
      (t = Blockly.FieldTextInput.numberValidator(t)) &&
        (t = String(Math.max(0, Math.floor(t)))),
      t
    );
  }),
  (Blockly.FieldTextInput.prototype.isTabNavigable = function () {
    return !0;
  }),
  (Blockly.FieldTextInput.prototype.getText_ = function () {
    return this.isBeingEdited_ && this.htmlInput_
      ? this.htmlInput_.value
      : null;
  }),
  (Blockly.FieldTextInput.prototype.getEditorText_ = function (t) {
    return String(t);
  }),
  (Blockly.FieldTextInput.prototype.getValueFromEditorText_ = function (t) {
    return t;
  }),
  Blockly.fieldRegistry.register("field_input", Blockly.FieldTextInput),
  (Blockly.FieldAngle = function (t, e, o) {
    (this.clockwise_ = Blockly.FieldAngle.CLOCKWISE),
      (this.offset_ = Blockly.FieldAngle.OFFSET),
      (this.wrap_ = Blockly.FieldAngle.WRAP),
      (this.round_ = Blockly.FieldAngle.ROUND),
      Blockly.FieldAngle.superClass_.constructor.call(this, t || 0, e, o),
      (this.moveSurfaceWrapper_ =
        this.clickSurfaceWrapper_ =
        this.clickWrapper_ =
        this.line_ =
        this.gauge_ =
          null),
      this.addArgType("angle");
  }),
  Blockly.utils.object.inherits(Blockly.FieldAngle, Blockly.FieldTextInput),
  (Blockly.FieldAngle.fromJson = function (t) {
    return new Blockly.FieldAngle(t.angle, void 0, t);
  }),
  (Blockly.FieldAngle.prototype.SERIALIZABLE = !0),
  (Blockly.FieldAngle.ROUND = 15),
  (Blockly.FieldAngle.HALF = 60),
  (Blockly.FieldAngle.CLOCKWISE = !0),
  (Blockly.FieldAngle.OFFSET = 90),
  (Blockly.FieldAngle.WRAP = 180),
  (Blockly.FieldAngle.HANDLE_RADIUS = 10),
  (Blockly.FieldAngle.ARROW_WIDTH = Blockly.FieldAngle.HANDLE_RADIUS),
  (Blockly.FieldAngle.RADIUS =
    Blockly.FieldAngle.HALF - Blockly.FieldAngle.HANDLE_RADIUS - 1),
  (Blockly.FieldAngle.CENTER_RADIUS = 2),
  (Blockly.FieldAngle.ARROW_SVG_DATAURI =
    "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgd2lkdGg9IjhweCIKICAgaGVpZ2h0PSIxMHB4IgogICB2aWV3Qm94PSIwIDAgOCAxMCIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnMiIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC45MSByMTM3MjUiCiAgIHNvZGlwb2RpOmRvY25hbWU9ImFycm93LnN2ZyI+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhMTYiPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTE3OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI3MTAiCiAgICAgaWQ9Im5hbWVkdmlldzE0IgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIyMy42IgogICAgIGlua3NjYXBlOmN4PSI0IgogICAgIGlua3NjYXBlOmN5PSI1IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMiIgLz4KICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjIgKDM5MDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICA8dGl0bGUKICAgICBpZD0idGl0bGU0Ij5hcnJvdzwvdGl0bGU+CiAgPGRlc2MKICAgICBpZD0iZGVzYzYiPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4IiAvPgogIDxnCiAgICAgaWQ9IlBhZ2UtMSIKICAgICBzdHJva2U9Im5vbmUiCiAgICAgc3Ryb2tlLXdpZHRoPSIxIgogICAgIGZpbGw9Im5vbmUiCiAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgIHRyYW5zZm9ybT0icm90YXRlKDkwLCA0LCA1KSIKICAgICBzdHlsZT0iZmlsbDojMDAwMDAwIj4KICAgIDxnCiAgICAgICBpZD0iYXJyb3ciCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNC4wMDAwMDAsIC0zLjAwMDAwMCkiCiAgICAgICBmaWxsPSIjNEM5N0ZGIgogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMCI+CiAgICAgIDxwYXRoCiAgICAgICAgIGQ9Ik04LjAxODkxMDgzLDYuNjgyMjMwNTUgTDMuNTA5OTE2MDEsNy40MzM3Mjk2OSBDMy4yNDY3OTEzMSw3LjQ3NzU4MzggMy4wMTg5MTA4Myw3LjczOTQyMTUxIDMuMDE4OTEwODMsOC4wMTU1NjM4OCBDMy4wMTg5MTA4Myw4LjI4MzYzMDI5IDMuMjM4NzQxMzQsOC41NTIyMDIzIDMuNTA5OTE2MDEsOC41OTczOTgwOCBMOC4wMTg5MTA4Myw5LjM0ODg5NzIyIEw4LjAxODkxMDgzLDExLjAxODUzMzcgQzguMDE4OTEwODMsMTEuNTYyNTI3NiA4LjM4MzI2Njg2LDExLjc1MjAwMzIgOC44MzI3MjI3OSwxMS40MjY4ODQ3IEwxMi42NDEwMTc2LDguNjcyMTE1ODcgQzEzLjA5ODE2MzgsOC4zNDE0MzQ1NSAxMy4wOTU3MjIzLDcuODE0NzA1MTggMTIuNjUyNzQxMSw3LjQ4MzIwODA2IEw4LjgyMDk5OTM2LDQuNjE1NzkyNTMgQzguMzc1NTc2NjQsNC4yODI0NjgzOCA4LjAxODkxMDgzLDQuNDYxOTQ5NDggOC4wMTg5MTA4Myw1LjAxMjU5NDAyIEw4LjAxODkxMDgzLDYuNjgyMjMwNTUgWiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4wMDE2NzMsIDguMDE3MjM3KSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC04LjAwMTY3MywgLTguMDE3MjM3KSAiCiAgICAgICAgIGlkPSJwYXRoMTIiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDAiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"),
  (Blockly.FieldAngle.prototype.configure_ = function (t) {
    switch ((Blockly.FieldAngle.superClass_.configure_.call(this, t), t.mode)) {
      case "compass":
        (this.clockwise_ = !0), (this.offset_ = 90);
        break;
      case "protractor":
        (this.clockwise_ = !1), (this.offset_ = 0);
    }
    var e = t.clockwise;
    "boolean" == typeof e && (this.clockwise_ = e),
      null != (e = t.offset) &&
        ((e = Number(e)), isNaN(e) || (this.offset_ = e)),
      null != (e = t.wrap) && ((e = Number(e)), isNaN(e) || (this.wrap_ = e)),
      null != (t = t.round) && ((t = Number(t)), isNaN(t) || (this.round_ = t));
  }),
  (Blockly.FieldAngle.prototype.initView = function () {
    Blockly.FieldAngle.superClass_.initView.call(this),
      (this.symbol_ = Blockly.utils.dom.createSvgElement("tspan", {}, null)),
      this.symbol_.appendChild(document.createTextNode("°")),
      this.textElement_.appendChild(this.symbol_);
  }),
  (Blockly.FieldAngle.prototype.render_ = function () {
    Blockly.FieldAngle.superClass_.render_.call(this), this.updateGraph_();
  }),
  (Blockly.FieldAngle.prototype.showEditor_ = function (t) {
    Blockly.FieldAngle.superClass_.showEditor_.call(
      this,
      t,
      Blockly.utils.userAgent.MOBILE ||
        Blockly.utils.userAgent.ANDROID ||
        Blockly.utils.userAgent.IPAD
    ),
      (t = this.dropdownCreate_()),
      Blockly.DropDownDiv.getContentDiv().appendChild(t),
      Blockly.DropDownDiv.setColour(
        this.sourceBlock_.style.colourPrimary,
        this.sourceBlock_.style.colourTertiary
      ),
      Blockly.DropDownDiv.showPositionedByField(
        this,
        this.dropdownDispose_.bind(this)
      ),
      this.updateGraph_();
  }),
  (Blockly.FieldAngle.prototype.dropdownCreate_ = function () {
    var t = Blockly.utils.dom.createSvgElement(
        "svg",
        {
          xmlns: Blockly.utils.dom.SVG_NS,
          "xmlns:html": Blockly.utils.dom.HTML_NS,
          "xmlns:xlink": Blockly.utils.dom.XLINK_NS,
          version: "1.1",
          height: 2 * Blockly.FieldAngle.HALF + "px",
          width: 2 * Blockly.FieldAngle.HALF + "px",
          style: "touch-action: none",
        },
        null
      ),
      e = Blockly.utils.dom.createSvgElement(
        "circle",
        {
          cx: Blockly.FieldAngle.HALF,
          cy: Blockly.FieldAngle.HALF,
          r: Blockly.FieldAngle.RADIUS,
          class: "blocklyAngleCircle",
        },
        t
      );
    (this.gauge_ = Blockly.utils.dom.createSvgElement(
      "path",
      { class: "blocklyAngleGauge" },
      t
    )),
      (this.line_ = Blockly.utils.dom.createSvgElement(
        "line",
        {
          x1: Blockly.FieldAngle.HALF,
          y1: Blockly.FieldAngle.HALF,
          class: "blocklyAngleLine",
        },
        t
      ));
    var o = (Math.PI * Blockly.FieldAngle.OFFSET) / 180;
    for (
      Blockly.utils.dom.createSvgElement(
        "line",
        {
          x1: Blockly.FieldAngle.HALF,
          y1: Blockly.FieldAngle.HALF,
          x2: Blockly.FieldAngle.HALF + Blockly.FieldAngle.RADIUS * Math.cos(o),
          y2: Blockly.FieldAngle.HALF - Blockly.FieldAngle.RADIUS * Math.sin(o),
          class: "blocklyAngleLine",
        },
        t
      ),
        o = 0;
      360 > o;
      o += 15
    )
      Blockly.utils.dom.createSvgElement(
        "line",
        {
          x1: Blockly.FieldAngle.HALF + Blockly.FieldAngle.RADIUS - 13,
          y1: Blockly.FieldAngle.HALF,
          x2: Blockly.FieldAngle.HALF + Blockly.FieldAngle.RADIUS - 7,
          y2: Blockly.FieldAngle.HALF,
          class: "blocklyAngleMarks",
          transform:
            "rotate(" +
            o +
            "," +
            Blockly.FieldAngle.HALF +
            "," +
            Blockly.FieldAngle.HALF +
            ")",
        },
        t
      );
    return (
      Blockly.utils.dom.createSvgElement(
        "circle",
        {
          cx: Blockly.FieldAngle.HALF,
          cy: Blockly.FieldAngle.HALF,
          r: Blockly.FieldAngle.CENTER_RADIUS,
          class: "blocklyAngleCenterPoint",
        },
        t
      ),
      (this.handle_ = Blockly.utils.dom.createSvgElement("g", {}, t)),
      Blockly.utils.dom.createSvgElement(
        "circle",
        {
          cx: 0,
          cy: 0,
          r: Blockly.FieldAngle.HANDLE_RADIUS,
          class: "blocklyAngleDragHandle",
        },
        this.handle_
      ),
      (this.arrowSvg_ = Blockly.utils.dom.createSvgElement(
        "image",
        {
          width: Blockly.FieldAngle.ARROW_WIDTH,
          height: Blockly.FieldAngle.ARROW_WIDTH,
          x: -Blockly.FieldAngle.ARROW_WIDTH / 2,
          y: -Blockly.FieldAngle.ARROW_WIDTH / 2,
        },
        this.handle_
      )),
      this.arrowSvg_.setAttributeNS(
        "http://www.w3.org/1999/xlink",
        "xlink:href",
        Blockly.FieldAngle.ARROW_SVG_DATAURI
      ),
      (this.clickWrapper_ = Blockly.bindEventWithChecks_(
        t,
        "click",
        this,
        this.hide_
      )),
      (this.clickSurfaceWrapper_ = Blockly.bindEventWithChecks_(
        e,
        "click",
        this,
        this.onMouseMove_,
        !0,
        !0
      )),
      (this.moveSurfaceWrapper_ = Blockly.bindEventWithChecks_(
        e,
        "mousemove",
        this,
        this.onMouseMove_,
        !0,
        !0
      )),
      t
    );
  }),
  (Blockly.FieldAngle.prototype.dropdownDispose_ = function () {
    this.clickWrapper_ &&
      (Blockly.unbindEvent_(this.clickWrapper_), (this.clickWrapper_ = null)),
      this.clickSurfaceWrapper_ &&
        (Blockly.unbindEvent_(this.clickSurfaceWrapper_),
        (this.clickSurfaceWrapper_ = null)),
      this.moveSurfaceWrapper_ &&
        (Blockly.unbindEvent_(this.moveSurfaceWrapper_),
        (this.moveSurfaceWrapper_ = null)),
      (this.line_ = this.gauge_ = null);
  }),
  (Blockly.FieldAngle.prototype.onMouseUp = function () {
    Blockly.unbindEvent_(this.mouseMoveWrapper_),
      Blockly.unbindEvent_(this.mouseUpWrapper_);
  }),
  (Blockly.FieldAngle.prototype.onMouseMove_ = function (t) {
    var e = this.gauge_.ownerSVGElement.getBoundingClientRect(),
      o = t.clientX - e.left - Blockly.FieldAngle.HALF;
    (t = t.clientY - e.top - Blockly.FieldAngle.HALF),
      (e = Math.atan(-t / o)),
      isNaN(e) ||
        ((e = Blockly.utils.math.toDegrees(e)),
        0 > o ? (e += 180) : 0 < t && (e += 360),
        (e = this.clockwise_
          ? this.offset_ + 360 - e
          : 360 - (this.offset_ - e)),
        this.displayMouseOrKeyboardValue_(e));
  }),
  (Blockly.FieldAngle.prototype.displayMouseOrKeyboardValue_ = function (t) {
    this.round_ && (t = Math.round(t / this.round_) * this.round_),
      (t = this.wrapValue_(t)) != this.value_ && this.setEditorValue_(t);
  }),
  (Blockly.FieldAngle.prototype.updateGraph_ = function () {
    if (this.gauge_) {
      var t = Number(this.getText()) + this.offset_,
        e = Blockly.utils.math.toRadians(t % 360);
      t = ["M ", Blockly.FieldAngle.HALF, ",", Blockly.FieldAngle.HALF];
      var o = Blockly.FieldAngle.HALF,
        i = Blockly.FieldAngle.HALF;
      if (!isNaN(e)) {
        var n = Number(this.clockwise_),
          l = Blockly.utils.math.toRadians(this.offset_),
          r = Math.cos(l) * Blockly.FieldAngle.RADIUS,
          s = Math.sin(l) * -Blockly.FieldAngle.RADIUS;
        n && (e = 2 * l - e),
          (o += Math.cos(e) * Blockly.FieldAngle.RADIUS),
          (i -= Math.sin(e) * Blockly.FieldAngle.RADIUS),
          (e = Math.abs(Math.floor((e - l) / Math.PI) % 2)),
          n && (e = 1 - e),
          t.push(
            " l ",
            r,
            ",",
            s,
            " A ",
            Blockly.FieldAngle.RADIUS,
            ",",
            Blockly.FieldAngle.RADIUS,
            " 0 ",
            e,
            " ",
            n,
            " ",
            o,
            ",",
            i,
            " z"
          );
      }
      this.gauge_.setAttribute("d", t.join("")),
        this.line_.setAttribute("x2", o),
        this.line_.setAttribute("y2", i),
        this.handle_.setAttribute(
          "transform",
          "translate(" + o + "," + i + ")"
        );
    }
  }),
  (Blockly.FieldAngle.prototype.onHtmlInputKeyDown_ = function (t) {
    var e;
    if (
      (Blockly.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this, t),
      t.keyCode === Blockly.utils.KeyCodes.LEFT
        ? (e = this.sourceBlock_.RTL ? 1 : -1)
        : t.keyCode === Blockly.utils.KeyCodes.RIGHT
        ? (e = this.sourceBlock_.RTL ? -1 : 1)
        : t.keyCode === Blockly.utils.KeyCodes.DOWN
        ? (e = -1)
        : t.keyCode === Blockly.utils.KeyCodes.UP && (e = 1),
      e)
    ) {
      var o = this.getValue();
      this.displayMouseOrKeyboardValue_(o + e * this.round_),
        t.preventDefault(),
        t.stopPropagation();
    }
  }),
  (Blockly.FieldAngle.prototype.doClassValidation_ = function (t) {
    return (
      (t = Number(t)), isNaN(t) || !isFinite(t) ? null : this.wrapValue_(t)
    );
  }),
  (Blockly.FieldAngle.prototype.wrapValue_ = function (t) {
    return 0 > (t %= 360) && (t += 360), t > this.wrap_ && (t -= 360), t;
  }),
  Blockly.Css.register(
    ".blocklyAngleCenterPoint {,stroke: #fff;,stroke-width: 1;,fill: #fff;,},.blocklyAngleDragHandle {,stroke: #fff;,stroke-width: 5;,stroke-opacity: 0.25;,fill: #fff;,cursor: pointer;,},.blocklyAngleMarks {,stroke: #fff;,stroke-width: 1;,stroke-opacity: 0.5;,},.blocklyAngleGauge {,fill: #fff;,fill-opacity: 0.20;,},.blocklyAngleLine {,stroke: #fff;,stroke-width: 1;,stroke-linecap: round;,pointer-events: none;,}".split(
      ","
    )
  ),
  Blockly.fieldRegistry.register("field_angle", Blockly.FieldAngle),
  (Blockly.FieldCheckbox = function (t, e, o) {
    (this.checkChar_ = null),
      null == t && (t = "FALSE"),
      Blockly.FieldCheckbox.superClass_.constructor.call(this, t, e, o),
      this.addArgType("checkbox");
  }),
  Blockly.utils.object.inherits(Blockly.FieldCheckbox, Blockly.Field),
  (Blockly.FieldCheckbox.fromJson = function (t) {
    return new Blockly.FieldCheckbox(t.checked, void 0, t);
  }),
  (Blockly.FieldCheckbox.CHECK_CHAR = "✓"),
  (Blockly.FieldCheckbox.prototype.SERIALIZABLE = !0),
  (Blockly.FieldCheckbox.prototype.CURSOR = "default"),
  (Blockly.FieldCheckbox.prototype.isDirty_ = !1),
  (Blockly.FieldCheckbox.prototype.configure_ = function (t) {
    Blockly.FieldCheckbox.superClass_.configure_.call(this, t),
      t.checkCharacter && (this.checkChar_ = t.checkCharacter);
  }),
  (Blockly.FieldCheckbox.prototype.initView = function () {
    (this.size_.width = this.constants_.FIELD_CHECKBOX_DEFAULT_WIDTH),
      Blockly.FieldCheckbox.superClass_.initView.call(this),
      this.textElement_.setAttribute(
        "x",
        this.constants_.FIELD_CHECKBOX_X_OFFSET
      ),
      this.textElement_.setAttribute(
        "y",
        this.constants_.FIELD_CHECKBOX_Y_OFFSET
      ),
      this.textElement_.removeAttribute("dominant-baseline"),
      Blockly.utils.dom.addClass(this.textElement_, "blocklyCheckbox"),
      (this.textContent_.nodeValue =
        this.checkChar_ || Blockly.FieldCheckbox.CHECK_CHAR),
      (this.textElement_.style.display = this.value_ ? "block" : "none");
  }),
  (Blockly.FieldCheckbox.prototype.setCheckCharacter = function (t) {
    (this.checkChar_ = t),
      this.textContent_ &&
        (this.textContent_.nodeValue = t || Blockly.FieldCheckbox.CHECK_CHAR);
  }),
  (Blockly.FieldCheckbox.prototype.showEditor_ = function () {
    this.setValue(!this.value_);
  }),
  (Blockly.FieldCheckbox.prototype.doClassValidation_ = function (t) {
    return !0 === t || "TRUE" === t
      ? "TRUE"
      : !1 === t || "FALSE" === t
      ? "FALSE"
      : null;
  }),
  (Blockly.FieldCheckbox.prototype.doValueUpdate_ = function (t) {
    (this.value_ = this.convertValueToBool_(t)),
      this.textElement_ &&
        (this.textElement_.style.display = this.value_ ? "block" : "none");
  }),
  (Blockly.FieldCheckbox.prototype.getValue = function () {
    return this.value_ ? "TRUE" : "FALSE";
  }),
  (Blockly.FieldCheckbox.prototype.getValueBoolean = function () {
    return this.value_;
  }),
  (Blockly.FieldCheckbox.prototype.getText = function () {
    return String(this.convertValueToBool_(this.value_));
  }),
  (Blockly.FieldCheckbox.prototype.convertValueToBool_ = function (t) {
    return "string" == typeof t ? "TRUE" == t : !!t;
  }),
  Blockly.fieldRegistry.register("field_checkbox", Blockly.FieldCheckbox),
  (Blockly.FieldColour = function (t, e, o) {
    Blockly.FieldColour.superClass_.constructor.call(this, t, e, o),
      (this.onKeyDownWrapper_ =
        this.onMouseLeaveWrapper_ =
        this.onMouseEnterWrapper_ =
        this.onMouseMoveWrapper_ =
        this.onClickWrapper_ =
        this.highlightedIndex_ =
        this.picker_ =
          null),
      this.addArgType("colour");
  }),
  Blockly.utils.object.inherits(Blockly.FieldColour, Blockly.Field),
  (Blockly.FieldColour.fromJson = function (t) {
    return new Blockly.FieldColour(t.colour, void 0, t);
  }),
  (Blockly.FieldColour.prototype.SERIALIZABLE = !0),
  (Blockly.FieldColour.prototype.CURSOR = "default"),
  (Blockly.FieldColour.prototype.isDirty_ = !1),
  (Blockly.FieldColour.prototype.colours_ = null),
  (Blockly.FieldColour.prototype.titles_ = null),
  (Blockly.FieldColour.prototype.columns_ = 0),
  (Blockly.FieldColour.prototype.configure_ = function (t) {
    Blockly.FieldColour.superClass_.configure_.call(this, t),
      t.colourOptions &&
        ((this.colours_ = t.colourOptions), (this.titles_ = t.colourTitles)),
      t.columns && (this.columns_ = t.columns);
  }),
  (Blockly.FieldColour.prototype.initView = function () {
    (this.size_ = new Blockly.utils.Size(
      this.constants_.FIELD_COLOUR_DEFAULT_WIDTH,
      this.constants_.FIELD_COLOUR_DEFAULT_HEIGHT
    )),
      this.constants_.FIELD_COLOUR_FULL_BLOCK
        ? (this.clickTarget_ = this.sourceBlock_.getSvgRoot())
        : (this.createBorderRect_(),
          (this.borderRect_.style.fillOpacity = "1"));
  }),
  (Blockly.FieldColour.prototype.applyColour = function () {
    this.constants_.FIELD_COLOUR_FULL_BLOCK
      ? (this.sourceBlock_.pathObject.svgPath.setAttribute(
          "fill",
          this.getValue()
        ),
        this.sourceBlock_.pathObject.svgPath.setAttribute("stroke", "#fff"))
      : this.borderRect_ && (this.borderRect_.style.fill = this.getValue());
  }),
  (Blockly.FieldColour.prototype.doClassValidation_ = function (t) {
    return "string" != typeof t ? null : Blockly.utils.colour.parse(t);
  }),
  (Blockly.FieldColour.prototype.doValueUpdate_ = function (t) {
    (this.value_ = t),
      this.borderRect_
        ? (this.borderRect_.style.fill = t)
        : this.sourceBlock_ &&
          (this.sourceBlock_.pathObject.svgPath.setAttribute("fill", t),
          this.sourceBlock_.pathObject.svgPath.setAttribute("stroke", "#fff"));
  }),
  (Blockly.FieldColour.prototype.getText = function () {
    var t = this.value_;
    return /^#(.)\1(.)\2(.)\3$/.test(t) && (t = "#" + t[1] + t[3] + t[5]), t;
  }),
  (Blockly.FieldColour.COLOURS =
    "#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(
      " "
    )),
  (Blockly.FieldColour.TITLES = []),
  (Blockly.FieldColour.COLUMNS = 7),
  (Blockly.FieldColour.prototype.setColours = function (t, e) {
    return (this.colours_ = t), e && (this.titles_ = e), this;
  }),
  (Blockly.FieldColour.prototype.setColumns = function (t) {
    return (this.columns_ = t), this;
  }),
  (Blockly.FieldColour.prototype.showEditor_ = function () {
    (this.picker_ = this.dropdownCreate_()),
      Blockly.DropDownDiv.getContentDiv().appendChild(this.picker_),
      Blockly.DropDownDiv.showPositionedByField(
        this,
        this.dropdownDispose_.bind(this)
      ),
      this.picker_.focus({ preventScroll: !0 });
  }),
  (Blockly.FieldColour.prototype.onClick_ = function (t) {
    null !== (t = (t = t.target) && t.label) &&
      (this.setValue(t), Blockly.DropDownDiv.hideIfOwner(this));
  }),
  (Blockly.FieldColour.prototype.onKeyDown_ = function (t) {
    var e = !1;
    t.keyCode === Blockly.utils.KeyCodes.UP
      ? (this.moveHighlightBy_(0, -1), (e = !0))
      : t.keyCode === Blockly.utils.KeyCodes.DOWN
      ? (this.moveHighlightBy_(0, 1), (e = !0))
      : t.keyCode === Blockly.utils.KeyCodes.LEFT
      ? (this.moveHighlightBy_(-1, 0), (e = !0))
      : t.keyCode === Blockly.utils.KeyCodes.RIGHT
      ? (this.moveHighlightBy_(1, 0), (e = !0))
      : t.keyCode === Blockly.utils.KeyCodes.ENTER &&
        ((e = this.getHighlighted_()) &&
          null !== (e = e && e.label) &&
          this.setValue(e),
        Blockly.DropDownDiv.hideWithoutAnimation(),
        (e = !0)),
      e && t.stopPropagation();
  }),
  (Blockly.FieldColour.prototype.onBlocklyAction = function (t) {
    if (this.picker_) {
      if (t === Blockly.navigation.ACTION_PREVIOUS)
        return this.moveHighlightBy_(0, -1), !0;
      if (t === Blockly.navigation.ACTION_NEXT)
        return this.moveHighlightBy_(0, 1), !0;
      if (t === Blockly.navigation.ACTION_OUT)
        return this.moveHighlightBy_(-1, 0), !0;
      if (t === Blockly.navigation.ACTION_IN)
        return this.moveHighlightBy_(1, 0), !0;
    }
    return Blockly.FieldColour.superClass_.onBlocklyAction.call(this, t);
  }),
  (Blockly.FieldColour.prototype.moveHighlightBy_ = function (t, e) {
    var o = this.colours_ || Blockly.FieldColour.COLOURS,
      i = this.columns_ || Blockly.FieldColour.COLUMNS,
      n = this.highlightedIndex_ % i,
      l = Math.floor(this.highlightedIndex_ / i);
    (n += t),
      (l += e),
      0 > t
        ? 0 > n && 0 < l
          ? ((n = i - 1), l--)
          : 0 > n && (n = 0)
        : 0 < t
        ? n > i - 1 && l < Math.floor(o.length / i) - 1
          ? ((n = 0), l++)
          : n > i - 1 && n--
        : 0 > e
        ? 0 > l && (l = 0)
        : 0 < e &&
          l > Math.floor(o.length / i) - 1 &&
          (l = Math.floor(o.length / i) - 1),
      this.setHighlightedCell_(
        this.picker_.childNodes[l].childNodes[n],
        l * i + n
      );
  }),
  (Blockly.FieldColour.prototype.onMouseMove_ = function (t) {
    var e = (t = t.target) && Number(t.getAttribute("data-index"));
    null !== e &&
      e !== this.highlightedIndex_ &&
      this.setHighlightedCell_(t, e);
  }),
  (Blockly.FieldColour.prototype.onMouseEnter_ = function () {
    this.picker_.focus({ preventScroll: !0 });
  }),
  (Blockly.FieldColour.prototype.onMouseLeave_ = function () {
    this.picker_.blur();
    var t = this.getHighlighted_();
    t && Blockly.utils.dom.removeClass(t, "blocklyColourHighlighted");
  }),
  (Blockly.FieldColour.prototype.getHighlighted_ = function () {
    var t = this.columns_ || Blockly.FieldColour.COLUMNS,
      e = this.picker_.childNodes[Math.floor(this.highlightedIndex_ / t)];
    return e ? e.childNodes[this.highlightedIndex_ % t] : null;
  }),
  (Blockly.FieldColour.prototype.setHighlightedCell_ = function (t, e) {
    var o = this.getHighlighted_();
    o && Blockly.utils.dom.removeClass(o, "blocklyColourHighlighted"),
      Blockly.utils.dom.addClass(t, "blocklyColourHighlighted"),
      (this.highlightedIndex_ = e),
      Blockly.utils.aria.setState(
        this.picker_,
        Blockly.utils.aria.State.ACTIVEDESCENDANT,
        t.getAttribute("id")
      );
  }),
  (Blockly.FieldColour.prototype.dropdownCreate_ = function () {
    var t = this.columns_ || Blockly.FieldColour.COLUMNS,
      e = this.colours_ || Blockly.FieldColour.COLOURS,
      o = this.titles_ || Blockly.FieldColour.TITLES,
      i = this.getValue(),
      n = document.createElement("table");
    (n.className = "blocklyColourTable"),
      (n.tabIndex = 0),
      (n.dir = "ltr"),
      Blockly.utils.aria.setRole(n, Blockly.utils.aria.Role.GRID),
      Blockly.utils.aria.setState(n, Blockly.utils.aria.State.EXPANDED, !0),
      Blockly.utils.aria.setState(
        n,
        Blockly.utils.aria.State.ROWCOUNT,
        Math.floor(e.length / t)
      ),
      Blockly.utils.aria.setState(n, Blockly.utils.aria.State.COLCOUNT, t);
    for (var l, r = 0; r < e.length; r++) {
      0 == r % t &&
        ((l = document.createElement("tr")),
        Blockly.utils.aria.setRole(l, Blockly.utils.aria.Role.ROW),
        n.appendChild(l));
      var s = document.createElement("td");
      l.appendChild(s),
        (s.label = e[r]),
        (s.title = o[r] || e[r]),
        (s.id = Blockly.utils.IdGenerator.getNextUniqueId()),
        s.setAttribute("data-index", r),
        Blockly.utils.aria.setRole(s, Blockly.utils.aria.Role.GRIDCELL),
        Blockly.utils.aria.setState(s, Blockly.utils.aria.State.LABEL, e[r]),
        Blockly.utils.aria.setState(
          s,
          Blockly.utils.aria.State.SELECTED,
          e[r] == i
        ),
        (s.style.backgroundColor = e[r]),
        e[r] == i &&
          ((s.className = "blocklyColourSelected"),
          (this.highlightedIndex_ = r));
    }
    return (
      (this.onClickWrapper_ = Blockly.bindEventWithChecks_(
        n,
        "click",
        this,
        this.onClick_,
        !0
      )),
      (this.onMouseMoveWrapper_ = Blockly.bindEventWithChecks_(
        n,
        "mousemove",
        this,
        this.onMouseMove_,
        !0
      )),
      (this.onMouseEnterWrapper_ = Blockly.bindEventWithChecks_(
        n,
        "mouseenter",
        this,
        this.onMouseEnter_,
        !0
      )),
      (this.onMouseLeaveWrapper_ = Blockly.bindEventWithChecks_(
        n,
        "mouseleave",
        this,
        this.onMouseLeave_,
        !0
      )),
      (this.onKeyDownWrapper_ = Blockly.bindEventWithChecks_(
        n,
        "keydown",
        this,
        this.onKeyDown_
      )),
      n
    );
  }),
  (Blockly.FieldColour.prototype.dropdownDispose_ = function () {
    this.onClickWrapper_ &&
      (Blockly.unbindEvent_(this.onClickWrapper_),
      (this.onClickWrapper_ = null)),
      this.onMouseMoveWrapper_ &&
        (Blockly.unbindEvent_(this.onMouseMoveWrapper_),
        (this.onMouseMoveWrapper_ = null)),
      this.onMouseEnterWrapper_ &&
        (Blockly.unbindEvent_(this.onMouseEnterWrapper_),
        (this.onMouseEnterWrapper_ = null)),
      this.onMouseLeaveWrapper_ &&
        (Blockly.unbindEvent_(this.onMouseLeaveWrapper_),
        (this.onMouseLeaveWrapper_ = null)),
      this.onKeyDownWrapper_ &&
        (Blockly.unbindEvent_(this.onKeyDownWrapper_),
        (this.onKeyDownWrapper_ = null)),
      (this.highlightedIndex_ = this.picker_ = null);
  }),
  Blockly.Css.register([
    ".blocklyColourTable {",
    "outline: none;",
    "border-radius: 11px;",
    "border-collapse: separate;",
    "border-spacing: 4px;",
    "}",
    ".blocklyColourTable > tr > td {",
    "height: 22px;",
    "width: 22px;",
    "margin: 0;",
    "border: 0;",
    "text-align: center;",
    "cursor: pointer;",
    "border-radius: 4px;",
    "border: 2px solid rgba(0,0,0,.1);",
    "}",
    ".blocklyColourTable > tr > td:hover {",
    "border: 1px solid #FFF;",
    "box-sizing: border-box;",
    "}",
    ".blocklyColourTable > tr > td.blocklyColourSelected {",
    "border: 1px solid #000;",
    "box-sizing: border-box;",
    "color: #fff;",
    "}",
    ".blocklyColourTable>tr>td.blocklyColourHighlighted {",
    "border-color: #eee;",
    "box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);",
    "position: relative;",
    "}",
    ".blocklyColourSelected, .blocklyColourSelected:hover {",
    "border-color: #eee !important;",
    "outline: 1px solid #333;",
    "position: relative;",
    "}",
  ]),
  Blockly.fieldRegistry.register("field_colour", Blockly.FieldColour),
  (goog.Thenable = function () {}),
  (goog.Thenable.prototype.then = function (t, e, o) {}),
  (goog.Thenable.IMPLEMENTED_BY_PROP = "$goog_Thenable"),
  (goog.Thenable.addImplementation = function (t) {
    COMPILED
      ? (t.prototype[goog.Thenable.IMPLEMENTED_BY_PROP] = !0)
      : (t.prototype.$goog_Thenable = !0);
  }),
  (goog.Thenable.isImplementedBy = function (t) {
    if (!t) return !1;
    try {
      return COMPILED
        ? !!t[goog.Thenable.IMPLEMENTED_BY_PROP]
        : !!t.$goog_Thenable;
    } catch (t) {
      return !1;
    }
  }),
  (goog.async = {}),
  (goog.async.FreeList = function (t, e, o) {
    (this.limit_ = o),
      (this.create_ = t),
      (this.reset_ = e),
      (this.occupants_ = 0),
      (this.head_ = null);
  }),
  (goog.async.FreeList.prototype.get = function () {
    if (0 < this.occupants_) {
      this.occupants_--;
      var t = this.head_;
      (this.head_ = t.next), (t.next = null);
    } else t = this.create_();
    return t;
  }),
  (goog.async.FreeList.prototype.put = function (t) {
    this.reset_(t),
      this.occupants_ < this.limit_ &&
        (this.occupants_++, (t.next = this.head_), (this.head_ = t));
  }),
  (goog.async.FreeList.prototype.occupants = function () {
    return this.occupants_;
  }),
  (goog.async.WorkQueue = function () {
    this.workTail_ = this.workHead_ = null;
  }),
  (goog.async.WorkQueue.DEFAULT_MAX_UNUSED = 100),
  (goog.async.WorkQueue.freelist_ = new goog.async.FreeList(
    function () {
      return new goog.async.WorkItem();
    },
    function (t) {
      t.reset();
    },
    goog.async.WorkQueue.DEFAULT_MAX_UNUSED
  )),
  (goog.async.WorkQueue.prototype.add = function (t, e) {
    var o = this.getUnusedItem_();
    o.set(t, e),
      this.workTail_
        ? (this.workTail_.next = o)
        : (goog.asserts.assert(!this.workHead_), (this.workHead_ = o)),
      (this.workTail_ = o);
  }),
  (goog.async.WorkQueue.prototype.remove = function () {
    var t = null;
    return (
      this.workHead_ &&
        ((t = this.workHead_),
        (this.workHead_ = this.workHead_.next),
        this.workHead_ || (this.workTail_ = null),
        (t.next = null)),
      t
    );
  }),
  (goog.async.WorkQueue.prototype.returnUnused = function (t) {
    goog.async.WorkQueue.freelist_.put(t);
  }),
  (goog.async.WorkQueue.prototype.getUnusedItem_ = function () {
    return goog.async.WorkQueue.freelist_.get();
  }),
  (goog.async.WorkItem = function () {
    this.next = this.scope = this.fn = null;
  }),
  (goog.async.WorkItem.prototype.set = function (t, e) {
    (this.fn = t), (this.scope = e), (this.next = null);
  }),
  (goog.async.WorkItem.prototype.reset = function () {
    this.next = this.scope = this.fn = null;
  }),
  (goog.async.throwException = function (t) {
    goog.global.setTimeout(function () {
      throw t;
    }, 0);
  }),
  (goog.async.nextTick = function (t, e, o) {
    var i = t;
    e && (i = goog.bind(t, e)),
      (i = goog.async.nextTick.wrapCallback_(i)),
      goog.isFunction(goog.global.setImmediate) &&
      (o || goog.async.nextTick.useSetImmediate_())
        ? goog.global.setImmediate(i)
        : (goog.async.nextTick.setImmediate_ ||
            (goog.async.nextTick.setImmediate_ =
              goog.async.nextTick.getSetImmediateEmulator_()),
          goog.async.nextTick.setImmediate_(i));
  }),
  (goog.async.nextTick.useSetImmediate_ = function () {
    return !(
      goog.global.Window &&
      goog.global.Window.prototype &&
      !goog.labs.userAgent.browser.isEdge() &&
      goog.global.Window.prototype.setImmediate == goog.global.setImmediate
    );
  }),
  (goog.async.nextTick.getSetImmediateEmulator_ = function () {
    var t = goog.global.MessageChannel;
    if (
      (void 0 === t &&
        "undefined" != typeof window &&
        window.postMessage &&
        window.addEventListener &&
        !goog.labs.userAgent.engine.isPresto() &&
        (t = function () {
          var t = goog.dom.createElement("IFRAME");
          (t.style.display = "none"),
            goog.dom.safe.setIframeSrc(
              t,
              goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.EMPTY)
            ),
            document.documentElement.appendChild(t);
          var e = t.contentWindow;
          (t = e.document).open(),
            goog.dom.safe.documentWrite(t, goog.html.SafeHtml.EMPTY),
            t.close();
          var o = "callImmediate" + Math.random(),
            i =
              "file:" == e.location.protocol
                ? "*"
                : e.location.protocol + "//" + e.location.host;
          (t = goog.bind(function (t) {
            ("*" != i && t.origin != i) ||
              t.data != o ||
              this.port1.onmessage();
          }, this)),
            e.addEventListener("message", t, !1),
            (this.port1 = {}),
            (this.port2 = {
              postMessage: function () {
                e.postMessage(o, i);
              },
            });
        }),
      void 0 !== t && !goog.labs.userAgent.browser.isIE())
    ) {
      var e = new t(),
        o = {},
        i = o;
      return (
        (e.port1.onmessage = function () {
          if (void 0 !== o.next) {
            var t = (o = o.next).cb;
            (o.cb = null), t();
          }
        }),
        function (t) {
          (i.next = { cb: t }), (i = i.next), e.port2.postMessage(0);
        }
      );
    }
    return "undefined" != typeof document &&
      "onreadystatechange" in goog.dom.createElement("SCRIPT")
      ? function (t) {
          var e = goog.dom.createElement("SCRIPT");
          (e.onreadystatechange = function () {
            (e.onreadystatechange = null),
              e.parentNode.removeChild(e),
              (e = null),
              t(),
              (t = null);
          }),
            document.documentElement.appendChild(e);
        }
      : function (t) {
          goog.global.setTimeout(t, 0);
        };
  }),
  (goog.async.nextTick.wrapCallback_ = goog.functions.identity),
  goog.debug.entryPointRegistry.register(function (t) {
    goog.async.nextTick.wrapCallback_ = t;
  }),
  (goog.ASSUME_NATIVE_PROMISE = !1),
  (goog.async.run = function (t, e) {
    goog.async.run.schedule_ || goog.async.run.initializeRunner_(),
      goog.async.run.workQueueScheduled_ ||
        (goog.async.run.schedule_(), (goog.async.run.workQueueScheduled_ = !0)),
      goog.async.run.workQueue_.add(t, e);
  }),
  (goog.async.run.initializeRunner_ = function () {
    if (
      goog.ASSUME_NATIVE_PROMISE ||
      (goog.global.Promise && goog.global.Promise.resolve)
    ) {
      var t = goog.global.Promise.resolve(void 0);
      goog.async.run.schedule_ = function () {
        t.then(goog.async.run.processWorkQueue);
      };
    } else
      goog.async.run.schedule_ = function () {
        goog.async.nextTick(goog.async.run.processWorkQueue);
      };
  }),
  (goog.async.run.forceNextTick = function (t) {
    goog.async.run.schedule_ = function () {
      goog.async.nextTick(goog.async.run.processWorkQueue),
        t && t(goog.async.run.processWorkQueue);
    };
  }),
  (goog.async.run.workQueueScheduled_ = !1),
  (goog.async.run.workQueue_ = new goog.async.WorkQueue()),
  goog.DEBUG &&
    (goog.async.run.resetQueue = function () {
      (goog.async.run.workQueueScheduled_ = !1),
        (goog.async.run.workQueue_ = new goog.async.WorkQueue());
    }),
  (goog.async.run.processWorkQueue = function () {
    for (var t; (t = goog.async.run.workQueue_.remove()); ) {
      try {
        t.fn.call(t.scope);
      } catch (t) {
        goog.async.throwException(t);
      }
      goog.async.run.workQueue_.returnUnused(t);
    }
    goog.async.run.workQueueScheduled_ = !1;
  });
(goog.promise = {}),
  (goog.promise.Resolver = function () {}),
  (goog.Promise = function (t, e) {
    if (
      ((this.state_ = goog.Promise.State_.PENDING),
      (this.result_ = void 0),
      (this.callbackEntriesTail_ = this.callbackEntries_ = this.parent_ = null),
      (this.executing_ = !1),
      0 < goog.Promise.UNHANDLED_REJECTION_DELAY
        ? (this.unhandledRejectionId_ = 0)
        : 0 == goog.Promise.UNHANDLED_REJECTION_DELAY &&
          (this.hadUnhandledRejection_ = !1),
      goog.Promise.LONG_STACK_TRACES &&
        ((this.stack_ = []),
        this.addStackTrace_(Error("created")),
        (this.currentStep_ = 0)),
      t != goog.nullFunction)
    )
      try {
        var o = this;
        t.call(
          e,
          function (t) {
            o.resolve_(goog.Promise.State_.FULFILLED, t);
          },
          function (t) {
            if (goog.DEBUG && !(t instanceof goog.Promise.CancellationError))
              try {
                if (t instanceof Error) throw t;
                throw Error("Promise rejected.");
              } catch (t) {}
            o.resolve_(goog.Promise.State_.REJECTED, t);
          }
        );
      } catch (t) {
        this.resolve_(goog.Promise.State_.REJECTED, t);
      }
  }),
  (goog.Promise.LONG_STACK_TRACES = !1),
  (goog.Promise.UNHANDLED_REJECTION_DELAY = 0),
  (goog.Promise.State_ = { PENDING: 0, BLOCKED: 1, FULFILLED: 2, REJECTED: 3 }),
  (goog.Promise.CallbackEntry_ = function () {
    (this.next =
      this.context =
      this.onRejected =
      this.onFulfilled =
      this.child =
        null),
      (this.always = !1);
  }),
  (goog.Promise.CallbackEntry_.prototype.reset = function () {
    (this.context = this.onRejected = this.onFulfilled = this.child = null),
      (this.always = !1);
  }),
  (goog.Promise.DEFAULT_MAX_UNUSED = 100),
  (goog.Promise.freelist_ = new goog.async.FreeList(
    function () {
      return new goog.Promise.CallbackEntry_();
    },
    function (t) {
      t.reset();
    },
    goog.Promise.DEFAULT_MAX_UNUSED
  )),
  (goog.Promise.getCallbackEntry_ = function (t, e, o) {
    var i = goog.Promise.freelist_.get();
    return (i.onFulfilled = t), (i.onRejected = e), (i.context = o), i;
  }),
  (goog.Promise.returnEntry_ = function (t) {
    goog.Promise.freelist_.put(t);
  }),
  (goog.Promise.resolve = function (t) {
    if (t instanceof goog.Promise) return t;
    var e = new goog.Promise(goog.nullFunction);
    return e.resolve_(goog.Promise.State_.FULFILLED, t), e;
  }),
  (goog.Promise.reject = function (t) {
    return new goog.Promise(function (e, o) {
      o(t);
    });
  }),
  (goog.Promise.resolveThen_ = function (t, e, o) {
    goog.Promise.maybeThen_(t, e, o, null) ||
      goog.async.run(goog.partial(e, t));
  }),
  (goog.Promise.race = function (t) {
    return new goog.Promise(function (e, o) {
      t.length || e(void 0);
      for (var i, n = 0; n < t.length; n++)
        (i = t[n]), goog.Promise.resolveThen_(i, e, o);
    });
  }),
  (goog.Promise.all = function (t) {
    return new goog.Promise(function (e, o) {
      var i = t.length,
        n = [];
      if (i)
        for (
          var l,
            r = function (t, o) {
              i--, (n[t] = o), 0 == i && e(n);
            },
            s = function (t) {
              o(t);
            },
            a = 0;
          a < t.length;
          a++
        )
          (l = t[a]), goog.Promise.resolveThen_(l, goog.partial(r, a), s);
      else e(n);
    });
  }),
  (goog.Promise.allSettled = function (t) {
    return new goog.Promise(function (e, o) {
      var i = t.length,
        n = [];
      if (i) {
        o = function (t, o, l) {
          i--,
            (n[t] = o
              ? { fulfilled: !0, value: l }
              : { fulfilled: !1, reason: l }),
            0 == i && e(n);
        };
        for (var l, r = 0; r < t.length; r++)
          (l = t[r]),
            goog.Promise.resolveThen_(
              l,
              goog.partial(o, r, !0),
              goog.partial(o, r, !1)
            );
      } else e(n);
    });
  }),
  (goog.Promise.firstFulfilled = function (t) {
    return new goog.Promise(function (e, o) {
      var i = t.length,
        n = [];
      if (i)
        for (
          var l,
            r = function (t) {
              e(t);
            },
            s = function (t, e) {
              i--, (n[t] = e), 0 == i && o(n);
            },
            a = 0;
          a < t.length;
          a++
        )
          (l = t[a]), goog.Promise.resolveThen_(l, r, goog.partial(s, a));
      else e(void 0);
    });
  }),
  (goog.Promise.withResolver = function () {
    var t,
      e,
      o = new goog.Promise(function (o, i) {
        (t = o), (e = i);
      });
    return new goog.Promise.Resolver_(o, t, e);
  }),
  (goog.Promise.prototype.then = function (t, e, o) {
    return (
      null != t &&
        goog.asserts.assertFunction(t, "opt_onFulfilled should be a function."),
      null != e &&
        goog.asserts.assertFunction(
          e,
          "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"
        ),
      goog.Promise.LONG_STACK_TRACES && this.addStackTrace_(Error("then")),
      this.addChildPromise_(
        goog.isFunction(t) ? t : null,
        goog.isFunction(e) ? e : null,
        o
      )
    );
  }),
  goog.Thenable.addImplementation(goog.Promise),
  (goog.Promise.prototype.thenVoid = function (t, e, o) {
    null != t &&
      goog.asserts.assertFunction(t, "opt_onFulfilled should be a function."),
      null != e &&
        goog.asserts.assertFunction(
          e,
          "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"
        ),
      goog.Promise.LONG_STACK_TRACES && this.addStackTrace_(Error("then")),
      this.addCallbackEntry_(
        goog.Promise.getCallbackEntry_(t || goog.nullFunction, e || null, o)
      );
  }),
  (goog.Promise.prototype.thenAlways = function (t, e) {
    return (
      goog.Promise.LONG_STACK_TRACES &&
        this.addStackTrace_(Error("thenAlways")),
      ((t = goog.Promise.getCallbackEntry_(t, t, e)).always = !0),
      this.addCallbackEntry_(t),
      this
    );
  }),
  (goog.Promise.prototype.thenCatch = function (t, e) {
    return (
      goog.Promise.LONG_STACK_TRACES && this.addStackTrace_(Error("thenCatch")),
      this.addChildPromise_(null, t, e)
    );
  }),
  (goog.Promise.prototype.cancel = function (t) {
    if (this.state_ == goog.Promise.State_.PENDING) {
      var e = new goog.Promise.CancellationError(t);
      goog.async.run(function () {
        this.cancelInternal_(e);
      }, this);
    }
  }),
  (goog.Promise.prototype.cancelInternal_ = function (t) {
    this.state_ == goog.Promise.State_.PENDING &&
      (this.parent_
        ? (this.parent_.cancelChild_(this, t), (this.parent_ = null))
        : this.resolve_(goog.Promise.State_.REJECTED, t));
  }),
  (goog.Promise.prototype.cancelChild_ = function (t, e) {
    if (this.callbackEntries_) {
      for (
        var o = 0, i = null, n = null, l = this.callbackEntries_;
        l && (l.always || (o++, l.child == t && (i = l), !(i && 1 < o)));
        l = l.next
      )
        i || (n = l);
      i &&
        (this.state_ == goog.Promise.State_.PENDING && 1 == o
          ? this.cancelInternal_(e)
          : (n ? this.removeEntryAfter_(n) : this.popEntry_(),
            this.executeCallback_(i, goog.Promise.State_.REJECTED, e)));
    }
  }),
  (goog.Promise.prototype.addCallbackEntry_ = function (t) {
    this.hasEntry_() ||
      (this.state_ != goog.Promise.State_.FULFILLED &&
        this.state_ != goog.Promise.State_.REJECTED) ||
      this.scheduleCallbacks_(),
      this.queueEntry_(t);
  }),
  (goog.Promise.prototype.addChildPromise_ = function (t, e, o) {
    var i = goog.Promise.getCallbackEntry_(null, null, null);
    return (
      (i.child = new goog.Promise(function (n, l) {
        (i.onFulfilled = t
          ? function (e) {
              try {
                var i = t.call(o, e);
                n(i);
              } catch (t) {
                l(t);
              }
            }
          : n),
          (i.onRejected = e
            ? function (t) {
                try {
                  var i = e.call(o, t);
                  void 0 === i && t instanceof goog.Promise.CancellationError
                    ? l(t)
                    : n(i);
                } catch (t) {
                  l(t);
                }
              }
            : l);
      })),
      (i.child.parent_ = this),
      this.addCallbackEntry_(i),
      i.child
    );
  }),
  (goog.Promise.prototype.unblockAndFulfill_ = function (t) {
    goog.asserts.assert(this.state_ == goog.Promise.State_.BLOCKED),
      (this.state_ = goog.Promise.State_.PENDING),
      this.resolve_(goog.Promise.State_.FULFILLED, t);
  }),
  (goog.Promise.prototype.unblockAndReject_ = function (t) {
    goog.asserts.assert(this.state_ == goog.Promise.State_.BLOCKED),
      (this.state_ = goog.Promise.State_.PENDING),
      this.resolve_(goog.Promise.State_.REJECTED, t);
  }),
  (goog.Promise.prototype.resolve_ = function (t, e) {
    this.state_ == goog.Promise.State_.PENDING &&
      (this === e &&
        ((t = goog.Promise.State_.REJECTED),
        (e = new TypeError("Promise cannot resolve to itself"))),
      (this.state_ = goog.Promise.State_.BLOCKED),
      goog.Promise.maybeThen_(
        e,
        this.unblockAndFulfill_,
        this.unblockAndReject_,
        this
      ) ||
        ((this.result_ = e),
        (this.state_ = t),
        (this.parent_ = null),
        this.scheduleCallbacks_(),
        t != goog.Promise.State_.REJECTED ||
          e instanceof goog.Promise.CancellationError ||
          goog.Promise.addUnhandledRejection_(this, e)));
  }),
  (goog.Promise.maybeThen_ = function (t, e, o, i) {
    if (t instanceof goog.Promise) return t.thenVoid(e, o, i), !0;
    if (goog.Thenable.isImplementedBy(t)) return t.then(e, o, i), !0;
    if (goog.isObject(t))
      try {
        var n = t.then;
        if (goog.isFunction(n)) return goog.Promise.tryThen_(t, n, e, o, i), !0;
      } catch (t) {
        return o.call(i, t), !0;
      }
    return !1;
  }),
  (goog.Promise.tryThen_ = function (t, e, o, i, n) {
    var l = !1,
      r = function (t) {
        l || ((l = !0), i.call(n, t));
      };
    try {
      e.call(
        t,
        function (t) {
          l || ((l = !0), o.call(n, t));
        },
        r
      );
    } catch (t) {
      r(t);
    }
  }),
  (goog.Promise.prototype.scheduleCallbacks_ = function () {
    this.executing_ ||
      ((this.executing_ = !0), goog.async.run(this.executeCallbacks_, this));
  }),
  (goog.Promise.prototype.hasEntry_ = function () {
    return !!this.callbackEntries_;
  }),
  (goog.Promise.prototype.queueEntry_ = function (t) {
    goog.asserts.assert(null != t.onFulfilled),
      this.callbackEntriesTail_
        ? (this.callbackEntriesTail_.next = t)
        : (this.callbackEntries_ = t),
      (this.callbackEntriesTail_ = t);
  }),
  (goog.Promise.prototype.popEntry_ = function () {
    var t = null;
    return (
      this.callbackEntries_ &&
        ((t = this.callbackEntries_),
        (this.callbackEntries_ = t.next),
        (t.next = null)),
      this.callbackEntries_ || (this.callbackEntriesTail_ = null),
      null != t && goog.asserts.assert(null != t.onFulfilled),
      t
    );
  }),
  (goog.Promise.prototype.removeEntryAfter_ = function (t) {
    goog.asserts.assert(this.callbackEntries_),
      goog.asserts.assert(null != t),
      t.next == this.callbackEntriesTail_ && (this.callbackEntriesTail_ = t),
      (t.next = t.next.next);
  }),
  (goog.Promise.prototype.executeCallbacks_ = function () {
    for (var t; (t = this.popEntry_()); )
      goog.Promise.LONG_STACK_TRACES && this.currentStep_++,
        this.executeCallback_(t, this.state_, this.result_);
    this.executing_ = !1;
  }),
  (goog.Promise.prototype.executeCallback_ = function (t, e, o) {
    if (
      (e == goog.Promise.State_.REJECTED &&
        t.onRejected &&
        !t.always &&
        this.removeUnhandledRejection_(),
      t.child)
    )
      (t.child.parent_ = null), goog.Promise.invokeCallback_(t, e, o);
    else
      try {
        t.always
          ? t.onFulfilled.call(t.context)
          : goog.Promise.invokeCallback_(t, e, o);
      } catch (t) {
        goog.Promise.handleRejection_.call(null, t);
      }
    goog.Promise.returnEntry_(t);
  }),
  (goog.Promise.invokeCallback_ = function (t, e, o) {
    e == goog.Promise.State_.FULFILLED
      ? t.onFulfilled.call(t.context, o)
      : t.onRejected && t.onRejected.call(t.context, o);
  }),
  (goog.Promise.prototype.addStackTrace_ = function (t) {
    if (goog.Promise.LONG_STACK_TRACES && "string" == typeof t.stack) {
      var e = t.stack.split("\n", 4)[3];
      (t = t.message),
        (t += Array(11 - t.length).join(" ")),
        this.stack_.push(t + e);
    }
  }),
  (goog.Promise.prototype.appendLongStack_ = function (t) {
    if (
      goog.Promise.LONG_STACK_TRACES &&
      t &&
      "string" == typeof t.stack &&
      this.stack_.length
    ) {
      for (var e = ["Promise trace:"], o = this; o; o = o.parent_) {
        for (var i = this.currentStep_; 0 <= i; i--) e.push(o.stack_[i]);
        e.push(
          "Value: [" +
            (o.state_ == goog.Promise.State_.REJECTED
              ? "REJECTED"
              : "FULFILLED") +
            "] <" +
            String(o.result_) +
            ">"
        );
      }
      t.stack += "\n\n" + e.join("\n");
    }
  }),
  (goog.Promise.prototype.removeUnhandledRejection_ = function () {
    if (0 < goog.Promise.UNHANDLED_REJECTION_DELAY)
      for (var t = this; t && t.unhandledRejectionId_; t = t.parent_)
        goog.global.clearTimeout(t.unhandledRejectionId_),
          (t.unhandledRejectionId_ = 0);
    else if (0 == goog.Promise.UNHANDLED_REJECTION_DELAY)
      for (t = this; t && t.hadUnhandledRejection_; t = t.parent_)
        t.hadUnhandledRejection_ = !1;
  }),
  (goog.Promise.addUnhandledRejection_ = function (t, e) {
    0 < goog.Promise.UNHANDLED_REJECTION_DELAY
      ? (t.unhandledRejectionId_ = goog.global.setTimeout(function () {
          t.appendLongStack_(e), goog.Promise.handleRejection_.call(null, e);
        }, goog.Promise.UNHANDLED_REJECTION_DELAY))
      : 0 == goog.Promise.UNHANDLED_REJECTION_DELAY &&
        ((t.hadUnhandledRejection_ = !0),
        goog.async.run(function () {
          t.hadUnhandledRejection_ &&
            (t.appendLongStack_(e),
            goog.Promise.handleRejection_.call(null, e));
        }));
  }),
  (goog.Promise.handleRejection_ = goog.async.throwException),
  (goog.Promise.setUnhandledRejectionHandler = function (t) {
    goog.Promise.handleRejection_ = t;
  }),
  (goog.Promise.CancellationError = function (t) {
    goog.debug.Error.call(this, t);
  }),
  goog.inherits(goog.Promise.CancellationError, goog.debug.Error),
  (goog.Promise.CancellationError.prototype.name = "cancel"),
  (goog.Promise.Resolver_ = function (t, e, o) {
    (this.promise = t), (this.resolve = e), (this.reject = o);
  }),
  (goog.Timer = function (t, e) {
    goog.events.EventTarget.call(this),
      (this.interval_ = t || 1),
      (this.timerObject_ = e || goog.Timer.defaultTimerObject),
      (this.boundTick_ = goog.bind(this.tick_, this)),
      (this.last_ = goog.now());
  }),
  goog.inherits(goog.Timer, goog.events.EventTarget),
  (goog.Timer.MAX_TIMEOUT_ = 2147483647),
  (goog.Timer.INVALID_TIMEOUT_ID_ = -1),
  (goog.Timer.prototype.enabled = !1),
  (goog.Timer.defaultTimerObject = goog.global),
  (goog.Timer.intervalScale = 0.8),
  (goog.Timer.prototype.timer_ = null),
  (goog.Timer.prototype.getInterval = function () {
    return this.interval_;
  }),
  (goog.Timer.prototype.setInterval = function (t) {
    (this.interval_ = t),
      this.timer_ && this.enabled
        ? (this.stop(), this.start())
        : this.timer_ && this.stop();
  }),
  (goog.Timer.prototype.tick_ = function () {
    if (this.enabled) {
      var t = goog.now() - this.last_;
      0 < t && t < this.interval_ * goog.Timer.intervalScale
        ? (this.timer_ = this.timerObject_.setTimeout(
            this.boundTick_,
            this.interval_ - t
          ))
        : (this.timer_ &&
            (this.timerObject_.clearTimeout(this.timer_), (this.timer_ = null)),
          this.dispatchTick(),
          this.enabled && (this.stop(), this.start()));
    }
  }),
  (goog.Timer.prototype.dispatchTick = function () {
    this.dispatchEvent(goog.Timer.TICK);
  }),
  (goog.Timer.prototype.start = function () {
    (this.enabled = !0),
      this.timer_ ||
        ((this.timer_ = this.timerObject_.setTimeout(
          this.boundTick_,
          this.interval_
        )),
        (this.last_ = goog.now()));
  }),
  (goog.Timer.prototype.stop = function () {
    (this.enabled = !1),
      this.timer_ &&
        (this.timerObject_.clearTimeout(this.timer_), (this.timer_ = null));
  }),
  (goog.Timer.prototype.disposeInternal = function () {
    goog.Timer.superClass_.disposeInternal.call(this),
      this.stop(),
      delete this.timerObject_;
  }),
  (goog.Timer.TICK = "tick"),
  (goog.Timer.callOnce = function (t, e, o) {
    if (goog.isFunction(t)) o && (t = goog.bind(t, o));
    else {
      if (!t || "function" != typeof t.handleEvent)
        throw Error("Invalid listener argument");
      t = goog.bind(t.handleEvent, t);
    }
    return Number(e) > goog.Timer.MAX_TIMEOUT_
      ? goog.Timer.INVALID_TIMEOUT_ID_
      : goog.Timer.defaultTimerObject.setTimeout(t, e || 0);
  }),
  (goog.Timer.clear = function (t) {
    goog.Timer.defaultTimerObject.clearTimeout(t);
  }),
  (goog.Timer.promise = function (t, e) {
    var o = null;
    return new goog.Promise(function (i, n) {
      (o = goog.Timer.callOnce(function () {
        i(e);
      }, t)) == goog.Timer.INVALID_TIMEOUT_ID_ &&
        n(Error("Failed to schedule timer."));
    }).thenCatch(function (t) {
      throw (goog.Timer.clear(o), t);
    });
  }),
  (goog.events.MouseWheelHandler = function (t, e) {
    goog.events.EventTarget.call(this),
      (this.element_ = t),
      (t = goog.dom.isElement(this.element_)
        ? this.element_
        : this.element_
        ? this.element_.body
        : null),
      (this.isRtl_ = !!t && goog.style.isRightToLeft(t)),
      (this.listenKey_ = goog.events.listen(
        this.element_,
        goog.userAgent.GECKO ? "DOMMouseScroll" : "mousewheel",
        this,
        e
      ));
  }),
  goog.inherits(goog.events.MouseWheelHandler, goog.events.EventTarget),
  (goog.events.MouseWheelHandler.EventType = { MOUSEWHEEL: "mousewheel" }),
  (goog.events.MouseWheelHandler.prototype.setMaxDeltaX = function (t) {
    this.maxDeltaX_ = t;
  }),
  (goog.events.MouseWheelHandler.prototype.setMaxDeltaY = function (t) {
    this.maxDeltaY_ = t;
  }),
  (goog.events.MouseWheelHandler.prototype.handleEvent = function (t) {
    var e = 0,
      o = 0,
      i = t.getBrowserEvent();
    "mousewheel" == i.type
      ? ((t = goog.events.MouseWheelHandler.smartScale_(-i.wheelDelta, 40)),
        void 0 !== i.wheelDeltaX
          ? ((e = goog.events.MouseWheelHandler.smartScale_(
              -i.wheelDeltaX,
              40
            )),
            (o = goog.events.MouseWheelHandler.smartScale_(-i.wheelDeltaY, 40)))
          : (o = t))
      : (100 < (t = i.detail) ? (t = 3) : -100 > t && (t = -3),
        void 0 !== i.axis && i.axis === i.HORIZONTAL_AXIS ? (e = t) : (o = t)),
      "number" == typeof this.maxDeltaX_ &&
        (e = goog.math.clamp(e, -this.maxDeltaX_, this.maxDeltaX_)),
      "number" == typeof this.maxDeltaY_ &&
        (o = goog.math.clamp(o, -this.maxDeltaY_, this.maxDeltaY_)),
      this.isRtl_ && (e = -e),
      (e = new goog.events.MouseWheelEvent(t, i, e, o)),
      this.dispatchEvent(e);
  }),
  (goog.events.MouseWheelHandler.smartScale_ = function (t, e) {
    return goog.userAgent.WEBKIT &&
      (goog.userAgent.MAC || goog.userAgent.LINUX) &&
      0 != t % e
      ? t
      : t / e;
  }),
  (goog.events.MouseWheelHandler.prototype.disposeInternal = function () {
    goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this),
      goog.events.unlistenByKey(this.listenKey_),
      (this.listenKey_ = null);
  }),
  (goog.events.MouseWheelEvent = function (t, e, o, i) {
    goog.events.BrowserEvent.call(this, e),
      (this.type = goog.events.MouseWheelHandler.EventType.MOUSEWHEEL),
      (this.detail = t),
      (this.deltaX = o),
      (this.deltaY = i);
  }),
  goog.inherits(goog.events.MouseWheelEvent, goog.events.BrowserEvent),
  (goog.fx = {}),
  (goog.fx.Transition = function () {}),
  (goog.fx.Transition.EventType = {
    PLAY: "play",
    BEGIN: "begin",
    RESUME: "resume",
    END: "end",
    STOP: "stop",
    FINISH: "finish",
    PAUSE: "pause",
  }),
  (goog.fx.TransitionBase = function () {
    goog.events.EventTarget.call(this),
      (this.state_ = goog.fx.TransitionBase.State.STOPPED),
      (this.endTime = this.startTime = null);
  }),
  goog.inherits(goog.fx.TransitionBase, goog.events.EventTarget),
  (goog.fx.TransitionBase.State = { STOPPED: 0, PAUSED: -1, PLAYING: 1 }),
  (goog.fx.TransitionBase.prototype.play = goog.abstractMethod),
  (goog.fx.TransitionBase.prototype.stop = goog.abstractMethod),
  (goog.fx.TransitionBase.prototype.pause = goog.abstractMethod),
  (goog.fx.TransitionBase.prototype.getStateInternal = function () {
    return this.state_;
  }),
  (goog.fx.TransitionBase.prototype.setStatePlaying = function () {
    this.state_ = goog.fx.TransitionBase.State.PLAYING;
  }),
  (goog.fx.TransitionBase.prototype.setStatePaused = function () {
    this.state_ = goog.fx.TransitionBase.State.PAUSED;
  }),
  (goog.fx.TransitionBase.prototype.setStateStopped = function () {
    this.state_ = goog.fx.TransitionBase.State.STOPPED;
  }),
  (goog.fx.TransitionBase.prototype.isPlaying = function () {
    return this.state_ == goog.fx.TransitionBase.State.PLAYING;
  }),
  (goog.fx.TransitionBase.prototype.isPaused = function () {
    return this.state_ == goog.fx.TransitionBase.State.PAUSED;
  }),
  (goog.fx.TransitionBase.prototype.isStopped = function () {
    return this.state_ == goog.fx.TransitionBase.State.STOPPED;
  }),
  (goog.fx.TransitionBase.prototype.onBegin = function () {
    this.dispatchAnimationEvent(goog.fx.Transition.EventType.BEGIN);
  }),
  (goog.fx.TransitionBase.prototype.onEnd = function () {
    this.dispatchAnimationEvent(goog.fx.Transition.EventType.END);
  }),
  (goog.fx.TransitionBase.prototype.onFinish = function () {
    this.dispatchAnimationEvent(goog.fx.Transition.EventType.FINISH);
  }),
  (goog.fx.TransitionBase.prototype.onPause = function () {
    this.dispatchAnimationEvent(goog.fx.Transition.EventType.PAUSE);
  }),
  (goog.fx.TransitionBase.prototype.onPlay = function () {
    this.dispatchAnimationEvent(goog.fx.Transition.EventType.PLAY);
  }),
  (goog.fx.TransitionBase.prototype.onResume = function () {
    this.dispatchAnimationEvent(goog.fx.Transition.EventType.RESUME);
  }),
  (goog.fx.TransitionBase.prototype.onStop = function () {
    this.dispatchAnimationEvent(goog.fx.Transition.EventType.STOP);
  }),
  (goog.fx.TransitionBase.prototype.dispatchAnimationEvent = function (t) {
    this.dispatchEvent(t);
  }),
  (goog.async.AnimationDelay = function (t, e, o) {
    goog.Disposable.call(this),
      (this.id_ = null),
      (this.usingListeners_ = !1),
      (this.listener_ = t),
      (this.handler_ = o),
      (this.win_ = e || window),
      (this.callback_ = goog.bind(this.doAction_, this));
  }),
  goog.inherits(goog.async.AnimationDelay, goog.Disposable),
  (goog.async.AnimationDelay.TIMEOUT = 20),
  (goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_ = "MozBeforePaint"),
  (goog.async.AnimationDelay.prototype.start = function () {
    this.stop(), (this.usingListeners_ = !1);
    var t = this.getRaf_(),
      e = this.getCancelRaf_();
    t && !e && this.win_.mozRequestAnimationFrame
      ? ((this.id_ = goog.events.listen(
          this.win_,
          goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,
          this.callback_
        )),
        this.win_.mozRequestAnimationFrame(null),
        (this.usingListeners_ = !0))
      : (this.id_ =
          t && e
            ? t.call(this.win_, this.callback_)
            : this.win_.setTimeout(
                goog.functions.lock(this.callback_),
                goog.async.AnimationDelay.TIMEOUT
              ));
  }),
  (goog.async.AnimationDelay.prototype.startIfNotActive = function () {
    this.isActive() || this.start();
  }),
  (goog.async.AnimationDelay.prototype.stop = function () {
    if (this.isActive()) {
      var t = this.getRaf_(),
        e = this.getCancelRaf_();
      t && !e && this.win_.mozRequestAnimationFrame
        ? goog.events.unlistenByKey(this.id_)
        : t && e
        ? e.call(this.win_, this.id_)
        : this.win_.clearTimeout(this.id_);
    }
    this.id_ = null;
  }),
  (goog.async.AnimationDelay.prototype.fire = function () {
    this.stop(), this.doAction_();
  }),
  (goog.async.AnimationDelay.prototype.fireIfActive = function () {
    this.isActive() && this.fire();
  }),
  (goog.async.AnimationDelay.prototype.isActive = function () {
    return null != this.id_;
  }),
  (goog.async.AnimationDelay.prototype.doAction_ = function () {
    this.usingListeners_ && this.id_ && goog.events.unlistenByKey(this.id_),
      (this.id_ = null),
      this.listener_.call(this.handler_, goog.now());
  }),
  (goog.async.AnimationDelay.prototype.disposeInternal = function () {
    this.stop(),
      goog.async.AnimationDelay.superClass_.disposeInternal.call(this);
  }),
  (goog.async.AnimationDelay.prototype.getRaf_ = function () {
    var t = this.win_;
    return (
      t.requestAnimationFrame ||
      t.webkitRequestAnimationFrame ||
      t.mozRequestAnimationFrame ||
      t.oRequestAnimationFrame ||
      t.msRequestAnimationFrame ||
      null
    );
  }),
  (goog.async.AnimationDelay.prototype.getCancelRaf_ = function () {
    var t = this.win_;
    return (
      t.cancelAnimationFrame ||
      t.cancelRequestAnimationFrame ||
      t.webkitCancelRequestAnimationFrame ||
      t.mozCancelRequestAnimationFrame ||
      t.oCancelRequestAnimationFrame ||
      t.msCancelRequestAnimationFrame ||
      null
    );
  }),
  (goog.async.Delay = function (t, e, o) {
    goog.Disposable.call(this),
      (this.listener_ = t),
      (this.interval_ = e || 0),
      (this.handler_ = o),
      (this.callback_ = goog.bind(this.doAction_, this));
  }),
  goog.inherits(goog.async.Delay, goog.Disposable),
  (goog.Delay = goog.async.Delay),
  (goog.async.Delay.prototype.id_ = 0),
  (goog.async.Delay.prototype.disposeInternal = function () {
    goog.async.Delay.superClass_.disposeInternal.call(this),
      this.stop(),
      delete this.listener_,
      delete this.handler_;
  }),
  (goog.async.Delay.prototype.start = function (t) {
    this.stop(),
      (this.id_ = goog.Timer.callOnce(
        this.callback_,
        void 0 !== t ? t : this.interval_
      ));
  }),
  (goog.async.Delay.prototype.startIfNotActive = function (t) {
    this.isActive() || this.start(t);
  }),
  (goog.async.Delay.prototype.stop = function () {
    this.isActive() && goog.Timer.clear(this.id_), (this.id_ = 0);
  }),
  (goog.async.Delay.prototype.fire = function () {
    this.stop(), this.doAction_();
  }),
  (goog.async.Delay.prototype.fireIfActive = function () {
    this.isActive() && this.fire();
  }),
  (goog.async.Delay.prototype.isActive = function () {
    return 0 != this.id_;
  }),
  (goog.async.Delay.prototype.doAction_ = function () {
    (this.id_ = 0), this.listener_ && this.listener_.call(this.handler_);
  }),
  (goog.fx.anim = {}),
  (goog.fx.anim.Animated = function () {}),
  (goog.fx.anim.TIMEOUT = goog.async.AnimationDelay.TIMEOUT),
  (goog.fx.anim.activeAnimations_ = {}),
  (goog.fx.anim.animationWindow_ = null),
  (goog.fx.anim.animationDelay_ = null),
  (goog.fx.anim.registerAnimation = function (t) {
    var e = goog.getUid(t);
    e in goog.fx.anim.activeAnimations_ ||
      (goog.fx.anim.activeAnimations_[e] = t),
      goog.fx.anim.requestAnimationFrame_();
  }),
  (goog.fx.anim.unregisterAnimation = function (t) {
    (t = goog.getUid(t)),
      delete goog.fx.anim.activeAnimations_[t],
      goog.object.isEmpty(goog.fx.anim.activeAnimations_) &&
        goog.fx.anim.cancelAnimationFrame_();
  }),
  (goog.fx.anim.tearDown = function () {
    (goog.fx.anim.animationWindow_ = null),
      goog.dispose(goog.fx.anim.animationDelay_),
      (goog.fx.anim.animationDelay_ = null),
      (goog.fx.anim.activeAnimations_ = {});
  }),
  (goog.fx.anim.setAnimationWindow = function (t) {
    var e =
      goog.fx.anim.animationDelay_ && goog.fx.anim.animationDelay_.isActive();
    goog.dispose(goog.fx.anim.animationDelay_),
      (goog.fx.anim.animationDelay_ = null),
      (goog.fx.anim.animationWindow_ = t),
      e && goog.fx.anim.requestAnimationFrame_();
  }),
  (goog.fx.anim.requestAnimationFrame_ = function () {
    goog.fx.anim.animationDelay_ ||
      (goog.fx.anim.animationDelay_ = goog.fx.anim.animationWindow_
        ? new goog.async.AnimationDelay(function (t) {
            goog.fx.anim.cycleAnimations_(t);
          }, goog.fx.anim.animationWindow_)
        : new goog.async.Delay(function () {
            goog.fx.anim.cycleAnimations_(goog.now());
          }, goog.fx.anim.TIMEOUT));
    var t = goog.fx.anim.animationDelay_;
    t.isActive() || t.start();
  }),
  (goog.fx.anim.cancelAnimationFrame_ = function () {
    goog.fx.anim.animationDelay_ && goog.fx.anim.animationDelay_.stop();
  }),
  (goog.fx.anim.cycleAnimations_ = function (t) {
    goog.object.forEach(goog.fx.anim.activeAnimations_, function (e) {
      e.onAnimationFrame(t);
    }),
      goog.object.isEmpty(goog.fx.anim.activeAnimations_) ||
        goog.fx.anim.requestAnimationFrame_();
  }),
  (goog.fx.Animation = function (t, e, o, i) {
    if (
      (goog.fx.TransitionBase.call(this), !goog.isArray(t) || !goog.isArray(e))
    )
      throw Error("Start and end parameters must be arrays");
    if (t.length != e.length)
      throw Error("Start and end points must be the same length");
    (this.startPoint = t),
      (this.endPoint = e),
      (this.duration = o),
      (this.accel_ = i),
      (this.coords = []),
      (this.useRightPositioningForRtl_ = !1),
      (this.progress = this.fps_ = 0),
      (this.lastFrame = null);
  }),
  goog.inherits(goog.fx.Animation, goog.fx.TransitionBase),
  (goog.fx.Animation.prototype.getDuration = function () {
    return this.duration;
  }),
  (goog.fx.Animation.prototype.enableRightPositioningForRtl = function (t) {
    this.useRightPositioningForRtl_ = t;
  }),
  (goog.fx.Animation.prototype.isRightPositioningForRtlEnabled = function () {
    return this.useRightPositioningForRtl_;
  }),
  (goog.fx.Animation.EventType = {
    PLAY: goog.fx.Transition.EventType.PLAY,
    BEGIN: goog.fx.Transition.EventType.BEGIN,
    RESUME: goog.fx.Transition.EventType.RESUME,
    END: goog.fx.Transition.EventType.END,
    STOP: goog.fx.Transition.EventType.STOP,
    FINISH: goog.fx.Transition.EventType.FINISH,
    PAUSE: goog.fx.Transition.EventType.PAUSE,
    ANIMATE: "animate",
    DESTROY: "destroy",
  }),
  (goog.fx.Animation.TIMEOUT = goog.fx.anim.TIMEOUT),
  (goog.fx.Animation.State = goog.fx.TransitionBase.State),
  (goog.fx.Animation.setAnimationWindow = function (t) {
    goog.fx.anim.setAnimationWindow(t);
  }),
  (goog.fx.Animation.prototype.play = function (t) {
    if (t || this.isStopped())
      (this.progress = 0), (this.coords = this.startPoint);
    else if (this.isPlaying()) return !1;
    return (
      goog.fx.anim.unregisterAnimation(this),
      (this.startTime = t = goog.now()),
      this.isPaused() && (this.startTime -= this.duration * this.progress),
      (this.endTime = this.startTime + this.duration),
      (this.lastFrame = this.startTime),
      this.progress || this.onBegin(),
      this.onPlay(),
      this.isPaused() && this.onResume(),
      this.setStatePlaying(),
      goog.fx.anim.registerAnimation(this),
      this.cycle(t),
      !0
    );
  }),
  (goog.fx.Animation.prototype.stop = function (t) {
    goog.fx.anim.unregisterAnimation(this),
      this.setStateStopped(),
      t && (this.progress = 1),
      this.updateCoords_(this.progress),
      this.onStop(),
      this.onEnd();
  }),
  (goog.fx.Animation.prototype.pause = function () {
    this.isPlaying() &&
      (goog.fx.anim.unregisterAnimation(this),
      this.setStatePaused(),
      this.onPause());
  }),
  (goog.fx.Animation.prototype.getProgress = function () {
    return this.progress;
  }),
  (goog.fx.Animation.prototype.setProgress = function (t) {
    (this.progress = t),
      this.isPlaying() &&
        ((this.startTime = goog.now() - this.duration * this.progress),
        (this.endTime = this.startTime + this.duration));
  }),
  (goog.fx.Animation.prototype.disposeInternal = function () {
    this.isStopped() || this.stop(!1),
      this.onDestroy(),
      goog.fx.Animation.superClass_.disposeInternal.call(this);
  }),
  (goog.fx.Animation.prototype.destroy = function () {
    this.dispose();
  }),
  (goog.fx.Animation.prototype.onAnimationFrame = function (t) {
    this.cycle(t);
  }),
  (goog.fx.Animation.prototype.cycle = function (t) {
    goog.asserts.assertNumber(this.startTime),
      goog.asserts.assertNumber(this.endTime),
      goog.asserts.assertNumber(this.lastFrame),
      t < this.startTime &&
        ((this.endTime = t + this.endTime - this.startTime),
        (this.startTime = t)),
      (this.progress = (t - this.startTime) / (this.endTime - this.startTime)),
      1 < this.progress && (this.progress = 1),
      (this.fps_ = 1e3 / (t - this.lastFrame)),
      (this.lastFrame = t),
      this.updateCoords_(this.progress),
      1 == this.progress
        ? (this.setStateStopped(),
          goog.fx.anim.unregisterAnimation(this),
          this.onFinish(),
          this.onEnd())
        : this.isPlaying() && this.onAnimate();
  }),
  (goog.fx.Animation.prototype.updateCoords_ = function (t) {
    goog.isFunction(this.accel_) && (t = this.accel_(t)),
      (this.coords = Array(this.startPoint.length));
    for (var e = 0; e < this.startPoint.length; e++)
      this.coords[e] =
        (this.endPoint[e] - this.startPoint[e]) * t + this.startPoint[e];
  }),
  (goog.fx.Animation.prototype.onAnimate = function () {
    this.dispatchAnimationEvent(goog.fx.Animation.EventType.ANIMATE);
  }),
  (goog.fx.Animation.prototype.onDestroy = function () {
    this.dispatchAnimationEvent(goog.fx.Animation.EventType.DESTROY);
  }),
  (goog.fx.Animation.prototype.dispatchAnimationEvent = function (t) {
    this.dispatchEvent(new goog.fx.AnimationEvent(t, this));
  }),
  (goog.fx.AnimationEvent = function (t, e) {
    goog.events.Event.call(this, t),
      (this.coords = e.coords),
      (this.x = e.coords[0]),
      (this.y = e.coords[1]),
      (this.z = e.coords[2]),
      (this.duration = e.duration),
      (this.progress = e.getProgress()),
      (this.fps = e.fps_),
      (this.state = e.getStateInternal()),
      (this.anim = e);
  }),
  goog.inherits(goog.fx.AnimationEvent, goog.events.Event),
  (goog.fx.AnimationEvent.prototype.coordsAsInts = function () {
    return goog.array.map(this.coords, Math.round);
  }),
  (goog.fx.AnimationQueue = function () {
    goog.fx.TransitionBase.call(this), (this.queue = []);
  }),
  goog.inherits(goog.fx.AnimationQueue, goog.fx.TransitionBase),
  (goog.fx.AnimationQueue.prototype.add = function (t) {
    goog.asserts.assert(
      this.isStopped(),
      "Not allowed to add animations to a running animation queue."
    ),
      goog.array.contains(this.queue, t) ||
        (this.queue.push(t),
        goog.events.listen(
          t,
          goog.fx.Transition.EventType.FINISH,
          this.onAnimationFinish,
          !1,
          this
        ));
  }),
  (goog.fx.AnimationQueue.prototype.remove = function (t) {
    goog.asserts.assert(
      this.isStopped(),
      "Not allowed to remove animations from a running animation queue."
    ),
      goog.array.remove(this.queue, t) &&
        goog.events.unlisten(
          t,
          goog.fx.Transition.EventType.FINISH,
          this.onAnimationFinish,
          !1,
          this
        );
  }),
  (goog.fx.AnimationQueue.prototype.onAnimationFinish = goog.abstractMethod),
  (goog.fx.AnimationQueue.prototype.disposeInternal = function () {
    goog.array.forEach(this.queue, function (t) {
      t.dispose();
    }),
      (this.queue.length = 0),
      goog.fx.AnimationQueue.superClass_.disposeInternal.call(this);
  }),
  (goog.fx.AnimationParallelQueue = function () {
    goog.fx.AnimationQueue.call(this), (this.finishedCounter_ = 0);
  }),
  goog.inherits(goog.fx.AnimationParallelQueue, goog.fx.AnimationQueue),
  (goog.fx.AnimationParallelQueue.prototype.play = function (t) {
    if (0 == this.queue.length) return !1;
    if (t || this.isStopped()) (this.finishedCounter_ = 0), this.onBegin();
    else if (this.isPlaying()) return !1;
    this.onPlay(), this.isPaused() && this.onResume();
    var e = this.isPaused() && !t;
    return (
      (this.startTime = goog.now()),
      (this.endTime = null),
      this.setStatePlaying(),
      goog.array.forEach(this.queue, function (o) {
        (e && !o.isPaused()) || o.play(t);
      }),
      !0
    );
  }),
  (goog.fx.AnimationParallelQueue.prototype.pause = function () {
    this.isPlaying() &&
      (goog.array.forEach(this.queue, function (t) {
        t.isPlaying() && t.pause();
      }),
      this.setStatePaused(),
      this.onPause());
  }),
  (goog.fx.AnimationParallelQueue.prototype.stop = function (t) {
    goog.array.forEach(this.queue, function (e) {
      e.isStopped() || e.stop(t);
    }),
      this.setStateStopped(),
      (this.endTime = goog.now()),
      this.onStop(),
      this.onEnd();
  }),
  (goog.fx.AnimationParallelQueue.prototype.onAnimationFinish = function (t) {
    this.finishedCounter_++,
      this.finishedCounter_ == this.queue.length &&
        ((this.endTime = goog.now()),
        this.setStateStopped(),
        this.onFinish(),
        this.onEnd());
  }),
  (goog.fx.AnimationSerialQueue = function () {
    goog.fx.AnimationQueue.call(this), (this.current_ = 0);
  }),
  goog.inherits(goog.fx.AnimationSerialQueue, goog.fx.AnimationQueue),
  (goog.fx.AnimationSerialQueue.prototype.play = function (t) {
    if (0 == this.queue.length) return !1;
    if (t || this.isStopped())
      this.current_ < this.queue.length &&
        !this.queue[this.current_].isStopped() &&
        this.queue[this.current_].stop(!1),
        (this.current_ = 0),
        this.onBegin();
    else if (this.isPlaying()) return !1;
    return (
      this.onPlay(),
      this.isPaused() && this.onResume(),
      (this.startTime = goog.now()),
      (this.endTime = null),
      this.setStatePlaying(),
      this.queue[this.current_].play(t),
      !0
    );
  }),
  (goog.fx.AnimationSerialQueue.prototype.pause = function () {
    this.isPlaying() &&
      (this.queue[this.current_].pause(),
      this.setStatePaused(),
      this.onPause());
  }),
  (goog.fx.AnimationSerialQueue.prototype.stop = function (t) {
    if ((this.setStateStopped(), (this.endTime = goog.now()), t))
      for (t = this.current_; t < this.queue.length; ++t) {
        var e = this.queue[t];
        e.isStopped() && e.play(), e.isStopped() || e.stop(!0);
      }
    else
      this.current_ < this.queue.length && this.queue[this.current_].stop(!1);
    this.onStop(), this.onEnd();
  }),
  (goog.fx.AnimationSerialQueue.prototype.onAnimationFinish = function (t) {
    this.isPlaying() &&
      (this.current_++,
      this.current_ < this.queue.length
        ? this.queue[this.current_].play()
        : ((this.endTime = goog.now()),
          this.setStateStopped(),
          this.onFinish(),
          this.onEnd()));
  }),
  (goog.userAgent.platform = {}),
  (goog.userAgent.platform.determineVersion_ = function () {
    if (goog.userAgent.WINDOWS) {
      var t = /Windows NT ([0-9.]+)/;
      return (t = t.exec(goog.userAgent.getUserAgentString())) ? t[1] : "0";
    }
    return goog.userAgent.MAC
      ? (t = (t = /10[_.][0-9_.]+/).exec(goog.userAgent.getUserAgentString()))
        ? t[0].replace(/_/g, ".")
        : "10"
      : goog.userAgent.ANDROID
      ? (t = (t = /Android\s+([^\);]+)(\)|;)/).exec(
          goog.userAgent.getUserAgentString()
        ))
        ? t[1]
        : ""
      : (goog.userAgent.IPHONE || goog.userAgent.IPAD || goog.userAgent.IPOD) &&
        (t = (t = /(?:iPhone|CPU)\s+OS\s+(\S+)/).exec(
          goog.userAgent.getUserAgentString()
        ))
      ? t[1].replace(/_/g, ".")
      : "";
  }),
  (goog.userAgent.platform.VERSION =
    goog.userAgent.platform.determineVersion_()),
  (goog.userAgent.platform.isVersion = function (t) {
    return 0 <= goog.string.compareVersions(goog.userAgent.platform.VERSION, t);
  }),
  (goog.userAgent.product = {}),
  (goog.userAgent.product.ASSUME_FIREFOX = !1),
  (goog.userAgent.product.ASSUME_IPHONE = !1),
  (goog.userAgent.product.ASSUME_IPAD = !1),
  (goog.userAgent.product.ASSUME_ANDROID = !1),
  (goog.userAgent.product.ASSUME_CHROME = !1),
  (goog.userAgent.product.ASSUME_SAFARI = !1),
  (goog.userAgent.product.PRODUCT_KNOWN_ =
    goog.userAgent.ASSUME_IE ||
    goog.userAgent.ASSUME_EDGE ||
    goog.userAgent.ASSUME_OPERA ||
    goog.userAgent.product.ASSUME_FIREFOX ||
    goog.userAgent.product.ASSUME_IPHONE ||
    goog.userAgent.product.ASSUME_IPAD ||
    goog.userAgent.product.ASSUME_ANDROID ||
    goog.userAgent.product.ASSUME_CHROME ||
    goog.userAgent.product.ASSUME_SAFARI),
  (goog.userAgent.product.OPERA = goog.userAgent.OPERA),
  (goog.userAgent.product.IE = goog.userAgent.IE),
  (goog.userAgent.product.EDGE = goog.userAgent.EDGE),
  (goog.userAgent.product.FIREFOX = goog.userAgent.product.PRODUCT_KNOWN_
    ? goog.userAgent.product.ASSUME_FIREFOX
    : goog.labs.userAgent.browser.isFirefox()),
  (goog.userAgent.product.isIphoneOrIpod_ = function () {
    return (
      goog.labs.userAgent.platform.isIphone() ||
      goog.labs.userAgent.platform.isIpod()
    );
  }),
  (goog.userAgent.product.IPHONE = goog.userAgent.product.PRODUCT_KNOWN_
    ? goog.userAgent.product.ASSUME_IPHONE
    : goog.userAgent.product.isIphoneOrIpod_()),
  (goog.userAgent.product.IPAD = goog.userAgent.product.PRODUCT_KNOWN_
    ? goog.userAgent.product.ASSUME_IPAD
    : goog.labs.userAgent.platform.isIpad()),
  (goog.userAgent.product.ANDROID = goog.userAgent.product.PRODUCT_KNOWN_
    ? goog.userAgent.product.ASSUME_ANDROID
    : goog.labs.userAgent.browser.isAndroidBrowser()),
  (goog.userAgent.product.CHROME = goog.userAgent.product.PRODUCT_KNOWN_
    ? goog.userAgent.product.ASSUME_CHROME
    : goog.labs.userAgent.browser.isChrome()),
  (goog.userAgent.product.isSafariDesktop_ = function () {
    return (
      goog.labs.userAgent.browser.isSafari() &&
      !goog.labs.userAgent.platform.isIos()
    );
  }),
  (goog.userAgent.product.SAFARI = goog.userAgent.product.PRODUCT_KNOWN_
    ? goog.userAgent.product.ASSUME_SAFARI
    : goog.userAgent.product.isSafariDesktop_()),
  (goog.userAgent.product.determineVersion_ = function () {
    if (goog.userAgent.product.FIREFOX)
      return goog.userAgent.product.getFirstRegExpGroup_(/Firefox\/([0-9.]+)/);
    if (
      goog.userAgent.product.IE ||
      goog.userAgent.product.EDGE ||
      goog.userAgent.product.OPERA
    )
      return goog.userAgent.VERSION;
    if (goog.userAgent.product.CHROME)
      return goog.labs.userAgent.platform.isIos()
        ? goog.userAgent.product.getFirstRegExpGroup_(/CriOS\/([0-9.]+)/)
        : goog.userAgent.product.getFirstRegExpGroup_(/Chrome\/([0-9.]+)/);
    if (goog.userAgent.product.SAFARI && !goog.labs.userAgent.platform.isIos())
      return goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);
    if (goog.userAgent.product.IPHONE || goog.userAgent.product.IPAD) {
      var t = goog.userAgent.product.execRegExp_(
        /Version\/(\S+).*Mobile\/(\S+)/
      );
      if (t) return t[1] + "." + t[2];
    } else if (goog.userAgent.product.ANDROID)
      return (t =
        goog.userAgent.product.getFirstRegExpGroup_(/Android\s+([0-9.]+)/))
        ? t
        : goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);
    return "";
  }),
  (goog.userAgent.product.getFirstRegExpGroup_ = function (t) {
    return (t = goog.userAgent.product.execRegExp_(t)) ? t[1] : "";
  }),
  (goog.userAgent.product.execRegExp_ = function (t) {
    return t.exec(goog.userAgent.getUserAgentString());
  }),
  (goog.userAgent.product.VERSION = goog.userAgent.product.determineVersion_()),
  (goog.userAgent.product.isVersion = function (t) {
    return 0 <= goog.string.compareVersions(goog.userAgent.product.VERSION, t);
  }),
  (goog.style.bidi = {}),
  (goog.style.bidi.getScrollLeft = function (t) {
    var e = goog.style.isRightToLeft(t);
    return e && goog.style.bidi.usesNegativeScrollLeftInRtl_()
      ? -t.scrollLeft
      : !e ||
        (goog.userAgent.EDGE_OR_IE && goog.userAgent.isVersionOrHigher("8")) ||
        "visible" == goog.style.getComputedOverflowX(t)
      ? t.scrollLeft
      : t.scrollWidth - t.clientWidth - t.scrollLeft;
  }),
  (goog.style.bidi.getOffsetStart = function (t) {
    var e = t.offsetLeft,
      o = t.offsetParent;
    if (
      (o ||
        "fixed" != goog.style.getComputedPosition(t) ||
        (o = goog.dom.getOwnerDocument(t).documentElement),
      !o)
    )
      return e;
    if (goog.userAgent.GECKO && !goog.userAgent.isVersionOrHigher(58)) {
      var i = goog.style.getBorderBox(o);
      e += i.left;
    } else
      goog.userAgent.isDocumentModeOrHigher(8) &&
        !goog.userAgent.isDocumentModeOrHigher(9) &&
        (e -= (i = goog.style.getBorderBox(o)).left);
    return goog.style.isRightToLeft(o)
      ? o.clientWidth - (e + t.offsetWidth)
      : e;
  }),
  (goog.style.bidi.setScrollOffset = function (t, e) {
    (e = Math.max(e, 0)),
      goog.style.isRightToLeft(t)
        ? goog.style.bidi.usesNegativeScrollLeftInRtl_()
          ? (t.scrollLeft = -e)
          : goog.userAgent.EDGE_OR_IE && goog.userAgent.isVersionOrHigher("8")
          ? (t.scrollLeft = e)
          : (t.scrollLeft = t.scrollWidth - e - t.clientWidth)
        : (t.scrollLeft = e);
  }),
  (goog.style.bidi.usesNegativeScrollLeftInRtl_ = function () {
    var t =
        goog.userAgent.product.SAFARI && goog.userAgent.product.isVersion(10),
      e = goog.userAgent.IOS && goog.userAgent.platform.isVersion(10);
    return goog.userAgent.GECKO || t || e;
  }),
  (goog.style.bidi.setPosition = function (t, e, o, i) {
    null !== o && (t.style.top = o + "px"),
      i
        ? ((t.style.right = e + "px"), (t.style.left = ""))
        : ((t.style.left = e + "px"), (t.style.right = ""));
  }),
  (goog.fx.Dragger = function (t, e, o) {
    goog.events.EventTarget.call(this),
      (this.target = t),
      (this.handle = e || t),
      (this.limits = o || new goog.math.Rect(NaN, NaN, NaN, NaN)),
      (this.document_ = goog.dom.getOwnerDocument(t)),
      (this.eventHandler_ = new goog.events.EventHandler(this)),
      this.registerDisposable(this.eventHandler_),
      (this.deltaY =
        this.deltaX =
        this.startY =
        this.startX =
        this.screenY =
        this.screenX =
        this.clientY =
        this.clientX =
          0),
      (this.enabled_ = !0),
      (this.dragging_ = !1),
      (this.preventMouseDown_ = !0),
      (this.hysteresisDistanceSquared_ = 0),
      (this.useRightPositioningForRtl_ = this.ieDragStartCancellingOn_ = !1),
      goog.events.listen(
        this.handle,
        [goog.events.EventType.TOUCHSTART, goog.events.EventType.MOUSEDOWN],
        this.startDrag,
        !1,
        this
      ),
      (this.useSetCapture_ = goog.fx.Dragger.HAS_SET_CAPTURE_);
  }),
  goog.inherits(goog.fx.Dragger, goog.events.EventTarget),
  goog.tagUnsealableClass(goog.fx.Dragger),
  (goog.fx.Dragger.HAS_SET_CAPTURE_ =
    goog.global.document &&
    goog.global.document.documentElement &&
    !!goog.global.document.documentElement.setCapture &&
    !!goog.global.document.releaseCapture),
  (goog.fx.Dragger.cloneNode = function (t) {
    for (
      var e = t.cloneNode(!0),
        o = goog.dom.getElementsByTagName("TEXTAREA", t),
        i = goog.dom.getElementsByTagName("TEXTAREA", e),
        n = 0;
      n < o.length;
      n++
    )
      i[n].value = o[n].value;
    switch (t.tagName) {
      case "TR":
        return goog.dom.createDom(
          "TABLE",
          null,
          goog.dom.createDom("TBODY", null, e)
        );
      case "TD":
      case "TH":
        return goog.dom.createDom(
          "TABLE",
          null,
          goog.dom.createDom("TBODY", null, goog.dom.createDom("TR", null, e))
        );
      case "TEXTAREA":
        e.value = t.value;
      default:
        return e;
    }
  }),
  (goog.fx.Dragger.EventType = {
    EARLY_CANCEL: "earlycancel",
    START: "start",
    BEFOREDRAG: "beforedrag",
    DRAG: "drag",
    END: "end",
  }),
  (goog.fx.Dragger.prototype.setAllowSetCapture = function (t) {
    this.useSetCapture_ = t && goog.fx.Dragger.HAS_SET_CAPTURE_;
  }),
  (goog.fx.Dragger.prototype.enableRightPositioningForRtl = function (t) {
    this.useRightPositioningForRtl_ = t;
  }),
  (goog.fx.Dragger.prototype.getHandler = function () {
    return this.eventHandler_;
  }),
  (goog.fx.Dragger.prototype.setLimits = function (t) {
    this.limits = t || new goog.math.Rect(NaN, NaN, NaN, NaN);
  }),
  (goog.fx.Dragger.prototype.setHysteresis = function (t) {
    this.hysteresisDistanceSquared_ = Math.pow(t, 2);
  }),
  (goog.fx.Dragger.prototype.getHysteresis = function () {
    return Math.sqrt(this.hysteresisDistanceSquared_);
  }),
  (goog.fx.Dragger.prototype.setScrollTarget = function (t) {
    this.scrollTarget_ = t;
  }),
  (goog.fx.Dragger.prototype.setCancelIeDragStart = function (t) {
    this.ieDragStartCancellingOn_ = t;
  }),
  (goog.fx.Dragger.prototype.getEnabled = function () {
    return this.enabled_;
  }),
  (goog.fx.Dragger.prototype.setEnabled = function (t) {
    this.enabled_ = t;
  }),
  (goog.fx.Dragger.prototype.setPreventMouseDown = function (t) {
    this.preventMouseDown_ = t;
  }),
  (goog.fx.Dragger.prototype.disposeInternal = function () {
    goog.fx.Dragger.superClass_.disposeInternal.call(this),
      goog.events.unlisten(
        this.handle,
        [goog.events.EventType.TOUCHSTART, goog.events.EventType.MOUSEDOWN],
        this.startDrag,
        !1,
        this
      ),
      this.cleanUpAfterDragging_(),
      (this.handle = this.target = null);
  }),
  (goog.fx.Dragger.prototype.isRightToLeft_ = function () {
    return (
      void 0 === this.rightToLeft_ &&
        (this.rightToLeft_ = goog.style.isRightToLeft(this.target)),
      this.rightToLeft_
    );
  }),
  (goog.fx.Dragger.prototype.startDrag = function (t) {
    var e = t.type == goog.events.EventType.MOUSEDOWN;
    if (!this.enabled_ || this.dragging_ || (e && !t.isMouseActionButton()))
      this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);
    else {
      if (0 == this.hysteresisDistanceSquared_) {
        if (!this.fireDragStart_(t)) return;
        (this.dragging_ = !0),
          this.preventMouseDown_ && e && t.preventDefault();
      } else this.preventMouseDown_ && e && t.preventDefault();
      this.setupDragHandlers(),
        (this.clientX = this.startX = t.clientX),
        (this.clientY = this.startY = t.clientY),
        (this.screenX = t.screenX),
        (this.screenY = t.screenY),
        this.computeInitialPosition(),
        (this.pageScroll = goog.dom
          .getDomHelper(this.document_)
          .getDocumentScroll());
    }
  }),
  (goog.fx.Dragger.prototype.setupDragHandlers = function () {
    var t = this.document_,
      e = t.documentElement,
      o = !this.useSetCapture_;
    this.eventHandler_.listen(
      t,
      [goog.events.EventType.TOUCHMOVE, goog.events.EventType.MOUSEMOVE],
      this.handleMove_,
      { capture: o, passive: !1 }
    ),
      this.eventHandler_.listen(
        t,
        [goog.events.EventType.TOUCHEND, goog.events.EventType.MOUSEUP],
        this.endDrag,
        o
      ),
      this.useSetCapture_
        ? (e.setCapture(!1),
          this.eventHandler_.listen(
            e,
            goog.events.EventType.LOSECAPTURE,
            this.endDrag
          ))
        : this.eventHandler_.listen(
            goog.dom.getWindow(t),
            goog.events.EventType.BLUR,
            this.endDrag
          ),
      goog.userAgent.IE &&
        this.ieDragStartCancellingOn_ &&
        this.eventHandler_.listen(
          t,
          goog.events.EventType.DRAGSTART,
          goog.events.Event.preventDefault
        ),
      this.scrollTarget_ &&
        this.eventHandler_.listen(
          this.scrollTarget_,
          goog.events.EventType.SCROLL,
          this.onScroll_,
          o
        );
  }),
  (goog.fx.Dragger.prototype.fireDragStart_ = function (t) {
    return this.dispatchEvent(
      new goog.fx.DragEvent(
        goog.fx.Dragger.EventType.START,
        this,
        t.clientX,
        t.clientY,
        t
      )
    );
  }),
  (goog.fx.Dragger.prototype.cleanUpAfterDragging_ = function () {
    this.eventHandler_.removeAll(),
      this.useSetCapture_ && this.document_.releaseCapture();
  }),
  (goog.fx.Dragger.prototype.endDrag = function (t, e) {
    if ((this.cleanUpAfterDragging_(), this.dragging_)) {
      this.dragging_ = !1;
      var o = this.limitX(this.deltaX),
        i = this.limitY(this.deltaY);
      this.dispatchEvent(
        new goog.fx.DragEvent(
          goog.fx.Dragger.EventType.END,
          this,
          t.clientX,
          t.clientY,
          t,
          o,
          i,
          e || t.type == goog.events.EventType.TOUCHCANCEL
        )
      );
    } else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);
  }),
  (goog.fx.Dragger.prototype.endDragCancel = function (t) {
    this.endDrag(t, !0);
  }),
  (goog.fx.Dragger.prototype.handleMove_ = function (t) {
    if (this.enabled_) {
      var e =
          (this.useRightPositioningForRtl_ && this.isRightToLeft_() ? -1 : 1) *
          (t.clientX - this.clientX),
        o = t.clientY - this.clientY;
      if (
        ((this.clientX = t.clientX),
        (this.clientY = t.clientY),
        (this.screenX = t.screenX),
        (this.screenY = t.screenY),
        !this.dragging_)
      ) {
        var i = this.startX - this.clientX,
          n = this.startY - this.clientY;
        if (i * i + n * n > this.hysteresisDistanceSquared_) {
          if (!this.fireDragStart_(t))
            return void (this.isDisposed() || this.endDrag(t));
          this.dragging_ = !0;
        }
      }
      (e = (o = this.calculatePosition_(e, o)).x),
        (o = o.y),
        this.dragging_ &&
          this.dispatchEvent(
            new goog.fx.DragEvent(
              goog.fx.Dragger.EventType.BEFOREDRAG,
              this,
              t.clientX,
              t.clientY,
              t,
              e,
              o
            )
          ) &&
          (this.doDrag(t, e, o, !1), t.preventDefault());
    }
  }),
  (goog.fx.Dragger.prototype.calculatePosition_ = function (t, e) {
    var o = goog.dom.getDomHelper(this.document_).getDocumentScroll();
    return (
      (t += o.x - this.pageScroll.x),
      (e += o.y - this.pageScroll.y),
      (this.pageScroll = o),
      (this.deltaX += t),
      (this.deltaY += e),
      (t = this.limitX(this.deltaX)),
      (e = this.limitY(this.deltaY)),
      new goog.math.Coordinate(t, e)
    );
  }),
  (goog.fx.Dragger.prototype.onScroll_ = function (t) {
    var e = this.calculatePosition_(0, 0);
    (t.clientX = this.clientX),
      (t.clientY = this.clientY),
      this.doDrag(t, e.x, e.y, !0);
  }),
  (goog.fx.Dragger.prototype.doDrag = function (t, e, o, i) {
    this.defaultAction(e, o),
      this.dispatchEvent(
        new goog.fx.DragEvent(
          goog.fx.Dragger.EventType.DRAG,
          this,
          t.clientX,
          t.clientY,
          t,
          e,
          o
        )
      );
  }),
  (goog.fx.Dragger.prototype.limitX = function (t) {
    var e = this.limits,
      o = isNaN(e.left) ? null : e.left;
    return (
      (e = isNaN(e.width) ? 0 : e.width),
      Math.min(null != o ? o + e : 1 / 0, Math.max(null != o ? o : -1 / 0, t))
    );
  }),
  (goog.fx.Dragger.prototype.limitY = function (t) {
    var e = this.limits,
      o = isNaN(e.top) ? null : e.top;
    return (
      (e = isNaN(e.height) ? 0 : e.height),
      Math.min(null != o ? o + e : 1 / 0, Math.max(null != o ? o : -1 / 0, t))
    );
  }),
  (goog.fx.Dragger.prototype.computeInitialPosition = function () {
    (this.deltaX = this.useRightPositioningForRtl_
      ? goog.style.bidi.getOffsetStart(this.target)
      : this.target.offsetLeft),
      (this.deltaY = this.target.offsetTop);
  }),
  (goog.fx.Dragger.prototype.defaultAction = function (t, e) {
    this.useRightPositioningForRtl_ && this.isRightToLeft_()
      ? (this.target.style.right = t + "px")
      : (this.target.style.left = t + "px"),
      (this.target.style.top = e + "px");
  }),
  (goog.fx.Dragger.prototype.isDragging = function () {
    return this.dragging_;
  }),
  (goog.fx.DragEvent = function (t, e, o, i, n, l, r, s) {
    goog.events.Event.call(this, t),
      (this.clientX = o),
      (this.clientY = i),
      (this.browserEvent = n),
      (this.left = void 0 !== l ? l : e.deltaX),
      (this.top = void 0 !== r ? r : e.deltaY),
      (this.dragger = e),
      (this.dragCanceled = !!s);
  }),
  goog.inherits(goog.fx.DragEvent, goog.events.Event),
  (goog.color = {}),
  (goog.color.names = {
    aliceblue: "#f0f8ff",
    antiquewhite: "#faebd7",
    aqua: "#00ffff",
    aquamarine: "#7fffd4",
    azure: "#f0ffff",
    beige: "#f5f5dc",
    bisque: "#ffe4c4",
    black: "#000000",
    blanchedalmond: "#ffebcd",
    blue: "#0000ff",
    blueviolet: "#8a2be2",
    brown: "#a52a2a",
    burlywood: "#deb887",
    cadetblue: "#5f9ea0",
    chartreuse: "#7fff00",
    chocolate: "#d2691e",
    coral: "#ff7f50",
    cornflowerblue: "#6495ed",
    cornsilk: "#fff8dc",
    crimson: "#dc143c",
    cyan: "#00ffff",
    darkblue: "#00008b",
    darkcyan: "#008b8b",
    darkgoldenrod: "#b8860b",
    darkgray: "#a9a9a9",
    darkgreen: "#006400",
    darkgrey: "#a9a9a9",
    darkkhaki: "#bdb76b",
    darkmagenta: "#8b008b",
    darkolivegreen: "#556b2f",
    darkorange: "#ff8c00",
    darkorchid: "#9932cc",
    darkred: "#8b0000",
    darksalmon: "#e9967a",
    darkseagreen: "#8fbc8f",
    darkslateblue: "#483d8b",
    darkslategray: "#2f4f4f",
    darkslategrey: "#2f4f4f",
    darkturquoise: "#00ced1",
    darkviolet: "#9400d3",
    deeppink: "#ff1493",
    deepskyblue: "#00bfff",
    dimgray: "#696969",
    dimgrey: "#696969",
    dodgerblue: "#1e90ff",
    firebrick: "#b22222",
    floralwhite: "#fffaf0",
    forestgreen: "#228b22",
    fuchsia: "#ff00ff",
    gainsboro: "#dcdcdc",
    ghostwhite: "#f8f8ff",
    gold: "#ffd700",
    goldenrod: "#daa520",
    gray: "#808080",
    green: "#008000",
    greenyellow: "#adff2f",
    grey: "#808080",
    honeydew: "#f0fff0",
    hotpink: "#ff69b4",
    indianred: "#cd5c5c",
    indigo: "#4b0082",
    ivory: "#fffff0",
    khaki: "#f0e68c",
    lavender: "#e6e6fa",
    lavenderblush: "#fff0f5",
    lawngreen: "#7cfc00",
    lemonchiffon: "#fffacd",
    lightblue: "#add8e6",
    lightcoral: "#f08080",
    lightcyan: "#e0ffff",
    lightgoldenrodyellow: "#fafad2",
    lightgray: "#d3d3d3",
    lightgreen: "#90ee90",
    lightgrey: "#d3d3d3",
    lightpink: "#ffb6c1",
    lightsalmon: "#ffa07a",
    lightseagreen: "#20b2aa",
    lightskyblue: "#87cefa",
    lightslategray: "#778899",
    lightslategrey: "#778899",
    lightsteelblue: "#b0c4de",
    lightyellow: "#ffffe0",
    lime: "#00ff00",
    limegreen: "#32cd32",
    linen: "#faf0e6",
    magenta: "#ff00ff",
    maroon: "#800000",
    mediumaquamarine: "#66cdaa",
    mediumblue: "#0000cd",
    mediumorchid: "#ba55d3",
    mediumpurple: "#9370db",
    mediumseagreen: "#3cb371",
    mediumslateblue: "#7b68ee",
    mediumspringgreen: "#00fa9a",
    mediumturquoise: "#48d1cc",
    mediumvioletred: "#c71585",
    midnightblue: "#191970",
    mintcream: "#f5fffa",
    mistyrose: "#ffe4e1",
    moccasin: "#ffe4b5",
    navajowhite: "#ffdead",
    navy: "#000080",
    oldlace: "#fdf5e6",
    olive: "#808000",
    olivedrab: "#6b8e23",
    orange: "#ffa500",
    orangered: "#ff4500",
    orchid: "#da70d6",
    palegoldenrod: "#eee8aa",
    palegreen: "#98fb98",
    paleturquoise: "#afeeee",
    palevioletred: "#db7093",
    papayawhip: "#ffefd5",
    peachpuff: "#ffdab9",
    peru: "#cd853f",
    pink: "#ffc0cb",
    plum: "#dda0dd",
    powderblue: "#b0e0e6",
    purple: "#800080",
    red: "#ff0000",
    rosybrown: "#bc8f8f",
    royalblue: "#4169e1",
    saddlebrown: "#8b4513",
    salmon: "#fa8072",
    sandybrown: "#f4a460",
    seagreen: "#2e8b57",
    seashell: "#fff5ee",
    sienna: "#a0522d",
    silver: "#c0c0c0",
    skyblue: "#87ceeb",
    slateblue: "#6a5acd",
    slategray: "#708090",
    slategrey: "#708090",
    snow: "#fffafa",
    springgreen: "#00ff7f",
    steelblue: "#4682b4",
    tan: "#d2b48c",
    teal: "#008080",
    thistle: "#d8bfd8",
    tomato: "#ff6347",
    turquoise: "#40e0d0",
    violet: "#ee82ee",
    wheat: "#f5deb3",
    white: "#ffffff",
    whitesmoke: "#f5f5f5",
    yellow: "#ffff00",
    yellowgreen: "#9acd32",
  }),
  (goog.color.parse = function (t) {
    var e = {};
    t = String(t);
    var o = goog.color.prependHashIfNecessaryHelper(t);
    if (goog.color.isValidHexColor_(o))
      return (e.hex = goog.color.normalizeHex(o)), (e.type = "hex"), e;
    if ((o = goog.color.isValidRgbColor_(t)).length)
      return (e.hex = goog.color.rgbArrayToHex(o)), (e.type = "rgb"), e;
    if (goog.color.names && (o = goog.color.names[t.toLowerCase()]))
      return (e.hex = o), (e.type = "named"), e;
    throw Error(t + " is not a valid color string");
  }),
  (goog.color.isValidColor = function (t) {
    var e = goog.color.prependHashIfNecessaryHelper(t);
    return !!(
      goog.color.isValidHexColor_(e) ||
      goog.color.isValidRgbColor_(t).length ||
      (goog.color.names && goog.color.names[t.toLowerCase()])
    );
  }),
  (goog.color.parseRgb = function (t) {
    var e = goog.color.isValidRgbColor_(t);
    if (!e.length) throw Error(t + " is not a valid RGB color");
    return e;
  }),
  (goog.color.hexToRgbStyle = function (t) {
    return goog.color.rgbStyle_(goog.color.hexToRgb(t));
  }),
  (goog.color.hexTripletRe_ = /#(.)(.)(.)/),
  (goog.color.normalizeHex = function (t) {
    if (!goog.color.isValidHexColor_(t))
      throw Error("'" + t + "' is not a valid hex color");
    return (
      4 == t.length &&
        (t = t.replace(goog.color.hexTripletRe_, "#$1$1$2$2$3$3")),
      t.toLowerCase()
    );
  }),
  (goog.color.hexToRgb = function (t) {
    return (
      (t = goog.color.normalizeHex(t)),
      [(t = parseInt(t.substr(1), 16)) >> 16, (t >> 8) & 255, 255 & t]
    );
  }),
  (goog.color.rgbToHex = function (t, e, o) {
    if (
      ((t = Number(t)),
      (e = Number(e)),
      (o = Number(o)),
      t != (255 & t) || e != (255 & e) || o != (255 & o))
    )
      throw Error('"(' + t + "," + e + "," + o + '") is not a valid RGB color');
    return (
      (e = (t << 16) | (e << 8) | o),
      16 > t
        ? "#" + (16777216 | e).toString(16).substr(1)
        : "#" + e.toString(16)
    );
  }),
  (goog.color.rgbArrayToHex = function (t) {
    return goog.color.rgbToHex(t[0], t[1], t[2]);
  }),
  (goog.color.rgbToHsl = function (t, e, o) {
    (t /= 255), (e /= 255), (o /= 255);
    var i = Math.max(t, e, o),
      n = Math.min(t, e, o),
      l = 0,
      r = 0,
      s = 0.5 * (i + n);
    return (
      i != n &&
        (i == t
          ? (l = (60 * (e - o)) / (i - n))
          : i == e
          ? (l = (60 * (o - t)) / (i - n) + 120)
          : i == o && (l = (60 * (t - e)) / (i - n) + 240),
        (r = 0 < s && 0.5 >= s ? (i - n) / (2 * s) : (i - n) / (2 - 2 * s))),
      [Math.round(l + 360) % 360, r, s]
    );
  }),
  (goog.color.rgbArrayToHsl = function (t) {
    return goog.color.rgbToHsl(t[0], t[1], t[2]);
  }),
  (goog.color.hueToRgb_ = function (t, e, o) {
    return (
      0 > o ? (o += 1) : 1 < o && --o,
      1 > 6 * o
        ? t + 6 * (e - t) * o
        : 1 > 2 * o
        ? e
        : 2 > 3 * o
        ? t + (e - t) * (2 / 3 - o) * 6
        : t
    );
  }),
  (goog.color.hslToRgb = function (t, e, o) {
    if (((t /= 360), 0 == e)) o = e = t = 255 * o;
    else {
      var i = 0.5 > o ? o * (1 + e) : o + e - e * o,
        n = 2 * o - i;
      (o = 255 * goog.color.hueToRgb_(n, i, t + 1 / 3)),
        (e = 255 * goog.color.hueToRgb_(n, i, t)),
        (t = 255 * goog.color.hueToRgb_(n, i, t - 1 / 3));
    }
    return [Math.round(o), Math.round(e), Math.round(t)];
  }),
  (goog.color.hslArrayToRgb = function (t) {
    return goog.color.hslToRgb(t[0], t[1], t[2]);
  }),
  (goog.color.validHexColorRe_ = /^#(?:[0-9a-f]{3}){1,2}$/i),
  (goog.color.isValidHexColor_ = function (t) {
    return goog.color.validHexColorRe_.test(t);
  }),
  (goog.color.rgbColorRe_ =
    /^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i),
  (goog.color.isValidRgbColor_ = function (t) {
    var e = t.match(goog.color.rgbColorRe_);
    if (e) {
      t = Number(e[1]);
      var o = Number(e[2]);
      if (
        ((e = Number(e[3])),
        0 <= t && 255 >= t && 0 <= o && 255 >= o && 0 <= e && 255 >= e)
      )
        return [t, o, e];
    }
    return [];
  }),
  (goog.color.prependZeroIfNecessaryHelper = function (t) {
    return 1 == t.length ? "0" + t : t;
  }),
  (goog.color.prependHashIfNecessaryHelper = function (t) {
    return "#" == t.charAt(0) ? t : "#" + t;
  }),
  (goog.color.rgbStyle_ = function (t) {
    return "rgb(" + t.join(",") + ")";
  }),
  (goog.color.hsvToRgb = function (t, e, o) {
    var i = 0,
      n = 0,
      l = 0;
    if (0 == e) l = n = i = o;
    else {
      var r = Math.floor(t / 60),
        s = t / 60 - r;
      t = o * (1 - e);
      var a = o * (1 - e * s);
      switch (((e = o * (1 - e * (1 - s))), r)) {
        case 1:
          (i = a), (n = o), (l = t);
          break;
        case 2:
          (i = t), (n = o), (l = e);
          break;
        case 3:
          (i = t), (n = a), (l = o);
          break;
        case 4:
          (i = e), (n = t), (l = o);
          break;
        case 5:
          (i = o), (n = t), (l = a);
          break;
        case 6:
        case 0:
          (i = o), (n = e), (l = t);
      }
    }
    return [Math.round(i), Math.round(n), Math.round(l)];
  }),
  (goog.color.rgbToHsv = function (t, e, o) {
    var i = Math.max(Math.max(t, e), o),
      n = Math.min(Math.min(t, e), o);
    if (n == i) n = t = 0;
    else {
      var l = i - n;
      (n = l / i),
        0 >
          (t =
            60 *
            (t == i
              ? (e - o) / l
              : e == i
              ? 2 + (o - t) / l
              : 4 + (t - e) / l)) && (t += 360),
        360 < t && (t -= 360);
    }
    return [t, n, i];
  }),
  (goog.color.rgbArrayToHsv = function (t) {
    return goog.color.rgbToHsv(t[0], t[1], t[2]);
  }),
  (goog.color.hsvArrayToRgb = function (t) {
    return goog.color.hsvToRgb(t[0], t[1], t[2]);
  }),
  (goog.color.hexToHsl = function (t) {
    return (t = goog.color.hexToRgb(t)), goog.color.rgbToHsl(t[0], t[1], t[2]);
  }),
  (goog.color.hslToHex = function (t, e, o) {
    return goog.color.rgbArrayToHex(goog.color.hslToRgb(t, e, o));
  }),
  (goog.color.hslArrayToHex = function (t) {
    return goog.color.rgbArrayToHex(goog.color.hslToRgb(t[0], t[1], t[2]));
  }),
  (goog.color.hexToHsv = function (t) {
    return goog.color.rgbArrayToHsv(goog.color.hexToRgb(t));
  }),
  (goog.color.hsvToHex = function (t, e, o) {
    return goog.color.rgbArrayToHex(goog.color.hsvToRgb(t, e, o));
  }),
  (goog.color.hsvArrayToHex = function (t) {
    return goog.color.hsvToHex(t[0], t[1], t[2]);
  }),
  (goog.color.hslDistance = function (t, e) {
    var o = 0.5 >= t[2] ? t[1] * t[2] : t[1] * (1 - t[2]),
      i = 0.5 >= e[2] ? e[1] * e[2] : e[1] * (1 - e[2]);
    return (
      (t[2] - e[2]) * (t[2] - e[2]) +
      o * o +
      i * i -
      2 * o * i * Math.cos(2 * (t[0] / 360 - e[0] / 360) * Math.PI)
    );
  }),
  (goog.color.blend = function (t, e, o) {
    return (
      (o = goog.math.clamp(o, 0, 1)),
      [
        Math.round(e[0] + o * (t[0] - e[0])),
        Math.round(e[1] + o * (t[1] - e[1])),
        Math.round(e[2] + o * (t[2] - e[2])),
      ]
    );
  }),
  (goog.color.darken = function (t, e) {
    return goog.color.blend([0, 0, 0], t, e);
  }),
  (goog.color.lighten = function (t, e) {
    return goog.color.blend([255, 255, 255], t, e);
  }),
  (goog.color.highContrast = function (t, e) {
    for (var o = [], i = 0; i < e.length; i++)
      o.push({
        color: e[i],
        diff:
          goog.color.yiqBrightnessDiff_(e[i], t) +
          goog.color.colorDiff_(e[i], t),
      });
    return (
      o.sort(function (t, e) {
        return e.diff - t.diff;
      }),
      o[0].color
    );
  }),
  (goog.color.yiqBrightness_ = function (t) {
    return Math.round((299 * t[0] + 587 * t[1] + 114 * t[2]) / 1e3);
  }),
  (goog.color.yiqBrightnessDiff_ = function (t, e) {
    return Math.abs(
      goog.color.yiqBrightness_(t) - goog.color.yiqBrightness_(e)
    );
  }),
  (goog.color.colorDiff_ = function (t, e) {
    return (
      Math.abs(t[0] - e[0]) + Math.abs(t[1] - e[1]) + Math.abs(t[2] - e[2])
    );
  }),
  (goog.fx.dom = {}),
  (goog.fx.dom.PredefinedEffect = function (t, e, o, i, n) {
    goog.fx.Animation.call(this, e, o, i, n), (this.element = t);
  }),
  goog.inherits(goog.fx.dom.PredefinedEffect, goog.fx.Animation),
  (goog.fx.dom.PredefinedEffect.prototype.updateStyle = goog.nullFunction),
  (goog.fx.dom.PredefinedEffect.prototype.isRightToLeft = function () {
    return (
      void 0 === this.rightToLeft_ &&
        (this.rightToLeft_ = goog.style.isRightToLeft(this.element)),
      this.rightToLeft_
    );
  }),
  (goog.fx.dom.PredefinedEffect.prototype.onAnimate = function () {
    this.updateStyle(),
      goog.fx.dom.PredefinedEffect.superClass_.onAnimate.call(this);
  }),
  (goog.fx.dom.PredefinedEffect.prototype.onEnd = function () {
    this.updateStyle(),
      goog.fx.dom.PredefinedEffect.superClass_.onEnd.call(this);
  }),
  (goog.fx.dom.PredefinedEffect.prototype.onBegin = function () {
    this.updateStyle(),
      goog.fx.dom.PredefinedEffect.superClass_.onBegin.call(this);
  }),
  (goog.fx.dom.Slide = function (t, e, o, i, n) {
    if (2 != e.length || 2 != o.length)
      throw Error("Start and end points must be 2D");
    goog.fx.dom.PredefinedEffect.call(this, t, e, o, i, n);
  }),
  goog.inherits(goog.fx.dom.Slide, goog.fx.dom.PredefinedEffect),
  (goog.fx.dom.Slide.prototype.updateStyle = function () {
    var t =
      this.isRightPositioningForRtlEnabled() && this.isRightToLeft()
        ? "right"
        : "left";
    (this.element.style[t] = Math.round(this.coords[0]) + "px"),
      (this.element.style.top = Math.round(this.coords[1]) + "px");
  }),
  (goog.fx.dom.SlideFrom = function (t, e, o, i) {
    goog.fx.dom.Slide.call(this, t, [t.offsetLeft, t.offsetTop], e, o, i);
  }),
  goog.inherits(goog.fx.dom.SlideFrom, goog.fx.dom.Slide),
  (goog.fx.dom.SlideFrom.prototype.onBegin = function () {
    (this.startPoint = [
      this.isRightPositioningForRtlEnabled()
        ? goog.style.bidi.getOffsetStart(this.element)
        : this.element.offsetLeft,
      this.element.offsetTop,
    ]),
      goog.fx.dom.SlideFrom.superClass_.onBegin.call(this);
  }),
  (goog.fx.dom.Swipe = function (t, e, o, i, n) {
    if (2 != e.length || 2 != o.length)
      throw Error("Start and end points must be 2D");
    goog.fx.dom.PredefinedEffect.call(this, t, e, o, i, n),
      (this.maxWidth_ = Math.max(this.endPoint[0], this.startPoint[0])),
      (this.maxHeight_ = Math.max(this.endPoint[1], this.startPoint[1]));
  }),
  goog.inherits(goog.fx.dom.Swipe, goog.fx.dom.PredefinedEffect),
  (goog.fx.dom.Swipe.prototype.updateStyle = function () {
    var t = this.coords[0],
      e = this.coords[1];
    this.clip_(Math.round(t), Math.round(e), this.maxWidth_, this.maxHeight_),
      (this.element.style.width = Math.round(t) + "px");
    var o =
      this.isRightPositioningForRtlEnabled() && this.isRightToLeft()
        ? "marginRight"
        : "marginLeft";
    (this.element.style[o] = Math.round(t) - this.maxWidth_ + "px"),
      (this.element.style.marginTop = Math.round(e) - this.maxHeight_ + "px");
  }),
  (goog.fx.dom.Swipe.prototype.clip_ = function (t, e, o, i) {
    this.element.style.clip =
      "rect(" + (i - e) + "px " + o + "px " + i + "px " + (o - t) + "px)";
  }),
  (goog.fx.dom.Scroll = function (t, e, o, i, n) {
    if (2 != e.length || 2 != o.length)
      throw Error("Start and end points must be 2D");
    goog.fx.dom.PredefinedEffect.call(this, t, e, o, i, n);
  }),
  goog.inherits(goog.fx.dom.Scroll, goog.fx.dom.PredefinedEffect),
  (goog.fx.dom.Scroll.prototype.updateStyle = function () {
    this.isRightPositioningForRtlEnabled()
      ? goog.style.bidi.setScrollOffset(
          this.element,
          Math.round(this.coords[0])
        )
      : (this.element.scrollLeft = Math.round(this.coords[0])),
      (this.element.scrollTop = Math.round(this.coords[1]));
  }),
  (goog.fx.dom.Resize = function (t, e, o, i, n) {
    if (2 != e.length || 2 != o.length)
      throw Error("Start and end points must be 2D");
    goog.fx.dom.PredefinedEffect.call(this, t, e, o, i, n);
  }),
  goog.inherits(goog.fx.dom.Resize, goog.fx.dom.PredefinedEffect),
  (goog.fx.dom.Resize.prototype.updateStyle = function () {
    (this.element.style.width = Math.round(this.coords[0]) + "px"),
      (this.element.style.height = Math.round(this.coords[1]) + "px");
  }),
  (goog.fx.dom.ResizeWidth = function (t, e, o, i, n) {
    goog.fx.dom.PredefinedEffect.call(this, t, [e], [o], i, n);
  }),
  goog.inherits(goog.fx.dom.ResizeWidth, goog.fx.dom.PredefinedEffect),
  (goog.fx.dom.ResizeWidth.prototype.updateStyle = function () {
    this.element.style.width = Math.round(this.coords[0]) + "px";
  }),
  (goog.fx.dom.ResizeHeight = function (t, e, o, i, n) {
    goog.fx.dom.PredefinedEffect.call(this, t, [e], [o], i, n);
  }),
  goog.inherits(goog.fx.dom.ResizeHeight, goog.fx.dom.PredefinedEffect),
  (goog.fx.dom.ResizeHeight.prototype.updateStyle = function () {
    this.element.style.height = Math.round(this.coords[0]) + "px";
  }),
  (goog.fx.dom.Fade = function (t, e, o, i, n) {
    if (
      ("number" == typeof e && (e = [e]),
      "number" == typeof o && (o = [o]),
      goog.fx.dom.PredefinedEffect.call(this, t, e, o, i, n),
      1 != e.length || 1 != o.length)
    )
      throw Error("Start and end points must be 1D");
    this.lastOpacityUpdate_ = goog.fx.dom.Fade.OPACITY_UNSET_;
  }),
  goog.inherits(goog.fx.dom.Fade, goog.fx.dom.PredefinedEffect),
  (goog.fx.dom.Fade.TOLERANCE_ = 1 / 1024),
  (goog.fx.dom.Fade.OPACITY_UNSET_ = -1),
  (goog.fx.dom.Fade.prototype.updateStyle = function () {
    var t = this.coords[0];
    Math.abs(t - this.lastOpacityUpdate_) >= goog.fx.dom.Fade.TOLERANCE_ &&
      (goog.style.setOpacity(this.element, t), (this.lastOpacityUpdate_ = t));
  }),
  (goog.fx.dom.Fade.prototype.onBegin = function () {
    (this.lastOpacityUpdate_ = goog.fx.dom.Fade.OPACITY_UNSET_),
      goog.fx.dom.Fade.superClass_.onBegin.call(this);
  }),
  (goog.fx.dom.Fade.prototype.onEnd = function () {
    (this.lastOpacityUpdate_ = goog.fx.dom.Fade.OPACITY_UNSET_),
      goog.fx.dom.Fade.superClass_.onEnd.call(this);
  }),
  (goog.fx.dom.Fade.prototype.show = function () {
    this.element.style.display = "";
  }),
  (goog.fx.dom.Fade.prototype.hide = function () {
    this.element.style.display = "none";
  }),
  (goog.fx.dom.FadeOut = function (t, e, o) {
    goog.fx.dom.Fade.call(this, t, 1, 0, e, o);
  }),
  goog.inherits(goog.fx.dom.FadeOut, goog.fx.dom.Fade),
  (goog.fx.dom.FadeIn = function (t, e, o) {
    goog.fx.dom.Fade.call(this, t, 0, 1, e, o);
  }),
  goog.inherits(goog.fx.dom.FadeIn, goog.fx.dom.Fade),
  (goog.fx.dom.FadeOutAndHide = function (t, e, o) {
    goog.fx.dom.Fade.call(this, t, 1, 0, e, o);
  }),
  goog.inherits(goog.fx.dom.FadeOutAndHide, goog.fx.dom.Fade),
  (goog.fx.dom.FadeOutAndHide.prototype.onBegin = function () {
    this.show(), goog.fx.dom.FadeOutAndHide.superClass_.onBegin.call(this);
  }),
  (goog.fx.dom.FadeOutAndHide.prototype.onEnd = function () {
    this.hide(), goog.fx.dom.FadeOutAndHide.superClass_.onEnd.call(this);
  }),
  (goog.fx.dom.FadeInAndShow = function (t, e, o) {
    goog.fx.dom.Fade.call(this, t, 0, 1, e, o);
  }),
  goog.inherits(goog.fx.dom.FadeInAndShow, goog.fx.dom.Fade),
  (goog.fx.dom.FadeInAndShow.prototype.onBegin = function () {
    this.show(), goog.fx.dom.FadeInAndShow.superClass_.onBegin.call(this);
  }),
  (goog.fx.dom.BgColorTransform = function (t, e, o, i, n) {
    if (3 != e.length || 3 != o.length)
      throw Error("Start and end points must be 3D");
    goog.fx.dom.PredefinedEffect.call(this, t, e, o, i, n);
  }),
  goog.inherits(goog.fx.dom.BgColorTransform, goog.fx.dom.PredefinedEffect),
  (goog.fx.dom.BgColorTransform.prototype.setColor = function () {
    for (var t = [], e = 0; e < this.coords.length; e++)
      t[e] = Math.round(this.coords[e]);
    (t = "rgb(" + t.join(",") + ")"), (this.element.style.backgroundColor = t);
  }),
  (goog.fx.dom.BgColorTransform.prototype.updateStyle = function () {
    this.setColor();
  }),
  (goog.fx.dom.bgColorFadeIn = function (t, e, o, i) {
    function n() {
      t.style.backgroundColor = l;
    }
    var l = t.style.backgroundColor || "",
      r = goog.style.getBackgroundColor(t);
    (r =
      r && "transparent" != r && "rgba(0, 0, 0, 0)" != r
        ? goog.color.hexToRgb(goog.color.parse(r).hex)
        : [255, 255, 255]),
      (e = new goog.fx.dom.BgColorTransform(t, e, r, o)),
      i
        ? i.listen(e, goog.fx.Transition.EventType.END, n)
        : goog.events.listen(e, goog.fx.Transition.EventType.END, n),
      e.play();
  }),
  (goog.fx.dom.ColorTransform = function (t, e, o, i, n) {
    if (3 != e.length || 3 != o.length)
      throw Error("Start and end points must be 3D");
    goog.fx.dom.PredefinedEffect.call(this, t, e, o, i, n);
  }),
  goog.inherits(goog.fx.dom.ColorTransform, goog.fx.dom.PredefinedEffect),
  (goog.fx.dom.ColorTransform.prototype.updateStyle = function () {
    for (var t = [], e = 0; e < this.coords.length; e++)
      t[e] = Math.round(this.coords[e]);
    (t = "rgb(" + t.join(",") + ")"), (this.element.style.color = t);
  }),
  (goog.ui.RangeModel = function () {
    goog.events.EventTarget.call(this);
  }),
  goog.inherits(goog.ui.RangeModel, goog.events.EventTarget),
  goog.tagUnsealableClass(goog.ui.RangeModel),
  (goog.ui.RangeModel.prototype.value_ = 0),
  (goog.ui.RangeModel.prototype.minimum_ = 0),
  (goog.ui.RangeModel.prototype.maximum_ = 100),
  (goog.ui.RangeModel.prototype.extent_ = 0),
  (goog.ui.RangeModel.prototype.step_ = 1),
  (goog.ui.RangeModel.prototype.isChanging_ = !1),
  (goog.ui.RangeModel.prototype.mute_ = !1),
  (goog.ui.RangeModel.prototype.setMute = function (t) {
    this.mute_ = t;
  }),
  (goog.ui.RangeModel.prototype.setValue = function (t) {
    (t = this.roundToStepWithMin(t)),
      this.value_ != t &&
        ((this.value_ =
          t + this.extent_ > this.maximum_
            ? this.maximum_ - this.extent_
            : t < this.minimum_
            ? this.minimum_
            : t),
        this.isChanging_ ||
          this.mute_ ||
          this.dispatchEvent(goog.ui.Component.EventType.CHANGE));
  }),
  (goog.ui.RangeModel.prototype.getValue = function () {
    return this.roundToStepWithMin(this.value_);
  }),
  (goog.ui.RangeModel.prototype.setExtent = function (t) {
    (t = this.roundToStepWithMin(t)),
      this.extent_ != t &&
        ((this.extent_ =
          0 > t
            ? 0
            : this.value_ + t > this.maximum_
            ? this.maximum_ - this.value_
            : t),
        this.isChanging_ ||
          this.mute_ ||
          this.dispatchEvent(goog.ui.Component.EventType.CHANGE));
  }),
  (goog.ui.RangeModel.prototype.getExtent = function () {
    return this.roundToStep(this.extent_);
  }),
  (goog.ui.RangeModel.prototype.setMinimum = function (t) {
    if (this.minimum_ != t) {
      var e = this.isChanging_;
      (this.isChanging_ = !0),
        (this.minimum_ = t),
        t + this.extent_ > this.maximum_ &&
          (this.extent_ = this.maximum_ - this.minimum_),
        t > this.value_ && this.setValue(t),
        t > this.maximum_ &&
          ((this.extent_ = 0), this.setMaximum(t), this.setValue(t)),
        (this.isChanging_ = e) ||
          this.mute_ ||
          this.dispatchEvent(goog.ui.Component.EventType.CHANGE);
    }
  }),
  (goog.ui.RangeModel.prototype.getMinimum = function () {
    return this.roundToStepWithMin(this.minimum_);
  }),
  (goog.ui.RangeModel.prototype.setMaximum = function (t) {
    if (((t = this.roundToStepWithMin(t)), this.maximum_ != t)) {
      var e = this.isChanging_;
      (this.isChanging_ = !0),
        (this.maximum_ = t),
        t < this.value_ + this.extent_ && this.setValue(t - this.extent_),
        t < this.minimum_ &&
          ((this.extent_ = 0),
          this.setMinimum(t),
          this.setValue(this.maximum_)),
        t < this.minimum_ + this.extent_ &&
          (this.extent_ = this.maximum_ - this.minimum_),
        (this.isChanging_ = e) ||
          this.mute_ ||
          this.dispatchEvent(goog.ui.Component.EventType.CHANGE);
    }
  }),
  (goog.ui.RangeModel.prototype.getMaximum = function () {
    return this.roundToStepWithMin(this.maximum_);
  }),
  (goog.ui.RangeModel.prototype.getStep = function () {
    return this.step_;
  }),
  (goog.ui.RangeModel.prototype.setStep = function (t) {
    this.step_ != t &&
      ((this.step_ = t),
      (t = this.isChanging_),
      (this.isChanging_ = !0),
      this.setMaximum(this.getMaximum()),
      this.setExtent(this.getExtent()),
      this.setValue(this.getValue()),
      (this.isChanging_ = t) ||
        this.mute_ ||
        this.dispatchEvent(goog.ui.Component.EventType.CHANGE));
  }),
  (goog.ui.RangeModel.prototype.roundToStepWithMin = function (t) {
    return null == this.step_
      ? t
      : this.minimum_ +
          Math.round((t - this.minimum_) / this.step_) * this.step_;
  }),
  (goog.ui.RangeModel.prototype.roundToStep = function (t) {
    return null == this.step_ ? t : Math.round(t / this.step_) * this.step_;
  }),
  (goog.ui.SliderBase = function (t, e) {
    goog.ui.Component.call(this, t),
      (this.additionalAnimations_ = null),
      (this.rangeModel = new goog.ui.RangeModel()),
      (this.labelFn_ = e || goog.functions.NULL),
      (this.focusElementOnSliderDrag_ = !0),
      goog.events.listen(
        this.rangeModel,
        goog.ui.Component.EventType.CHANGE,
        this.handleRangeModelChange,
        !1,
        this
      );
  }),
  goog.inherits(goog.ui.SliderBase, goog.ui.Component),
  goog.tagUnsealableClass(goog.ui.SliderBase),
  (goog.ui.SliderBase.EventType = {
    DRAG_VALUE_START: goog.events.getUniqueId("dragvaluestart"),
    DRAG_VALUE_END: goog.events.getUniqueId("dragvalueend"),
    DRAG_EXTENT_START: goog.events.getUniqueId("dragextentstart"),
    DRAG_EXTENT_END: goog.events.getUniqueId("dragextentend"),
    DRAG_START: goog.events.getUniqueId("dragstart"),
    DRAG_END: goog.events.getUniqueId("dragend"),
    ANIMATION_END: goog.events.getUniqueId("animationend"),
  }),
  (goog.ui.SliderBase.Orientation = {
    VERTICAL: "vertical",
    HORIZONTAL: "horizontal",
  }),
  (goog.ui.SliderBase.prototype.orientation_ =
    goog.ui.SliderBase.Orientation.HORIZONTAL),
  (goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_ = 200),
  (goog.ui.SliderBase.ANIMATION_INTERVAL_ = 100),
  (goog.ui.SliderBase.prototype.isAnimating_ = !1),
  (goog.ui.SliderBase.prototype.moveToPointEnabled_ = !1),
  (goog.ui.SliderBase.prototype.blockIncrement_ = 10),
  (goog.ui.SliderBase.prototype.minExtent_ = 0),
  (goog.ui.SliderBase.prototype.isHandleMouseWheel_ = !0),
  (goog.ui.SliderBase.prototype.mouseDownTime_ = 0),
  (goog.ui.SliderBase.prototype.MOUSE_DOWN_DELAY_ = 1e3),
  (goog.ui.SliderBase.prototype.enabled_ = !0),
  (goog.ui.SliderBase.prototype.flipForRtl_ = !1),
  (goog.ui.SliderBase.prototype.enableFlipForRtl = function (t) {
    this.flipForRtl_ = t;
  }),
  (goog.ui.SliderBase.prototype.getCssClass = goog.abstractMethod),
  (goog.ui.SliderBase.prototype.createDom = function () {
    goog.ui.SliderBase.superClass_.createDom.call(this);
    var t = this.getDomHelper().createDom(
      "DIV",
      this.getCssClass(this.orientation_)
    );
    this.decorateInternal(t);
  }),
  (goog.ui.SliderBase.prototype.createThumbs = goog.abstractMethod),
  (goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_ = "goog-slider-dragging"),
  (goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_ = "goog-slider-thumb-dragging"),
  (goog.ui.SliderBase.DISABLED_CSS_CLASS_ = "goog-slider-disabled"),
  (goog.ui.SliderBase.prototype.decorateInternal = function (t) {
    goog.ui.SliderBase.superClass_.decorateInternal.call(this, t),
      goog.asserts.assert(t),
      goog.dom.classlist.add(t, this.getCssClass(this.orientation_)),
      this.createThumbs(),
      this.setAriaRoles();
  }),
  (goog.ui.SliderBase.prototype.enterDocument = function () {
    goog.ui.SliderBase.superClass_.enterDocument.call(this),
      (this.valueDragger_ = new goog.fx.Dragger(this.valueThumb)),
      (this.extentDragger_ = new goog.fx.Dragger(this.extentThumb)),
      this.valueDragger_.enableRightPositioningForRtl(this.flipForRtl_),
      this.extentDragger_.enableRightPositioningForRtl(this.flipForRtl_),
      (this.valueDragger_.defaultAction = this.extentDragger_.defaultAction =
        goog.nullFunction),
      (this.keyHandler_ = new goog.events.KeyHandler(this.getElement())),
      this.enableEventHandlers_(!0),
      (this.getElement().tabIndex = 0),
      this.updateUi_();
  }),
  (goog.ui.SliderBase.prototype.enableEventHandlers_ = function (t) {
    t
      ? (this.getHandler()
          .listen(
            this.valueDragger_,
            goog.fx.Dragger.EventType.BEFOREDRAG,
            this.handleBeforeDrag_
          )
          .listen(
            this.extentDragger_,
            goog.fx.Dragger.EventType.BEFOREDRAG,
            this.handleBeforeDrag_
          )
          .listen(
            this.valueDragger_,
            [goog.fx.Dragger.EventType.START, goog.fx.Dragger.EventType.END],
            this.handleThumbDragStartEnd_
          )
          .listen(
            this.extentDragger_,
            [goog.fx.Dragger.EventType.START, goog.fx.Dragger.EventType.END],
            this.handleThumbDragStartEnd_
          )
          .listen(
            this.keyHandler_,
            goog.events.KeyHandler.EventType.KEY,
            this.handleKeyDown_
          )
          .listen(
            this.getElement(),
            goog.events.EventType.CLICK,
            this.handleMouseDownAndClick_
          )
          .listen(
            this.getElement(),
            goog.events.EventType.MOUSEDOWN,
            this.handleMouseDownAndClick_
          ),
        this.isHandleMouseWheel() && this.enableMouseWheelHandling_(!0))
      : (this.getHandler()
          .unlisten(
            this.valueDragger_,
            goog.fx.Dragger.EventType.BEFOREDRAG,
            this.handleBeforeDrag_
          )
          .unlisten(
            this.extentDragger_,
            goog.fx.Dragger.EventType.BEFOREDRAG,
            this.handleBeforeDrag_
          )
          .unlisten(
            this.valueDragger_,
            [goog.fx.Dragger.EventType.START, goog.fx.Dragger.EventType.END],
            this.handleThumbDragStartEnd_
          )
          .unlisten(
            this.extentDragger_,
            [goog.fx.Dragger.EventType.START, goog.fx.Dragger.EventType.END],
            this.handleThumbDragStartEnd_
          )
          .unlisten(
            this.keyHandler_,
            goog.events.KeyHandler.EventType.KEY,
            this.handleKeyDown_
          )
          .unlisten(
            this.getElement(),
            goog.events.EventType.CLICK,
            this.handleMouseDownAndClick_
          )
          .unlisten(
            this.getElement(),
            goog.events.EventType.MOUSEDOWN,
            this.handleMouseDownAndClick_
          ),
        this.isHandleMouseWheel() && this.enableMouseWheelHandling_(!1));
  }),
  (goog.ui.SliderBase.prototype.exitDocument = function () {
    goog.ui.SliderBase.superClass_.exitDocument.call(this),
      goog.disposeAll(
        this.valueDragger_,
        this.extentDragger_,
        this.keyHandler_,
        this.mouseWheelHandler_
      );
  }),
  (goog.ui.SliderBase.prototype.handleBeforeDrag_ = function (t) {
    var e =
      t.dragger == this.valueDragger_ ? this.valueThumb : this.extentThumb;
    if (this.orientation_ == goog.ui.SliderBase.Orientation.VERTICAL) {
      var o = this.getElement().clientHeight - e.offsetHeight;
      o =
        ((o - t.top) / o) * (this.getMaximum() - this.getMinimum()) +
        this.getMinimum();
    } else
      (o = this.getElement().clientWidth - e.offsetWidth),
        (o =
          (t.left / o) * (this.getMaximum() - this.getMinimum()) +
          this.getMinimum());
    (o =
      t.dragger == this.valueDragger_
        ? Math.min(
            Math.max(o, this.getMinimum()),
            this.getValue() + this.getExtent()
          )
        : Math.min(Math.max(o, this.getValue()), this.getMaximum())),
      this.setThumbPosition_(e, o);
  }),
  (goog.ui.SliderBase.prototype.handleThumbDragStartEnd_ = function (t) {
    var e = t.type == goog.fx.Dragger.EventType.START;
    goog.dom.classlist.enable(
      goog.asserts.assertElement(this.getElement()),
      goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_,
      e
    ),
      goog.dom.classlist.enable(
        goog.asserts.assertElement(t.target.handle),
        goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_,
        e
      ),
      (t = t.dragger == this.valueDragger_),
      e
        ? (this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_START),
          this.dispatchEvent(
            t
              ? goog.ui.SliderBase.EventType.DRAG_VALUE_START
              : goog.ui.SliderBase.EventType.DRAG_EXTENT_START
          ))
        : (this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_END),
          this.dispatchEvent(
            t
              ? goog.ui.SliderBase.EventType.DRAG_VALUE_END
              : goog.ui.SliderBase.EventType.DRAG_EXTENT_END
          ));
  }),
  (goog.ui.SliderBase.prototype.handleKeyDown_ = function (t) {
    var e = !0;
    switch (t.keyCode) {
      case goog.events.KeyCodes.HOME:
        this.animatedSetValue(this.getMinimum());
        break;
      case goog.events.KeyCodes.END:
        this.animatedSetValue(this.getMaximum());
        break;
      case goog.events.KeyCodes.PAGE_UP:
        this.moveThumbs(this.getBlockIncrement());
        break;
      case goog.events.KeyCodes.PAGE_DOWN:
        this.moveThumbs(-this.getBlockIncrement());
        break;
      case goog.events.KeyCodes.LEFT:
        var o = this.flipForRtl_ && this.isRightToLeft() ? 1 : -1;
        this.moveThumbs(
          t.shiftKey
            ? o * this.getBlockIncrement()
            : o * this.getUnitIncrement()
        );
        break;
      case goog.events.KeyCodes.DOWN:
        this.moveThumbs(
          t.shiftKey ? -this.getBlockIncrement() : -this.getUnitIncrement()
        );
        break;
      case goog.events.KeyCodes.RIGHT:
        (o = this.flipForRtl_ && this.isRightToLeft() ? -1 : 1),
          this.moveThumbs(
            t.shiftKey
              ? o * this.getBlockIncrement()
              : o * this.getUnitIncrement()
          );
        break;
      case goog.events.KeyCodes.UP:
        this.moveThumbs(
          t.shiftKey ? this.getBlockIncrement() : this.getUnitIncrement()
        );
        break;
      default:
        e = !1;
    }
    e && t.preventDefault();
  }),
  (goog.ui.SliderBase.prototype.handleMouseDownAndClick_ = function (t) {
    this.focusElementOnSliderDrag_ &&
      this.getElement().focus &&
      this.getElement().focus();
    var e = t.target;
    goog.dom.contains(this.valueThumb, e) ||
      goog.dom.contains(this.extentThumb, e) ||
      ((e = t.type == goog.events.EventType.CLICK) &&
        goog.now() < this.mouseDownTime_ + this.MOUSE_DOWN_DELAY_) ||
      (e || (this.mouseDownTime_ = goog.now()),
      this.moveToPointEnabled_
        ? this.animatedSetValue(this.getValueFromMousePosition(t))
        : this.startBlockIncrementing_(t));
  }),
  (goog.ui.SliderBase.prototype.handleMouseWheel_ = function (t) {
    this.moveThumbs((0 < t.detail ? -1 : 1) * this.getUnitIncrement()),
      t.preventDefault();
  }),
  (goog.ui.SliderBase.prototype.startBlockIncrementing_ = function (t) {
    this.storeMousePos_(t),
      (this.thumbToMove_ = this.getClosestThumb_(
        this.getValueFromMousePosition(t)
      )),
      (this.incrementing_ =
        this.orientation_ == goog.ui.SliderBase.Orientation.VERTICAL
          ? this.lastMousePosition_ < this.thumbToMove_.offsetTop
          : this.lastMousePosition_ >
            this.getOffsetStart_(this.thumbToMove_) +
              this.thumbToMove_.offsetWidth),
      (t = goog.dom.getOwnerDocument(this.getElement())),
      this.getHandler()
        .listen(
          t,
          goog.events.EventType.MOUSEUP,
          this.stopBlockIncrementing_,
          !0
        )
        .listen(
          this.getElement(),
          goog.events.EventType.MOUSEMOVE,
          this.storeMousePos_
        ),
      this.incTimer_ ||
        ((this.incTimer_ = new goog.Timer(
          goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_
        )),
        this.getHandler().listen(
          this.incTimer_,
          goog.Timer.TICK,
          this.handleTimerTick_
        )),
      this.handleTimerTick_(),
      this.incTimer_.start();
  }),
  (goog.ui.SliderBase.prototype.handleTimerTick_ = function () {
    var t;
    if (this.orientation_ == goog.ui.SliderBase.Orientation.VERTICAL) {
      var e = this.lastMousePosition_,
        o = this.thumbToMove_.offsetTop;
      this.incrementing_
        ? e < o &&
          (t =
            this.getThumbPosition_(this.thumbToMove_) +
            this.getBlockIncrement())
        : e > o + this.thumbToMove_.offsetHeight &&
          (t =
            this.getThumbPosition_(this.thumbToMove_) -
            this.getBlockIncrement());
    } else
      (e = this.lastMousePosition_),
        (o = this.getOffsetStart_(this.thumbToMove_)),
        this.incrementing_
          ? e > o + this.thumbToMove_.offsetWidth &&
            (t =
              this.getThumbPosition_(this.thumbToMove_) +
              this.getBlockIncrement())
          : e < o &&
            (t =
              this.getThumbPosition_(this.thumbToMove_) -
              this.getBlockIncrement());
    void 0 !== t && this.setThumbPosition_(this.thumbToMove_, t);
  }),
  (goog.ui.SliderBase.prototype.stopBlockIncrementing_ = function () {
    this.incTimer_ && this.incTimer_.stop();
    var t = goog.dom.getOwnerDocument(this.getElement());
    this.getHandler()
      .unlisten(
        t,
        goog.events.EventType.MOUSEUP,
        this.stopBlockIncrementing_,
        !0
      )
      .unlisten(
        this.getElement(),
        goog.events.EventType.MOUSEMOVE,
        this.storeMousePos_
      );
  }),
  (goog.ui.SliderBase.prototype.getRelativeMousePos_ = function (t) {
    return (
      (t = goog.style.getRelativePosition(t, this.getElement())),
      this.orientation_ == goog.ui.SliderBase.Orientation.VERTICAL
        ? t.y
        : this.flipForRtl_ && this.isRightToLeft()
        ? this.getElement().clientWidth - t.x
        : t.x
    );
  }),
  (goog.ui.SliderBase.prototype.storeMousePos_ = function (t) {
    this.lastMousePosition_ = this.getRelativeMousePos_(t);
  }),
  (goog.ui.SliderBase.prototype.getValueFromMousePosition = function (t) {
    var e = this.getMinimum(),
      o = this.getMaximum();
    if (this.orientation_ == goog.ui.SliderBase.Orientation.VERTICAL) {
      var i = this.valueThumb.offsetHeight,
        n = this.getElement().clientHeight - i;
      return (
        ((o - e) * (n - (t = this.getRelativeMousePos_(t) - i / 2))) / n + e
      );
    }
    return (
      (i = this.valueThumb.offsetWidth),
      (n = this.getElement().clientWidth - i),
      ((o - e) * (t = this.getRelativeMousePos_(t) - i / 2)) / n + e
    );
  }),
  (goog.ui.SliderBase.prototype.getThumbPosition_ = function (t) {
    if (t == this.valueThumb) return this.rangeModel.getValue();
    if (t == this.extentThumb)
      return this.rangeModel.getValue() + this.rangeModel.getExtent();
    throw Error("Illegal thumb element. Neither minThumb nor maxThumb");
  }),
  (goog.ui.SliderBase.prototype.isDragging = function () {
    return this.valueDragger_.isDragging() || this.extentDragger_.isDragging();
  }),
  (goog.ui.SliderBase.prototype.moveThumbs = function (t) {
    Math.abs(t) < this.getStep() && (t = goog.math.sign(t) * this.getStep());
    var e = this.getThumbPosition_(this.valueThumb) + t;
    (t = this.getThumbPosition_(this.extentThumb) + t),
      (e = goog.math.clamp(
        e,
        this.getMinimum(),
        this.getMaximum() - this.minExtent_
      )),
      (t = goog.math.clamp(
        t,
        this.getMinimum() + this.minExtent_,
        this.getMaximum()
      )),
      this.setValueAndExtent(e, t - e);
  }),
  (goog.ui.SliderBase.prototype.setThumbPosition_ = function (t, e) {
    var o = this.rangeModel.roundToStepWithMin(e);
    (e = t == this.valueThumb ? o : this.rangeModel.getValue()),
      (t =
        t == this.extentThumb
          ? o
          : this.rangeModel.getValue() + this.rangeModel.getExtent()),
      e >= this.getMinimum() &&
        t >= e + this.minExtent_ &&
        this.getMaximum() >= t &&
        this.setValueAndExtent(e, t - e);
  }),
  (goog.ui.SliderBase.prototype.setValueAndExtent = function (t, e) {
    this.getMinimum() <= t &&
      t <= this.getMaximum() - e &&
      this.minExtent_ <= e &&
      e <= this.getMaximum() - t &&
      (t != this.getValue() || e != this.getExtent()) &&
      (this.rangeModel.setMute(!0),
      this.rangeModel.setExtent(0),
      this.rangeModel.setValue(t),
      this.rangeModel.setExtent(e),
      this.rangeModel.setMute(!1),
      this.handleRangeModelChange(null));
  }),
  (goog.ui.SliderBase.prototype.getMinimum = function () {
    return this.rangeModel.getMinimum();
  }),
  (goog.ui.SliderBase.prototype.setMinimum = function (t) {
    this.rangeModel.setMinimum(t);
  }),
  (goog.ui.SliderBase.prototype.getMaximum = function () {
    return this.rangeModel.getMaximum();
  }),
  (goog.ui.SliderBase.prototype.setMaximum = function (t) {
    this.rangeModel.setMaximum(t);
  }),
  (goog.ui.SliderBase.prototype.getValueThumb = function () {
    return this.valueThumb;
  }),
  (goog.ui.SliderBase.prototype.getExtentThumb = function () {
    return this.extentThumb;
  }),
  (goog.ui.SliderBase.prototype.getClosestThumb_ = function (t) {
    return t <= this.rangeModel.getValue() + this.rangeModel.getExtent() / 2
      ? this.valueThumb
      : this.extentThumb;
  }),
  (goog.ui.SliderBase.prototype.handleRangeModelChange = function (t) {
    this.updateUi_(),
      this.updateAriaStates(),
      this.dispatchEvent(goog.ui.Component.EventType.CHANGE);
  }),
  (goog.ui.SliderBase.prototype.updateUi_ = function () {
    if (this.valueThumb && !this.isAnimating_) {
      var t = this.getThumbCoordinateForValue(
          this.getThumbPosition_(this.valueThumb)
        ),
        e = this.getThumbCoordinateForValue(
          this.getThumbPosition_(this.extentThumb)
        );
      if (this.orientation_ == goog.ui.SliderBase.Orientation.VERTICAL)
        (this.valueThumb.style.top = t.y + "px"),
          (this.extentThumb.style.top = e.y + "px"),
          this.rangeHighlight &&
            ((t = this.calculateRangeHighlightPositioning_(
              e.y,
              t.y,
              this.valueThumb.offsetHeight
            )),
            (this.rangeHighlight.style.top = t.offset + "px"),
            (this.rangeHighlight.style.height = t.size + "px"));
      else {
        var o = this.flipForRtl_ && this.isRightToLeft() ? "right" : "left";
        (this.valueThumb.style[o] = t.x + "px"),
          (this.extentThumb.style[o] = e.x + "px"),
          this.rangeHighlight &&
            ((t = this.calculateRangeHighlightPositioning_(
              t.x,
              e.x,
              this.valueThumb.offsetWidth
            )),
            (this.rangeHighlight.style[o] = t.offset + "px"),
            (this.rangeHighlight.style.width = t.size + "px"));
      }
    }
  }),
  (goog.ui.SliderBase.prototype.calculateRangeHighlightPositioning_ = function (
    t,
    e,
    o
  ) {
    var i = Math.ceil(o / 2);
    return { offset: t + i, size: Math.max(e - t + o - 2 * i, 0) };
  }),
  (goog.ui.SliderBase.prototype.getThumbCoordinateForValue = function (t) {
    var e = new goog.math.Coordinate();
    if (this.valueThumb) {
      var o = this.getMinimum(),
        i = this.getMaximum();
      (t = t == o && o == i ? 0 : (t - o) / (i - o)),
        this.orientation_ == goog.ui.SliderBase.Orientation.VERTICAL
          ? ((o = this.valueThumb.offsetHeight),
            (o = this.getElement().clientHeight - o),
            (t = Math.round(t * o)),
            (e.x = this.moveToPointEnabled_
              ? 0
              : this.getOffsetStart_(this.valueThumb)),
            (e.y = o - t))
          : ((o = this.getElement().clientWidth - this.valueThumb.offsetWidth),
            (e.x = Math.round(t * o)),
            (e.y = this.moveToPointEnabled_ ? 0 : this.valueThumb.offsetTop));
    }
    return e;
  }),
  (goog.ui.SliderBase.prototype.animatedSetValue = function (t) {
    (t = goog.math.clamp(t, this.getMinimum(), this.getMaximum())),
      this.isAnimating_ &&
        (this.currentAnimation_.stop(!0), this.currentAnimation_.dispose());
    var e = new goog.fx.AnimationParallelQueue(),
      o = this.getClosestThumb_(t),
      i = this.getValue(),
      n = this.getExtent(),
      l = this.getThumbPosition_(o),
      r = this.getThumbCoordinateForValue(l),
      s = this.getStep();
    Math.abs(t - l) < s &&
      (t = goog.math.clamp(
        l + (t > l ? s : -s),
        this.getMinimum(),
        this.getMaximum()
      )),
      this.setThumbPosition_(o, t),
      (l = this.getThumbCoordinateForValue(this.getThumbPosition_(o))),
      (s =
        this.orientation_ == goog.ui.SliderBase.Orientation.VERTICAL
          ? [this.getOffsetStart_(o), l.y]
          : [l.x, o.offsetTop]),
      (r = new goog.fx.dom.Slide(
        o,
        [r.x, r.y],
        s,
        goog.ui.SliderBase.ANIMATION_INTERVAL_
      )).enableRightPositioningForRtl(this.flipForRtl_),
      e.add(r),
      this.rangeHighlight && this.addRangeHighlightAnimations_(o, i, n, l, e),
      this.additionalAnimations_ &&
        ((t = this.additionalAnimations_.createAnimations(
          i,
          t,
          goog.ui.SliderBase.ANIMATION_INTERVAL_
        )),
        goog.array.forEach(t, function (t) {
          e.add(t);
        })),
      (this.currentAnimation_ = e),
      this.getHandler().listen(
        e,
        goog.fx.Transition.EventType.END,
        this.endAnimation_
      ),
      (this.isAnimating_ = !0),
      e.play(!1);
  }),
  (goog.ui.SliderBase.prototype.isAnimating = function () {
    return this.isAnimating_;
  }),
  (goog.ui.SliderBase.prototype.setAdditionalAnimations = function (t) {
    this.additionalAnimations_ = t;
  }),
  (goog.ui.SliderBase.prototype.addRangeHighlightAnimations_ = function (
    t,
    e,
    o,
    i,
    n
  ) {
    var l = this.getThumbCoordinateForValue(e),
      r = this.getThumbCoordinateForValue(e + o);
    (e = l),
      (o = r),
      t == this.valueThumb ? (e = i) : (o = i),
      this.orientation_ == goog.ui.SliderBase.Orientation.VERTICAL
        ? ((t = this.calculateRangeHighlightPositioning_(
            r.y,
            l.y,
            this.valueThumb.offsetHeight
          )),
          (l = this.calculateRangeHighlightPositioning_(
            o.y,
            e.y,
            this.valueThumb.offsetHeight
          )),
          (i = new goog.fx.dom.Slide(
            this.rangeHighlight,
            [this.getOffsetStart_(this.rangeHighlight), t.offset],
            [this.getOffsetStart_(this.rangeHighlight), l.offset],
            goog.ui.SliderBase.ANIMATION_INTERVAL_
          )),
          (t = new goog.fx.dom.ResizeHeight(
            this.rangeHighlight,
            t.size,
            l.size,
            goog.ui.SliderBase.ANIMATION_INTERVAL_
          )),
          i.enableRightPositioningForRtl(this.flipForRtl_),
          t.enableRightPositioningForRtl(this.flipForRtl_),
          n.add(i),
          n.add(t))
        : ((t = this.calculateRangeHighlightPositioning_(
            l.x,
            r.x,
            this.valueThumb.offsetWidth
          )),
          (l = this.calculateRangeHighlightPositioning_(
            e.x,
            o.x,
            this.valueThumb.offsetWidth
          )),
          (i = new goog.fx.dom.Slide(
            this.rangeHighlight,
            [t.offset, this.rangeHighlight.offsetTop],
            [l.offset, this.rangeHighlight.offsetTop],
            goog.ui.SliderBase.ANIMATION_INTERVAL_
          )),
          (t = new goog.fx.dom.ResizeWidth(
            this.rangeHighlight,
            t.size,
            l.size,
            goog.ui.SliderBase.ANIMATION_INTERVAL_
          )),
          i.enableRightPositioningForRtl(this.flipForRtl_),
          t.enableRightPositioningForRtl(this.flipForRtl_),
          n.add(i),
          n.add(t));
  }),
  (goog.ui.SliderBase.prototype.endAnimation_ = function (t) {
    (this.isAnimating_ = !1),
      this.dispatchEvent(goog.ui.SliderBase.EventType.ANIMATION_END);
  }),
  (goog.ui.SliderBase.prototype.setOrientation = function (t) {
    if (this.orientation_ != t) {
      var e = this.getCssClass(this.orientation_),
        o = this.getCssClass(t);
      (this.orientation_ = t),
        this.getElement() &&
          (goog.dom.classlist.swap(
            goog.asserts.assert(this.getElement()),
            e,
            o
          ),
          (t = this.flipForRtl_ && this.isRightToLeft() ? "right" : "left"),
          (this.valueThumb.style[t] = this.valueThumb.style.top = ""),
          (this.extentThumb.style[t] = this.extentThumb.style.top = ""),
          this.rangeHighlight &&
            ((this.rangeHighlight.style[t] = this.rangeHighlight.style.top =
              ""),
            (this.rangeHighlight.style.width =
              this.rangeHighlight.style.height =
                "")),
          this.updateUi_());
    }
  }),
  (goog.ui.SliderBase.prototype.getOrientation = function () {
    return this.orientation_;
  }),
  (goog.ui.SliderBase.prototype.disposeInternal = function () {
    goog.ui.SliderBase.superClass_.disposeInternal.call(this),
      this.incTimer_ && this.incTimer_.dispose(),
      delete this.incTimer_,
      this.currentAnimation_ && this.currentAnimation_.dispose(),
      delete this.currentAnimation_,
      delete this.valueThumb,
      delete this.extentThumb,
      this.rangeHighlight && delete this.rangeHighlight,
      this.rangeModel.dispose(),
      delete this.rangeModel,
      this.keyHandler_ && (this.keyHandler_.dispose(), delete this.keyHandler_),
      this.mouseWheelHandler_ &&
        (this.mouseWheelHandler_.dispose(), delete this.mouseWheelHandler_),
      this.valueDragger_ &&
        (this.valueDragger_.dispose(), delete this.valueDragger_),
      this.extentDragger_ &&
        (this.extentDragger_.dispose(), delete this.extentDragger_);
  }),
  (goog.ui.SliderBase.prototype.getBlockIncrement = function () {
    return this.blockIncrement_;
  }),
  (goog.ui.SliderBase.prototype.setBlockIncrement = function (t) {
    this.blockIncrement_ = t;
  }),
  (goog.ui.SliderBase.prototype.setMinExtent = function (t) {
    this.minExtent_ = t;
  }),
  (goog.ui.SliderBase.prototype.unitIncrement_ = 1),
  (goog.ui.SliderBase.prototype.getUnitIncrement = function () {
    return this.unitIncrement_;
  }),
  (goog.ui.SliderBase.prototype.setUnitIncrement = function (t) {
    this.unitIncrement_ = t;
  }),
  (goog.ui.SliderBase.prototype.getStep = function () {
    return this.rangeModel.getStep();
  }),
  (goog.ui.SliderBase.prototype.setStep = function (t) {
    this.rangeModel.setStep(t);
  }),
  (goog.ui.SliderBase.prototype.getMoveToPointEnabled = function () {
    return this.moveToPointEnabled_;
  }),
  (goog.ui.SliderBase.prototype.setMoveToPointEnabled = function (t) {
    this.moveToPointEnabled_ = t;
  }),
  (goog.ui.SliderBase.prototype.getValue = function () {
    return this.rangeModel.getValue();
  }),
  (goog.ui.SliderBase.prototype.setValue = function (t) {
    this.setThumbPosition_(this.valueThumb, t);
  }),
  (goog.ui.SliderBase.prototype.getExtent = function () {
    return this.rangeModel.getExtent();
  }),
  (goog.ui.SliderBase.prototype.setExtent = function (t) {
    this.setThumbPosition_(this.extentThumb, this.rangeModel.getValue() + t);
  }),
  (goog.ui.SliderBase.prototype.setVisible = function (t) {
    goog.style.setElementShown(this.getElement(), t), t && this.updateUi_();
  }),
  (goog.ui.SliderBase.prototype.setAriaRoles = function () {
    var t = this.getElement();
    goog.asserts.assert(
      t,
      "The DOM element for the slider base cannot be null."
    ),
      goog.a11y.aria.setRole(t, goog.a11y.aria.Role.SLIDER),
      this.updateAriaStates();
  }),
  (goog.ui.SliderBase.prototype.updateAriaStates = function () {
    var t = this.getElement();
    t &&
      (goog.a11y.aria.setState(
        t,
        goog.a11y.aria.State.VALUEMIN,
        this.getMinimum()
      ),
      goog.a11y.aria.setState(
        t,
        goog.a11y.aria.State.VALUEMAX,
        this.getMaximum()
      ),
      goog.a11y.aria.setState(
        t,
        goog.a11y.aria.State.VALUENOW,
        this.getValue()
      ),
      goog.a11y.aria.setState(
        t,
        goog.a11y.aria.State.VALUETEXT,
        this.getTextValue() || ""
      ));
  }),
  (goog.ui.SliderBase.prototype.setHandleMouseWheel = function (t) {
    this.isInDocument() &&
      t != this.isHandleMouseWheel() &&
      this.enableMouseWheelHandling_(t),
      (this.isHandleMouseWheel_ = t);
  }),
  (goog.ui.SliderBase.prototype.isHandleMouseWheel = function () {
    return this.isHandleMouseWheel_;
  }),
  (goog.ui.SliderBase.prototype.enableMouseWheelHandling_ = function (t) {
    t
      ? (this.mouseWheelHandler_ ||
          (this.mouseWheelHandler_ = new goog.events.MouseWheelHandler(
            this.getElement()
          )),
        this.getHandler().listen(
          this.mouseWheelHandler_,
          goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,
          this.handleMouseWheel_,
          { passive: !1 }
        ))
      : this.getHandler().unlisten(
          this.mouseWheelHandler_,
          goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,
          this.handleMouseWheel_,
          { passive: !1 }
        );
  }),
  (goog.ui.SliderBase.prototype.setEnabled = function (t) {
    this.enabled_ != t &&
      this.dispatchEvent(
        t
          ? goog.ui.Component.EventType.ENABLE
          : goog.ui.Component.EventType.DISABLE
      ) &&
      ((this.enabled_ = t),
      this.enableEventHandlers_(t),
      t || this.stopBlockIncrementing_(),
      goog.dom.classlist.enable(
        goog.asserts.assert(this.getElement()),
        goog.ui.SliderBase.DISABLED_CSS_CLASS_,
        !t
      ));
  }),
  (goog.ui.SliderBase.prototype.isEnabled = function () {
    return this.enabled_;
  }),
  (goog.ui.SliderBase.prototype.getOffsetStart_ = function (t) {
    return this.flipForRtl_ ? goog.style.bidi.getOffsetStart(t) : t.offsetLeft;
  }),
  (goog.ui.SliderBase.prototype.getTextValue = function () {
    return this.labelFn_(this.getValue());
  }),
  (goog.ui.SliderBase.prototype.setFocusElementOnSliderDrag = function (t) {
    this.focusElementOnSliderDrag_ = t;
  }),
  (goog.ui.SliderBase.AnimationFactory = function () {}),
  (goog.ui.Slider = function (t, e) {
    goog.ui.SliderBase.call(this, t, e), this.rangeModel.setExtent(0);
  }),
  goog.inherits(goog.ui.Slider, goog.ui.SliderBase),
  goog.tagUnsealableClass(goog.ui.Slider),
  (goog.ui.Slider.Orientation = goog.ui.SliderBase.Orientation),
  (goog.ui.Slider.CSS_CLASS_PREFIX = "goog-slider"),
  (goog.ui.Slider.THUMB_CSS_CLASS = goog.ui.Slider.CSS_CLASS_PREFIX + "-thumb"),
  (goog.ui.Slider.prototype.getCssClass = function (t) {
    return t == goog.ui.SliderBase.Orientation.VERTICAL
      ? goog.ui.Slider.CSS_CLASS_PREFIX + "-vertical"
      : goog.ui.Slider.CSS_CLASS_PREFIX + "-horizontal";
  }),
  (goog.ui.Slider.prototype.getThumbCssClass = function () {
    return goog.ui.Slider.THUMB_CSS_CLASS;
  }),
  (goog.ui.Slider.prototype.createThumbs = function () {
    var t = this.getElement(),
      e = goog.dom.getElementsByTagNameAndClass(
        null,
        this.getThumbCssClass(),
        t
      )[0];
    e || ((e = this.createThumb_()), t.appendChild(e)),
      (this.valueThumb = this.extentThumb = e);
  }),
  (goog.ui.Slider.prototype.createThumb_ = function () {
    var t = this.getDomHelper().createDom("DIV", this.getThumbCssClass());
    return goog.a11y.aria.setRole(t, goog.a11y.aria.Role.BUTTON), t;
  }),
  (Blockly.FieldColourSlider = function (t, e) {
    Blockly.FieldColourSlider.superClass_.constructor.call(this, t, e),
      this.addArgType("colour");
  }),
  Blockly.utils.object.inherits(Blockly.FieldColourSlider, Blockly.Field),
  (Blockly.FieldColourSlider.fromJson = function (t) {
    return new Blockly.FieldColourSlider(t.colour);
  }),
  (Blockly.FieldColourSlider.prototype.init = function (t) {
    Blockly.FieldColourSlider.superClass_.init.call(this, t),
      this.setValue(this.getValue());
  }),
  (Blockly.FieldColourSlider.prototype.getValue = function () {
    return this.colour_;
  }),
  (Blockly.FieldColourSlider.prototype.setValue = function (t) {
    this.sourceBlock_ &&
      Blockly.Events.isEnabled() &&
      this.colour_ != t &&
      Blockly.Events.fire(
        new Blockly.Events.BlockChange(
          this.sourceBlock_,
          "field",
          this.name,
          this.colour_,
          t
        )
      ),
      (this.colour_ = t),
      this.sourceBlock_ &&
        this.sourceBlock_.setColour(
          t,
          t,
          this.sourceBlock_.style.colourTertiary
        ),
      this.updateSliderHandles_(),
      this.updateDom_();
  }),
  (Blockly.FieldColourSlider.prototype.createColourStops_ = function (t) {
    for (var e = [], o = 0; 360 >= o; o += 20)
      switch (t) {
        case "hue":
          e.push(
            Blockly.utils.colour.hsvToHex(o, this.saturation_, this.brightness_)
          );
          break;
        case "saturation":
          e.push(
            Blockly.utils.colour.hsvToHex(this.hue_, o / 360, this.brightness_)
          );
          break;
        case "brightness":
          e.push(
            Blockly.utils.colour.hsvToHex(
              this.hue_,
              this.saturation_,
              (255 * o) / 360
            )
          );
          break;
        default:
          throw Error("Unknown channel for colour sliders: " + t);
      }
    return e;
  }),
  (Blockly.FieldColourSlider.prototype.setGradient_ = function (t, e) {
    (e = this.createColourStops_(e).join(",")),
      goog.style.setStyle(
        t,
        "background",
        "-moz-linear-gradient(left, " + e + ")"
      ),
      goog.style.setStyle(
        t,
        "background",
        "-webkit-linear-gradient(left, " + e + ")"
      ),
      goog.style.setStyle(
        t,
        "background",
        "-o-linear-gradient(left, " + e + ")"
      ),
      goog.style.setStyle(
        t,
        "background",
        "-ms-linear-gradient(left, " + e + ")"
      ),
      goog.style.setStyle(t, "background", "linear-gradient(left, " + e + ")");
  }),
  (Blockly.FieldColourSlider.prototype.updateDom_ = function () {
    this.hueSlider_ &&
      (this.setGradient_(this.hueSlider_.getElement(), "hue"),
      this.setGradient_(this.saturationSlider_.getElement(), "saturation"),
      this.setGradient_(this.brightnessSlider_.getElement(), "brightness"),
      (this.hueReadout_.textContent = Math.floor(
        (100 * this.hue_) / 360
      ).toFixed(0)),
      (this.saturationReadout_.textContent = Math.floor(
        100 * this.saturation_
      ).toFixed(0)),
      (this.brightnessReadout_.textContent = Math.floor(
        (100 * this.brightness_) / 255
      ).toFixed(0)));
  }),
  (Blockly.FieldColourSlider.prototype.updateSliderHandles_ = function () {
    this.hueSlider_ &&
      (this.hueSlider_.setValue(this.hue_),
      this.saturationSlider_.setValue(this.saturation_),
      this.brightnessSlider_.setValue(this.brightness_));
  }),
  (Blockly.FieldColourSlider.prototype.getText = function () {
    var t = this.colour_,
      e = t.match(/^#(.)\1(.)\2(.)\3$/);
    return e && (t = "#" + e[1] + e[2] + e[3]), t;
  }),
  (Blockly.FieldColourSlider.prototype.createLabelDom_ = function (t) {
    var e = document.createElement("div");
    e.setAttribute("class", "blocklyColourPickerLabel");
    var o = document.createElement("span");
    o.setAttribute("class", "blocklyColourPickerReadout");
    var i = document.createElement("span");
    return (
      i.setAttribute("class", "blocklyColourPickerLabelText"),
      (i.textContent = t),
      e.appendChild(i),
      e.appendChild(o),
      [e, o]
    );
  }),
  (Blockly.FieldColourSlider.prototype.sliderCallbackFactory_ = function (t) {
    var e = this;
    return function (o) {
      o = o.target.getValue();
      var i = Blockly.utils.colour.hexToHsv(e.getValue());
      switch (t) {
        case "hue":
          i[0] = e.hue_ = o;
          break;
        case "saturation":
          i[1] = e.saturation_ = o;
          break;
        case "brightness":
          i[2] = e.brightness_ = o;
      }
      (o = Blockly.utils.colour.hsvToHex(i[0], i[1], i[2])),
        e.sourceBlock_ && (o = e.callValidator(o)),
        null !== o && e.setValue(o, !0);
    };
  }),
  (Blockly.FieldColourSlider.prototype.showEditor_ = function () {
    Blockly.DropDownDiv.hideWithoutAnimation(),
      Blockly.DropDownDiv.clearContent();
    var t = Blockly.DropDownDiv.getContentDiv(),
      e = Blockly.utils.colour.hexToHsv(this.getValue());
    (this.hue_ = e[0]),
      (this.saturation_ = e[1]),
      (this.brightness_ = e[2]),
      (e = this.createLabelDom_("Hue")),
      t.appendChild(e[0]),
      (this.hueReadout_ = e[1]),
      (this.hueSlider_ = new goog.ui.Slider()),
      this.hueSlider_.setUnitIncrement(5),
      this.hueSlider_.setMinimum(0),
      this.hueSlider_.setMaximum(360),
      this.hueSlider_.render(t),
      (e = this.createLabelDom_("Saturation")),
      t.appendChild(e[0]),
      (this.saturationReadout_ = e[1]),
      (this.saturationSlider_ = new goog.ui.Slider()),
      this.saturationSlider_.setUnitIncrement(0.01),
      this.saturationSlider_.setStep(0.001),
      this.saturationSlider_.setMinimum(0),
      this.saturationSlider_.setMaximum(1),
      this.saturationSlider_.render(t),
      (e = this.createLabelDom_("Brightness")),
      t.appendChild(e[0]),
      (this.brightnessReadout_ = e[1]),
      (this.brightnessSlider_ = new goog.ui.Slider()),
      this.brightnessSlider_.setUnitIncrement(2),
      this.brightnessSlider_.setMinimum(0),
      this.brightnessSlider_.setMaximum(255),
      this.brightnessSlider_.render(t),
      (Blockly.FieldColourSlider.hueChangeEventKey_ = goog.events.listen(
        this.hueSlider_,
        goog.ui.Component.EventType.CHANGE,
        this.sliderCallbackFactory_("hue")
      )),
      (Blockly.FieldColourSlider.saturationChangeEventKey_ = goog.events.listen(
        this.saturationSlider_,
        goog.ui.Component.EventType.CHANGE,
        this.sliderCallbackFactory_("saturation")
      )),
      (Blockly.FieldColourSlider.brightnessChangeEventKey_ = goog.events.listen(
        this.brightnessSlider_,
        goog.ui.Component.EventType.CHANGE,
        this.sliderCallbackFactory_("brightness")
      )),
      Blockly.DropDownDiv.setColour("#ffffff", "#dddddd"),
      Blockly.DropDownDiv.setCategory(
        this.sourceBlock_.parentBlock_.getCategory()
      ),
      Blockly.DropDownDiv.showPositionedByBlock(this, this.sourceBlock_),
      this.setValue(this.getValue());
  }),
  (Blockly.FieldColourSlider.prototype.dispose = function () {
    Blockly.FieldColourSlider.hueChangeEventKey_ &&
      goog.events.unlistenByKey(Blockly.FieldColourSlider.hueChangeEventKey_),
      Blockly.FieldColourSlider.saturationChangeEventKey_ &&
        goog.events.unlistenByKey(
          Blockly.FieldColourSlider.saturationChangeEventKey_
        ),
      Blockly.FieldColourSlider.brightnessChangeEventKey_ &&
        goog.events.unlistenByKey(
          Blockly.FieldColourSlider.brightnessChangeEventKey_
        ),
      Blockly.Events.setGroup(!1),
      Blockly.FieldColourSlider.superClass_.dispose.call(this);
  }),
  Blockly.fieldRegistry.register(
    "field_colour_slider",
    Blockly.FieldColourSlider
  ),
  (Blockly.MenuSeparator = function () {
    Blockly.Component.call(this);
  }),
  Blockly.utils.object.inherits(Blockly.MenuSeparator, Blockly.Component),
  (Blockly.MenuSeparator.prototype.createDom = function () {
    var t = document.createElement("div");
    (t.id = this.getId()),
      this.setElementInternal(t),
      (t.className =
        "goog-menuseparator " +
        (this.isRightToLeft() ? "goog-menuseparator-rtl " : "")),
      Blockly.utils.aria.setRole(t, Blockly.utils.aria.Role.SEPARATOR),
      Blockly.utils.aria.setState(t, Blockly.utils.aria.State.DISABLED, !0);
  }),
  (Blockly.MenuSeparator.prototype.isEnabled = function () {
    return !1;
  }),
  (Blockly.FieldDropdown = function (t, e, o) {
    "function" != typeof t && Blockly.FieldDropdown.validateOptions_(t),
      (this.menuGenerator_ = t),
      (this.generatedOptions_ = null),
      this.trimOptions_(),
      (this.selectedOption_ = this.getOptions(!1)[0]),
      Blockly.FieldDropdown.superClass_.constructor.call(
        this,
        this.selectedOption_[1],
        e,
        o
      ),
      (this.svgArrow_ =
        this.arrow_ =
        this.imageElement_ =
        this.menu_ =
        this.selectedMenuItem_ =
          null),
      this.addArgType("dropdown");
  }),
  Blockly.utils.object.inherits(Blockly.FieldDropdown, Blockly.Field),
  (Blockly.FieldDropdown.fromJson = function (t) {
    return new Blockly.FieldDropdown(t.options, void 0, t);
  }),
  (Blockly.FieldDropdown.prototype.EDITABLE = !1),
  (Blockly.FieldDropdown.prototype.SERIALIZABLE = !0),
  (Blockly.FieldDropdown.CHECKMARK_OVERHANG = 25),
  (Blockly.FieldDropdown.MAX_MENU_HEIGHT_VH = 0.45),
  (Blockly.FieldDropdown.IMAGE_Y_OFFSET = 5),
  (Blockly.FieldDropdown.IMAGE_Y_PADDING =
    2 * Blockly.FieldDropdown.IMAGE_Y_OFFSET),
  (Blockly.FieldDropdown.prototype.CURSOR = "pointer"),
  (Blockly.FieldDropdown.prototype.selectedItem = null),
  (Blockly.FieldDropdown.prototype.value_ = ""),
  (Blockly.FieldDropdown.prototype.initView = function () {
    this.shouldAddBorderRect_()
      ? this.createBorderRect_()
      : (this.clickTarget_ = this.sourceBlock_.getSvgRoot()),
      this.createTextElement_(),
      (this.imageElement_ = Blockly.utils.dom.createSvgElement(
        "image",
        {},
        this.fieldGroup_
      )),
      this.constants_.FIELD_DROPDOWN_SVG_ARROW
        ? this.createSVGArrow_()
        : this.createTextArrow_(),
      this.borderRect_ &&
        Blockly.utils.dom.addClass(this.borderRect_, "blocklyDropdownRect");
  }),
  (Blockly.FieldDropdown.prototype.shouldAddBorderRect_ = function () {
    return (
      !this.constants_.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW ||
      (this.constants_.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW &&
        !this.sourceBlock_.isShadow())
    );
  }),
  (Blockly.FieldDropdown.prototype.createTextArrow_ = function () {
    (this.arrow_ = Blockly.utils.dom.createSvgElement(
      "tspan",
      {},
      this.textElement_
    )),
      this.arrow_.appendChild(
        document.createTextNode(
          this.sourceBlock_.RTL
            ? Blockly.FieldDropdown.ARROW_CHAR + " "
            : " " + Blockly.FieldDropdown.ARROW_CHAR
        )
      ),
      this.sourceBlock_.RTL
        ? this.textElement_.insertBefore(this.arrow_, this.textContent_)
        : this.textElement_.appendChild(this.arrow_);
  }),
  (Blockly.FieldDropdown.prototype.createSVGArrow_ = function () {
    var t = Blockly.utils.userAgent.IE || Blockly.utils.userAgent.IOS,
      e = t
        ? this.constants_.FIELD_DROPDOWN_SVG_ARROW_DATAURI
        : "#blocklyDropdownArrowSvg";
    (this.svgArrow_ = Blockly.utils.dom.createSvgElement(
      t ? "image" : "use",
      {
        height: this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE + "px",
        width: this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE + "px",
      },
      this.fieldGroup_
    )),
      this.svgArrow_.setAttributeNS(
        Blockly.utils.dom.XLINK_NS,
        "xlink:href",
        e
      );
  }),
  (Blockly.FieldDropdown.prototype.showEditor_ = function (t) {
    if (
      ((this.menu_ = this.dropdownCreate_()),
      (this.menu_.openingCoords =
        t && "number" == typeof t.clientX
          ? new Blockly.utils.Coordinate(t.clientX, t.clientY)
          : null),
      this.menu_.render(Blockly.DropDownDiv.getContentDiv()),
      Blockly.utils.dom.addClass(
        this.menu_.getElement(),
        "blocklyDropdownMenu"
      ),
      this.constants_.FIELD_DROPDOWN_COLOURED_DIV)
    ) {
      t = this.sourceBlock_.isShadow()
        ? this.sourceBlock_.getParent().getColour()
        : this.sourceBlock_.getColour();
      var e = this.sourceBlock_.isShadow()
        ? this.sourceBlock_.getParent().style.colourTertiary
        : this.sourceBlock_.style.colourTertiary;
      Blockly.DropDownDiv.setColour(t, e);
    }
    Blockly.DropDownDiv.showPositionedByField(
      this,
      this.dropdownDispose_.bind(this)
    ),
      this.menu_.focus(),
      this.selectedMenuItem_ &&
        Blockly.utils.style.scrollIntoContainerView(
          this.selectedMenuItem_.getElement(),
          this.menu_.getElement()
        ),
      this.applyColour();
  }),
  (Blockly.FieldDropdown.prototype.dropdownCreate_ = function () {
    var t = new Blockly.Menu();
    t.setRightToLeft(this.sourceBlock_.RTL),
      t.setRole(Blockly.utils.aria.Role.LISTBOX);
    var e = this.getOptions(!1);
    this.selectedMenuItem_ = null;
    for (var o = 0; o < e.length; o++) {
      var i = e[o][0],
        n = e[o][1];
      if ("SEPARATOR" === n)
        (i = new Blockly.MenuSeparator()).setRightToLeft(this.sourceBlock_.RTL),
          t.addChild(i, !0),
          (i.getElement().style.borderColor =
            this.sourceBlock_.style.colourTertiary);
      else {
        if ("object" == typeof i) {
          var l = new Image(i.width, i.height);
          (l.src = i.src), (l.alt = i.alt || ""), (i = l);
        }
        (i = new Blockly.MenuItem(i)).setRole(Blockly.utils.aria.Role.OPTION),
          i.setRightToLeft(this.sourceBlock_.RTL),
          i.setValue(n),
          i.setCheckable(!0),
          t.addChild(i, !0),
          i.setChecked(n == this.value_),
          n == this.value_ && (this.selectedMenuItem_ = i),
          i.onAction(this.handleMenuActionEvent_, this);
      }
    }
    return (
      Blockly.utils.aria.setState(
        t.getElement(),
        Blockly.utils.aria.State.ACTIVEDESCENDANT,
        this.selectedMenuItem_ ? this.selectedMenuItem_.getId() : ""
      ),
      t
    );
  }),
  (Blockly.FieldDropdown.prototype.dropdownDispose_ = function () {
    this.menu_ && this.menu_.dispose(),
      (this.selectedMenuItem_ = this.menu_ = null),
      this.applyColour();
  }),
  (Blockly.FieldDropdown.prototype.handleMenuActionEvent_ = function (t) {
    Blockly.DropDownDiv.hideIfOwner(this, !0),
      this.onItemSelected_(this.menu_, t);
  }),
  (Blockly.FieldDropdown.prototype.onItemSelected_ = function (t, e) {
    null !== (t = e.getValue()) &&
      (this.setValue(t),
      this.sourceBlock_.workspace &&
        Blockly.Events.fire(
          new Blockly.Events.Ui(this.sourceBlock_, "itemSelected", void 0, t)
        ));
  }),
  (Blockly.FieldDropdown.prototype.trimOptions_ = function () {
    this.suffixField = this.prefixField = null;
    var t = this.menuGenerator_;
    if (Array.isArray(t)) {
      for (var e = !1, o = 0; o < t.length; o++) {
        var i = t[o][0];
        "string" == typeof i
          ? (t[o][0] = Blockly.utils.replaceMessageReferences(i))
          : (null != i.alt &&
              (t[o][0].alt = Blockly.utils.replaceMessageReferences(i.alt)),
            (e = !0));
      }
      if (!(e || 2 > t.length)) {
        var n = [];
        for (o = 0; o < t.length; o++) n.push(t[o][0]);
        if (
          ((o = Blockly.utils.string.shortestStringLength(n)),
          (e = Blockly.utils.string.commonWordPrefix(n, o)),
          (i = Blockly.utils.string.commonWordSuffix(n, o)),
          (e || i) && !(o <= e + i))
        ) {
          for (
            e && (this.prefixField = n[0].substring(0, e - 1)),
              i && (this.suffixField = n[0].substr(1 - i)),
              n = [],
              o = 0;
            o < t.length;
            o++
          ) {
            var l = t[o][0],
              r = t[o][1];
            (l = l.substring(e, l.length - i)), (n[o] = [l, r]);
          }
          this.menuGenerator_ = n;
        }
      }
    }
  }),
  (Blockly.FieldDropdown.prototype.isOptionListDynamic = function () {
    return "function" == typeof this.menuGenerator_;
  }),
  (Blockly.FieldDropdown.prototype.getOptions = function (t) {
    return this.isOptionListDynamic()
      ? ((this.generatedOptions_ && t) ||
          ((this.generatedOptions_ = this.menuGenerator_.call(this)),
          Blockly.FieldDropdown.validateOptions_(this.generatedOptions_)),
        this.generatedOptions_)
      : this.menuGenerator_;
  }),
  (Blockly.FieldDropdown.prototype.doClassValidation_ = function (t) {
    for (var e, o = !1, i = this.getOptions(!0), n = 0; (e = i[n]); n++)
      if (e[1] == t) {
        o = !0;
        break;
      }
    return (
      o ||
        (this.sourceBlock_ &&
          console.warn(
            "Cannot set the dropdown's value to an unavailable option. Block type: " +
              this.sourceBlock_.type +
              ", Field name: " +
              this.name +
              ", Value: " +
              t
          )),
      t
    );
  }),
  (Blockly.FieldDropdown.prototype.doValueUpdate_ = function (t) {
    Blockly.FieldDropdown.superClass_.doValueUpdate_.call(this, t),
      (t = this.getOptions(!0));
    for (var e, o = 0; (e = t[o]); o++)
      e[1] == this.value_ && (this.selectedOption_ = e);
  }),
  (Blockly.FieldDropdown.prototype.applyColour = function () {
    this.borderRect_ &&
      (this.borderRect_.setAttribute(
        "stroke",
        this.sourceBlock_.style.colourTertiary
      ),
      this.menu_
        ? this.borderRect_.setAttribute(
            "fill",
            this.sourceBlock_.style.colourTertiary
          )
        : this.borderRect_.setAttribute("fill", "transparent")),
      this.sourceBlock_ &&
        this.arrow_ &&
        (this.sourceBlock_.isShadow()
          ? (this.arrow_.style.fill = this.sourceBlock_.style.colourSecondary)
          : (this.arrow_.style.fill = this.sourceBlock_.style.colourPrimary));
  }),
  (Blockly.FieldDropdown.prototype.render_ = function () {
    (this.textContent_.nodeValue = ""),
      (this.imageElement_.style.display = "none");
    var t = this.selectedOption_ && this.selectedOption_[0];
    t && "object" == typeof t
      ? this.renderSelectedImage_(t)
      : this.renderSelectedText_(),
      this.borderRect_ &&
        (this.borderRect_.setAttribute("height", this.size_.height),
        this.borderRect_.setAttribute("width", this.size_.width));
  }),
  (Blockly.FieldDropdown.prototype.renderSelectedImage_ = function (t) {
    (this.imageElement_.style.display = ""),
      this.imageElement_.setAttributeNS(
        Blockly.utils.dom.XLINK_NS,
        "xlink:href",
        t.src
      ),
      this.imageElement_.setAttribute("height", t.height),
      this.imageElement_.setAttribute("width", t.width);
    var e = Number(t.height),
      o = Number(t.width),
      i = !!this.borderRect_;
    (this.size_.height = Math.max(
      i ? this.constants_.FIELD_DROPDOWN_BORDER_RECT_HEIGHT : 0,
      e + Blockly.FieldDropdown.IMAGE_Y_PADDING
    )),
      (t = this.size_.height / 2),
      (i = i ? this.constants_.FIELD_BORDER_RECT_X_PADDING : 0);
    var n = this.svgArrow_
      ? this.positionSVGArrow_(
          o + i,
          t - this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE / 2
        )
      : Blockly.utils.dom.getFastTextWidth(
          this.arrow_,
          this.constants_.FIELD_TEXT_FONTSIZE,
          this.constants_.FIELD_TEXT_FONTWEIGHT,
          this.constants_.FIELD_TEXT_FONTFAMILY
        );
    (this.size_.width = o + n + 2 * i),
      this.sourceBlock_.RTL
        ? ((o = i - 1),
          this.imageElement_.setAttribute("x", i + n),
          this.textElement_.setAttribute("x", o))
        : ((o = o + n + i + 1),
          this.textElement_.setAttribute("text-anchor", "end"),
          this.textElement_.setAttribute("x", o),
          this.imageElement_.setAttribute("x", i)),
      this.imageElement_.setAttribute("y", t - e / 2);
  }),
  (Blockly.FieldDropdown.prototype.renderSelectedText_ = function () {
    (this.textContent_.nodeValue = this.getDisplayText_()),
      Blockly.utils.dom.addClass(this.textElement_, "blocklyDropdownText"),
      this.textElement_.setAttribute("text-anchor", "start");
    var t = !!this.borderRect_;
    this.size_.height = Math.max(
      t ? this.constants_.FIELD_DROPDOWN_BORDER_RECT_HEIGHT : 0,
      this.constants_.FIELD_TEXT_HEIGHT
    );
    var e = this.size_.height / 2,
      o = Blockly.utils.dom.getFastTextWidth(
        this.textElement_,
        this.constants_.FIELD_TEXT_FONTSIZE,
        this.constants_.FIELD_TEXT_FONTWEIGHT,
        this.constants_.FIELD_TEXT_FONTFAMILY
      );
    t = t ? this.constants_.FIELD_BORDER_RECT_X_PADDING : 0;
    var i = 0;
    this.svgArrow_ &&
      (i = this.positionSVGArrow_(
        o + t,
        e - this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE / 2
      )),
      (this.size_.width = o + i + 2 * t),
      this.textElement_.setAttribute(
        "x",
        this.sourceBlock_.RTL ? this.size_.width - o - t : t
      ),
      this.textElement_.setAttribute("y", e),
      this.constants_.FIELD_TEXT_BASELINE_CENTER ||
        this.textElement_.setAttribute(
          "dy",
          this.constants_.FIELD_TEXT_BASELINE_Y -
            this.constants_.FIELD_TEXT_HEIGHT / 2 +
            this.constants_.FIELD_TEXT_Y_OFFSET
        );
  }),
  (Blockly.FieldDropdown.prototype.positionSVGArrow_ = function (t, e) {
    if (!this.svgArrow_) return 0;
    var o = this.borderRect_ ? this.constants_.FIELD_BORDER_RECT_X_PADDING : 0,
      i = this.constants_.FIELD_DROPDOWN_SVG_ARROW_PADDING,
      n = this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE;
    return (
      this.svgArrow_.setAttribute(
        "transform",
        "translate(" + (this.sourceBlock_.RTL ? o : t + i) + "," + e + ")"
      ),
      n + i
    );
  }),
  (Blockly.FieldDropdown.prototype.getText_ = function () {
    if (!this.selectedOption_) return null;
    var t = this.selectedOption_[0];
    return "object" == typeof t ? t.alt : t;
  }),
  (Blockly.FieldDropdown.validateOptions_ = function (t) {
    if (!Array.isArray(t))
      throw TypeError("FieldDropdown options must be an array.");
    if (!t.length)
      throw TypeError("FieldDropdown options must not be an empty array.");
    for (var e = !1, o = 0; o < t.length; ++o) {
      var i = t[o];
      Array.isArray(i)
        ? "string" != typeof i[1]
          ? ((e = !0),
            console.error(
              "Invalid option[" +
                o +
                "]: Each FieldDropdown option id must be a string. Found " +
                i[1] +
                " in: ",
              i
            ))
          : i[0] &&
            "string" != typeof i[0] &&
            "string" != typeof i[0].src &&
            ((e = !0),
            console.error(
              "Invalid option[" +
                o +
                "]: Each FieldDropdown option must have a string label or image description. Found" +
                i[0] +
                " in: ",
              i
            ))
        : ((e = !0),
          console.error(
            "Invalid option[" +
              o +
              "]: Each FieldDropdown option must be an array. Found: ",
            i
          ));
    }
    if (e) throw TypeError("Found invalid FieldDropdown options.");
  }),
  (Blockly.FieldDropdown.prototype.onBlocklyAction = function (t) {
    if (this.menu_) {
      if (t === Blockly.navigation.ACTION_PREVIOUS)
        return this.menu_.highlightPrevious(), !0;
      if (t === Blockly.navigation.ACTION_NEXT)
        return this.menu_.highlightNext(), !0;
    }
    return Blockly.FieldDropdown.superClass_.onBlocklyAction.call(this, t);
  }),
  Blockly.fieldRegistry.register("field_dropdown", Blockly.FieldDropdown),
  (Blockly.FieldIconMenu = function (t) {
    (this.icons_ = t),
      Blockly.FieldIconMenu.superClass_.constructor.call(this, t[0].value),
      this.addArgType("iconmenu");
  }),
  Blockly.utils.object.inherits(Blockly.FieldIconMenu, Blockly.Field),
  (Blockly.FieldIconMenu.fromJson = function (t) {
    return new Blockly.FieldIconMenu(t.options);
  }),
  (Blockly.FieldIconMenu.DROPDOWN_WIDTH = 168),
  (Blockly.FieldIconMenu.savedPrimary_ = null),
  (Blockly.FieldIconMenu.prototype.init = function (t) {
    (this.arrowX_ = 18),
      (this.arrowY_ = 10),
      t.RTL && (this.arrowX_ = -this.arrowX_ - 12),
      (this.arrowIcon_ = Blockly.utils.dom.createSvgElement("image", {
        height: "12px",
        width: "12px",
        transform: "translate(" + this.arrowX_ + "," + this.arrowY_ + ")",
      })),
      this.arrowIcon_.setAttributeNS(
        "http://www.w3.org/1999/xlink",
        "xlink:href",
        Blockly.mainWorkspace.options.pathToMedia + "dropdown-arrow.svg"
      ),
      t.getSvgRoot().appendChild(this.arrowIcon_),
      Blockly.FieldIconMenu.superClass_.init.call(this, t);
  }),
  (Blockly.FieldIconMenu.prototype.CURSOR = "default"),
  (Blockly.FieldIconMenu.prototype.setValue = function (t) {
    null !== t &&
      t !== this.value_ &&
      (this.sourceBlock_ &&
        Blockly.Events.isEnabled() &&
        Blockly.Events.fire(
          new Blockly.Events.Change(
            this.sourceBlock_,
            "field",
            this.name,
            this.value_,
            t
          )
        ),
      (this.value_ = t),
      this.setParentFieldImage(this.getSrcForValue(this.value_)));
  }),
  (Blockly.FieldIconMenu.prototype.setParentFieldImage = function (t) {
    if (this.sourceBlock_ && this.sourceBlock_.parentBlock_)
      for (
        var e, o = this.sourceBlock_.parentBlock_, i = 0;
        (e = o.inputList[i]);
        i++
      )
        for (var n, l = 0; (n = e.fieldRow[l]); l++)
          if (n instanceof Blockly.FieldImage) return void n.setValue(t);
  }),
  (Blockly.FieldIconMenu.prototype.getValue = function () {
    return this.value_;
  }),
  (Blockly.FieldIconMenu.prototype.getSrcForValue = function (t) {
    for (var e, o = 0; (e = this.icons_[o]); o++)
      if (e.value === t) return e.src;
  }),
  (Blockly.FieldIconMenu.prototype.showEditor_ = function () {
    if (!Blockly.DropDownDiv.hideIfOwner(this)) {
      Blockly.DropDownDiv.hideWithoutAnimation(),
        Blockly.DropDownDiv.clearContent();
      var t = Blockly.DropDownDiv.getContentDiv();
      t.setAttribute("role", "menu"), t.setAttribute("aria-haspopup", "true");
      for (var e, o = 0; (e = this.icons_[o]); o++)
        if ("placeholder" == e.type) {
          var i = document.createElement("span");
          i.setAttribute("class", "blocklyDropDownPlaceholder"),
            (i.style.width = e.width + "px"),
            (i.style.height = e.height + "px"),
            t.appendChild(i);
        } else {
          (i = document.createElement("button")).setAttribute("id", ":" + o),
            i.setAttribute("role", "menuitem"),
            i.setAttribute("class", "blocklyDropDownButton"),
            (i.title = e.alt),
            (i.style.width = e.width + "px"),
            (i.style.height = e.height + "px");
          var n = this.sourceBlock_.getColour();
          e.value == this.getValue() &&
            ((n = this.sourceBlock_.getColourTertiary()),
            i.setAttribute("aria-selected", "true")),
            (i.style.backgroundColor = n),
            (i.style.borderColor = this.sourceBlock_.getColourTertiary()),
            Blockly.bindEvent_(i, "click", this, this.buttonClick_),
            Blockly.bindEvent_(i, "mouseup", this, this.buttonClick_),
            Blockly.bindEvent_(i, "mousedown", i, function (t) {
              this.setAttribute(
                "class",
                "blocklyDropDownButton blocklyDropDownButtonHover"
              ),
                t.preventDefault();
            }),
            Blockly.bindEvent_(i, "mouseover", i, function () {
              this.setAttribute(
                "class",
                "blocklyDropDownButton blocklyDropDownButtonHover"
              ),
                t.setAttribute("aria-activedescendant", this.id);
            }),
            Blockly.bindEvent_(i, "mouseout", i, function () {
              this.setAttribute("class", "blocklyDropDownButton"),
                t.removeAttribute("aria-activedescendant");
            }),
            ((n = document.createElement("img")).src = e.src),
            i.setAttribute("data-value", e.value),
            n.setAttribute("data-value", e.value),
            i.appendChild(n),
            t.appendChild(i);
        }
      (t.style.width = Blockly.FieldIconMenu.DROPDOWN_WIDTH + "px"),
        Blockly.DropDownDiv.setColour(
          this.sourceBlock_.getColour(),
          this.sourceBlock_.getColourTertiary()
        ),
        Blockly.DropDownDiv.setCategory(
          this.sourceBlock_.parentBlock_.getCategory()
        ),
        (this.savedPrimary_ = this.sourceBlock_.getColour()),
        this.sourceBlock_.setColour(
          this.sourceBlock_.getColourSecondary(),
          this.sourceBlock_.getColourSecondary(),
          this.sourceBlock_.getColourTertiary()
        ),
        (o = this.sourceBlock_.workspace.scale),
        (o =
          -Blockly.BlockSvg.MIN_BLOCK_Y * o -
          Blockly.BlockSvg.FIELD_Y_OFFSET * o),
        Blockly.DropDownDiv.showPositionedByBlock(
          this,
          this.sourceBlock_,
          this.onHide_.bind(this),
          o
        ) ||
          this.arrowIcon_.setAttribute(
            "transform",
            "translate(" +
              (this.arrowX_ + Blockly.DropDownDiv.ARROW_SIZE / 1.5 + 1) +
              "," +
              (this.arrowY_ + Blockly.DropDownDiv.ARROW_SIZE / 1.5) +
              ") rotate(180)"
          );
    }
  }),
  (Blockly.FieldIconMenu.prototype.buttonClick_ = function (t) {
    (t = t.target.getAttribute("data-value")),
      this.setValue(t),
      Blockly.DropDownDiv.hide();
  }),
  (Blockly.FieldIconMenu.prototype.onHide_ = function () {
    this.sourceBlock_ &&
      this.sourceBlock_.setColour(
        this.savedPrimary_,
        this.sourceBlock_.getColourSecondary(),
        this.sourceBlock_.getColourTertiary()
      ),
      Blockly.DropDownDiv.content_.removeAttribute("role"),
      Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup"),
      Blockly.DropDownDiv.content_.removeAttribute("aria-activedescendant"),
      this.arrowIcon_.setAttribute(
        "transform",
        "translate(" + this.arrowX_ + "," + this.arrowY_ + ")"
      );
  }),
  Blockly.fieldRegistry.register("field_iconmenu", Blockly.FieldIconMenu),
  (Blockly.FieldLabelSerializable = function (t, e, o) {
    Blockly.FieldLabelSerializable.superClass_.constructor.call(this, t, e, o);
  }),
  Blockly.utils.object.inherits(
    Blockly.FieldLabelSerializable,
    Blockly.FieldLabel
  ),
  (Blockly.FieldLabelSerializable.fromJson = function (t) {
    var e = Blockly.utils.replaceMessageReferences(t.text);
    return new Blockly.FieldLabelSerializable(e, void 0, t);
  }),
  (Blockly.FieldLabelSerializable.prototype.EDITABLE = !1),
  (Blockly.FieldLabelSerializable.prototype.SERIALIZABLE = !0),
  Blockly.fieldRegistry.register(
    "field_label_serializable",
    Blockly.FieldLabelSerializable
  ),
  (Blockly.FieldImage = function (t, e, o, i, n, l, r) {
    if (!t) throw Error("Src value of an image field is required");
    if (
      ((t = Blockly.utils.replaceMessageReferences(t)),
      (o = Number(Blockly.utils.replaceMessageReferences(o))),
      (e = Number(Blockly.utils.replaceMessageReferences(e))),
      isNaN(o) || isNaN(e))
    )
      throw Error(
        "Height and width values of an image field must cast to numbers."
      );
    if (0 >= o || 0 >= e)
      throw Error(
        "Height and width values of an image field must be greater than 0."
      );
    (this.flipRtl_ = !1),
      (this.altText_ = ""),
      Blockly.FieldImage.superClass_.constructor.call(this, t || "", null, r),
      r ||
        ((this.flipRtl_ = !!l),
        (this.altText_ = Blockly.utils.replaceMessageReferences(i) || "")),
      (this.size_ = new Blockly.utils.Size(
        e,
        o + Blockly.FieldImage.Y_PADDING
      )),
      (this.imageHeight_ = o),
      (this.clickHandler_ = null),
      "function" == typeof n && (this.clickHandler_ = n),
      (this.imageElement_ = null);
  }),
  Blockly.utils.object.inherits(Blockly.FieldImage, Blockly.Field),
  (Blockly.FieldImage.fromJson = function (t) {
    return new Blockly.FieldImage(
      t.src,
      t.width,
      t.height,
      void 0,
      void 0,
      void 0,
      t
    );
  }),
  (Blockly.FieldImage.Y_PADDING = 1),
  (Blockly.FieldImage.prototype.EDITABLE = !1),
  (Blockly.FieldImage.prototype.SERIALIZABLE = !1),
  (Blockly.FieldImage.prototype.isDirty_ = !1),
  (Blockly.FieldImage.prototype.configure_ = function (t) {
    Blockly.FieldImage.superClass_.configure_.call(this, t),
      (this.flipRtl_ = !!t.flipRtl),
      (this.altText_ = Blockly.utils.replaceMessageReferences(t.alt) || "");
  }),
  (Blockly.FieldImage.prototype.initView = function () {
    (this.imageElement_ = Blockly.utils.dom.createSvgElement(
      "image",
      {
        height: this.imageHeight_ + "px",
        width: this.size_.width + "px",
        alt: this.altText_,
      },
      this.fieldGroup_
    )),
      this.imageElement_.setAttributeNS(
        Blockly.utils.dom.XLINK_NS,
        "xlink:href",
        this.value_
      ),
      this.clickHandler_ && (this.imageElement_.style.cursor = "pointer");
  }),
  (Blockly.FieldImage.prototype.doClassValidation_ = function (t) {
    return "string" != typeof t ? null : t;
  }),
  (Blockly.FieldImage.prototype.doValueUpdate_ = function (t) {
    (this.value_ = t),
      this.imageElement_ &&
        this.imageElement_.setAttributeNS(
          Blockly.utils.dom.XLINK_NS,
          "xlink:href",
          String(this.value_)
        );
  }),
  (Blockly.FieldImage.prototype.getFlipRtl = function () {
    return this.flipRtl_;
  }),
  (Blockly.FieldImage.prototype.setAlt = function (t) {
    t != this.altText_ &&
      ((this.altText_ = t || ""),
      this.imageElement_ &&
        this.imageElement_.setAttribute("alt", this.altText_));
  }),
  (Blockly.FieldImage.prototype.showEditor_ = function () {
    this.clickHandler_ && this.clickHandler_(this);
  }),
  (Blockly.FieldImage.prototype.setOnClickHandler = function (t) {
    this.clickHandler_ = t;
  }),
  (Blockly.FieldImage.prototype.getText_ = function () {
    return this.altText_;
  }),
  Blockly.fieldRegistry.register("field_image", Blockly.FieldImage),
  (Blockly.FieldTextDropdown = function (t, e, o, i) {
    (this.menuGenerator_ = e),
      Blockly.FieldDropdown.prototype.trimOptions_.call(this),
      Blockly.FieldTextDropdown.superClass_.constructor.call(this, t, o, i),
      this.addArgType("textdropdown");
  }),
  Blockly.utils.object.inherits(
    Blockly.FieldTextDropdown,
    Blockly.FieldTextInput
  ),
  (Blockly.FieldTextDropdown.fromJson = function (t) {
    var e = new Blockly.FieldTextDropdown(t.text, t.options);
    return "boolean" == typeof t.spellcheck && e.setSpellcheck(t.spellcheck), e;
  }),
  (Blockly.FieldTextDropdown.DROPDOWN_SVG_DATAURI =
    "data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiM1NzVFNzUiLz48L3N2Zz4K"),
  (Blockly.FieldTextDropdown.prototype.initView = function () {
    Blockly.FieldTextDropdown.superClass_.initView.call(this),
      this.createSVGArrow_();
  }),
  (Blockly.FieldTextDropdown.prototype.updateSize_ = function () {
    Blockly.FieldTextDropdown.superClass_.updateSize_.call(this);
    var t = this.positionSVGArrow_(
      this.size_.width,
      this.size_.height / 2 - this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE / 2
    );
    this.size_.width += t;
  }),
  (Blockly.FieldTextDropdown.prototype.dispose = function () {
    this.mouseUpWrapper_ &&
      (Blockly.unbindEvent_(this.mouseUpWrapper_),
      (this.mouseUpWrapper_ = null),
      Blockly.Touch.clearTouchIdentifier()),
      Blockly.FieldTextDropdown.superClass_.dispose.call(this);
  }),
  (Blockly.FieldTextDropdown.prototype.showEditor_ = function (t) {
    Blockly.FieldTextDropdown.superClass_.showEditor_.call(
      this,
      t,
      !1,
      Blockly.utils.userAgent.MOBILE ||
        Blockly.utils.userAgent.ANDROID ||
        Blockly.utils.userAgent.IPAD,
      !0,
      function () {
        this.dropDownOpen_ || this.showDropdown_(),
          Blockly.Touch.clearTouchIdentifier();
      }
    );
  }),
  (Blockly.FieldTextDropdown.prototype.isOptionListDynamic =
    Blockly.FieldDropdown.prototype.isOptionListDynamic),
  (Blockly.FieldTextDropdown.prototype.getOptions =
    Blockly.FieldDropdown.prototype.getOptions),
  (Blockly.FieldTextDropdown.prototype.createSVGArrow_ = function () {
    (this.svgArrow_ = Blockly.utils.dom.createSvgElement(
      "image",
      {
        height: this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE + "px",
        width: this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE + "px",
      },
      this.fieldGroup_
    )),
      this.svgArrow_.setAttributeNS(
        Blockly.utils.dom.XLINK_NS,
        "xlink:href",
        Blockly.FieldTextDropdown.DROPDOWN_SVG_DATAURI
      );
  }),
  (Blockly.FieldTextDropdown.prototype.showDropdown_ =
    Blockly.FieldDropdown.prototype.showEditor_),
  (Blockly.FieldTextDropdown.prototype.dropdownCreate_ =
    Blockly.FieldDropdown.prototype.dropdownCreate_),
  (Blockly.FieldTextDropdown.prototype.dropdownDispose_ =
    Blockly.FieldDropdown.prototype.dropdownDispose_),
  (Blockly.FieldTextDropdown.prototype.positionSVGArrow_ =
    Blockly.FieldDropdown.prototype.positionSVGArrow_),
  (Blockly.FieldTextDropdown.prototype.handleMenuActionEvent_ =
    Blockly.FieldDropdown.prototype.handleMenuActionEvent_),
  (Blockly.FieldTextDropdown.prototype.onItemSelected_ = function (t, e) {
    null !== (t = e.getValue()) &&
      (this.setValue(t), Blockly.WidgetDiv.hideIfOwner(this));
  }),
  Blockly.fieldRegistry.register(
    "field_textdropdown",
    Blockly.FieldTextDropdown
  ),
  (Blockly.FieldMultilineInput = function (t, e, o) {
    null == t && (t = ""),
      Blockly.FieldMultilineInput.superClass_.constructor.call(this, t, e, o),
      (this.textGroup_ = null);
  }),
  Blockly.utils.object.inherits(
    Blockly.FieldMultilineInput,
    Blockly.FieldTextInput
  ),
  (Blockly.FieldMultilineInput.LINE_HEIGHT = 20),
  (Blockly.FieldMultilineInput.fromJson = function (t) {
    var e = Blockly.utils.replaceMessageReferences(t.text);
    return new Blockly.FieldMultilineInput(e, void 0, t);
  }),
  (Blockly.FieldMultilineInput.prototype.toXml = function (t) {
    return (t.textContent = this.getValue().replace(/\n/g, "&#10;")), t;
  }),
  (Blockly.FieldMultilineInput.prototype.fromXml = function (t) {
    this.setValue(t.textContent.replace(/&#10;/g, "\n"));
  }),
  (Blockly.FieldMultilineInput.prototype.initView = function () {
    this.createBorderRect_(),
      (this.textGroup_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyEditableText" },
        this.fieldGroup_
      ));
  }),
  (Blockly.FieldMultilineInput.prototype.getDisplayText_ = function () {
    var t = this.value_;
    if (!t) return Blockly.Field.NBSP;
    var e = t.split("\n");
    t = "";
    for (var o = 0; o < e.length; o++) {
      var i = e[o];
      i.length > this.maxDisplayLength &&
        (i = i.substring(0, this.maxDisplayLength - 4) + "..."),
        (t += i = i.replace(/\s/g, Blockly.Field.NBSP)),
        o !== e.length - 1 && (t += "\n");
    }
    return this.sourceBlock_.RTL && (t += "‏"), t;
  }),
  (Blockly.FieldMultilineInput.prototype.render_ = function () {
    for (var t; (t = this.textGroup_.firstChild); )
      this.textGroup_.removeChild(t);
    t = this.getDisplayText_().split("\n");
    for (var e = 0, o = 0; o < t.length; o++)
      Blockly.utils.dom
        .createSvgElement(
          "text",
          {
            class: "blocklyText blocklyMultilineText",
            x: this.constants_.FIELD_BORDER_RECT_X_PADDING,
            y: e + this.constants_.FIELD_BORDER_RECT_Y_PADDING,
            dy: Blockly.FieldMultilineInput.LINE_HEIGHT / 2,
          },
          this.textGroup_
        )
        .appendChild(document.createTextNode(t[o])),
        (e += Blockly.FieldMultilineInput.LINE_HEIGHT);
    this.updateSize_(),
      this.isBeingEdited_ &&
        (this.sourceBlock_.RTL
          ? setTimeout(this.resizeEditor_.bind(this), 0)
          : this.resizeEditor_(),
        (t = this.htmlInput_),
        this.isTextValid_
          ? (Blockly.utils.dom.removeClass(t, "blocklyInvalidInput"),
            Blockly.utils.aria.setState(
              t,
              Blockly.utils.aria.State.INVALID,
              !1
            ))
          : (Blockly.utils.dom.addClass(t, "blocklyInvalidInput"),
            Blockly.utils.aria.setState(
              t,
              Blockly.utils.aria.State.INVALID,
              !0
            )));
  }),
  (Blockly.FieldMultilineInput.prototype.updateSize_ = function () {
    for (
      var t = this.textGroup_.childNodes, e = 0, o = 0, i = 0;
      i < t.length;
      i++
    ) {
      var n = Blockly.utils.dom.getTextWidth(t[i]);
      n > e && (e = n), (o += Blockly.FieldMultilineInput.LINE_HEIGHT);
    }
    this.borderRect_ &&
      ((e += 2 * this.constants_.FIELD_BORDER_RECT_X_PADDING),
      this.borderRect_.setAttribute("width", e),
      this.borderRect_.setAttribute("height", o)),
      (this.size_.width = e),
      (this.size_.height = o);
  }),
  (Blockly.FieldMultilineInput.prototype.resizeEditor_ = function () {
    var t = Blockly.WidgetDiv.DIV,
      e = this.getScaledBBox();
    (t.style.width = e.right - e.left + "px"),
      (t.style.height = e.bottom - e.top + "px"),
      (e = new Blockly.utils.Coordinate(
        this.sourceBlock_.RTL ? e.right - t.offsetWidth : e.left,
        e.top
      )),
      (t.style.left = e.x + "px"),
      (t.style.top = e.y + "px");
  }),
  (Blockly.FieldMultilineInput.prototype.widgetCreate_ = function () {
    var t = Blockly.WidgetDiv.DIV,
      e = this.workspace_.scale,
      o = document.createElement("textarea");
    (o.className = "blocklyHtmlInput blocklyHtmlTextAreaInput"),
      o.setAttribute("spellcheck", this.spellcheck_);
    var i = this.constants_.FIELD_TEXT_FONTSIZE * e + "pt";
    return (
      (t.style.fontSize = i),
      (o.style.fontSize = i),
      (o.style.borderRadius = Blockly.FieldTextInput.BORDERRADIUS * e + "px"),
      (i = this.constants_.FIELD_BORDER_RECT_X_PADDING * e),
      (o.style.paddingLeft = i + "px"),
      (o.style.width = "calc(100% - " + i + "px)"),
      (o.style.lineHeight = Blockly.FieldMultilineInput.LINE_HEIGHT * e + "px"),
      t.appendChild(o),
      (o.value = o.defaultValue = this.getEditorText_(this.value_)),
      (o.untypedDefaultValue_ = this.value_),
      (o.oldValue_ = null),
      Blockly.utils.userAgent.GECKO
        ? setTimeout(this.resizeEditor_.bind(this), 0)
        : this.resizeEditor_(),
      this.bindInputEvents_(o),
      o
    );
  }),
  (Blockly.FieldMultilineInput.prototype.onHtmlInputKeyDown_ = function (t) {
    t.keyCode !== Blockly.utils.KeyCodes.ENTER &&
      Blockly.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this, t);
  }),
  Blockly.Css.register(
    ".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,}".split(
      ","
    )
  ),
  Blockly.fieldRegistry.register(
    "field_multilinetext",
    Blockly.FieldMultilineInput
  ),
  (Blockly.FieldNumber = function (t, e, o, i, n, l) {
    var r = this.getNumRestrictor(e, o, i);
    (this.min_ = -1 / 0),
      (this.max_ = 1 / 0),
      (this.precision_ = 0),
      (this.decimalPlaces_ = null),
      Blockly.FieldNumber.superClass_.constructor.call(this, t || 0, n, r, l),
      l || this.setConstraints(e, o, i),
      this.addArgType("number");
  }),
  Blockly.utils.object.inherits(Blockly.FieldNumber, Blockly.FieldTextInput),
  (Blockly.FieldNumber.fromJson = function (t) {
    return new Blockly.FieldNumber(t.value, void 0, void 0, void 0, void 0, t);
  }),
  (Blockly.FieldNumber.prototype.SERIALIZABLE = !0),
  (Blockly.FieldNumber.DROPDOWN_WIDTH = 168),
  (Blockly.FieldNumber.NUMPAD_BUTTONS = "789456123.0- ".split("")),
  (Blockly.FieldNumber.NUMPAD_DELETE_ICON =
    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'%3E%3Cpath d='M28.89,11.45H16.79a2.86,2.86,0,0,0-2,.84L9.09,18a2.85,2.85,0,0,0,0,4l5.69,5.69a2.86,2.86,0,0,0,2,.84h12.1a2.86,2.86,0,0,0,2.86-2.86V14.31A2.86,2.86,0,0,0,28.89,11.45ZM27.15,22.73a1,1,0,0,1,0,1.41,1,1,0,0,1-.71.3,1,1,0,0,1-.71-0.3L23,21.41l-2.73,2.73a1,1,0,0,1-1.41,0,1,1,0,0,1,0-1.41L21.59,20l-2.73-2.73a1,1,0,0,1,0-1.41,1,1,0,0,1,1.41,0L23,18.59l2.73-2.73a1,1,0,1,1,1.42,1.41L24.42,20Z' fill='%23" +
    Blockly.Colours.numPadText.substr(1) +
    "'/%3E%3C/svg%3E"),
  (Blockly.FieldNumber.activeField_ = null),
  (Blockly.FieldNumber.prototype.getNumRestrictor = function (t, e, o) {
    return (
      this.setConstraints(t, e, o),
      (t = "[\\d]"),
      this.decimalAllowed_ && (t += "|[\\.]"),
      this.negativeAllowed_ && (t += "|[-]"),
      new RegExp(t)
    );
  }),
  (Blockly.FieldNumber.prototype.configure_ = function (t) {
    Blockly.FieldNumber.superClass_.configure_.call(this, t),
      this.setMinInternal_(t.min),
      this.setMaxInternal_(t.max),
      this.setPrecisionInternal_(t.precision);
  }),
  (Blockly.FieldNumber.prototype.setConstraints = function (t, e, o) {
    (this.decimalAllowed_ =
      null == o || isNaN(o) || 0 == o || Math.floor(o) != o),
      (this.negativeAllowed_ = null == t || isNaN(t) || 0 > t),
      this.setMinInternal_(t),
      this.setMaxInternal_(e),
      this.setPrecisionInternal_(o),
      this.setValue(this.getValue());
  }),
  (Blockly.FieldNumber.prototype.setMin = function (t) {
    this.setMinInternal_(t), this.setValue(this.getValue());
  }),
  (Blockly.FieldNumber.prototype.setMinInternal_ = function (t) {
    null == t
      ? (this.min_ = -1 / 0)
      : ((t = Number(t)), isNaN(t) || (this.min_ = t));
  }),
  (Blockly.FieldNumber.prototype.getMin = function () {
    return this.min_;
  }),
  (Blockly.FieldNumber.prototype.setMax = function (t) {
    this.setMaxInternal_(t), this.setValue(this.getValue());
  }),
  (Blockly.FieldNumber.prototype.setMaxInternal_ = function (t) {
    null == t
      ? (this.max_ = 1 / 0)
      : ((t = Number(t)), isNaN(t) || (this.max_ = t));
  }),
  (Blockly.FieldNumber.prototype.getMax = function () {
    return this.max_;
  }),
  (Blockly.FieldNumber.prototype.setPrecision = function (t) {
    this.setPrecisionInternal_(t), this.setValue(this.getValue());
  }),
  (Blockly.FieldNumber.prototype.setPrecisionInternal_ = function (t) {
    null == t
      ? (this.precision_ = 0)
      : ((t = Number(t)), isNaN(t) || (this.precision_ = t));
    var e = this.precision_.toString(),
      o = e.indexOf(".");
    this.decimalPlaces_ = -1 == o ? (t ? 0 : null) : e.length - o - 1;
  }),
  (Blockly.FieldNumber.prototype.getPrecision = function () {
    return this.precision_;
  }),
  (Blockly.FieldNumber.prototype.showEditor_ = function (t, e) {
    (Blockly.FieldNumber.activeField_ = this),
      (e =
        void 0 !== e
          ? e
          : Blockly.utils.userAgent.MOBILE ||
            Blockly.utils.userAgent.ANDROID ||
            Blockly.utils.userAgent.IPAD),
      Blockly.FieldNumber.superClass_.showEditor_.call(this, t, e, e),
      e && this.showNumPad_();
  }),
  (Blockly.FieldNumber.prototype.showNumPad_ = function () {
    Blockly.DropDownDiv.hideWithoutAnimation(),
      Blockly.DropDownDiv.clearContent();
    var t = Blockly.DropDownDiv.getContentDiv();
    t.setAttribute("role", "menu"),
      t.setAttribute("aria-haspopup", "true"),
      this.addButtons_(t);
    var e = this.sourceBlock_.parentBlock_
      ? this.sourceBlock_.parentBlock_.getColour()
      : Blockly.Colours.numPadBackground;
    Blockly.DropDownDiv.setColour(
      e,
      this.sourceBlock_.parentBlock_
        ? this.sourceBlock_.parentBlock_.style.colourTertiary
        : Blockly.Colours.numPadBorder
    ),
      (t.style.width = Blockly.FieldNumber.DROPDOWN_WIDTH + "px"),
      Blockly.DropDownDiv.showPositionedByField(this, this.onHide_.bind(this)),
      this.htmlInput_.select();
  }),
  (Blockly.FieldNumber.prototype.addButtons_ = function (t) {
    for (
      var e,
        o = this.sourceBlock_.parentBlock_
          ? this.sourceBlock_.parentBlock_.getColour()
          : Blockly.Colours.numPadBackground,
        i = this.sourceBlock_.parentBlock_
          ? this.sourceBlock_.parentBlock_.style.colourTertiary
          : this.sourceBlock_.style.colourTertiary,
        n = Blockly.FieldNumber.NUMPAD_BUTTONS,
        l = 0;
      (e = n[l]);
      l++
    ) {
      var r = document.createElement("button");
      if (
        (r.setAttribute("role", "menuitem"),
        r.setAttribute("class", "blocklyNumPadButton"),
        r.setAttribute(
          "style",
          "background:" + o + ";border: 1px solid " + i + ";"
        ),
        (r.title = e),
        (r.innerHTML = e),
        Blockly.bindEvent_(r, "mousedown", this, this.numPadButtonTouch),
        "." != e || this.decimalAllowed_)
      ) {
        if ("-" == e && !this.negativeAllowed_) continue;
        if (" " == e && !this.negativeAllowed_) continue;
        " " == e &&
          this.negativeAllowed_ &&
          r.setAttribute("style", "visibility: hidden");
      } else r.setAttribute("style", "visibility: hidden");
      t.appendChild(r);
    }
    (n = document.createElement("button")).setAttribute("role", "menuitem"),
      n.setAttribute("class", "blocklyNumPadButton"),
      n.setAttribute(
        "style",
        "background:" + o + ";border: 1px solid " + i + ";"
      ),
      (n.title = "Delete"),
      ((o = document.createElement("img")).src =
        Blockly.FieldNumber.NUMPAD_DELETE_ICON),
      n.appendChild(o),
      Blockly.bindEvent_(n, "mousedown", this, this.numPadEraseButtonTouch),
      t.appendChild(n);
  }),
  (Blockly.FieldNumber.prototype.numPadButtonTouch = function (t) {
    var e = t.target.innerText,
      o = this.htmlInput_.value,
      i = this.htmlInput_.selectionStart,
      n = this.htmlInput_.selectionEnd,
      l = o.slice(0, i) + e + o.slice(n);
    0 == n - i && (l = o + e),
      this.updateDisplay_(l),
      Blockly.Touch.clearTouchIdentifier(),
      t.preventDefault();
  }),
  (Blockly.FieldNumber.prototype.numPadEraseButtonTouch = function (t) {
    var e = this.htmlInput_.value,
      o = this.htmlInput_.selectionStart,
      i = this.htmlInput_.selectionEnd,
      n = e.slice(0, o) + e.slice(i);
    0 == i - o &&
      (n = 0 == i ? e.slice(0, e.length - 1) : e.slice(0, o - 1) + e.slice(o)),
      this.updateDisplay_(n),
      Blockly.Touch.clearTouchIdentifier(),
      t.preventDefault();
  }),
  (Blockly.FieldNumber.prototype.updateDisplay_ = function (t) {
    (this.htmlInput_.value = t),
      Blockly.FieldNumber.superClass_.resizeEditor_.call(this),
      this.htmlInput_.setSelectionRange(t.length, t.length),
      (this.htmlInput_.scrollLeft = this.htmlInput_.scrollWidth),
      this.onHtmlInputChange_({});
  }),
  (Blockly.FieldNumber.prototype.onHide_ = function () {
    Blockly.DropDownDiv.content_.removeAttribute("role"),
      Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup");
  }),
  (Blockly.FieldNumber.prototype.doClassValidation_ = function (t) {
    return null === t
      ? null
      : ((t = (t = (t = (t = String(t)).replace(/O/gi, "0")).replace(
          /,/g,
          ""
        )).replace(/infinity/i, "Infinity")),
        (t = Number(t || 0)),
        isNaN(t)
          ? null
          : (this.precision_ &&
              isFinite(t) &&
              (t = Math.round(t / this.precision_) * this.precision_),
            null != this.decimalPlaces_ &&
              (t = Number(t.toFixed(this.decimalPlaces_))),
            t));
  }),
  (Blockly.FieldNumber.prototype.widgetCreate_ = function (t, e, o) {
    return (
      (t = Blockly.FieldNumber.superClass_.widgetCreate_.call(this, t, e, o)),
      -1 / 0 < this.min_ &&
        Blockly.utils.aria.setState(
          t,
          Blockly.utils.aria.State.VALUEMIN,
          this.min_
        ),
      1 / 0 > this.max_ &&
        Blockly.utils.aria.setState(
          t,
          Blockly.utils.aria.State.VALUEMAX,
          this.max_
        ),
      t
    );
  }),
  Blockly.fieldRegistry.register("field_number", Blockly.FieldNumber),
  (Blockly.FieldNumberDropdown = function (t, e, o, i, n, l) {
    (this.setConstraints = Blockly.FieldNumber.prototype.setConstraints),
      (this.setMinInternal_ = Blockly.FieldNumber.prototype.setMinInternal_),
      (this.setMaxInternal_ = Blockly.FieldNumber.prototype.setMaxInternal_),
      (this.setPrecisionInternal_ =
        Blockly.FieldNumber.prototype.setPrecisionInternal_),
      (o = Blockly.FieldNumber.prototype.getNumRestrictor.call(this, o, i, n)),
      Blockly.FieldNumberDropdown.superClass_.constructor.call(
        this,
        t,
        e,
        l,
        o
      ),
      this.addArgType("numberdropdown");
  }),
  Blockly.utils.object.inherits(
    Blockly.FieldNumberDropdown,
    Blockly.FieldTextDropdown
  ),
  (Blockly.FieldNumberDropdown.fromJson = function (t) {
    return new Blockly.FieldNumberDropdown(
      t.value,
      t.options,
      t.min,
      t.max,
      t.precision
    );
  }),
  (Blockly.FieldNumberDropdown.prototype.classValidator =
    Blockly.FieldNumber.prototype.classValidator),
  Blockly.fieldRegistry.register(
    "field_numberdropdown",
    Blockly.FieldNumberDropdown
  ),
  (Blockly.FieldVariable = function (t, e, o, i, n) {
    (this.menuGenerator_ = Blockly.FieldVariable.dropdownCreate),
      (this.defaultVariableName = t || ""),
      (this.size_ = new Blockly.utils.Size(0, 0)),
      n && this.configure_(n),
      e && this.setValidator(e),
      n || this.setTypes_(o, i);
  }),
  Blockly.utils.object.inherits(Blockly.FieldVariable, Blockly.FieldDropdown),
  (Blockly.FieldVariable.fromJson = function (t) {
    var e = Blockly.utils.replaceMessageReferences(t.variable);
    return new Blockly.FieldVariable(e, void 0, void 0, void 0, t);
  }),
  (Blockly.FieldVariable.prototype.workspace_ = null),
  (Blockly.FieldVariable.prototype.SERIALIZABLE = !0),
  (Blockly.FieldVariable.prototype.configure_ = function (t) {
    Blockly.FieldVariable.superClass_.configure_.call(this, t),
      this.setTypes_(t.variableTypes, t.defaultType);
  }),
  (Blockly.FieldVariable.prototype.initModel = function () {
    if (!this.variable_) {
      var t = Blockly.Variables.getOrCreateVariablePackage(
        this.sourceBlock_.workspace,
        null,
        this.defaultVariableName,
        this.defaultType_
      );
      this.doValueUpdate_(t.getId());
    }
  }),
  (Blockly.FieldVariable.prototype.shouldAddBorderRect_ = function () {
    return (
      Blockly.FieldVariable.superClass_.shouldAddBorderRect_.call(this) &&
      (!this.constants_.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW ||
        !(
          "variables_get" == this.sourceBlock_.type ||
          "variables_get_reporter" == this.sourceBlock_.type
        ))
    );
  }),
  (Blockly.FieldVariable.prototype.fromXml = function (t) {
    t.getAttribute("id");
    var e = t.textContent,
      o =
        t.getAttribute("variabletype") || t.getAttribute("variableType") || "";
    if (
      ((e = Blockly.Variables.getOrCreateVariablePackage(
        this.sourceBlock_.workspace,
        null,
        e,
        o
      )),
      null != o && o !== e.type)
    )
      throw Error(
        "Serialized variable type with id '" +
          e.getId() +
          "' had type " +
          e.type +
          ", and does not match variable field that references it: " +
          Blockly.Xml.domToText(t) +
          "."
      );
    this.setValue(e.getId());
  }),
  (Blockly.FieldVariable.prototype.toXml = function (t) {
    return (
      this.initModel(),
      (t.id = this.variable_.getId()),
      (t.textContent = this.variable_.name),
      this.variable_.type &&
        t.setAttribute("variabletype", this.variable_.type),
      t
    );
  }),
  (Blockly.FieldVariable.prototype.setSourceBlock = function (t) {
    if (t.isShadow())
      throw Error("Variable fields are not allowed to exist on shadow blocks.");
    Blockly.FieldVariable.superClass_.setSourceBlock.call(this, t);
  }),
  (Blockly.FieldVariable.prototype.getValue = function () {
    return this.variable_ ? this.variable_.getId() : null;
  }),
  (Blockly.FieldVariable.prototype.getText = function () {
    return this.variable_ ? this.variable_.name : "";
  }),
  (Blockly.FieldVariable.prototype.getVariable = function () {
    return this.variable_;
  }),
  (Blockly.FieldVariable.prototype.getValidator = function () {
    return this.variable_ ? this.validator_ : null;
  }),
  (Blockly.FieldVariable.prototype.doClassValidation_ = function (t) {
    if (null === t) return null;
    var e = Blockly.Variables.getVariable(this.sourceBlock_.workspace, t);
    return e
      ? ((e = e.type),
        this.typeIsAllowed_(e)
          ? t
          : (console.warn(
              "Variable type doesn't match this field!  Type was " + e
            ),
            null))
      : (console.warn(
          "Variable id doesn't point to a real variable! ID was " + t
        ),
        null);
  }),
  (Blockly.FieldVariable.prototype.doValueUpdate_ = function (t) {
    (this.variable_ = Blockly.Variables.getVariable(
      this.sourceBlock_.workspace,
      t
    )),
      Blockly.FieldVariable.superClass_.doValueUpdate_.call(this, t);
  }),
  (Blockly.FieldVariable.prototype.typeIsAllowed_ = function (t) {
    var e = this.getVariableTypes_();
    if (!e) return !0;
    for (var o = 0; o < e.length; o++) if (t == e[o]) return !0;
    return !1;
  }),
  (Blockly.FieldVariable.prototype.getVariableTypes_ = function () {
    var t = this.variableTypes;
    if (null === t && this.sourceBlock_ && this.sourceBlock_.workspace)
      return this.sourceBlock_.workspace.getVariableTypes();
    if (0 == (t = t || [""]).length)
      throw (
        ((t = this.getText()),
        Error("'variableTypes' of field variable " + t + " was an empty list"))
      );
    return t;
  }),
  (Blockly.FieldVariable.prototype.setTypes_ = function (t, e) {
    if (((e = e || ""), null == t || null == t)) t = null;
    else {
      if (!Array.isArray(t))
        throw Error(
          "'variableTypes' was not an array in the definition of a FieldVariable"
        );
      for (var o = !1, i = 0; i < t.length; i++) t[i] == e && (o = !0);
      if (!o)
        throw Error(
          "Invalid default type '" +
            e +
            "' in the definition of a FieldVariable"
        );
    }
    (this.defaultType_ = e), (this.variableTypes = t);
  }),
  (Blockly.FieldVariable.dropdownCreate = function () {
    if (!this.variable_)
      throw Error(
        "Tried to call dropdownCreate on a variable field with no variable selected."
      );
    var t = this.getText(),
      e = [];
    if (this.sourceBlock_ && this.sourceBlock_.workspace)
      for (var o = this.getVariableTypes_(), i = 0; i < o.length; i++) {
        var n = this.sourceBlock_.workspace.getVariablesOfType(o[i]);
        e = e.concat(n);
      }
    for (
      e.sort(Blockly.VariableModel.compareByName), o = [], i = 0;
      i < e.length;
      i++
    )
      o[i] = [e[i].name, e[i].getId()];
    return (
      Blockly.Msg.NEW_VARIABLE_TYPE_DROPDOWN && this.variable_.type
        ? (o.push([
            Blockly.Msg.NEW_VARIABLE_TYPE_DROPDOWN.replace(
              "%1",
              this.variable_.type
            ),
            Blockly.CREATE_VARIABLE_ID,
          ]),
          o.push([void 0, "SEPARATOR"]))
        : Blockly.Msg.NEW_VARIABLE_DROPDOWN &&
          (o.push([
            Blockly.Msg.NEW_VARIABLE_DROPDOWN,
            Blockly.CREATE_VARIABLE_ID,
          ]),
          o.push([void 0, "SEPARATOR"])),
      o.push([Blockly.Msg.RENAME_VARIABLE, Blockly.RENAME_VARIABLE_ID]),
      Blockly.Msg.DELETE_VARIABLE &&
        o.push([
          Blockly.Msg.DELETE_VARIABLE.replace("%1", t),
          Blockly.DELETE_VARIABLE_ID,
        ]),
      o
    );
  }),
  (Blockly.FieldVariable.prototype.onItemSelected_ = function (t, e) {
    if (
      ((t = e.getValue()), this.sourceBlock_ && this.sourceBlock_.workspace)
    ) {
      if (t == Blockly.RENAME_VARIABLE_ID)
        return void Blockly.Variables.renameVariable(
          this.sourceBlock_.workspace,
          this.variable_
        );
      if (t == Blockly.DELETE_VARIABLE_ID)
        return void this.sourceBlock_.workspace.deleteVariableById(
          this.variable_.getId()
        );
      if (t == Blockly.CREATE_VARIABLE_ID) {
        var o = this,
          i = this.sourceBlock_.workspace,
          n = i.getVariableById(this.getValue()).type;
        return void Blockly.Variables.createVariableButtonHandler(
          i,
          function (t) {
            (t = i.getVariable(t, n)), o.setValue(t.getId());
          },
          n
        );
      }
    }
    this.setValue(t);
  }),
  (Blockly.FieldVariable.prototype.referencesVariables = function () {
    return !0;
  }),
  Blockly.fieldRegistry.register("field_variable", Blockly.FieldVariable),
  (Blockly.FieldVerticalSeparator = function () {
    Blockly.FieldVerticalSeparator.superClass_.constructor.call(this);
  }),
  Blockly.utils.object.inherits(Blockly.FieldVerticalSeparator, Blockly.Field),
  (Blockly.FieldVerticalSeparator.fromJson = function (t) {
    return new Blockly.FieldVerticalSeparator();
  }),
  (Blockly.FieldVerticalSeparator.prototype.EDITABLE = !1),
  (Blockly.FieldVerticalSeparator.prototype.initView = function () {
    var t = this.constants_.ICON_SEPARATOR_HEIGHT;
    (this.lineElement_ = Blockly.utils.dom.createSvgElement(
      "line",
      {
        stroke: this.sourceBlock_.style.colourSecondary,
        "stroke-linecap": "round",
        x1: 0,
        y1: 0,
        x2: 0,
        y2: t,
      },
      this.fieldGroup_
    )),
      (this.size_ = new Blockly.utils.Size(1, t)),
      this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_);
  }),
  (Blockly.FieldVerticalSeparator.prototype.setLineHeight = function (t) {
    this.lineElement_.setAttribute("y2", t);
  }),
  (Blockly.FieldVerticalSeparator.prototype.dispose = function () {
    Blockly.utils.dom.removeNode(this.fieldGroup_),
      (this.lineElement_ = this.fieldGroup_ = null);
  }),
  (Blockly.FieldVerticalSeparator.prototype.getValue = function () {
    return null;
  }),
  (Blockly.FieldVerticalSeparator.prototype.setValue = function (t) {}),
  (Blockly.FieldVerticalSeparator.prototype.setText = function (t) {}),
  (Blockly.FieldVerticalSeparator.prototype.render_ = function () {}),
  (Blockly.FieldVerticalSeparator.prototype.updateWidth = function () {}),
  Blockly.fieldRegistry.register(
    "field_vertical_separator",
    Blockly.FieldVerticalSeparator
  ),
  (Blockly.FieldSlider = function (t, e, o, i, n, l, r) {
    Blockly.FieldSlider.superClass_.constructor.call(
      this,
      t,
      null,
      null,
      null,
      r
    ),
      this.setConstraints(e, o, i),
      (this.step_ = parseFloat(n)),
      (this.labelText_ = l);
  }),
  Blockly.utils.object.inherits(Blockly.FieldSlider, Blockly.FieldNumber),
  (Blockly.FieldSlider.prototype.min_ = null),
  (Blockly.FieldSlider.prototype.max_ = null),
  (Blockly.FieldSlider.prototype.step_ = null),
  (Blockly.FieldSlider.prototype.precision_ = null),
  (Blockly.FieldSlider.prototype.labelText_ = null),
  (Blockly.FieldSlider.fromJson = function (t) {
    return new Blockly.FieldSlider(
      t.value,
      t.min,
      t.max,
      t.precision,
      t.step,
      t.labelText
    );
  }),
  (Blockly.FieldSlider.prototype.setOptions = function (t, e, o, i) {
    this.setConstraints(t, e, i),
      (this.step_ = parseFloat(o) || void 0),
      (t = this.getNumRestrictor(this.min_, this.max_, this.precision_)),
      this.setRestrictor(t);
  }),
  (Blockly.FieldSlider.prototype.setLabel = function (t) {
    null != t && (this.labelText_ = t);
  }),
  (Blockly.FieldSlider.prototype.setColor = function (t) {
    null != t && (this.sliderColor_ = t);
  }),
  (Blockly.FieldSlider.prototype.init = function () {
    Blockly.FieldTextInput.superClass_.init.call(this),
      this.setValue(this.getValue()),
      this.sourceBlock_.isEditable() &&
        ((this.mouseOverWrapper_ = Blockly.bindEvent_(
          this.getClickTarget_(),
          "mouseover",
          this,
          this.onMouseOver_
        )),
        (this.mouseOutWrapper_ = Blockly.bindEvent_(
          this.getClickTarget_(),
          "mouseout",
          this,
          this.onMouseOut_
        )));
  }),
  (Blockly.FieldSlider.prototype.showEditor_ = function (t) {
    Blockly.FieldSlider.superClass_.showEditor_.call(this, t, !1),
      1 / 0 != this.max_ &&
        -1 / 0 != this.min_ &&
        (this.showSlider_(), this.setValue(this.getValue()));
  }),
  (Blockly.FieldSlider.prototype.showSlider_ = function () {
    Blockly.DropDownDiv.hideWithoutAnimation(),
      Blockly.DropDownDiv.clearContent();
    var t = Blockly.DropDownDiv.getContentDiv();
    t.setAttribute("role", "menu"),
      t.setAttribute("aria-haspopup", "true"),
      this.addSlider_(t),
      Blockly.DropDownDiv.setColour("#ffffff", "#dddddd"),
      Blockly.DropDownDiv.showPositionedByBlock(this, this.sourceBlock_),
      this.slider_ && this.slider_.setVisible(!0);
  }),
  (Blockly.FieldSlider.prototype.addSlider_ = function (t) {
    if (this.labelText_) {
      var e = this.createLabelDom_(this.labelText_);
      t.appendChild(e[0]), (this.readout_ = e[1]);
    }
    (this.slider_ = new goog.ui.Slider()),
      this.slider_.setMoveToPointEnabled(!1),
      this.slider_.setMinimum(this.min_),
      this.slider_.setMaximum(this.max_),
      this.step_ && this.slider_.setUnitIncrement(this.step_),
      this.slider_.setRightToLeft(this.sourceBlock_.RTL),
      (e = parseFloat(this.getValue())),
      (e = isNaN(e) ? 0 : e),
      this.slider_.setValue(e),
      this.slider_.render(t);
    var o = this;
    (Blockly.FieldSlider.changeEventKey_ = goog.events.listen(
      this.slider_,
      goog.ui.Component.EventType.CHANGE,
      function (t) {
        if (
          ((t = t.target.getValue() || 0),
          o.sourceBlock_ && (t = o.callValidator(t)),
          null !== t)
        ) {
          o.setValue(t);
          var e = o.htmlInput_;
          e && ((e.value = t), e.focus());
        }
      }
    )),
      (Blockly.FieldSlider.focusEventKey_ = goog.events.listen(
        this.slider_.getElement(),
        goog.ui.Component.EventType.FOCUS,
        function () {
          o.htmlInput_.focus();
        }
      ));
  }),
  (Blockly.FieldSlider.prototype.createLabelDom_ = function (t) {
    var e = document.createElement("div");
    e.setAttribute("class", "blocklyFieldSliderLabel");
    var o = document.createElement("span");
    o.setAttribute("class", "blocklyFieldSliderReadout");
    var i = document.createElement("span");
    return (
      i.setAttribute("class", "blocklyFieldSliderLabelText"),
      (i.innerHTML = t),
      e.appendChild(i),
      e.appendChild(o),
      [e, o]
    );
  }),
  (Blockly.FieldSlider.prototype.setValue = function (t) {
    Blockly.FieldSlider.superClass_.setValue.call(this, t),
      this.updateSliderHandles_(),
      this.updateDom_();
  }),
  (Blockly.FieldSlider.prototype.updateDom_ = function () {
    this.slider_ &&
      this.readout_ &&
      (this.setBackground_(this.slider_.getElement()),
      this.setReadout_(this.readout_, this.getValue()));
  }),
  (Blockly.FieldSlider.prototype.setBackground_ = function (t) {
    this.sliderColor_
      ? goog.style.setStyle(t, "background", this.sliderColor_)
      : this.sourceBlock_.isShadow() &&
        this.sourceBlock_.parentBlock_ &&
        goog.style.setStyle(
          t,
          "background",
          this.sourceBlock_.parentBlock_.getColourTertiary()
        );
  }),
  (Blockly.FieldSlider.prototype.setReadout_ = function (t, e) {
    t.innerHTML = e;
  }),
  (Blockly.FieldSlider.prototype.updateSliderHandles_ = function () {
    this.slider_ && this.slider_.setValue(parseFloat(this.getValue()));
  }),
  (Blockly.FieldSlider.prototype.onHtmlInputChange_ = function (t) {
    Blockly.FieldSlider.superClass_.onHtmlInputChange_.call(this, t),
      this.slider_ && this.slider_.setValue(parseFloat(this.getValue()));
  }),
  (Blockly.FieldSlider.prototype.dispose = function () {
    Blockly.FieldSlider.changeEventKey_ &&
      goog.events.unlistenByKey(Blockly.FieldSlider.changeEventKey_),
      Blockly.FieldSlider.focusEventKey_ &&
        goog.events.unlistenByKey(Blockly.FieldSlider.focusEventKey_),
      Blockly.Events.setGroup(!1),
      Blockly.FieldSlider.superClass_.dispose.call(this);
  }),
  Blockly.fieldRegistry.register("field_slider", Blockly.FieldSlider),
  (Blockly.FieldString = function (t, e, o) {
    Blockly.FieldString.superClass_.constructor.call(this, t, e),
      this.setRestrictor(o),
      this.addArgType("text");
  }),
  Blockly.utils.object.inherits(Blockly.FieldString, Blockly.FieldTextInput),
  (Blockly.FieldString.fromJson = function (t) {
    var e = Blockly.utils.replaceMessageReferences(t.text);
    return (
      (e = new Blockly.FieldString(e, t.class)),
      "boolean" == typeof t.spellcheck && e.setSpellcheck(t.spellcheck),
      e
    );
  }),
  (Blockly.FieldString.quotePadding = 0),
  (Blockly.FieldString.prototype.initView = function () {
    (this.quoteSize_ = 16),
      (this.quoteWidth_ = 8),
      (this.quoteRightX_ = this.quoteLeftX_ = 0),
      (this.quoteY_ = 10),
      this.quoteLeft_ &&
        this.quoteLeft_.parentNode.removeChild(this.quoteLeft_),
      (this.quoteLeft_ = Blockly.utils.dom.createSvgElement(
        "text",
        { "font-size": this.quoteSize_ + "px", class: "field-text-quote" },
        this.fieldGroup_
      )),
      Blockly.FieldString.superClass_.initView.call(this),
      this.quoteRight_ &&
        this.quoteRight_.parentNode.removeChild(this.quoteRight_),
      (this.quoteRight_ = Blockly.utils.dom.createSvgElement(
        "text",
        { "font-size": this.quoteSize_ + "px", class: "field-text-quote" },
        this.fieldGroup_
      )),
      this.quoteLeft_.appendChild(document.createTextNode('"')),
      this.quoteRight_.appendChild(document.createTextNode('"')),
      (this.mouseOverWrapper_ = Blockly.bindEvent_(
        this.getClickTarget_(),
        "mouseover",
        this,
        this.onMouseOver_
      )),
      (this.mouseOutWrapper_ = Blockly.bindEvent_(
        this.getClickTarget_(),
        "mouseout",
        this,
        this.onMouseOut_
      ));
  }),
  (Blockly.FieldString.prototype.updateSize_ = function () {
    Blockly.FieldString.superClass_.updateSize_.call(this);
    var t = this.value_ ? this.size_.width : 1,
      e = this.positionLeft(t + 3);
    this.textElement_.setAttribute("x", e),
      (e += this.positionRight(e + t + 3)),
      (this.size_.width = t + e);
  }),
  (Blockly.FieldString.prototype.positionLeft = function (t) {
    return this.quoteLeft_
      ? ((this.quoteLeftX_ = this.sourceBlock_.RTL
          ? t + this.quoteWidth_ + 2 * Blockly.FieldString.quotePadding
          : 0),
        (t = this.quoteWidth_ + Blockly.FieldString.quotePadding),
        this.quoteLeft_.setAttribute(
          "transform",
          "translate(" + this.quoteLeftX_ + "," + this.quoteY_ + ")"
        ),
        t)
      : 0;
  }),
  (Blockly.FieldString.prototype.positionRight = function (t) {
    return this.quoteRight_
      ? ((this.quoteRightX_ = this.sourceBlock_.RTL
          ? Blockly.FieldString.quotePadding
          : t + Blockly.FieldString.quotePadding),
        (t = this.quoteWidth_ + Blockly.FieldString.quotePadding),
        this.quoteRight_.setAttribute(
          "transform",
          "translate(" + this.quoteRightX_ + "," + this.quoteY_ + ")"
        ),
        t)
      : 0;
  }),
  Blockly.fieldRegistry.register("field_string", Blockly.FieldString),
  (Blockly.FieldArgumentEditor = function (t, e, o) {
    Blockly.FieldArgumentEditor.superClass_.constructor.call(this, t, e, o);
  }),
  Blockly.utils.object.inherits(
    Blockly.FieldArgumentEditor,
    Blockly.FieldTextInput
  ),
  (Blockly.FieldArgumentEditor.REMOVE_ARG_URI =
    "data:image/svg+xml;charset=UTF-8,%3c?xml version='1.0' encoding='UTF-8' standalone='no'?%3e%3csvg width='20px' height='20px' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3c!-- Generator: Sketch 48.1 (47250) - http://www.bohemiancoding.com/sketch --%3e%3ctitle%3edelete-argument v2%3c/title%3e%3cdesc%3eCreated with Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e%3cg id='delete-argument-v2' stroke='%23FF661A'%3e%3cg id='Group' transform='translate(3.000000, 2.500000)'%3e%3cpath d='M1,3 L13,3 L11.8900496,14.0995037 C11.8389294,14.6107055 11.4087639,15 10.8950124,15 L3.10498756,15 C2.59123611,15 2.16107055,14.6107055 2.10995037,14.0995037 L1,3 Z' id='Rectangle' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3cpath d='M7,11 L7,6' id='Line' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3cpath d='M9.5,11 L9.5,6' id='Line-Copy' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3cpath d='M4.5,11 L4.5,6' id='Line-Copy-2' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3crect id='Rectangle-2' fill='%23FF661A' x='0' y='2.5' width='14' height='1' rx='0.5'%3e%3c/rect%3e%3cpath d='M6,0 L8,0 C8.55228475,-1.01453063e-16 9,0.44771525 9,1 L9,3 L5,3 L5,1 C5,0.44771525 5.44771525,1.01453063e-16 6,0 Z' id='Rectangle-3' stroke-width='1.5'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e"),
  (Blockly.FieldArgumentEditor.prototype.showEditor_ = function () {
    Blockly.FieldArgumentEditor.superClass_.showEditor_.call(this);
    var t = Blockly.WidgetDiv.DIV;
    t.className += " argumentEditorInput";
    var e = document.createElement("img");
    if (
      (e.setAttribute("class", "argumentEditorRemoveIcon"),
      e.setAttribute("src", Blockly.FieldArgumentEditor.REMOVE_ARG_URI),
      (this.removeButtonMouseWrapper_ = Blockly.bindEvent_(
        e,
        "mousedown",
        this,
        this.removeCallback_
      )),
      t.appendChild(e),
      this.sourceBlock_ &&
        this.sourceBlock_.typeName_ &&
        (e = Blockly.PXTBlockly.FunctionUtils.getArgumentIcon(
          this.sourceBlock_.typeName_
        )))
    ) {
      e += " icon argumentEditorTypeIcon";
      var o = document.createElement("i");
      (o.className = e), t.appendChild(o);
    }
  }),
  (Blockly.FieldArgumentEditor.prototype.removeCallback_ = function () {
    this.sourceBlock_ && this.sourceBlock_.removeFieldCallback
      ? this.sourceBlock_.removeFieldCallback(this)
      : console.warn("Expected a source block with removeFieldCallback");
  }),
  (Blockly.FieldArgumentEditor.fromJson = function (t) {
    var e = Blockly.utils.replaceMessageReferences(t.text);
    return (
      (e = new Blockly.FieldArgumentEditor(e, t.class)),
      "boolean" == typeof t.spellcheck && e.setSpellcheck(t.spellcheck),
      e
    );
  }),
  Blockly.fieldRegistry.register(
    "field_argument_editor",
    Blockly.FieldArgumentEditor
  ),
  (Blockly.utils.svgPaths = {}),
  (Blockly.utils.svgPaths.point = function (t, e) {
    return " " + t + "," + e + " ";
  }),
  (Blockly.utils.svgPaths.curve = function (t, e) {
    return " " + t + e.join("");
  }),
  (Blockly.utils.svgPaths.moveTo = function (t, e) {
    return " M " + t + "," + e + " ";
  }),
  (Blockly.utils.svgPaths.moveBy = function (t, e) {
    return " m " + t + "," + e + " ";
  }),
  (Blockly.utils.svgPaths.lineTo = function (t, e) {
    return " l " + t + "," + e + " ";
  }),
  (Blockly.utils.svgPaths.line = function (t) {
    return " l" + t.join("");
  }),
  (Blockly.utils.svgPaths.lineOnAxis = function (t, e) {
    return " " + t + " " + e + " ";
  }),
  (Blockly.utils.svgPaths.arc = function (t, e, o, i) {
    return t + " " + o + " " + o + " " + e + i;
  }),
  (Blockly.blockRendering.ConstantProvider = function () {
    (this.NO_PADDING = 0),
      (this.SMALL_PADDING = 3),
      (this.MEDIUM_PADDING = 5),
      (this.MEDIUM_LARGE_PADDING = 8),
      (this.LARGE_PADDING = 10),
      (this.TALL_INPUT_FIELD_OFFSET_Y = this.MEDIUM_PADDING),
      (this.TAB_HEIGHT = 15),
      (this.TAB_OFFSET_FROM_TOP = 5),
      (this.TAB_VERTICAL_OVERLAP = 2.5),
      (this.TAB_WIDTH = 8),
      (this.NOTCH_WIDTH = 15),
      (this.NOTCH_HEIGHT = 4),
      (this.MIN_BLOCK_WIDTH = 12),
      (this.EMPTY_BLOCK_SPACER_HEIGHT = 16),
      (this.DUMMY_INPUT_SHADOW_MIN_HEIGHT = this.DUMMY_INPUT_MIN_HEIGHT =
        this.TAB_HEIGHT),
      (this.CORNER_RADIUS = 8),
      (this.STATEMENT_INPUT_NOTCH_OFFSET = this.NOTCH_OFFSET_LEFT = 15),
      (this.STATEMENT_BOTTOM_SPACER = 0),
      (this.STATEMENT_INPUT_PADDING_LEFT = 20),
      (this.BETWEEN_STATEMENT_PADDING_Y = 4),
      (this.TOP_ROW_MIN_HEIGHT = this.MEDIUM_PADDING),
      (this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT = this.LARGE_PADDING),
      (this.BOTTOM_ROW_MIN_HEIGHT = this.MEDIUM_PADDING),
      (this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT = this.LARGE_PADDING),
      (this.ADD_START_HATS = !0),
      (this.START_HAT_HEIGHT = 15),
      (this.START_HAT_WIDTH = 100),
      (this.SPACER_DEFAULT_HEIGHT = 15),
      (this.MIN_BLOCK_HEIGHT = 24),
      (this.EMPTY_INLINE_INPUT_PADDING = 14.5),
      (this.EMPTY_INLINE_INPUT_HEIGHT = this.TAB_HEIGHT + 11),
      (this.EXTERNAL_VALUE_INPUT_PADDING = 2),
      (this.EMPTY_STATEMENT_INPUT_HEIGHT = this.MIN_BLOCK_HEIGHT),
      (this.START_POINT = Blockly.utils.svgPaths.moveBy(0, 0)),
      (this.JAGGED_TEETH_HEIGHT = 12),
      (this.JAGGED_TEETH_WIDTH = 6),
      (this.FIELD_TEXT_FONTSIZE = 11),
      (this.FIELD_TEXT_HEIGHT = 16),
      (this.FIELD_TEXT_FONTWEIGHT = "normal"),
      (this.FIELD_TEXT_FONTFAMILY = "sans-serif"),
      (this.FIELD_BORDER_RECT_RADIUS = 4),
      (this.FIELD_BORDER_RECT_HEIGHT = 16),
      (this.FIELD_BORDER_RECT_X_PADDING = 5),
      (this.FIELD_BORDER_RECT_Y_PADDING = 3),
      (this.FIELD_BORDER_RECT_COLOUR = "#fff"),
      (this.FIELD_TEXT_BASELINE_Y = Blockly.utils.userAgent.GECKO ? 12 : 13.09),
      (this.FIELD_TEXT_Y_OFFSET = 0),
      (this.FIELD_TEXT_BASELINE_CENTER =
        !Blockly.utils.userAgent.IE && !Blockly.utils.userAgent.EDGE),
      (this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT = this.FIELD_BORDER_RECT_HEIGHT),
      (this.FIELD_DROPDOWN_SVG_ARROW =
        this.FIELD_DROPDOWN_COLOURED_DIV =
        this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW =
          !1),
      (this.FIELD_DROPDOWN_SVG_ARROW_PADDING =
        this.FIELD_BORDER_RECT_X_PADDING),
      (this.FIELD_DROPDOWN_SVG_ARROW_SIZE = 12),
      (this.FIELD_DROPDOWN_SVG_ARROW_DATAURI =
        "data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="),
      (this.FIELD_COLOUR_FULL_BLOCK = this.FIELD_TEXTINPUT_BOX_SHADOW = !1),
      (this.FIELD_COLOUR_DEFAULT_WIDTH = 26),
      (this.FIELD_COLOUR_DEFAULT_HEIGHT = this.FIELD_BORDER_RECT_HEIGHT),
      (this.FIELD_CHECKBOX_X_OFFSET = this.FIELD_BORDER_RECT_X_PADDING - 3),
      (this.FIELD_CHECKBOX_Y_OFFSET = 14),
      (this.FIELD_CHECKBOX_DEFAULT_WIDTH = 15),
      (this.randomIdentifier_ = String(Math.random()).substring(2)),
      (this.embossFilterId = ""),
      (this.embossFilter_ = null),
      (this.disabledPatternId = ""),
      (this.disabledPattern_ = null),
      (this.CURSOR_COLOUR = "#cc0a0a"),
      (this.MARKER_COLOUR = "#4286f4"),
      (this.CURSOR_WS_WIDTH = 100),
      (this.WS_CURSOR_HEIGHT = 5),
      (this.CURSOR_STACK_PADDING = 10),
      (this.CURSOR_BLOCK_PADDING = 2),
      (this.CURSOR_STROKE_WIDTH = 4),
      (this.FULL_BLOCK_FIELDS = !1),
      (this.SHAPES = { PUZZLE: 1, NOTCH: 2 });
  }),
  (Blockly.blockRendering.ConstantProvider.prototype.init = function () {
    (this.JAGGED_TEETH = this.makeJaggedTeeth()),
      (this.NOTCH = this.makeNotch()),
      (this.START_HAT = this.makeStartHat()),
      (this.PUZZLE_TAB = this.makePuzzleTab()),
      (this.INSIDE_CORNERS = this.makeInsideCorners()),
      (this.OUTSIDE_CORNERS = this.makeOutsideCorners());
  }),
  (Blockly.blockRendering.ConstantProvider.prototype.refreshTheme = function (
    t
  ) {
    for (var e in ((this.blockStyles = {}), (t = t.blockStyles)))
      this.blockStyles[e] = this.validatedBlockStyle_(t[e]);
  }),
  (Blockly.blockRendering.ConstantProvider.prototype.getBlockStyleForColour =
    function (t) {
      var e = "auto_" + t;
      return (
        this.blockStyles[e] ||
          (this.blockStyles[e] = this.createBlockStyle_(t)),
        { style: this.blockStyles[e], name: e }
      );
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.getBlockStyle = function (
    t
  ) {
    return this.blockStyles[t || ""] || this.createBlockStyle_("#000000");
  }),
  (Blockly.blockRendering.ConstantProvider.prototype.createBlockStyle_ =
    function (t) {
      return this.validatedBlockStyle_({ colourPrimary: t });
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.validatedBlockStyle_ =
    function (t) {
      var e = {};
      return (
        t && Blockly.utils.object.mixin(e, t),
        (t = Blockly.utils.parseBlockColour(e.colourPrimary || "#000")),
        (e.colourPrimary = t.hex),
        (e.colourSecondary = e.colourSecondary
          ? Blockly.utils.parseBlockColour(e.colourSecondary).hex
          : this.generateSecondaryColour_(e.colourPrimary)),
        (e.colourTertiary = e.colourTertiary
          ? Blockly.utils.parseBlockColour(e.colourTertiary).hex
          : this.generateTertiaryColour_(e.colourPrimary)),
        (e.hat = e.hat || ""),
        e
      );
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.generateSecondaryColour_ =
    function (t) {
      return Blockly.utils.colour.blend("#fff", t, 0.6) || t;
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.generateTertiaryColour_ =
    function (t) {
      return Blockly.utils.colour.blend("#fff", t, 0.3) || t;
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.dispose = function () {
    this.embossFilter_ && Blockly.utils.dom.removeNode(this.embossFilter_),
      this.disabledPattern_ &&
        Blockly.utils.dom.removeNode(this.disabledPattern_);
  }),
  (Blockly.blockRendering.ConstantProvider.prototype.makeJaggedTeeth =
    function () {
      var t = this.JAGGED_TEETH_HEIGHT,
        e = this.JAGGED_TEETH_WIDTH;
      return {
        height: t,
        width: e,
        path: Blockly.utils.svgPaths.line([
          Blockly.utils.svgPaths.point(e, t / 4),
          Blockly.utils.svgPaths.point(2 * -e, t / 2),
          Blockly.utils.svgPaths.point(e, t / 4),
        ]),
      };
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.makeStartHat =
    function () {
      var t = this.START_HAT_HEIGHT,
        e = this.START_HAT_WIDTH;
      return {
        height: t,
        width: e,
        path: Blockly.utils.svgPaths.curve("c", [
          Blockly.utils.svgPaths.point(30, -t),
          Blockly.utils.svgPaths.point(70, -t),
          Blockly.utils.svgPaths.point(e, 0),
        ]),
      };
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.makePuzzleTab =
    function () {
      function t(t) {
        var i = -(t = t ? -1 : 1),
          n = o / 2,
          l = n + 2.5,
          r = n + 0.5,
          s = Blockly.utils.svgPaths.point(-e, t * n);
        return (
          (n = Blockly.utils.svgPaths.point(e, t * n)),
          Blockly.utils.svgPaths.curve("c", [
            Blockly.utils.svgPaths.point(0, t * l),
            Blockly.utils.svgPaths.point(-e, i * r),
            s,
          ]) +
            Blockly.utils.svgPaths.curve("s", [
              Blockly.utils.svgPaths.point(e, 2.5 * i),
              n,
            ])
        );
      }
      var e = this.TAB_WIDTH,
        o = this.TAB_HEIGHT,
        i = t(!0),
        n = t(!1);
      return {
        type: this.SHAPES.PUZZLE,
        width: e,
        height: o,
        pathDown: n,
        pathUp: i,
      };
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.makeNotch = function () {
    function t(t) {
      return Blockly.utils.svgPaths.line([
        Blockly.utils.svgPaths.point(t * i, o),
        Blockly.utils.svgPaths.point(3 * t, 0),
        Blockly.utils.svgPaths.point(t * i, -o),
      ]);
    }
    var e = this.NOTCH_WIDTH,
      o = this.NOTCH_HEIGHT,
      i = (e - 3) / 2,
      n = t(1),
      l = t(-1);
    return {
      type: this.SHAPES.NOTCH,
      width: e,
      height: o,
      pathLeft: n,
      pathRight: l,
    };
  }),
  (Blockly.blockRendering.ConstantProvider.prototype.makeInsideCorners =
    function () {
      var t = this.CORNER_RADIUS;
      return {
        width: t,
        height: t,
        pathTop: Blockly.utils.svgPaths.arc(
          "a",
          "0 0,0",
          t,
          Blockly.utils.svgPaths.point(-t, t)
        ),
        pathBottom: Blockly.utils.svgPaths.arc(
          "a",
          "0 0,0",
          t,
          Blockly.utils.svgPaths.point(t, t)
        ),
      };
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.makeOutsideCorners =
    function () {
      var t = this.CORNER_RADIUS,
        e =
          Blockly.utils.svgPaths.moveBy(0, t) +
          Blockly.utils.svgPaths.arc(
            "a",
            "0 0,1",
            t,
            Blockly.utils.svgPaths.point(t, -t)
          ),
        o = Blockly.utils.svgPaths.arc(
          "a",
          "0 0,1",
          t,
          Blockly.utils.svgPaths.point(t, t)
        ),
        i = Blockly.utils.svgPaths.arc(
          "a",
          "0 0,1",
          t,
          Blockly.utils.svgPaths.point(-t, -t)
        );
      return {
        topLeft: e,
        topRight: o,
        bottomRight: Blockly.utils.svgPaths.arc(
          "a",
          "0 0,1",
          t,
          Blockly.utils.svgPaths.point(-t, t)
        ),
        bottomLeft: i,
        rightHeight: t,
      };
    }),
  (Blockly.blockRendering.ConstantProvider.prototype.shapeFor = function (t) {
    switch (t.type) {
      case Blockly.INPUT_VALUE:
      case Blockly.OUTPUT_VALUE:
        return this.PUZZLE_TAB;
      case Blockly.PREVIOUS_STATEMENT:
      case Blockly.NEXT_STATEMENT:
        return this.NOTCH;
      default:
        throw Error("Unknown connection type");
    }
  }),
  (Blockly.blockRendering.ConstantProvider.prototype.createDom = function (t) {
    t = Blockly.utils.dom.createSvgElement("defs", {}, t);
    var e = Blockly.utils.dom.createSvgElement(
      "filter",
      { id: "blocklyEmbossFilter" + this.randomIdentifier_ },
      t
    );
    Blockly.utils.dom.createSvgElement(
      "feGaussianBlur",
      { in: "SourceAlpha", stdDeviation: 1, result: "blur" },
      e
    );
    var o = Blockly.utils.dom.createSvgElement(
      "feSpecularLighting",
      {
        in: "blur",
        surfaceScale: 1,
        specularConstant: 0.5,
        specularExponent: 10,
        "lighting-color": "white",
        result: "specOut",
      },
      e
    );
    Blockly.utils.dom.createSvgElement(
      "fePointLight",
      { x: -5e3, y: -1e4, z: 2e4 },
      o
    ),
      Blockly.utils.dom.createSvgElement(
        "feComposite",
        {
          in: "specOut",
          in2: "SourceAlpha",
          operator: "in",
          result: "specOut",
        },
        e
      ),
      Blockly.utils.dom.createSvgElement(
        "feComposite",
        {
          in: "SourceGraphic",
          in2: "specOut",
          operator: "arithmetic",
          k1: 0,
          k2: 1,
          k3: 1,
          k4: 0,
        },
        e
      ),
      (this.embossFilterId = e.id),
      (this.embossFilter_ = e),
      (t = Blockly.utils.dom.createSvgElement(
        "pattern",
        {
          id: "blocklyDisabledPattern" + this.randomIdentifier_,
          patternUnits: "userSpaceOnUse",
          width: 10,
          height: 10,
        },
        t
      )),
      Blockly.utils.dom.createSvgElement(
        "rect",
        { width: 10, height: 10, fill: "#aaa" },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "path",
        { d: "M 0 0 L 10 10 M 10 0 L 0 10", stroke: "#cc0" },
        t
      ),
      (this.disabledPatternId = t.id),
      (this.disabledPattern_ = t);
  }),
  (Blockly.blockRendering.ConstantProvider.prototype.injectCSS = function (t) {
    var e = this.getCSS_(t);
    if (((t = "blockly-renderer-style-" + t), !document.getElementById(t))) {
      var o = e.join("\n");
      ((e = document.createElement("style")).id = t),
        (t = document.createTextNode(o)),
        e.appendChild(t),
        document.head.insertBefore(e, document.head.firstChild);
    }
  }),
  (Blockly.blockRendering.ConstantProvider.prototype.getCSS_ = function (t) {
    return [
      (t = "." + t + "-renderer") + " .blocklyText {",
      "cursor: default;",
      "fill: #fff;",
      "font-family: " + this.FIELD_TEXT_FONTFAMILY + ";",
      "font-size: " + this.FIELD_TEXT_FONTSIZE + "pt;",
      "font-weight: " + this.FIELD_TEXT_FONTWEIGHT + ";",
      "}",
      t + " .blocklyNonEditableText>rect,",
      t + " .blocklyEditableText>rect {",
      "fill: " + this.FIELD_BORDER_RECT_COLOUR + ";",
      "fill-opacity: .6;",
      "stroke: none;",
      "}",
      t + " .blocklyNonEditableText>text,",
      t + " .blocklyEditableText>text {",
      "fill: #000;",
      "}",
      t + " .blocklyEditableText:not(.editing):hover>rect {",
      "stroke: #fff;",
      "stroke-width: 2;",
      "}",
      t + " .blocklyHtmlInput {",
      "font-family: " + this.FIELD_TEXT_FONTFAMILY + ";",
      "font-weight: " + this.FIELD_TEXT_FONTWEIGHT + ";",
      "}",
      t + " .blocklySelected>.blocklyPath {",
      "stroke: #fc3;",
      "stroke-width: 3px;",
      "}",
      t + " .blocklyHighlightedConnectionPath {",
      "stroke: #fc3;",
      "}",
      t + " .blocklyReplaceable .blocklyPath {",
      "fill-opacity: .5;",
      "}",
      t + " .blocklyReplaceable .blocklyPathLight,",
      t + " .blocklyReplaceable .blocklyPathDark {",
      "display: none;",
      "}",
    ];
  }),
  (Blockly.blockRendering.MarkerSvg = function (t, e, o) {
    (this.workspace_ = t),
      (this.marker_ = o),
      (this.parent_ = null),
      (this.constants_ = e),
      (this.currentMarkerSvg = null),
      (t = this.isCursor()
        ? this.constants_.CURSOR_COLOUR
        : this.constants_.MARKER_COLOUR),
      (this.colour_ = o.colour || t);
  }),
  (Blockly.blockRendering.MarkerSvg.CURSOR_CLASS = "blocklyCursor"),
  (Blockly.blockRendering.MarkerSvg.MARKER_CLASS = "blocklyMarker"),
  (Blockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER = 0.75),
  (Blockly.blockRendering.MarkerSvg.prototype.getSvgRoot = function () {
    return this.svgGroup_;
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.isCursor = function () {
    return "cursor" == this.marker_.type;
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.createDom = function () {
    var t = this.isCursor()
      ? Blockly.blockRendering.MarkerSvg.CURSOR_CLASS
      : Blockly.blockRendering.MarkerSvg.MARKER_CLASS;
    return (
      (this.svgGroup_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: t },
        null
      )),
      this.createDomInternal_(),
      this.svgGroup_
    );
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.setParent_ = function (t) {
    this.isCursor()
      ? (this.parent_ && this.parent_.setCursorSvg(null),
        t.setCursorSvg(this.getSvgRoot()))
      : (this.parent_ && this.parent_.setMarkerSvg(null),
        t.setMarkerSvg(this.getSvgRoot())),
      (this.parent_ = t);
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_ =
    function (t) {
      if (t) {
        var e = t.width,
          o = t.height,
          i = o * Blockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,
          n = this.constants_.CURSOR_BLOCK_PADDING;
        if (t.previousConnection) {
          var l = this.constants_.shapeFor(t.previousConnection);
          this.positionPrevious_(e, n, i, l);
        } else
          t.outputConnection
            ? ((l = this.constants_.shapeFor(t.outputConnection)),
              this.positionOutput_(e, o, l))
            : this.positionBlock_(e, n, i);
        this.setParent_(t), this.showCurrent_();
      }
    }),
  (Blockly.blockRendering.MarkerSvg.prototype.showWithCoordinates_ = function (
    t
  ) {
    var e = t.getWsCoordinate();
    (t = e.x),
      (e = e.y),
      this.workspace_.RTL && (t -= this.constants_.CURSOR_WS_WIDTH),
      this.positionLine_(t, e, this.constants_.CURSOR_WS_WIDTH),
      this.setParent_(this.workspace_),
      this.showCurrent_();
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.showWithField_ = function (t) {
    var e = (t = t.getLocation()).getSize().width,
      o = t.getSize().height;
    this.positionRect_(0, 0, e, o), this.setParent_(t), this.showCurrent_();
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.showWithInput_ = function (t) {
    var e = (t = t.getLocation()).getSourceBlock();
    this.positionInput_(t), this.setParent_(e), this.showCurrent_();
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.showWithNext_ = function (t) {
    var e = t.getLocation();
    t = e.getSourceBlock();
    var o = 0;
    e = e.getOffsetInBlock().y;
    var i = t.getHeightWidth().width;
    this.workspace_.RTL && (o = -i),
      this.positionLine_(o, e, i),
      this.setParent_(t),
      this.showCurrent_();
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.showWithStack_ = function (t) {
    var e = (t = t.getLocation()).getHeightWidth(),
      o = e.width + this.constants_.CURSOR_STACK_PADDING;
    e = e.height + this.constants_.CURSOR_STACK_PADDING;
    var i = -this.constants_.CURSOR_STACK_PADDING / 2,
      n = -this.constants_.CURSOR_STACK_PADDING / 2,
      l = i;
    this.workspace_.RTL && (l = -(o + i)),
      this.positionRect_(l, n, o, e),
      this.setParent_(t),
      this.showCurrent_();
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.showCurrent_ = function () {
    this.hide(), (this.currentMarkerSvg.style.display = "");
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.positionBlock_ = function (
    t,
    e,
    o
  ) {
    (t =
      Blockly.utils.svgPaths.moveBy(-e, o) +
      Blockly.utils.svgPaths.lineOnAxis("V", -e) +
      Blockly.utils.svgPaths.lineOnAxis("H", t + 2 * e) +
      Blockly.utils.svgPaths.lineOnAxis("V", o)),
      this.markerBlock_.setAttribute("d", t),
      this.workspace_.RTL && this.flipRtl_(this.markerBlock_),
      (this.currentMarkerSvg = this.markerBlock_);
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.positionInput_ = function (t) {
    var e = t.getOffsetInBlock().x,
      o = t.getOffsetInBlock().y;
    (t =
      Blockly.utils.svgPaths.moveTo(0, 0) +
      this.constants_.shapeFor(t).pathDown),
      this.markerInput_.setAttribute("d", t),
      this.markerInput_.setAttribute(
        "transform",
        "translate(" +
          e +
          "," +
          o +
          ")" +
          (this.workspace_.RTL ? " scale(-1 1)" : "")
      ),
      (this.currentMarkerSvg = this.markerInput_);
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.positionLine_ = function (
    t,
    e,
    o
  ) {
    this.markerSvgLine_.setAttribute("x", t),
      this.markerSvgLine_.setAttribute("y", e),
      this.markerSvgLine_.setAttribute("width", o),
      (this.currentMarkerSvg = this.markerSvgLine_);
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.positionOutput_ = function (
    t,
    e,
    o
  ) {
    (t =
      Blockly.utils.svgPaths.moveBy(t, 0) +
      Blockly.utils.svgPaths.lineOnAxis("h", -(t - o.width)) +
      Blockly.utils.svgPaths.lineOnAxis(
        "v",
        this.constants_.TAB_OFFSET_FROM_TOP
      ) +
      o.pathDown +
      Blockly.utils.svgPaths.lineOnAxis("V", e) +
      Blockly.utils.svgPaths.lineOnAxis("H", t)),
      this.markerBlock_.setAttribute("d", t),
      this.workspace_.RTL && this.flipRtl_(this.markerBlock_),
      (this.currentMarkerSvg = this.markerBlock_);
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.positionPrevious_ = function (
    t,
    e,
    o,
    i
  ) {
    (t =
      Blockly.utils.svgPaths.moveBy(-e, o) +
      Blockly.utils.svgPaths.lineOnAxis("V", -e) +
      Blockly.utils.svgPaths.lineOnAxis(
        "H",
        this.constants_.NOTCH_OFFSET_LEFT
      ) +
      i.pathLeft +
      Blockly.utils.svgPaths.lineOnAxis("H", t + 2 * e) +
      Blockly.utils.svgPaths.lineOnAxis("V", o)),
      this.markerBlock_.setAttribute("d", t),
      this.workspace_.RTL && this.flipRtl_(this.markerBlock_),
      (this.currentMarkerSvg = this.markerBlock_);
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.positionRect_ = function (
    t,
    e,
    o,
    i
  ) {
    this.markerSvgRect_.setAttribute("x", t),
      this.markerSvgRect_.setAttribute("y", e),
      this.markerSvgRect_.setAttribute("width", o),
      this.markerSvgRect_.setAttribute("height", i),
      (this.currentMarkerSvg = this.markerSvgRect_);
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.flipRtl_ = function (t) {
    t.setAttribute("transform", "scale(-1 1)");
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.hide = function () {
    (this.markerSvgLine_.style.display = "none"),
      (this.markerSvgRect_.style.display = "none"),
      (this.markerInput_.style.display = "none"),
      (this.markerBlock_.style.display = "none");
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.draw = function (t, e) {
    e
      ? (this.showAtLocation_(e),
        this.firemarkerEvent_(t, e),
        void 0 !== (t = this.currentMarkerSvg.childNodes[0]) &&
          t.beginElement &&
          t.beginElement())
      : this.hide();
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.showAtLocation_ = function (t) {
    t.getType() == Blockly.ASTNode.types.BLOCK
      ? ((t = t.getLocation()), this.showWithBlockPrevOutput_(t))
      : t.getType() == Blockly.ASTNode.types.OUTPUT
      ? ((t = t.getLocation().getSourceBlock()),
        this.showWithBlockPrevOutput_(t))
      : t.getLocation().type == Blockly.INPUT_VALUE
      ? this.showWithInput_(t)
      : t.getLocation().type == Blockly.NEXT_STATEMENT
      ? this.showWithNext_(t)
      : t.getType() == Blockly.ASTNode.types.PREVIOUS
      ? ((t = t.getLocation().getSourceBlock()),
        this.showWithBlockPrevOutput_(t))
      : t.getType() == Blockly.ASTNode.types.FIELD
      ? this.showWithField_(t)
      : t.getType() == Blockly.ASTNode.types.WORKSPACE
      ? this.showWithCoordinates_(t)
      : t.getType() == Blockly.ASTNode.types.STACK && this.showWithStack_(t);
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.firemarkerEvent_ = function (
    t,
    e
  ) {
    var o = e.getSourceBlock(),
      i = this.isCursor() ? "cursorMove" : "markerMove";
    (t = new Blockly.Events.Ui(o, i, t, e)),
      e.getType() == Blockly.ASTNode.types.WORKSPACE &&
        (t.workspaceId = e.getLocation().id),
      Blockly.Events.fire(t);
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.getBlinkProperties_ =
    function () {
      return {
        attributeType: "XML",
        attributeName: "fill",
        dur: "1s",
        values: this.colour_ + ";transparent;transparent;",
        repeatCount: "indefinite",
      };
    }),
  (Blockly.blockRendering.MarkerSvg.prototype.createDomInternal_ = function () {
    if (
      ((this.markerSvg_ = Blockly.utils.dom.createSvgElement(
        "g",
        {
          width: this.constants_.CURSOR_WS_WIDTH,
          height: this.constants_.WS_CURSOR_HEIGHT,
        },
        this.svgGroup_
      )),
      (this.markerSvgLine_ = Blockly.utils.dom.createSvgElement(
        "rect",
        {
          fill: this.colour_,
          width: this.constants_.CURSOR_WS_WIDTH,
          height: this.constants_.WS_CURSOR_HEIGHT,
          style: "display: none",
        },
        this.markerSvg_
      )),
      (this.markerSvgRect_ = Blockly.utils.dom.createSvgElement(
        "rect",
        {
          class: "blocklyVerticalMarker",
          rx: 10,
          ry: 10,
          style: "display: none",
          stroke: this.colour_,
        },
        this.markerSvg_
      )),
      (this.markerInput_ = Blockly.utils.dom.createSvgElement(
        "path",
        { transform: "", style: "display: none", fill: this.colour_ },
        this.markerSvg_
      )),
      (this.markerBlock_ = Blockly.utils.dom.createSvgElement(
        "path",
        {
          transform: "",
          style: "display: none",
          fill: "none",
          stroke: this.colour_,
          "stroke-width": this.constants_.CURSOR_STROKE_WIDTH,
        },
        this.markerSvg_
      )),
      this.isCursor())
    ) {
      var t = this.getBlinkProperties_();
      Blockly.utils.dom.createSvgElement(
        "animate",
        this.getBlinkProperties_(),
        this.markerSvgLine_
      ),
        Blockly.utils.dom.createSvgElement("animate", t, this.markerInput_),
        (t.attributeName = "stroke"),
        Blockly.utils.dom.createSvgElement("animate", t, this.markerBlock_);
    }
    return this.markerSvg_;
  }),
  (Blockly.blockRendering.MarkerSvg.prototype.dispose = function () {
    this.svgGroup_ && Blockly.utils.dom.removeNode(this.svgGroup_);
  }),
  (Blockly.blockRendering.Types = {
    NONE: 0,
    FIELD: 1,
    HAT: 2,
    ICON: 4,
    SPACER: 8,
    BETWEEN_ROW_SPACER: 16,
    IN_ROW_SPACER: 32,
    EXTERNAL_VALUE_INPUT: 64,
    INPUT: 128,
    INLINE_INPUT: 256,
    STATEMENT_INPUT: 512,
    CONNECTION: 1024,
    PREVIOUS_CONNECTION: 2048,
    NEXT_CONNECTION: 4096,
    OUTPUT_CONNECTION: 8192,
    CORNER: 16384,
    LEFT_SQUARE_CORNER: 32768,
    LEFT_ROUND_CORNER: 65536,
    RIGHT_SQUARE_CORNER: 131072,
    RIGHT_ROUND_CORNER: 262144,
    JAGGED_EDGE: 524288,
    ROW: 1048576,
    TOP_ROW: 2097152,
    BOTTOM_ROW: 4194304,
    INPUT_ROW: 8388608,
  }),
  (Blockly.blockRendering.Types.LEFT_CORNER =
    Blockly.blockRendering.Types.LEFT_SQUARE_CORNER |
    Blockly.blockRendering.Types.LEFT_ROUND_CORNER),
  (Blockly.blockRendering.Types.RIGHT_CORNER =
    Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER |
    Blockly.blockRendering.Types.RIGHT_ROUND_CORNER),
  (Blockly.blockRendering.Types.nextTypeValue_ = 16777216),
  (Blockly.blockRendering.Types.getType = function (t) {
    return (
      Blockly.blockRendering.Types.hasOwnProperty(t) ||
        ((Blockly.blockRendering.Types[t] =
          Blockly.blockRendering.Types.nextTypeValue_),
        (Blockly.blockRendering.Types.nextTypeValue_ <<= 1)),
      Blockly.blockRendering.Types[t]
    );
  }),
  (Blockly.blockRendering.Types.isField = function (t) {
    return t.type & Blockly.blockRendering.Types.FIELD;
  }),
  (Blockly.blockRendering.Types.isHat = function (t) {
    return t.type & Blockly.blockRendering.Types.HAT;
  }),
  (Blockly.blockRendering.Types.isIcon = function (t) {
    return t.type & Blockly.blockRendering.Types.ICON;
  }),
  (Blockly.blockRendering.Types.isSpacer = function (t) {
    return t.type & Blockly.blockRendering.Types.SPACER;
  }),
  (Blockly.blockRendering.Types.isInRowSpacer = function (t) {
    return t.type & Blockly.blockRendering.Types.IN_ROW_SPACER;
  }),
  (Blockly.blockRendering.Types.isInput = function (t) {
    return t.type & Blockly.blockRendering.Types.INPUT;
  }),
  (Blockly.blockRendering.Types.isExternalInput = function (t) {
    return t.type & Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT;
  }),
  (Blockly.blockRendering.Types.isInlineInput = function (t) {
    return t.type & Blockly.blockRendering.Types.INLINE_INPUT;
  }),
  (Blockly.blockRendering.Types.isStatementInput = function (t) {
    return t.type & Blockly.blockRendering.Types.STATEMENT_INPUT;
  }),
  (Blockly.blockRendering.Types.isPreviousConnection = function (t) {
    return t.type & Blockly.blockRendering.Types.PREVIOUS_CONNECTION;
  }),
  (Blockly.blockRendering.Types.isNextConnection = function (t) {
    return t.type & Blockly.blockRendering.Types.NEXT_CONNECTION;
  }),
  (Blockly.blockRendering.Types.isPreviousOrNextConnection = function (t) {
    return (
      t.type &
      (Blockly.blockRendering.Types.PREVIOUS_CONNECTION |
        Blockly.blockRendering.Types.NEXT_CONNECTION)
    );
  }),
  (Blockly.blockRendering.Types.isLeftRoundedCorner = function (t) {
    return t.type & Blockly.blockRendering.Types.LEFT_ROUND_CORNER;
  }),
  (Blockly.blockRendering.Types.isRightRoundedCorner = function (t) {
    return t.type & Blockly.blockRendering.Types.RIGHT_ROUND_CORNER;
  }),
  (Blockly.blockRendering.Types.isLeftSquareCorner = function (t) {
    return t.type & Blockly.blockRendering.Types.LEFT_SQUARE_CORNER;
  }),
  (Blockly.blockRendering.Types.isRightSquareCorner = function (t) {
    return t.type & Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER;
  }),
  (Blockly.blockRendering.Types.isCorner = function (t) {
    return t.type & Blockly.blockRendering.Types.CORNER;
  }),
  (Blockly.blockRendering.Types.isJaggedEdge = function (t) {
    return t.type & Blockly.blockRendering.Types.JAGGED_EDGE;
  }),
  (Blockly.blockRendering.Types.isRow = function (t) {
    return t.type & Blockly.blockRendering.Types.ROW;
  }),
  (Blockly.blockRendering.Types.isBetweenRowSpacer = function (t) {
    return t.type & Blockly.blockRendering.Types.BETWEEN_ROW_SPACER;
  });
(Blockly.blockRendering.Types.isTopRow = function (t) {
  return t.type & Blockly.blockRendering.Types.TOP_ROW;
}),
  (Blockly.blockRendering.Types.isBottomRow = function (t) {
    return t.type & Blockly.blockRendering.Types.BOTTOM_ROW;
  }),
  (Blockly.blockRendering.Types.isTopOrBottomRow = function (t) {
    return (
      t.type &
      (Blockly.blockRendering.Types.TOP_ROW |
        Blockly.blockRendering.Types.BOTTOM_ROW)
    );
  }),
  (Blockly.blockRendering.Types.isInputRow = function (t) {
    return t.type & Blockly.blockRendering.Types.INPUT_ROW;
  }),
  (Blockly.blockRendering.Measurable = function (t) {
    (this.height = this.width = 0),
      (this.type = Blockly.blockRendering.Types.NONE),
      (this.centerline = this.xPos = 0),
      (this.constants_ = t),
      (this.notchOffset = this.constants_.NOTCH_OFFSET_LEFT);
  }),
  (Blockly.blockRendering.Connection = function (t, e) {
    Blockly.blockRendering.Connection.superClass_.constructor.call(this, t),
      (this.connectionModel = e),
      (this.shape = this.constants_.shapeFor(e)),
      (this.isDynamicShape = !!this.shape.isDynamic),
      (this.type |= Blockly.blockRendering.Types.CONNECTION);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.Connection,
    Blockly.blockRendering.Measurable
  ),
  (Blockly.blockRendering.OutputConnection = function (t, e) {
    Blockly.blockRendering.OutputConnection.superClass_.constructor.call(
      this,
      t,
      e
    ),
      (this.type |= Blockly.blockRendering.Types.OUTPUT_CONNECTION),
      (this.height = this.isDynamicShape ? 0 : this.shape.height),
      (this.startX = this.width = this.isDynamicShape ? 0 : this.shape.width),
      (this.connectionOffsetY = this.constants_.TAB_OFFSET_FROM_TOP),
      (this.connectionOffsetX = 0);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.OutputConnection,
    Blockly.blockRendering.Connection
  ),
  (Blockly.blockRendering.PreviousConnection = function (t, e) {
    Blockly.blockRendering.PreviousConnection.superClass_.constructor.call(
      this,
      t,
      e
    ),
      (this.type |= Blockly.blockRendering.Types.PREVIOUS_CONNECTION),
      (this.height = this.shape.height),
      (this.width = this.shape.width);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.PreviousConnection,
    Blockly.blockRendering.Connection
  ),
  (Blockly.blockRendering.NextConnection = function (t, e) {
    Blockly.blockRendering.NextConnection.superClass_.constructor.call(
      this,
      t,
      e
    ),
      (this.type |= Blockly.blockRendering.Types.NEXT_CONNECTION),
      (this.height = this.shape.height),
      (this.width = this.shape.width);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.NextConnection,
    Blockly.blockRendering.Connection
  ),
  (Blockly.blockRendering.InputConnection = function (t, e) {
    Blockly.blockRendering.InputConnection.superClass_.constructor.call(
      this,
      t,
      e.connection
    ),
      (this.type |= Blockly.blockRendering.Types.INPUT),
      (this.input = e),
      (this.align = e.align),
      (this.connectedBlock =
        e.connection && e.connection.targetBlock()
          ? e.connection.targetBlock()
          : null)
        ? ((t = this.connectedBlock.getHeightWidth()),
          (this.connectedBlockWidth = t.width),
          (this.connectedBlockHeight = t.height))
        : (this.connectedBlockHeight = this.connectedBlockWidth = 0),
      (this.connectionOffsetY = this.connectionOffsetX = 0);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.InputConnection,
    Blockly.blockRendering.Connection
  ),
  (Blockly.blockRendering.InlineInput = function (t, e) {
    Blockly.blockRendering.InlineInput.superClass_.constructor.call(this, t, e),
      (this.type |= Blockly.blockRendering.Types.INLINE_INPUT),
      this.connectedBlock
        ? ((this.width = this.connectedBlockWidth),
          (this.height = this.connectedBlockHeight))
        : ((this.height = this.constants_.EMPTY_INLINE_INPUT_HEIGHT),
          (this.width = this.constants_.EMPTY_INLINE_INPUT_PADDING)),
      (this.connectionHeight = this.isDynamicShape
        ? this.shape.height(this.height)
        : this.shape.height),
      (this.connectionWidth = this.isDynamicShape
        ? this.shape.width(this.height)
        : this.shape.width),
      this.connectedBlock ||
        (this.width += this.connectionWidth * (this.isDynamicShape ? 2 : 1)),
      (this.connectionOffsetY = this.isDynamicShape
        ? this.shape.connectionOffsetY(this.connectionHeight)
        : this.constants_.TAB_OFFSET_FROM_TOP),
      (this.connectionOffsetX = this.isDynamicShape
        ? this.shape.connectionOffsetX(this.connectionWidth)
        : 0);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.InlineInput,
    Blockly.blockRendering.InputConnection
  ),
  (Blockly.blockRendering.StatementInput = function (t, e) {
    Blockly.blockRendering.StatementInput.superClass_.constructor.call(
      this,
      t,
      e
    ),
      (this.type |= Blockly.blockRendering.Types.STATEMENT_INPUT),
      (this.height = this.connectedBlock
        ? this.connectedBlockHeight + this.constants_.STATEMENT_BOTTOM_SPACER
        : this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT),
      (this.width =
        this.constants_.STATEMENT_INPUT_NOTCH_OFFSET + this.shape.width);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.StatementInput,
    Blockly.blockRendering.InputConnection
  ),
  (Blockly.blockRendering.ExternalValueInput = function (t, e) {
    Blockly.blockRendering.ExternalValueInput.superClass_.constructor.call(
      this,
      t,
      e
    ),
      (this.type |= Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT),
      (this.height = this.connectedBlock
        ? this.connectedBlockHeight -
          this.constants_.TAB_OFFSET_FROM_TOP -
          this.constants_.MEDIUM_PADDING
        : this.shape.height),
      (this.width =
        this.shape.width + this.constants_.EXTERNAL_VALUE_INPUT_PADDING),
      (this.connectionOffsetY = this.constants_.TAB_OFFSET_FROM_TOP),
      (this.connectionHeight = this.shape.height),
      (this.connectionWidth = this.shape.width);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.ExternalValueInput,
    Blockly.blockRendering.InputConnection
  ),
  (Blockly.blockRendering.Icon = function (t, e) {
    Blockly.blockRendering.Icon.superClass_.constructor.call(this, t),
      (this.icon = e),
      (this.isVisible = e.isVisible()),
      (this.type |= Blockly.blockRendering.Types.ICON),
      (t = e.getCorrectedSize()),
      (this.height = t.height),
      (this.width = t.width);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.Icon,
    Blockly.blockRendering.Measurable
  ),
  (Blockly.blockRendering.JaggedEdge = function (t) {
    Blockly.blockRendering.JaggedEdge.superClass_.constructor.call(this, t),
      (this.type |= Blockly.blockRendering.Types.JAGGED_EDGE),
      (this.height = this.constants_.JAGGED_TEETH.height),
      (this.width = this.constants_.JAGGED_TEETH.width);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.JaggedEdge,
    Blockly.blockRendering.Measurable
  ),
  (Blockly.blockRendering.Field = function (t, e, o) {
    Blockly.blockRendering.Field.superClass_.constructor.call(this, t),
      (this.field = e),
      (this.isEditable = e.isCurrentlyEditable()),
      (this.flipRtl = e.getFlipRtl()),
      (this.type |= Blockly.blockRendering.Types.FIELD),
      (t = this.field.getSize()),
      (this.height = t.height),
      (this.width = t.width),
      (this.parentInput = o);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.Field,
    Blockly.blockRendering.Measurable
  ),
  (Blockly.blockRendering.Hat = function (t) {
    Blockly.blockRendering.Hat.superClass_.constructor.call(this, t),
      (this.type |= Blockly.blockRendering.Types.HAT),
      (this.height = this.constants_.START_HAT.height),
      (this.width = this.constants_.START_HAT.width),
      (this.ascenderHeight = this.height);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.Hat,
    Blockly.blockRendering.Measurable
  ),
  (Blockly.blockRendering.SquareCorner = function (t, e) {
    Blockly.blockRendering.SquareCorner.superClass_.constructor.call(this, t),
      (this.type =
        (e && "left" != e
          ? Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER
          : Blockly.blockRendering.Types.LEFT_SQUARE_CORNER) |
        Blockly.blockRendering.Types.CORNER),
      (this.width = this.height = this.constants_.NO_PADDING);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.SquareCorner,
    Blockly.blockRendering.Measurable
  ),
  (Blockly.blockRendering.RoundCorner = function (t, e) {
    Blockly.blockRendering.RoundCorner.superClass_.constructor.call(this, t),
      (this.type =
        (e && "left" != e
          ? Blockly.blockRendering.Types.RIGHT_ROUND_CORNER
          : Blockly.blockRendering.Types.LEFT_ROUND_CORNER) |
        Blockly.blockRendering.Types.CORNER),
      (this.width = this.constants_.CORNER_RADIUS),
      (this.height = this.constants_.CORNER_RADIUS / 2);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.RoundCorner,
    Blockly.blockRendering.Measurable
  ),
  (Blockly.blockRendering.InRowSpacer = function (t, e) {
    Blockly.blockRendering.InRowSpacer.superClass_.constructor.call(this, t),
      (this.type =
        this.type |
        Blockly.blockRendering.Types.SPACER |
        Blockly.blockRendering.Types.IN_ROW_SPACER),
      (this.width = e),
      (this.height = this.constants_.SPACER_DEFAULT_HEIGHT);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.InRowSpacer,
    Blockly.blockRendering.Measurable
  ),
  (Blockly.blockRendering.Row = function (t) {
    (this.type = Blockly.blockRendering.Types.ROW),
      (this.elements = []),
      (this.xPos =
        this.yPos =
        this.widthWithConnectedBlocks =
        this.minWidth =
        this.minHeight =
        this.width =
        this.height =
          0),
      (this.isCollapsedStack =
        this.hasJaggedEdge =
        this.hasDummyInput =
        this.hasInlineInput =
        this.hasStatement =
        this.hasExternalInput =
          !1),
      (this.constants_ = t),
      (this.notchOffset = this.constants_.NOTCH_OFFSET_LEFT),
      (this.align = null);
  }),
  (Blockly.blockRendering.Row.prototype.measure = function () {
    throw Error("Unexpected attempt to measure a base Row.");
  }),
  (Blockly.blockRendering.Row.prototype.getLastInput = function () {
    for (var t, e = this.elements.length - 1; (t = this.elements[e]); e--)
      if (Blockly.blockRendering.Types.isInput(t)) return t;
    return null;
  }),
  (Blockly.blockRendering.Row.prototype.startsWithElemSpacer = function () {
    return !0;
  }),
  (Blockly.blockRendering.Row.prototype.endsWithElemSpacer = function () {
    return !0;
  }),
  (Blockly.blockRendering.Row.prototype.getFirstSpacer = function () {
    for (var t, e = 0; (t = this.elements[e]); e++)
      if (Blockly.blockRendering.Types.isSpacer(t)) return t;
    return null;
  }),
  (Blockly.blockRendering.Row.prototype.getLastSpacer = function () {
    for (var t, e = this.elements.length - 1; (t = this.elements[e]); e--)
      if (Blockly.blockRendering.Types.isSpacer(t)) return t;
    return null;
  }),
  (Blockly.blockRendering.TopRow = function (t) {
    Blockly.blockRendering.TopRow.superClass_.constructor.call(this, t),
      (this.type |= Blockly.blockRendering.Types.TOP_ROW),
      (this.ascenderHeight = this.capline = 0),
      (this.hasPreviousConnection = !1),
      (this.connection = null);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.TopRow,
    Blockly.blockRendering.Row
  ),
  (Blockly.blockRendering.TopRow.prototype.hasLeftSquareCorner = function (t) {
    var e =
        (void 0 !== t.hat ? "cap" === t.hat : this.constants_.ADD_START_HATS) &&
        !t.outputConnection &&
        !t.previousConnection,
      o = t.getPreviousBlock();
    return !!t.outputConnection || e || (!!o && o.getNextBlock() == t);
  }),
  (Blockly.blockRendering.TopRow.prototype.hasRightSquareCorner = function (t) {
    return !0;
  }),
  (Blockly.blockRendering.TopRow.prototype.measure = function () {
    for (var t, e = 0, o = 0, i = 0, n = 0; (t = this.elements[n]); n++)
      (o += t.width),
        Blockly.blockRendering.Types.isSpacer(t) ||
          (Blockly.blockRendering.Types.isHat(t)
            ? (i = Math.max(i, t.ascenderHeight))
            : (e = Math.max(e, t.height)));
    (this.width = Math.max(this.minWidth, o)),
      (this.height = Math.max(this.minHeight, e) + i),
      (this.capline = this.ascenderHeight = i),
      (this.widthWithConnectedBlocks = this.width);
  }),
  (Blockly.blockRendering.TopRow.prototype.startsWithElemSpacer = function () {
    return !1;
  }),
  (Blockly.blockRendering.TopRow.prototype.endsWithElemSpacer = function () {
    return !1;
  }),
  (Blockly.blockRendering.BottomRow = function (t) {
    Blockly.blockRendering.BottomRow.superClass_.constructor.call(this, t),
      (this.type |= Blockly.blockRendering.Types.BOTTOM_ROW),
      (this.hasNextConnection = !1),
      (this.connection = null),
      (this.baseline = this.descenderHeight = 0);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.BottomRow,
    Blockly.blockRendering.Row
  ),
  (Blockly.blockRendering.BottomRow.prototype.hasLeftSquareCorner = function (
    t
  ) {
    return !!t.outputConnection || !!t.getNextBlock();
  }),
  (Blockly.blockRendering.BottomRow.prototype.hasRightSquareCorner = function (
    t
  ) {
    return !0;
  }),
  (Blockly.blockRendering.BottomRow.prototype.measure = function () {
    for (var t, e = 0, o = 0, i = 0, n = 0; (t = this.elements[n]); n++)
      (o += t.width),
        Blockly.blockRendering.Types.isSpacer(t) ||
          (Blockly.blockRendering.Types.isNextConnection(t)
            ? (i = Math.max(i, t.height))
            : (e = Math.max(e, t.height)));
    (this.width = Math.max(this.minWidth, o)),
      (this.height = Math.max(this.minHeight, e) + i),
      (this.descenderHeight = i),
      (this.widthWithConnectedBlocks = this.width);
  }),
  (Blockly.blockRendering.BottomRow.prototype.startsWithElemSpacer =
    function () {
      return !1;
    }),
  (Blockly.blockRendering.BottomRow.prototype.endsWithElemSpacer = function () {
    return !1;
  }),
  (Blockly.blockRendering.SpacerRow = function (t, e, o) {
    Blockly.blockRendering.SpacerRow.superClass_.constructor.call(this, t),
      (this.type =
        this.type |
        Blockly.blockRendering.Types.SPACER |
        Blockly.blockRendering.Types.BETWEEN_ROW_SPACER),
      (this.width = o),
      (this.height = e),
      (this.followsStatement = !1),
      (this.widthWithConnectedBlocks = 0),
      (this.elements = [
        new Blockly.blockRendering.InRowSpacer(this.constants_, o),
      ]);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.SpacerRow,
    Blockly.blockRendering.Row
  ),
  (Blockly.blockRendering.SpacerRow.prototype.measure = function () {}),
  (Blockly.blockRendering.InputRow = function (t) {
    Blockly.blockRendering.InputRow.superClass_.constructor.call(this, t),
      (this.type |= Blockly.blockRendering.Types.INPUT_ROW),
      (this.connectedBlockWidths = 0);
  }),
  Blockly.utils.object.inherits(
    Blockly.blockRendering.InputRow,
    Blockly.blockRendering.Row
  ),
  (Blockly.blockRendering.InputRow.prototype.measure = function () {
    (this.width = this.minWidth), (this.height = this.minHeight);
    for (var t, e = 0, o = 0; (t = this.elements[o]); o++)
      (this.width += t.width),
        Blockly.blockRendering.Types.isInput(t) &&
          (Blockly.blockRendering.Types.isStatementInput(t)
            ? (e += t.connectedBlockWidth)
            : Blockly.blockRendering.Types.isExternalInput(t) &&
              0 != t.connectedBlockWidth &&
              (e += t.connectedBlockWidth - t.connectionWidth)),
        Blockly.blockRendering.Types.isSpacer(t) ||
          (this.height = Math.max(this.height, t.height));
    (this.connectedBlockWidths = e),
      (this.widthWithConnectedBlocks = this.width + e);
  }),
  (Blockly.blockRendering.InputRow.prototype.endsWithElemSpacer = function () {
    return !this.hasExternalInput && !this.hasStatement;
  }),
  (Blockly.blockRendering.RenderInfo = function (t, e) {
    (this.block_ = e),
      (this.renderer_ = t),
      (this.constants_ = this.renderer_.getConstants()),
      (this.outputConnection = e.outputConnection
        ? new Blockly.blockRendering.OutputConnection(
            this.constants_,
            e.outputConnection
          )
        : null),
      (this.isInline = e.getInputsInline() && !e.isCollapsed()),
      (this.isCollapsed = e.isCollapsed()),
      (this.isInsertionMarker = e.isInsertionMarker()),
      (this.RTL = e.RTL),
      (this.statementEdge =
        this.width =
        this.widthWithChildren =
        this.height =
          0),
      (this.rows = []),
      (this.inputRowNum_ = 1),
      (this.hiddenIcons = []),
      (this.topRow = new Blockly.blockRendering.TopRow(this.constants_)),
      (this.bottomRow = new Blockly.blockRendering.BottomRow(this.constants_)),
      (this.startY = this.startX = 0);
  }),
  (Blockly.blockRendering.RenderInfo.prototype.getRenderer = function () {
    return this.renderer_;
  }),
  (Blockly.blockRendering.RenderInfo.prototype.measure = function () {
    this.createRows_(),
      this.addElemSpacing_(),
      this.addRowSpacing_(),
      this.computeBounds_(),
      this.alignRowElements_(),
      this.finalize_();
  }),
  (Blockly.blockRendering.RenderInfo.prototype.createRows_ = function () {
    this.populateTopRow_(), this.rows.push(this.topRow);
    var t = new Blockly.blockRendering.InputRow(this.constants_),
      e = this.block_.getIcons();
    if (e.length)
      for (var o, i = 0; (o = e[i]); i++) {
        var n = new Blockly.blockRendering.Icon(this.constants_, o);
        this.isCollapsed && o.collapseHidden
          ? this.hiddenIcons.push(n)
          : t.elements.push(n);
      }
    for (o = null, i = 0; (e = this.block_.inputList[i]); i++)
      if (e.isVisible()) {
        for (
          this.shouldStartNewRow_(e, o) &&
            (this.rows.push(t),
            (t = new Blockly.blockRendering.InputRow(this.constants_)),
            this.inputRowNum_++),
            o = 0;
          (n = e.fieldRow[o]);
          o++
        )
          t.elements.push(
            new Blockly.blockRendering.Field(this.constants_, n, e)
          );
        this.addInput_(e, t), (o = e);
      }
    this.isCollapsed &&
      (this.block_.inputList.find(function (t) {
        return t.type == Blockly.NEXT_STATEMENT;
      })
        ? (t = this.addCollapsedRow_(t))
        : ((t.hasJaggedEdge = !0),
          t.elements.push(
            new Blockly.blockRendering.JaggedEdge(this.constants_)
          ))),
      (t.elements.length || t.hasDummyInput) && this.rows.push(t),
      this.populateBottomRow_(),
      this.rows.push(this.bottomRow);
  }),
  (Blockly.blockRendering.RenderInfo.prototype.populateTopRow_ = function () {
    var t = !!this.block_.previousConnection,
      e =
        (void 0 !== this.block_.hat
          ? "cap" === this.block_.hat
          : this.constants_.ADD_START_HATS) &&
        !this.outputConnection &&
        !t;
    this.topRow.hasLeftSquareCorner(this.block_)
      ? this.topRow.elements.push(
          new Blockly.blockRendering.SquareCorner(this.constants_)
        )
      : this.topRow.elements.push(
          new Blockly.blockRendering.RoundCorner(this.constants_)
        ),
      e
        ? ((t = new Blockly.blockRendering.Hat(this.constants_)),
          this.topRow.elements.push(t),
          (this.topRow.capline = t.ascenderHeight))
        : t &&
          ((this.topRow.hasPreviousConnection = !0),
          (this.topRow.connection =
            new Blockly.blockRendering.PreviousConnection(
              this.constants_,
              this.block_.previousConnection
            )),
          this.topRow.elements.push(this.topRow.connection)),
      this.block_.inputList.length &&
      this.block_.inputList[0].type == Blockly.NEXT_STATEMENT &&
      !this.block_.isCollapsed()
        ? (this.topRow.minHeight =
            this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT)
        : (this.topRow.minHeight = this.constants_.TOP_ROW_MIN_HEIGHT),
      this.topRow.hasRightSquareCorner(this.block_)
        ? this.topRow.elements.push(
            new Blockly.blockRendering.SquareCorner(this.constants_, "right")
          )
        : this.topRow.elements.push(
            new Blockly.blockRendering.RoundCorner(this.constants_, "right")
          );
  }),
  (Blockly.blockRendering.RenderInfo.prototype.populateBottomRow_ =
    function () {
      (this.bottomRow.hasNextConnection = !!this.block_.nextConnection),
        (this.bottomRow.minHeight =
          this.block_.inputList.length &&
          (this.block_.inputList[this.block_.inputList.length - 1].type ==
            Blockly.NEXT_STATEMENT ||
            this.rows[this.rows.length - 1].isCollapsedStack)
            ? this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT
            : this.constants_.BOTTOM_ROW_MIN_HEIGHT),
        this.bottomRow.hasLeftSquareCorner(this.block_)
          ? this.bottomRow.elements.push(
              new Blockly.blockRendering.SquareCorner(this.constants_)
            )
          : this.bottomRow.elements.push(
              new Blockly.blockRendering.RoundCorner(this.constants_)
            ),
        this.bottomRow.hasNextConnection &&
          ((this.bottomRow.connection =
            new Blockly.blockRendering.NextConnection(
              this.constants_,
              this.block_.nextConnection
            )),
          this.bottomRow.elements.push(this.bottomRow.connection)),
        this.bottomRow.hasRightSquareCorner(this.block_)
          ? this.bottomRow.elements.push(
              new Blockly.blockRendering.SquareCorner(this.constants_, "right")
            )
          : this.bottomRow.elements.push(
              new Blockly.blockRendering.RoundCorner(this.constants_, "right")
            );
    }),
  (Blockly.blockRendering.RenderInfo.prototype.addInput_ = function (t, e) {
    this.isInline && t.type == Blockly.INPUT_VALUE
      ? (e.elements.push(
          new Blockly.blockRendering.InlineInput(this.constants_, t)
        ),
        (e.hasInlineInput = !0))
      : t.type == Blockly.NEXT_STATEMENT
      ? (e.elements.push(
          new Blockly.blockRendering.StatementInput(this.constants_, t)
        ),
        (e.hasStatement = !0))
      : t.type == Blockly.INPUT_VALUE
      ? (e.elements.push(
          new Blockly.blockRendering.ExternalValueInput(this.constants_, t)
        ),
        (e.hasExternalInput = !0))
      : t.type == Blockly.DUMMY_INPUT &&
        ((e.minHeight = Math.max(
          e.minHeight,
          t.getSourceBlock() && t.getSourceBlock().isShadow()
            ? this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT
            : this.constants_.DUMMY_INPUT_MIN_HEIGHT
        )),
        (e.hasDummyInput = !0)),
      null == e.align && (e.align = t.align);
  }),
  (Blockly.blockRendering.RenderInfo.prototype.addCollapsedRow_ = function (
    t
  ) {}),
  (Blockly.blockRendering.RenderInfo.prototype.shouldStartNewRow_ = function (
    t,
    e
  ) {
    return (
      !!e &&
      (t.type == Blockly.NEXT_STATEMENT ||
        e.type == Blockly.NEXT_STATEMENT ||
        ((t.type == Blockly.INPUT_VALUE || t.type == Blockly.DUMMY_INPUT) &&
          !this.isInline))
    );
  }),
  (Blockly.blockRendering.RenderInfo.prototype.addElemSpacing_ = function () {
    for (var t, e = 0; (t = this.rows[e]); e++) {
      var o = t.elements;
      if (
        ((t.elements = []),
        t.startsWithElemSpacer() &&
          t.elements.push(
            new Blockly.blockRendering.InRowSpacer(
              this.constants_,
              this.getInRowSpacing_(null, o[0])
            )
          ),
        o.length)
      ) {
        for (var i = 0; i < o.length - 1; i++) {
          t.elements.push(o[i]);
          var n = this.getInRowSpacing_(o[i], o[i + 1]);
          t.elements.push(
            new Blockly.blockRendering.InRowSpacer(this.constants_, n)
          );
        }
        t.elements.push(o[o.length - 1]),
          t.endsWithElemSpacer() &&
            t.elements.push(
              new Blockly.blockRendering.InRowSpacer(
                this.constants_,
                this.getInRowSpacing_(o[o.length - 1], null)
              )
            );
      }
    }
  }),
  (Blockly.blockRendering.RenderInfo.prototype.getInRowSpacing_ = function (
    t,
    e
  ) {
    if (!t && e && Blockly.blockRendering.Types.isStatementInput(e))
      return this.constants_.STATEMENT_INPUT_PADDING_LEFT;
    if (t && Blockly.blockRendering.Types.isInput(t) && !e) {
      if (Blockly.blockRendering.Types.isExternalInput(t))
        return this.constants_.NO_PADDING;
      if (Blockly.blockRendering.Types.isInlineInput(t))
        return this.constants_.LARGE_PADDING;
      if (Blockly.blockRendering.Types.isStatementInput(t))
        return this.constants_.NO_PADDING;
    }
    return t &&
      Blockly.blockRendering.Types.isLeftSquareCorner(t) &&
      e &&
      (Blockly.blockRendering.Types.isPreviousConnection(e) ||
        Blockly.blockRendering.Types.isNextConnection(e))
      ? e.notchOffset
      : t &&
        Blockly.blockRendering.Types.isLeftRoundedCorner(t) &&
        e &&
        (Blockly.blockRendering.Types.isPreviousConnection(e) ||
          Blockly.blockRendering.Types.isNextConnection(e))
      ? e.notchOffset - this.constants_.CORNER_RADIUS
      : this.constants_.MEDIUM_PADDING;
  }),
  (Blockly.blockRendering.RenderInfo.prototype.computeBounds_ = function () {
    for (var t, e = 0, o = 0, i = 0, n = 0; (t = this.rows[n]); n++) {
      if ((t.measure(), (o = Math.max(o, t.width)), t.hasStatement)) {
        var l = t.getLastInput();
        e = Math.max(e, t.width - l.width);
      }
      i = Math.max(i, t.widthWithConnectedBlocks);
    }
    for (this.statementEdge = e, this.width = o, n = 0; (t = this.rows[n]); n++)
      t.hasStatement && (t.statementEdge = this.statementEdge);
    (this.widthWithChildren = Math.max(o, i)),
      this.outputConnection &&
        ((this.startX = this.outputConnection.width),
        (this.width += this.outputConnection.width),
        (this.widthWithChildren += this.outputConnection.width));
  }),
  (Blockly.blockRendering.RenderInfo.prototype.alignRowElements_ = function () {
    for (var t, e = 0; (t = this.rows[e]); e++)
      if (t.hasStatement) this.alignStatementRow_(t);
      else {
        var o = t.width;
        0 < (o = this.getDesiredRowWidth_(t) - o) &&
          this.addAlignmentPadding_(t, o);
      }
  }),
  (Blockly.blockRendering.RenderInfo.prototype.getDesiredRowWidth_ = function (
    t
  ) {
    return this.width - this.startX;
  }),
  (Blockly.blockRendering.RenderInfo.prototype.addAlignmentPadding_ = function (
    t,
    e
  ) {
    var o = t.getFirstSpacer(),
      i = t.getLastSpacer();
    (t.hasExternalInput || t.hasStatement) && (t.widthWithConnectedBlocks += e),
      t.align == Blockly.ALIGN_LEFT
        ? (i.width += e)
        : t.align == Blockly.ALIGN_CENTRE
        ? ((o.width += e / 2), (i.width += e / 2))
        : t.align == Blockly.ALIGN_RIGHT
        ? (o.width += e)
        : (i.width += e),
      (t.width += e);
  }),
  (Blockly.blockRendering.RenderInfo.prototype.alignStatementRow_ = function (
    t
  ) {
    var e = t.getLastInput(),
      o = t.width - e.width,
      i = this.statementEdge;
    0 < (o = i - o) && this.addAlignmentPadding_(t, o),
      (o = t.width),
      (i = this.getDesiredRowWidth_(t)),
      (e.width += i - o),
      (e.height = Math.max(e.height, t.height)),
      (t.width += i - o),
      (t.widthWithConnectedBlocks = Math.max(
        t.width,
        this.statementEdge + t.connectedBlockWidths
      ));
  }),
  (Blockly.blockRendering.RenderInfo.prototype.addRowSpacing_ = function () {
    var t = this.rows;
    this.rows = [];
    for (var e = 0; e < t.length; e++)
      this.rows.push(t[e]),
        e != t.length - 1 &&
          this.rows.push(this.makeSpacerRow_(t[e], t[e + 1]));
  }),
  (Blockly.blockRendering.RenderInfo.prototype.makeSpacerRow_ = function (
    t,
    e
  ) {
    var o = this.getSpacerRowHeight_(t, e),
      i = this.getSpacerRowWidth_(t, e);
    return (
      (o = new Blockly.blockRendering.SpacerRow(this.constants_, o, i)),
      t.hasStatement && (o.followsStatement = !0),
      e.hasStatement && (o.precedesStatement = !0),
      o
    );
  }),
  (Blockly.blockRendering.RenderInfo.prototype.getSpacerRowWidth_ = function (
    t,
    e
  ) {
    return this.width - this.startX;
  }),
  (Blockly.blockRendering.RenderInfo.prototype.getSpacerRowHeight_ = function (
    t,
    e
  ) {
    return this.constants_.MEDIUM_PADDING;
  }),
  (Blockly.blockRendering.RenderInfo.prototype.getElemCenterline_ = function (
    t,
    e
  ) {
    return Blockly.blockRendering.Types.isSpacer(e)
      ? t.yPos + e.height / 2
      : Blockly.blockRendering.Types.isBottomRow(t)
      ? ((t = t.yPos + t.height - t.descenderHeight),
        Blockly.blockRendering.Types.isNextConnection(e)
          ? t + e.height / 2
          : t - e.height / 2)
      : Blockly.blockRendering.Types.isTopRow(t)
      ? Blockly.blockRendering.Types.isHat(e)
        ? t.capline - e.height / 2
        : t.capline + e.height / 2
      : t.yPos + t.height / 2;
  }),
  (Blockly.blockRendering.RenderInfo.prototype.recordElemPositions_ = function (
    t
  ) {
    for (var e, o = t.xPos, i = 0; (e = t.elements[i]); i++)
      Blockly.blockRendering.Types.isSpacer(e) && (e.height = t.height),
        (e.xPos = o),
        (e.centerline = this.getElemCenterline_(t, e)),
        (o += e.width);
  }),
  (Blockly.blockRendering.RenderInfo.prototype.finalize_ = function () {
    for (var t, e = 0, o = 0, i = 0; (t = this.rows[i]); i++)
      (t.yPos = o),
        (t.xPos = this.startX),
        (o += t.height),
        (e = Math.max(e, t.widthWithConnectedBlocks)),
        this.recordElemPositions_(t);
    this.outputConnection &&
      this.block_.nextConnection &&
      this.block_.nextConnection.isConnected() &&
      (e = Math.max(
        e,
        this.block_.nextConnection.targetBlock().getHeightWidth().width
      )),
      (this.widthWithChildren = Math.max(
        this.widthWithChildren,
        e + this.startX
      )),
      (this.height = o),
      (this.startY = this.topRow.capline),
      (this.bottomRow.baseline = o - this.bottomRow.descenderHeight);
  }),
  (Blockly.blockRendering.Drawer = function (t, e) {
    (this.block_ = t),
      (this.info_ = e),
      (this.topLeft_ = t.getRelativeToSurfaceXY()),
      (this.inlinePath_ = this.outlinePath_ = ""),
      (this.constants_ = e.getRenderer().getConstants());
  }),
  (Blockly.blockRendering.Drawer.prototype.draw = function () {
    this.hideHiddenIcons_(),
      this.drawOutline_(),
      this.drawInternals_(),
      this.block_.pathObject.setPath(
        this.outlinePath_ + "\n" + this.inlinePath_
      ),
      this.info_.RTL && this.block_.pathObject.flipRTL(),
      Blockly.blockRendering.useDebugger &&
        this.block_.renderingDebugger.drawDebug(this.block_, this.info_),
      this.recordSizeOnBlock_();
  }),
  (Blockly.blockRendering.Drawer.prototype.recordSizeOnBlock_ = function () {
    (this.block_.height = this.info_.height),
      (this.block_.width = this.info_.widthWithChildren);
  }),
  (Blockly.blockRendering.Drawer.prototype.hideHiddenIcons_ = function () {
    for (var t, e = 0; (t = this.info_.hiddenIcons[e]); e++)
      t.icon.iconGroup_.setAttribute("display", "none");
  }),
  (Blockly.blockRendering.Drawer.prototype.drawOutline_ = function () {
    this.drawTop_();
    for (var t = 1; t < this.info_.rows.length - 1; t++) {
      var e = this.info_.rows[t];
      e.hasJaggedEdge
        ? this.drawJaggedEdge_(e)
        : e.isCollapsedStack
        ? this.drawCollapsedStack_(e)
        : e.hasStatement
        ? this.drawStatementInput_(e)
        : e.hasExternalInput
        ? this.drawValueInput_(e)
        : this.drawRightSideRow_(e);
    }
    this.drawBottom_(), this.drawLeft_();
  }),
  (Blockly.blockRendering.Drawer.prototype.drawTop_ = function () {
    var t = this.info_.topRow,
      e = t.elements;
    this.positionPreviousConnection_(),
      (this.outlinePath_ += Blockly.utils.svgPaths.moveBy(
        t.xPos,
        this.info_.startY
      ));
    for (var o, i = 0; (o = e[i]); i++)
      Blockly.blockRendering.Types.isLeftRoundedCorner(o)
        ? (this.outlinePath_ += this.constants_.OUTSIDE_CORNERS.topLeft)
        : Blockly.blockRendering.Types.isRightRoundedCorner(o)
        ? (this.outlinePath_ += this.constants_.OUTSIDE_CORNERS.topRight)
        : Blockly.blockRendering.Types.isPreviousConnection(o)
        ? (this.outlinePath_ += o.shape.pathLeft)
        : Blockly.blockRendering.Types.isHat(o)
        ? (this.outlinePath_ += this.constants_.START_HAT.path)
        : Blockly.blockRendering.Types.isSpacer(o) &&
          (this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis(
            "h",
            o.width
          ));
    this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis("v", t.height);
  }),
  (Blockly.blockRendering.Drawer.prototype.drawJaggedEdge_ = function (t) {
    this.outlinePath_ +=
      this.constants_.JAGGED_TEETH.path +
      Blockly.utils.svgPaths.lineOnAxis(
        "v",
        t.height - this.constants_.JAGGED_TEETH.height
      );
  }),
  (Blockly.blockRendering.Drawer.prototype.drawValueInput_ = function (t) {
    var e = t.getLastInput();
    this.positionExternalValueConnection_(t);
    var o =
      "function" == typeof e.shape.pathDown
        ? e.shape.pathDown(e.height)
        : e.shape.pathDown;
    this.outlinePath_ +=
      Blockly.utils.svgPaths.lineOnAxis("H", e.xPos + e.width) +
      o +
      Blockly.utils.svgPaths.lineOnAxis("v", t.height - e.connectionHeight);
  }),
  (Blockly.blockRendering.Drawer.prototype.drawStatementInput_ = function (t) {
    var e = t.getLastInput(),
      o = e.xPos + e.notchOffset + e.shape.width;
    e =
      e.shape.pathRight +
      Blockly.utils.svgPaths.lineOnAxis(
        "h",
        -(e.notchOffset - this.constants_.INSIDE_CORNERS.width)
      ) +
      this.constants_.INSIDE_CORNERS.pathTop;
    var i = t.height - 2 * this.constants_.INSIDE_CORNERS.height;
    (this.outlinePath_ +=
      Blockly.utils.svgPaths.lineOnAxis("H", o) +
      e +
      Blockly.utils.svgPaths.lineOnAxis("v", i) +
      this.constants_.INSIDE_CORNERS.pathBottom +
      Blockly.utils.svgPaths.lineOnAxis("H", t.xPos + t.width)),
      this.positionStatementInputConnection_(t);
  }),
  (Blockly.blockRendering.Drawer.prototype.drawCollapsedStack_ = function (
    t
  ) {}),
  (Blockly.blockRendering.Drawer.prototype.drawRightSideRow_ = function (t) {
    this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis(
      "V",
      t.yPos + t.height
    );
  }),
  (Blockly.blockRendering.Drawer.prototype.drawBottom_ = function () {
    var t = this.info_.bottomRow,
      e = t.elements;
    this.positionNextConnection_();
    for (var o, i = 0, n = "", l = e.length - 1; (o = e[l]); l--)
      Blockly.blockRendering.Types.isNextConnection(o)
        ? (n += o.shape.pathRight)
        : Blockly.blockRendering.Types.isLeftSquareCorner(o)
        ? (n += Blockly.utils.svgPaths.lineOnAxis("H", t.xPos))
        : Blockly.blockRendering.Types.isLeftRoundedCorner(o)
        ? (n += this.constants_.OUTSIDE_CORNERS.bottomLeft)
        : Blockly.blockRendering.Types.isRightRoundedCorner(o)
        ? ((n += this.constants_.OUTSIDE_CORNERS.bottomRight),
          (i = this.constants_.OUTSIDE_CORNERS.rightHeight))
        : Blockly.blockRendering.Types.isSpacer(o) &&
          (n += Blockly.utils.svgPaths.lineOnAxis("h", -1 * o.width));
    (this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis(
      "V",
      t.baseline - i
    )),
      (this.outlinePath_ += n);
  }),
  (Blockly.blockRendering.Drawer.prototype.drawLeft_ = function () {
    var t = this.info_.outputConnection;
    if ((this.positionOutputConnection_(), t)) {
      var e = t.connectionOffsetY + t.height;
      (t =
        "function" == typeof t.shape.pathUp
          ? t.shape.pathUp(t.height)
          : t.shape.pathUp),
        (this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis("V", e) + t);
    }
    this.outlinePath_ += "z";
  }),
  (Blockly.blockRendering.Drawer.prototype.drawInternals_ = function () {
    for (var t, e = 0; (t = this.info_.rows[e]); e++)
      for (var o, i = 0; (o = t.elements[i]); i++)
        Blockly.blockRendering.Types.isInlineInput(o)
          ? this.drawInlineInput_(o)
          : (Blockly.blockRendering.Types.isIcon(o) ||
              Blockly.blockRendering.Types.isField(o)) &&
            this.layoutField_(o);
  }),
  (Blockly.blockRendering.Drawer.prototype.layoutField_ = function (t) {
    if (Blockly.blockRendering.Types.isField(t)) var e = t.field.getSvgRoot();
    else Blockly.blockRendering.Types.isIcon(t) && (e = t.icon.iconGroup_);
    var o = t.centerline - t.height / 2,
      i = t.xPos,
      n = "";
    this.info_.RTL &&
      ((i = -(i + t.width)),
      t.flipRtl && ((i += t.width), (n = "scale(-1 1)"))),
      Blockly.blockRendering.Types.isIcon(t)
        ? (e.setAttribute("display", "block"),
          e.setAttribute("transform", "translate(" + i + "," + o + ")"),
          t.icon.computeIconLocation())
        : e.setAttribute("transform", "translate(" + i + "," + o + ")" + n),
      this.info_.isInsertionMarker && e.setAttribute("display", "none");
  }),
  (Blockly.blockRendering.Drawer.prototype.drawInlineInput_ = function (t) {
    var e = t.width,
      o = t.height,
      i = t.connectionOffsetY,
      n = t.connectionHeight + i;
    (this.inlinePath_ +=
      Blockly.utils.svgPaths.moveTo(
        t.xPos + t.connectionWidth,
        t.centerline - o / 2
      ) +
      Blockly.utils.svgPaths.lineOnAxis("v", i) +
      t.shape.pathDown +
      Blockly.utils.svgPaths.lineOnAxis("v", o - n) +
      Blockly.utils.svgPaths.lineOnAxis("h", e - t.connectionWidth) +
      Blockly.utils.svgPaths.lineOnAxis("v", -o) +
      "z"),
      this.positionInlineInputConnection_(t);
  }),
  (Blockly.blockRendering.Drawer.prototype.positionInlineInputConnection_ =
    function (t) {
      var e = t.centerline - t.height / 2;
      if (t.connectionModel) {
        var o = t.xPos + t.connectionWidth + t.connectionOffsetX;
        this.info_.RTL && (o *= -1),
          t.connectionModel.setOffsetInBlock(o, e + t.connectionOffsetY);
      }
    }),
  (Blockly.blockRendering.Drawer.prototype.positionStatementInputConnection_ =
    function (t) {
      var e = t.getLastInput();
      if (e.connectionModel) {
        var o = t.xPos + t.statementEdge + e.notchOffset;
        this.info_.RTL && (o *= -1),
          e.connectionModel.setOffsetInBlock(o, t.yPos);
      }
    }),
  (Blockly.blockRendering.Drawer.prototype.positionExternalValueConnection_ =
    function (t) {
      var e = t.getLastInput();
      if (e.connectionModel) {
        var o = t.xPos + t.width;
        this.info_.RTL && (o *= -1),
          e.connectionModel.setOffsetInBlock(o, t.yPos);
      }
    }),
  (Blockly.blockRendering.Drawer.prototype.positionPreviousConnection_ =
    function () {
      var t = this.info_.topRow;
      if (t.connection) {
        var e = t.xPos + t.notchOffset;
        t.connection.connectionModel.setOffsetInBlock(
          this.info_.RTL ? -e : e,
          0
        );
      }
    }),
  (Blockly.blockRendering.Drawer.prototype.positionNextConnection_ =
    function () {
      var t = this.info_.bottomRow;
      if (t.connection) {
        var e = t.connection,
          o = e.xPos;
        e.connectionModel.setOffsetInBlock(this.info_.RTL ? -o : o, t.baseline);
      }
    }),
  (Blockly.blockRendering.Drawer.prototype.positionOutputConnection_ =
    function () {
      if (this.info_.outputConnection) {
        var t =
          this.info_.startX + this.info_.outputConnection.connectionOffsetX;
        this.block_.outputConnection.setOffsetInBlock(
          this.info_.RTL ? -t : t,
          this.info_.outputConnection.connectionOffsetY
        );
      }
    }),
  (Blockly.blockRendering.PathObject = function (t, e, o) {
    (this.constants_ = o),
      (this.svgRoot = t),
      (this.svgPath = Blockly.utils.dom.createSvgElement(
        "path",
        { class: "blocklyPath" },
        this.svgRoot
      )),
      (this.style = e),
      (this.markerSvg_ = this.cursorSvg_ = null);
  }),
  (Blockly.blockRendering.PathObject.prototype.setPath = function (t) {
    this.svgPath.setAttribute("d", t);
  }),
  (Blockly.blockRendering.PathObject.prototype.flipRTL = function () {
    this.svgPath.setAttribute("transform", "scale(-1 1)");
  }),
  (Blockly.blockRendering.PathObject.prototype.setCursorSvg = function (t) {
    t
      ? (this.svgRoot.appendChild(t), (this.cursorSvg_ = t))
      : (this.cursorSvg_ = null);
  }),
  (Blockly.blockRendering.PathObject.prototype.setMarkerSvg = function (t) {
    t
      ? (this.cursorSvg_
          ? this.svgRoot.insertBefore(t, this.cursorSvg_)
          : this.svgRoot.appendChild(t),
        (this.markerSvg_ = t))
      : (this.markerSvg_ = null);
  }),
  (Blockly.blockRendering.PathObject.prototype.applyColour = function (t) {
    this.svgPath.setAttribute("stroke", this.style.colourTertiary),
      this.svgPath.setAttribute("fill", this.style.colourPrimary),
      this.updateShadow_(t.isShadow()),
      this.updateDisabled_(!t.isEnabled() || t.getInheritedDisabled());
  }),
  (Blockly.blockRendering.PathObject.prototype.setStyle = function (t) {
    this.style = t;
  }),
  (Blockly.blockRendering.PathObject.prototype.setClass_ = function (t, e) {
    e
      ? Blockly.utils.dom.addClass(this.svgRoot, t)
      : Blockly.utils.dom.removeClass(this.svgRoot, t);
  }),
  (Blockly.blockRendering.PathObject.prototype.updateHighlighted = function (
    t
  ) {
    t
      ? this.svgPath.setAttribute(
          "filter",
          "url(#" + this.constants_.embossFilterId + ")"
        )
      : this.svgPath.setAttribute("filter", "none");
  }),
  (Blockly.blockRendering.PathObject.prototype.updateShadow_ = function (t) {
    t &&
      (this.svgPath.setAttribute("stroke", "none"),
      this.svgPath.setAttribute("fill", this.style.colourSecondary));
  }),
  (Blockly.blockRendering.PathObject.prototype.updateDisabled_ = function (t) {
    this.setClass_("blocklyDisabled", t),
      t &&
        this.svgPath.setAttribute(
          "fill",
          "url(#" + this.constants_.disabledPatternId + ")"
        );
  }),
  (Blockly.blockRendering.PathObject.prototype.updateSelected = function (t) {
    this.setClass_("blocklySelected", t);
  }),
  (Blockly.blockRendering.PathObject.prototype.updateDraggingDelete = function (
    t
  ) {
    this.setClass_("blocklyDraggingDelete", t);
  }),
  (Blockly.blockRendering.PathObject.prototype.updateInsertionMarker =
    function (t) {
      this.setClass_("blocklyInsertionMarker", t);
    }),
  (Blockly.blockRendering.PathObject.prototype.updateMovable = function (t) {
    this.setClass_("blocklyDraggable", t);
  }),
  (Blockly.blockRendering.PathObject.prototype.updateReplacementHighlight =
    function (t) {
      this.setClass_("blocklyReplaceable", t);
    }),
  (Blockly.blockRendering.PathObject.prototype.updateShapeForInputHighlight =
    function (t, e) {}),
  (Blockly.blockRendering.Renderer = function (t) {
    (this.name = t), (this.constants_ = null);
  }),
  (Blockly.blockRendering.Renderer.prototype.init = function () {
    (this.constants_ = this.makeConstants_()), this.constants_.init();
  }),
  (Blockly.blockRendering.Renderer.prototype.makeConstants_ = function () {
    return new Blockly.blockRendering.ConstantProvider();
  }),
  (Blockly.blockRendering.Renderer.prototype.makeRenderInfo_ = function (t) {
    return new Blockly.blockRendering.RenderInfo(this, t);
  }),
  (Blockly.blockRendering.Renderer.prototype.makeDrawer_ = function (t, e) {
    return new Blockly.blockRendering.Drawer(t, e);
  }),
  (Blockly.blockRendering.Renderer.prototype.makeDebugger_ = function () {
    if (!Blockly.blockRendering.Debug)
      throw Error("Missing require for Blockly.blockRendering.Debug");
    return new Blockly.blockRendering.Debug();
  }),
  (Blockly.blockRendering.Renderer.prototype.makeMarkerDrawer = function (
    t,
    e
  ) {
    return new Blockly.blockRendering.MarkerSvg(t, this.getConstants(), e);
  }),
  (Blockly.blockRendering.Renderer.prototype.makePathObject = function (t, e) {
    return new Blockly.blockRendering.PathObject(t, e, this.constants_);
  }),
  (Blockly.blockRendering.Renderer.prototype.getConstants = function () {
    return this.constants_;
  }),
  (Blockly.blockRendering.Renderer.prototype.shouldHighlightConnection =
    function (t) {
      return !0;
    }),
  (Blockly.blockRendering.Renderer.prototype.shouldInsertDraggedBlock =
    function (t, e) {
      return (
        !e.isConnected() ||
        !!Blockly.Connection.lastConnectionInRow(
          t,
          e.targetConnection.getSourceBlock()
        )
      );
    }),
  (Blockly.blockRendering.Renderer.prototype.render = function (t) {
    Blockly.blockRendering.useDebugger &&
      !t.renderingDebugger &&
      (t.renderingDebugger = this.makeDebugger_());
    var e = this.makeRenderInfo_(t);
    e.measure(), this.makeDrawer_(t, e).draw();
  }),
  (Blockly.geras = {}),
  (Blockly.geras.ConstantProvider = function () {
    Blockly.geras.ConstantProvider.superClass_.constructor.call(this),
      (this.FIELD_TEXT_BASELINE_CENTER = !1),
      (this.DARK_PATH_OFFSET = 1),
      (this.MAX_BOTTOM_WIDTH = 30);
  }),
  Blockly.utils.object.inherits(
    Blockly.geras.ConstantProvider,
    Blockly.blockRendering.ConstantProvider
  ),
  (Blockly.geras.Highlighter = function (t) {
    (this.info_ = t),
      (this.inlineSteps_ = this.steps_ = ""),
      (this.RTL_ = this.info_.RTL),
      (t = t.getRenderer()),
      (this.constants_ = t.getConstants()),
      (this.highlightConstants_ = t.getHighlightConstants()),
      (this.highlightOffset_ = this.highlightConstants_.OFFSET),
      (this.outsideCornerPaths_ = this.highlightConstants_.OUTSIDE_CORNER),
      (this.insideCornerPaths_ = this.highlightConstants_.INSIDE_CORNER),
      (this.puzzleTabPaths_ = this.highlightConstants_.PUZZLE_TAB),
      (this.notchPaths_ = this.highlightConstants_.NOTCH),
      (this.startPaths_ = this.highlightConstants_.START_HAT),
      (this.jaggedTeethPaths_ = this.highlightConstants_.JAGGED_TEETH);
  }),
  (Blockly.geras.Highlighter.prototype.getPath = function () {
    return this.steps_ + "\n" + this.inlineSteps_;
  }),
  (Blockly.geras.Highlighter.prototype.drawTopCorner = function (t) {
    this.steps_ += Blockly.utils.svgPaths.moveBy(t.xPos, this.info_.startY);
    for (var e, o = 0; (e = t.elements[o]); o++)
      Blockly.blockRendering.Types.isLeftSquareCorner(e)
        ? (this.steps_ += this.highlightConstants_.START_POINT)
        : Blockly.blockRendering.Types.isLeftRoundedCorner(e)
        ? (this.steps_ += this.outsideCornerPaths_.topLeft(this.RTL_))
        : Blockly.blockRendering.Types.isPreviousConnection(e)
        ? (this.steps_ += this.notchPaths_.pathLeft)
        : Blockly.blockRendering.Types.isHat(e)
        ? (this.steps_ += this.startPaths_.path(this.RTL_))
        : Blockly.blockRendering.Types.isSpacer(e) &&
          0 != e.width &&
          (this.steps_ += Blockly.utils.svgPaths.lineOnAxis(
            "H",
            e.xPos + e.width - this.highlightOffset_
          ));
    this.steps_ += Blockly.utils.svgPaths.lineOnAxis(
      "H",
      t.xPos + t.width - this.highlightOffset_
    );
  }),
  (Blockly.geras.Highlighter.prototype.drawJaggedEdge_ = function (t) {
    this.info_.RTL &&
      ((this.steps_ += Blockly.utils.svgPaths.lineOnAxis(
        "H",
        t.width - this.highlightOffset_
      )),
      (this.steps_ += this.jaggedTeethPaths_.pathLeft),
      (this.steps_ += Blockly.utils.svgPaths.lineOnAxis(
        "v",
        t.height - this.jaggedTeethPaths_.height - this.highlightOffset_
      )));
  }),
  (Blockly.geras.Highlighter.prototype.drawValueInput = function (t) {
    var e = t.getLastInput();
    if (this.RTL_) {
      var o = t.height - e.connectionHeight;
      this.steps_ +=
        Blockly.utils.svgPaths.moveTo(
          e.xPos + e.width - this.highlightOffset_,
          t.yPos
        ) +
        this.puzzleTabPaths_.pathDown(this.RTL_) +
        Blockly.utils.svgPaths.lineOnAxis("v", o);
    } else
      this.steps_ +=
        Blockly.utils.svgPaths.moveTo(e.xPos + e.width, t.yPos) +
        this.puzzleTabPaths_.pathDown(this.RTL_);
  }),
  (Blockly.geras.Highlighter.prototype.drawStatementInput = function (t) {
    var e = t.getLastInput();
    if (this.RTL_) {
      var o = t.height - 2 * this.insideCornerPaths_.height;
      this.steps_ +=
        Blockly.utils.svgPaths.moveTo(e.xPos, t.yPos) +
        this.insideCornerPaths_.pathTop(this.RTL_) +
        Blockly.utils.svgPaths.lineOnAxis("v", o) +
        this.insideCornerPaths_.pathBottom(this.RTL_) +
        Blockly.utils.svgPaths.lineTo(
          t.width - e.xPos - this.insideCornerPaths_.width,
          0
        );
    } else
      this.steps_ +=
        Blockly.utils.svgPaths.moveTo(e.xPos, t.yPos + t.height) +
        this.insideCornerPaths_.pathBottom(this.RTL_) +
        Blockly.utils.svgPaths.lineTo(
          t.width - e.xPos - this.insideCornerPaths_.width,
          0
        );
  }),
  (Blockly.geras.Highlighter.prototype.drawRightSideRow = function (t) {
    var e = t.xPos + t.width - this.highlightOffset_;
    t.followsStatement &&
      (this.steps_ += Blockly.utils.svgPaths.lineOnAxis("H", e)),
      this.RTL_ &&
        ((this.steps_ += Blockly.utils.svgPaths.lineOnAxis("H", e)),
        t.height > this.highlightOffset_ &&
          (this.steps_ += Blockly.utils.svgPaths.lineOnAxis(
            "V",
            t.yPos + t.height - this.highlightOffset_
          )));
  }),
  (Blockly.geras.Highlighter.prototype.drawBottomRow = function (t) {
    if (this.RTL_)
      this.steps_ += Blockly.utils.svgPaths.lineOnAxis(
        "V",
        t.baseline - this.highlightOffset_
      );
    else {
      var e = this.info_.bottomRow.elements[0];
      Blockly.blockRendering.Types.isLeftSquareCorner(e)
        ? (this.steps_ += Blockly.utils.svgPaths.moveTo(
            t.xPos + this.highlightOffset_,
            t.baseline - this.highlightOffset_
          ))
        : Blockly.blockRendering.Types.isLeftRoundedCorner(e) &&
          ((this.steps_ += Blockly.utils.svgPaths.moveTo(t.xPos, t.baseline)),
          (this.steps_ += this.outsideCornerPaths_.bottomLeft()));
    }
  }),
  (Blockly.geras.Highlighter.prototype.drawLeft = function () {
    var t = this.info_.outputConnection;
    t &&
      ((t = t.connectionOffsetY + t.height),
      this.RTL_
        ? (this.steps_ += Blockly.utils.svgPaths.moveTo(this.info_.startX, t))
        : ((this.steps_ += Blockly.utils.svgPaths.moveTo(
            this.info_.startX + this.highlightOffset_,
            this.info_.bottomRow.baseline - this.highlightOffset_
          )),
          (this.steps_ += Blockly.utils.svgPaths.lineOnAxis("V", t))),
      (this.steps_ += this.puzzleTabPaths_.pathUp(this.RTL_))),
      this.RTL_ ||
        ((t = this.info_.topRow),
        Blockly.blockRendering.Types.isLeftRoundedCorner(t.elements[0])
          ? (this.steps_ += Blockly.utils.svgPaths.lineOnAxis(
              "V",
              this.outsideCornerPaths_.height
            ))
          : (this.steps_ += Blockly.utils.svgPaths.lineOnAxis(
              "V",
              t.capline + this.highlightOffset_
            )));
  }),
  (Blockly.geras.Highlighter.prototype.drawInlineInput = function (t) {
    var e = this.highlightOffset_,
      o = t.xPos + t.connectionWidth,
      i = t.centerline - t.height / 2,
      n = t.width - t.connectionWidth,
      l = i + e;
    this.RTL_
      ? ((i = t.connectionOffsetY - e),
        (t = t.height - (t.connectionOffsetY + t.connectionHeight) + e),
        (this.inlineSteps_ +=
          Blockly.utils.svgPaths.moveTo(o - e, l) +
          Blockly.utils.svgPaths.lineOnAxis("v", i) +
          this.puzzleTabPaths_.pathDown(this.RTL_) +
          Blockly.utils.svgPaths.lineOnAxis("v", t) +
          Blockly.utils.svgPaths.lineOnAxis("h", n)))
      : (this.inlineSteps_ +=
          Blockly.utils.svgPaths.moveTo(t.xPos + t.width + e, l) +
          Blockly.utils.svgPaths.lineOnAxis("v", t.height) +
          Blockly.utils.svgPaths.lineOnAxis("h", -n) +
          Blockly.utils.svgPaths.moveTo(o, i + t.connectionOffsetY) +
          this.puzzleTabPaths_.pathDown(this.RTL_));
  }),
  (Blockly.geras.InlineInput = function (t, e) {
    Blockly.geras.InlineInput.superClass_.constructor.call(this, t, e),
      this.connectedBlock &&
        ((this.width += this.constants_.DARK_PATH_OFFSET),
        (this.height += this.constants_.DARK_PATH_OFFSET));
  }),
  Blockly.utils.object.inherits(
    Blockly.geras.InlineInput,
    Blockly.blockRendering.InlineInput
  ),
  (Blockly.geras.StatementInput = function (t, e) {
    Blockly.geras.StatementInput.superClass_.constructor.call(this, t, e),
      this.connectedBlock && (this.height += this.constants_.DARK_PATH_OFFSET);
  }),
  Blockly.utils.object.inherits(
    Blockly.geras.StatementInput,
    Blockly.blockRendering.StatementInput
  ),
  (Blockly.geras.RenderInfo = function (t, e) {
    Blockly.geras.RenderInfo.superClass_.constructor.call(this, t, e);
  }),
  Blockly.utils.object.inherits(
    Blockly.geras.RenderInfo,
    Blockly.blockRendering.RenderInfo
  ),
  (Blockly.geras.RenderInfo.prototype.getRenderer = function () {
    return this.renderer_;
  }),
  (Blockly.geras.RenderInfo.prototype.populateBottomRow_ = function () {
    Blockly.geras.RenderInfo.superClass_.populateBottomRow_.call(this),
      (this.block_.inputList.length &&
        this.block_.inputList[this.block_.inputList.length - 1].type ==
          Blockly.NEXT_STATEMENT) ||
        (this.bottomRow.minHeight =
          this.constants_.MEDIUM_PADDING - this.constants_.DARK_PATH_OFFSET);
  }),
  (Blockly.geras.RenderInfo.prototype.addInput_ = function (t, e) {
    this.isInline && t.type == Blockly.INPUT_VALUE
      ? (e.elements.push(new Blockly.geras.InlineInput(this.constants_, t)),
        (e.hasInlineInput = !0))
      : t.type == Blockly.NEXT_STATEMENT
      ? (e.elements.push(new Blockly.geras.StatementInput(this.constants_, t)),
        (e.hasStatement = !0))
      : t.type == Blockly.INPUT_VALUE
      ? (e.elements.push(
          new Blockly.blockRendering.ExternalValueInput(this.constants_, t)
        ),
        (e.hasExternalInput = !0))
      : t.type == Blockly.DUMMY_INPUT &&
        ((e.minHeight = Math.max(
          e.minHeight,
          this.constants_.DUMMY_INPUT_MIN_HEIGHT
        )),
        (e.hasDummyInput = !0)),
      this.isInline || null != e.align || (e.align = t.align);
  }),
  (Blockly.geras.RenderInfo.prototype.addElemSpacing_ = function () {
    for (var t, e = !1, o = 0; (t = this.rows[o]); o++)
      t.hasExternalInput && (e = !0);
    for (o = 0; (t = this.rows[o]); o++) {
      var i = t.elements;
      if (
        ((t.elements = []),
        t.startsWithElemSpacer() &&
          t.elements.push(
            new Blockly.blockRendering.InRowSpacer(
              this.constants_,
              this.getInRowSpacing_(null, i[0])
            )
          ),
        i.length)
      ) {
        for (var n = 0; n < i.length - 1; n++) {
          t.elements.push(i[n]);
          var l = this.getInRowSpacing_(i[n], i[n + 1]);
          t.elements.push(
            new Blockly.blockRendering.InRowSpacer(this.constants_, l)
          );
        }
        t.elements.push(i[i.length - 1]),
          t.endsWithElemSpacer() &&
            ((l = this.getInRowSpacing_(i[i.length - 1], null)),
            e && t.hasDummyInput && (l += this.constants_.TAB_WIDTH),
            t.elements.push(
              new Blockly.blockRendering.InRowSpacer(this.constants_, l)
            ));
      }
    }
  }),
  (Blockly.geras.RenderInfo.prototype.getInRowSpacing_ = function (t, e) {
    if (!t)
      return e && Blockly.blockRendering.Types.isField(e) && e.isEditable
        ? this.constants_.MEDIUM_PADDING
        : e && Blockly.blockRendering.Types.isInlineInput(e)
        ? this.constants_.MEDIUM_LARGE_PADDING
        : e && Blockly.blockRendering.Types.isStatementInput(e)
        ? this.constants_.STATEMENT_INPUT_PADDING_LEFT
        : this.constants_.LARGE_PADDING;
    if (
      !Blockly.blockRendering.Types.isInput(t) &&
      (!e || Blockly.blockRendering.Types.isStatementInput(e))
    )
      return Blockly.blockRendering.Types.isField(t) && t.isEditable
        ? this.constants_.MEDIUM_PADDING
        : Blockly.blockRendering.Types.isIcon(t)
        ? 2 * this.constants_.LARGE_PADDING + 1
        : Blockly.blockRendering.Types.isHat(t)
        ? this.constants_.NO_PADDING
        : Blockly.blockRendering.Types.isPreviousOrNextConnection(t)
        ? this.constants_.LARGE_PADDING
        : Blockly.blockRendering.Types.isLeftRoundedCorner(t)
        ? this.constants_.MIN_BLOCK_WIDTH
        : Blockly.blockRendering.Types.isJaggedEdge(t)
        ? this.constants_.NO_PADDING
        : this.constants_.LARGE_PADDING;
    if (Blockly.blockRendering.Types.isInput(t) && !e) {
      if (Blockly.blockRendering.Types.isExternalInput(t))
        return this.constants_.NO_PADDING;
      if (Blockly.blockRendering.Types.isInlineInput(t))
        return this.constants_.LARGE_PADDING;
      if (Blockly.blockRendering.Types.isStatementInput(t))
        return this.constants_.NO_PADDING;
    }
    if (
      !Blockly.blockRendering.Types.isInput(t) &&
      e &&
      Blockly.blockRendering.Types.isInput(e)
    ) {
      if (t.isEditable) {
        if (
          Blockly.blockRendering.Types.isInlineInput(e) ||
          Blockly.blockRendering.Types.isExternalInput(e)
        )
          return this.constants_.SMALL_PADDING;
      } else {
        if (
          Blockly.blockRendering.Types.isInlineInput(e) ||
          Blockly.blockRendering.Types.isExternalInput(e)
        )
          return this.constants_.MEDIUM_LARGE_PADDING;
        if (Blockly.blockRendering.Types.isStatementInput(e))
          return this.constants_.LARGE_PADDING;
      }
      return this.constants_.LARGE_PADDING - 1;
    }
    if (
      Blockly.blockRendering.Types.isIcon(t) &&
      e &&
      !Blockly.blockRendering.Types.isInput(e)
    )
      return this.constants_.LARGE_PADDING;
    if (
      Blockly.blockRendering.Types.isInlineInput(t) &&
      e &&
      !Blockly.blockRendering.Types.isInput(e)
    )
      return e.isEditable
        ? this.constants_.MEDIUM_PADDING
        : this.constants_.LARGE_PADDING;
    if (Blockly.blockRendering.Types.isLeftSquareCorner(t) && e) {
      if (Blockly.blockRendering.Types.isHat(e))
        return this.constants_.NO_PADDING;
      if (Blockly.blockRendering.Types.isPreviousConnection(e))
        return e.notchOffset;
      if (Blockly.blockRendering.Types.isNextConnection(e))
        return (
          (t = ((this.RTL ? 1 : -1) * this.constants_.DARK_PATH_OFFSET) / 2),
          e.notchOffset + t
        );
    }
    if (Blockly.blockRendering.Types.isLeftRoundedCorner(t) && e) {
      if (Blockly.blockRendering.Types.isPreviousConnection(e))
        return e.notchOffset - this.constants_.CORNER_RADIUS;
      if (Blockly.blockRendering.Types.isNextConnection(e))
        return (
          (t = ((this.RTL ? 1 : -1) * this.constants_.DARK_PATH_OFFSET) / 2),
          e.notchOffset - this.constants_.CORNER_RADIUS + t
        );
    }
    return (!Blockly.blockRendering.Types.isInput(t) &&
      e &&
      !Blockly.blockRendering.Types.isInput(e) &&
      t.isEditable == e.isEditable) ||
      (e && Blockly.blockRendering.Types.isJaggedEdge(e))
      ? this.constants_.LARGE_PADDING
      : this.constants_.MEDIUM_PADDING;
  }),
  (Blockly.geras.RenderInfo.prototype.getSpacerRowHeight_ = function (t, e) {
    return Blockly.blockRendering.Types.isTopRow(t) &&
      Blockly.blockRendering.Types.isBottomRow(e)
      ? this.constants_.EMPTY_BLOCK_SPACER_HEIGHT
      : Blockly.blockRendering.Types.isTopRow(t) ||
        Blockly.blockRendering.Types.isBottomRow(e)
      ? this.constants_.NO_PADDING
      : t.hasExternalInput && e.hasExternalInput
      ? this.constants_.LARGE_PADDING
      : !t.hasStatement && e.hasStatement
      ? this.constants_.BETWEEN_STATEMENT_PADDING_Y
      : (t.hasStatement && e.hasStatement) ||
        (!t.hasStatement && e.hasDummyInput) ||
        t.hasDummyInput
      ? this.constants_.LARGE_PADDING
      : this.constants_.MEDIUM_PADDING;
  }),
  (Blockly.geras.RenderInfo.prototype.getElemCenterline_ = function (t, e) {
    if (Blockly.blockRendering.Types.isSpacer(e)) return t.yPos + e.height / 2;
    if (Blockly.blockRendering.Types.isBottomRow(t))
      return (
        (t = t.yPos + t.height - t.descenderHeight),
        Blockly.blockRendering.Types.isNextConnection(e)
          ? t + e.height / 2
          : t - e.height / 2
      );
    if (Blockly.blockRendering.Types.isTopRow(t))
      return Blockly.blockRendering.Types.isHat(e)
        ? t.capline - e.height / 2
        : t.capline + e.height / 2;
    var o = t.yPos;
    return (
      Blockly.blockRendering.Types.isField(e) ||
      Blockly.blockRendering.Types.isIcon(e)
        ? ((o += e.height / 2),
          (t.hasInlineInput || t.hasStatement) &&
            e.height + this.constants_.TALL_INPUT_FIELD_OFFSET_Y <= t.height &&
            (o += this.constants_.TALL_INPUT_FIELD_OFFSET_Y))
        : (o = Blockly.blockRendering.Types.isInlineInput(e)
            ? o + e.height / 2
            : o + t.height / 2),
      o
    );
  }),
  (Blockly.geras.RenderInfo.prototype.alignRowElements_ = function () {
    if (this.isInline) {
      for (
        var t, e = 0, o = null, i = this.rows.length - 1;
        (t = this.rows[i]);
        i--
      )
        (t.nextRightEdge = e),
          Blockly.blockRendering.Types.isInputRow(t) &&
            (t.hasStatement && this.alignStatementRow_(t),
            o && o.hasStatement && t.width < o.width
              ? (t.nextRightEdge = o.width)
              : (e = t.width),
            (o = t));
      for (i = e = 0; (t = this.rows[i]); i++)
        t.hasStatement
          ? (e = this.getDesiredRowWidth_(t))
          : Blockly.blockRendering.Types.isSpacer(t)
          ? (t.width = Math.max(e, t.nextRightEdge))
          : (0 < (e = Math.max(e, t.nextRightEdge) - t.width) &&
              this.addAlignmentPadding_(t, e),
            (e = t.width));
    } else Blockly.geras.RenderInfo.superClass_.alignRowElements_.call(this);
  }),
  (Blockly.geras.RenderInfo.prototype.getDesiredRowWidth_ = function (t) {
    return this.isInline && t.hasStatement
      ? this.statementEdge + this.constants_.MAX_BOTTOM_WIDTH + this.startX
      : Blockly.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this, t);
  }),
  (Blockly.geras.RenderInfo.prototype.finalize_ = function () {
    for (var t, e = 0, o = 0, i = 0; (t = this.rows[i]); i++) {
      (t.yPos = o),
        (t.xPos = this.startX),
        (o += t.height),
        (e = Math.max(e, t.widthWithConnectedBlocks));
      var n = o - this.topRow.ascenderHeight;
      t == this.bottomRow &&
        n < this.constants_.MIN_BLOCK_HEIGHT &&
        ((n = this.constants_.MIN_BLOCK_HEIGHT - n),
        (this.bottomRow.height += n),
        (o += n)),
        this.recordElemPositions_(t);
    }
    this.outputConnection &&
      this.block_.nextConnection &&
      this.block_.nextConnection.isConnected() &&
      (e = Math.max(
        e,
        this.block_.nextConnection.targetBlock().getHeightWidth().width -
          this.constants_.DARK_PATH_OFFSET
      )),
      (this.bottomRow.baseline = o - this.bottomRow.descenderHeight),
      (this.widthWithChildren =
        e + this.startX + this.constants_.DARK_PATH_OFFSET),
      (this.width += this.constants_.DARK_PATH_OFFSET),
      (this.height = o + this.constants_.DARK_PATH_OFFSET),
      (this.startY = this.topRow.capline);
  }),
  (Blockly.geras.Drawer = function (t, e) {
    Blockly.geras.Drawer.superClass_.constructor.call(this, t, e),
      (this.highlighter_ = new Blockly.geras.Highlighter(e));
  }),
  Blockly.utils.object.inherits(
    Blockly.geras.Drawer,
    Blockly.blockRendering.Drawer
  ),
  (Blockly.geras.Drawer.prototype.draw = function () {
    this.hideHiddenIcons_(), this.drawOutline_(), this.drawInternals_();
    var t = this.block_.pathObject;
    t.setPath(this.outlinePath_ + "\n" + this.inlinePath_),
      t.setHighlightPath(this.highlighter_.getPath()),
      this.info_.RTL && t.flipRTL(),
      Blockly.blockRendering.useDebugger &&
        this.block_.renderingDebugger.drawDebug(this.block_, this.info_),
      this.recordSizeOnBlock_();
  }),
  (Blockly.geras.Drawer.prototype.drawTop_ = function () {
    this.highlighter_.drawTopCorner(this.info_.topRow),
      this.highlighter_.drawRightSideRow(this.info_.topRow),
      Blockly.geras.Drawer.superClass_.drawTop_.call(this);
  }),
  (Blockly.geras.Drawer.prototype.drawJaggedEdge_ = function (t) {
    this.highlighter_.drawJaggedEdge_(t),
      Blockly.geras.Drawer.superClass_.drawJaggedEdge_.call(this, t);
  }),
  (Blockly.geras.Drawer.prototype.drawValueInput_ = function (t) {
    this.highlighter_.drawValueInput(t),
      Blockly.geras.Drawer.superClass_.drawValueInput_.call(this, t);
  }),
  (Blockly.geras.Drawer.prototype.drawStatementInput_ = function (t) {
    this.highlighter_.drawStatementInput(t),
      Blockly.geras.Drawer.superClass_.drawStatementInput_.call(this, t);
  }),
  (Blockly.geras.Drawer.prototype.drawRightSideRow_ = function (t) {
    this.highlighter_.drawRightSideRow(t),
      (this.outlinePath_ +=
        Blockly.utils.svgPaths.lineOnAxis("H", t.xPos + t.width) +
        Blockly.utils.svgPaths.lineOnAxis("V", t.yPos + t.height));
  }),
  (Blockly.geras.Drawer.prototype.drawBottom_ = function () {
    this.highlighter_.drawBottomRow(this.info_.bottomRow),
      Blockly.geras.Drawer.superClass_.drawBottom_.call(this);
  }),
  (Blockly.geras.Drawer.prototype.drawLeft_ = function () {
    this.highlighter_.drawLeft(),
      Blockly.geras.Drawer.superClass_.drawLeft_.call(this);
  }),
  (Blockly.geras.Drawer.prototype.drawInlineInput_ = function (t) {
    this.highlighter_.drawInlineInput(t),
      Blockly.geras.Drawer.superClass_.drawInlineInput_.call(this, t);
  }),
  (Blockly.geras.Drawer.prototype.positionInlineInputConnection_ = function (
    t
  ) {
    var e = t.centerline - t.height / 2;
    if (t.connectionModel) {
      var o = t.xPos + t.connectionWidth + this.constants_.DARK_PATH_OFFSET;
      this.info_.RTL && (o *= -1),
        t.connectionModel.setOffsetInBlock(
          o,
          e + t.connectionOffsetY + this.constants_.DARK_PATH_OFFSET
        );
    }
  }),
  (Blockly.geras.Drawer.prototype.positionStatementInputConnection_ = function (
    t
  ) {
    var e = t.getLastInput();
    if (e.connectionModel) {
      var o = t.xPos + t.statementEdge + e.notchOffset;
      (o = this.info_.RTL ? -1 * o : o + this.constants_.DARK_PATH_OFFSET),
        e.connectionModel.setOffsetInBlock(
          o,
          t.yPos + this.constants_.DARK_PATH_OFFSET
        );
    }
  }),
  (Blockly.geras.Drawer.prototype.positionExternalValueConnection_ = function (
    t
  ) {
    var e = t.getLastInput();
    if (e.connectionModel) {
      var o = t.xPos + t.width + this.constants_.DARK_PATH_OFFSET;
      this.info_.RTL && (o *= -1),
        e.connectionModel.setOffsetInBlock(o, t.yPos);
    }
  }),
  (Blockly.geras.Drawer.prototype.positionNextConnection_ = function () {
    var t = this.info_.bottomRow;
    if (t.connection) {
      var e = t.connection,
        o = e.xPos;
      e.connectionModel.setOffsetInBlock(
        (this.info_.RTL ? -o : o) + this.constants_.DARK_PATH_OFFSET / 2,
        t.baseline + this.constants_.DARK_PATH_OFFSET
      );
    }
  }),
  (Blockly.geras.HighlightConstantProvider = function (t) {
    (this.constantProvider = t),
      (this.OFFSET = 0.5),
      (this.START_POINT = Blockly.utils.svgPaths.moveBy(
        this.OFFSET,
        this.OFFSET
      )),
      (this.INSIDE_CORNER = this.makeInsideCorner()),
      (this.OUTSIDE_CORNER = this.makeOutsideCorner()),
      (this.PUZZLE_TAB = this.makePuzzleTab()),
      (this.NOTCH = this.makeNotch()),
      (this.JAGGED_TEETH = this.makeJaggedTeeth()),
      (this.START_HAT = this.makeStartHat());
  }),
  (Blockly.geras.HighlightConstantProvider.prototype.makeInsideCorner =
    function () {
      var t = this.constantProvider.CORNER_RADIUS,
        e = this.OFFSET,
        o = (1 - Math.SQRT1_2) * (t + e) - e,
        i =
          Blockly.utils.svgPaths.moveBy(o, o) +
          Blockly.utils.svgPaths.arc(
            "a",
            "0 0,0",
            t,
            Blockly.utils.svgPaths.point(-o - e, t - o)
          ),
        n = Blockly.utils.svgPaths.arc(
          "a",
          "0 0,0",
          t + e,
          Blockly.utils.svgPaths.point(t + e, t + e)
        ),
        l =
          Blockly.utils.svgPaths.moveBy(o, -o) +
          Blockly.utils.svgPaths.arc(
            "a",
            "0 0,0",
            t + e,
            Blockly.utils.svgPaths.point(t - o, o + e)
          );
      return {
        width: t + e,
        height: t,
        pathTop: function (t) {
          return t ? i : "";
        },
        pathBottom: function (t) {
          return t ? n : l;
        },
      };
    }),
  (Blockly.geras.HighlightConstantProvider.prototype.makeOutsideCorner =
    function () {
      var t = this.constantProvider.CORNER_RADIUS,
        e = this.OFFSET,
        o = (1 - Math.SQRT1_2) * (t - e) + e,
        i =
          Blockly.utils.svgPaths.moveBy(o, o) +
          Blockly.utils.svgPaths.arc(
            "a",
            "0 0,1",
            t - e,
            Blockly.utils.svgPaths.point(t - o, -o + e)
          ),
        n =
          Blockly.utils.svgPaths.moveBy(e, t) +
          Blockly.utils.svgPaths.arc(
            "a",
            "0 0,1",
            t - e,
            Blockly.utils.svgPaths.point(t, -t + e)
          ),
        l = -o,
        r =
          Blockly.utils.svgPaths.moveBy(o, l) +
          Blockly.utils.svgPaths.arc(
            "a",
            "0 0,1",
            t - e,
            Blockly.utils.svgPaths.point(-o + e, -l - t)
          );
      return {
        height: t,
        topLeft: function (t) {
          return t ? i : n;
        },
        bottomLeft: function () {
          return r;
        },
      };
    }),
  (Blockly.geras.HighlightConstantProvider.prototype.makePuzzleTab =
    function () {
      var t = this.constantProvider.TAB_WIDTH,
        e = this.constantProvider.TAB_HEIGHT,
        o =
          Blockly.utils.svgPaths.moveBy(-2, 3.4 - e) +
          Blockly.utils.svgPaths.lineTo(-0.45 * t, -2.1),
        i =
          Blockly.utils.svgPaths.lineOnAxis("v", 2.5) +
          Blockly.utils.svgPaths.moveBy(0.97 * -t, 2.5) +
          Blockly.utils.svgPaths.curve("q", [
            Blockly.utils.svgPaths.point(0.05 * -t, 10),
            Blockly.utils.svgPaths.point(0.3 * t, 9.5),
          ]) +
          Blockly.utils.svgPaths.moveBy(0.67 * t, -1.9) +
          Blockly.utils.svgPaths.lineOnAxis("v", 2.5),
        n =
          Blockly.utils.svgPaths.lineOnAxis("v", -1.5) +
          Blockly.utils.svgPaths.moveBy(-0.92 * t, -0.5) +
          Blockly.utils.svgPaths.curve("q", [
            Blockly.utils.svgPaths.point(-0.19 * t, -5.5),
            Blockly.utils.svgPaths.point(0, -11),
          ]) +
          Blockly.utils.svgPaths.moveBy(0.92 * t, 1),
        l =
          Blockly.utils.svgPaths.moveBy(-5, e - 0.7) +
          Blockly.utils.svgPaths.lineTo(0.46 * t, -2.1);
      return {
        width: t,
        height: e,
        pathUp: function (t) {
          return t ? o : n;
        },
        pathDown: function (t) {
          return t ? i : l;
        },
      };
    }),
  (Blockly.geras.HighlightConstantProvider.prototype.makeNotch = function () {
    return {
      pathLeft:
        Blockly.utils.svgPaths.lineOnAxis("h", this.OFFSET) +
        this.constantProvider.NOTCH.pathLeft,
    };
  }),
  (Blockly.geras.HighlightConstantProvider.prototype.makeJaggedTeeth =
    function () {
      return {
        pathLeft:
          Blockly.utils.svgPaths.lineTo(5.1, 2.6) +
          Blockly.utils.svgPaths.moveBy(-10.2, 6.8) +
          Blockly.utils.svgPaths.lineTo(5.1, 2.6),
      };
    }),
  (Blockly.geras.HighlightConstantProvider.prototype.makeStartHat =
    function () {
      var t = this.constantProvider.START_HAT.height,
        e =
          Blockly.utils.svgPaths.moveBy(25, -8.7) +
          Blockly.utils.svgPaths.curve("c", [
            Blockly.utils.svgPaths.point(29.7, -6.2),
            Blockly.utils.svgPaths.point(57.2, -0.5),
            Blockly.utils.svgPaths.point(75, 8.7),
          ]),
        o =
          Blockly.utils.svgPaths.curve("c", [
            Blockly.utils.svgPaths.point(17.8, -9.2),
            Blockly.utils.svgPaths.point(45.3, -14.9),
            Blockly.utils.svgPaths.point(75, -8.7),
          ]) + Blockly.utils.svgPaths.moveTo(100.5, t + 0.5);
      return {
        path: function (t) {
          return t ? e : o;
        },
      };
    }),
  (Blockly.geras.PathObject = function (t, e, o) {
    (this.constants_ = o),
      (this.svgRoot = t),
      (this.svgPathDark = Blockly.utils.dom.createSvgElement(
        "path",
        { class: "blocklyPathDark", transform: "translate(1,1)" },
        this.svgRoot
      )),
      (this.svgPath = Blockly.utils.dom.createSvgElement(
        "path",
        { class: "blocklyPath" },
        this.svgRoot
      )),
      (this.svgPathLight = Blockly.utils.dom.createSvgElement(
        "path",
        { class: "blocklyPathLight" },
        this.svgRoot
      )),
      (this.colourDark = "#000000"),
      (this.style = e);
  }),
  Blockly.utils.object.inherits(
    Blockly.geras.PathObject,
    Blockly.blockRendering.PathObject
  ),
  (Blockly.geras.PathObject.prototype.setPath = function (t) {
    this.svgPath.setAttribute("d", t), this.svgPathDark.setAttribute("d", t);
  }),
  (Blockly.geras.PathObject.prototype.setHighlightPath = function (t) {
    this.svgPathLight.setAttribute("d", t);
  }),
  (Blockly.geras.PathObject.prototype.flipRTL = function () {
    this.svgPath.setAttribute("transform", "scale(-1 1)"),
      this.svgPathLight.setAttribute("transform", "scale(-1 1)"),
      this.svgPathDark.setAttribute("transform", "translate(1,1) scale(-1 1)");
  }),
  (Blockly.geras.PathObject.prototype.applyColour = function (t) {
    (this.svgPathLight.style.display = ""),
      (this.svgPathDark.style.display = ""),
      this.svgPathLight.setAttribute("stroke", this.style.colourTertiary),
      this.svgPathDark.setAttribute("fill", this.colourDark),
      Blockly.geras.PathObject.superClass_.applyColour.call(this, t),
      this.svgPath.setAttribute("stroke", "none");
  }),
  (Blockly.geras.PathObject.prototype.setStyle = function (t) {
    (this.style = t),
      (this.colourDark =
        Blockly.utils.colour.blend("#000", this.style.colourPrimary, 0.2) ||
        this.colourDark);
  }),
  (Blockly.geras.PathObject.prototype.updateHighlighted = function (t) {
    t
      ? (this.svgPath.setAttribute(
          "filter",
          "url(#" + this.constants_.embossFilterId + ")"
        ),
        (this.svgPathLight.style.display = "none"))
      : (this.svgPath.setAttribute("filter", "none"),
        (this.svgPathLight.style.display = "inline"));
  }),
  (Blockly.geras.PathObject.prototype.updateShadow_ = function (t) {
    t &&
      ((this.svgPathLight.style.display = "none"),
      this.svgPathDark.setAttribute("fill", this.style.colourSecondary),
      this.svgPath.setAttribute("stroke", "none"),
      this.svgPath.setAttribute("fill", this.style.colourSecondary));
  }),
  (Blockly.geras.PathObject.prototype.updateDisabled_ = function (t) {
    Blockly.geras.PathObject.superClass_.updateDisabled_.call(this, t),
      t && this.svgPath.setAttribute("stroke", "none");
  }),
  (Blockly.geras.Renderer = function (t) {
    Blockly.geras.Renderer.superClass_.constructor.call(this, t),
      (this.highlightConstants_ = null);
  }),
  Blockly.utils.object.inherits(
    Blockly.geras.Renderer,
    Blockly.blockRendering.Renderer
  ),
  (Blockly.geras.Renderer.prototype.init = function () {
    Blockly.geras.Renderer.superClass_.init.call(this),
      (this.highlightConstants_ = this.makeHighlightConstants_());
  }),
  (Blockly.geras.Renderer.prototype.makeConstants_ = function () {
    return new Blockly.geras.ConstantProvider();
  }),
  (Blockly.geras.Renderer.prototype.makeRenderInfo_ = function (t) {
    return new Blockly.geras.RenderInfo(this, t);
  }),
  (Blockly.geras.Renderer.prototype.makeDrawer_ = function (t, e) {
    return new Blockly.geras.Drawer(t, e);
  }),
  (Blockly.geras.Renderer.prototype.makePathObject = function (t, e) {
    return new Blockly.geras.PathObject(t, e, this.getConstants());
  }),
  (Blockly.geras.Renderer.prototype.makeHighlightConstants_ = function () {
    return new Blockly.geras.HighlightConstantProvider(this.getConstants());
  }),
  (Blockly.geras.Renderer.prototype.getHighlightConstants = function () {
    return this.highlightConstants_;
  }),
  Blockly.blockRendering.register("geras", Blockly.geras.Renderer),
  (Blockly.zelos = {}),
  (Blockly.zelos.ConstantProvider = function () {
    Blockly.zelos.ConstantProvider.superClass_.constructor.call(this),
      (this.SMALL_PADDING = this.GRID_UNIT = 4),
      (this.MEDIUM_PADDING = 2 * this.GRID_UNIT),
      (this.MEDIUM_LARGE_PADDING = 3 * this.GRID_UNIT),
      (this.LARGE_PADDING = 4 * this.GRID_UNIT),
      (this.CORNER_RADIUS = 1 * this.GRID_UNIT),
      (this.NOTCH_WIDTH = 9 * this.GRID_UNIT),
      (this.NOTCH_HEIGHT = 2 * this.GRID_UNIT),
      (this.STATEMENT_INPUT_NOTCH_OFFSET = this.NOTCH_OFFSET_LEFT =
        3 * this.GRID_UNIT),
      (this.MIN_BLOCK_WIDTH = 2 * this.GRID_UNIT),
      (this.MIN_BLOCK_HEIGHT = 12 * this.GRID_UNIT),
      (this.EMPTY_STATEMENT_INPUT_HEIGHT = 6 * this.GRID_UNIT),
      (this.TAB_OFFSET_FROM_TOP = 0),
      (this.TOP_ROW_MIN_HEIGHT = this.GRID_UNIT),
      (this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT = this.LARGE_PADDING),
      (this.BOTTOM_ROW_MIN_HEIGHT = this.GRID_UNIT),
      (this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT = 6 * this.GRID_UNIT),
      (this.STATEMENT_BOTTOM_SPACER = -this.NOTCH_HEIGHT),
      (this.STATEMENT_INPUT_SPACER_MIN_WIDTH = 40 * this.GRID_UNIT),
      (this.STATEMENT_INPUT_PADDING_LEFT = 4 * this.GRID_UNIT),
      (this.EMPTY_INLINE_INPUT_PADDING = 4 * this.GRID_UNIT),
      (this.EMPTY_INLINE_INPUT_HEIGHT = 8 * this.GRID_UNIT),
      (this.DUMMY_INPUT_MIN_HEIGHT = 8 * this.GRID_UNIT),
      (this.DUMMY_INPUT_SHADOW_MIN_HEIGHT = 6 * this.GRID_UNIT),
      (this.CURSOR_WS_WIDTH = 20 * this.GRID_UNIT),
      (this.CURSOR_COLOUR = "#ffa200"),
      (this.CURSOR_RADIUS = 5),
      (this.JAGGED_TEETH_WIDTH = this.JAGGED_TEETH_HEIGHT = 0),
      (this.START_HAT_HEIGHT = 22),
      (this.START_HAT_WIDTH = 96),
      (this.SHAPES = {
        HEXAGONAL: 1,
        ROUND: 2,
        SQUARE: 3,
        PUZZLE: 4,
        NOTCH: 5,
      }),
      (this.SHAPE_IN_SHAPE_PADDING = {
        1: {
          0: 5 * this.GRID_UNIT,
          1: 2 * this.GRID_UNIT,
          2: 5 * this.GRID_UNIT,
          3: 5 * this.GRID_UNIT,
        },
        2: {
          0: 3 * this.GRID_UNIT,
          1: 3 * this.GRID_UNIT,
          2: 1 * this.GRID_UNIT,
          3: 2 * this.GRID_UNIT,
        },
        3: {
          0: 2 * this.GRID_UNIT,
          1: 2 * this.GRID_UNIT,
          2: 2 * this.GRID_UNIT,
          3: 2 * this.GRID_UNIT,
        },
      }),
      (this.FULL_BLOCK_FIELDS = !0),
      (this.FIELD_TEXT_FONTSIZE = 3 * this.GRID_UNIT),
      (this.FIELD_TEXT_FONTWEIGHT = "bold"),
      (this.FIELD_TEXT_FONTFAMILY =
        '"Helvetica Neue", "Segoe UI", Helvetica, sans-serif'),
      (this.FIELD_TEXT_BASELINE_Y = this.FIELD_TEXT_HEIGHT = 13.1),
      (this.FIELD_BORDER_RECT_RADIUS = this.CORNER_RADIUS),
      (this.FIELD_BORDER_RECT_X_PADDING = 2 * this.GRID_UNIT),
      (this.FIELD_BORDER_RECT_Y_PADDING = 1 * this.GRID_UNIT),
      (this.FIELD_BORDER_RECT_HEIGHT = 8 * this.GRID_UNIT),
      (this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT = 8 * this.GRID_UNIT),
      (this.FIELD_DROPDOWN_SVG_ARROW =
        this.FIELD_DROPDOWN_COLOURED_DIV =
        this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW =
          !0),
      (this.FIELD_DROPDOWN_SVG_ARROW_PADDING =
        this.FIELD_BORDER_RECT_X_PADDING),
      (this.FIELD_TEXTINPUT_BOX_SHADOW = !0),
      (this.FIELD_TEXT_Y_OFFSET = Blockly.utils.userAgent.CHROME ? -0.45 : 0),
      (this.FIELD_COLOUR_FULL_BLOCK = !0),
      (this.FIELD_COLOUR_DEFAULT_WIDTH = 2 * this.GRID_UNIT),
      (this.FIELD_COLOUR_DEFAULT_HEIGHT = 4 * this.GRID_UNIT),
      (this.FIELD_CHECKBOX_X_OFFSET = this.FIELD_BORDER_RECT_X_PADDING - 3),
      (this.FIELD_CHECKBOX_Y_OFFSET = 22),
      (this.FIELD_CHECKBOX_DEFAULT_WIDTH = 6 * this.GRID_UNIT),
      (this.selectedGlowFilterId = ""),
      (this.selectedGlowFilter_ = null),
      (this.replacementGlowFilterId = ""),
      (this.replacementGlowFilter_ = null);
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.ConstantProvider,
    Blockly.blockRendering.ConstantProvider
  ),
  (Blockly.zelos.ConstantProvider.prototype.init = function () {
    Blockly.zelos.ConstantProvider.superClass_.init.call(this),
      (this.HEXAGONAL = this.makeHexagonal()),
      (this.ROUNDED = this.makeRounded()),
      (this.SQUARED = this.makeSquared()),
      (this.STATEMENT_INPUT_NOTCH_OFFSET += this.INSIDE_CORNERS.rightWidth);
  }),
  (Blockly.zelos.ConstantProvider.prototype.dispose = function () {
    Blockly.zelos.ConstantProvider.superClass_.dispose.call(this),
      this.selectedGlowFilter_ &&
        Blockly.utils.dom.removeNode(this.selectedGlowFilter_);
  }),
  (Blockly.zelos.ConstantProvider.prototype.makeStartHat = function () {
    var t = this.START_HAT_HEIGHT,
      e = this.START_HAT_WIDTH;
    return {
      height: t,
      width: e,
      path: Blockly.utils.svgPaths.curve("c", [
        Blockly.utils.svgPaths.point(25, -t),
        Blockly.utils.svgPaths.point(71, -t),
        Blockly.utils.svgPaths.point(e, 0),
      ]),
    };
  }),
  (Blockly.zelos.ConstantProvider.prototype.makeHexagonal = function () {
    function t(t, e, o) {
      var i = t / 2;
      return (
        (o = o ? -1 : 1),
        (t = ((e ? -1 : 1) * t) / 2),
        Blockly.utils.svgPaths.lineTo(-o * i, t) +
          Blockly.utils.svgPaths.lineTo(o * i, t)
      );
    }
    return {
      type: this.SHAPES.HEXAGONAL,
      isDynamic: !0,
      width: function (t) {
        return t / 2;
      },
      height: function (t) {
        return t;
      },
      connectionOffsetY: function (t) {
        return t / 2;
      },
      connectionOffsetX: function (t) {
        return -t;
      },
      pathDown: function (e) {
        return t(e, !1, !1);
      },
      pathUp: function (e) {
        return t(e, !0, !1);
      },
      pathRightDown: function (e) {
        return t(e, !1, !0);
      },
      pathRightUp: function (e) {
        return t(e, !1, !0);
      },
    };
  }),
  (Blockly.zelos.ConstantProvider.prototype.makeRounded = function () {
    function t(t, e, o) {
      return (
        (t /= 2),
        Blockly.utils.svgPaths.arc(
          "a",
          "0 0 " + (e || o ? 1 : 0),
          t,
          Blockly.utils.svgPaths.point(0, (e ? -1 : 1) * t * 2)
        )
      );
    }
    return {
      type: this.SHAPES.ROUND,
      isDynamic: !0,
      width: function (t) {
        return t / 2;
      },
      height: function (t) {
        return t;
      },
      connectionOffsetY: function (t) {
        return t / 2;
      },
      connectionOffsetX: function (t) {
        return -t;
      },
      pathDown: function (e) {
        return t(e, !1, !1);
      },
      pathUp: function (e) {
        return t(e, !0, !1);
      },
      pathRightDown: function (e) {
        return t(e, !1, !0);
      },
      pathRightUp: function (e) {
        return t(e, !1, !0);
      },
    };
  }),
  (Blockly.zelos.ConstantProvider.prototype.makeSquared = function () {
    function t(t, o, i) {
      return (
        (t -= 2 * e),
        Blockly.utils.svgPaths.arc(
          "a",
          "0 0,1",
          e,
          Blockly.utils.svgPaths.point((o ? -1 : 1) * e, (o ? -1 : 1) * e)
        ) +
          Blockly.utils.svgPaths.lineOnAxis("v", (i ? 1 : -1) * t) +
          Blockly.utils.svgPaths.arc(
            "a",
            "0 0,1",
            e,
            Blockly.utils.svgPaths.point((o ? 1 : -1) * e, (o ? -1 : 1) * e)
          )
      );
    }
    var e = this.CORNER_RADIUS;
    return {
      type: this.SHAPES.SQUARE,
      isDynamic: !0,
      width: function (t) {
        return e;
      },
      height: function (t) {
        return t;
      },
      connectionOffsetY: function (t) {
        return t / 2;
      },
      connectionOffsetX: function (t) {
        return -t;
      },
      pathDown: function (e) {
        return t(e, !1, !1);
      },
      pathUp: function (e) {
        return t(e, !0, !1);
      },
      pathRightDown: function (e) {
        return t(e, !1, !0);
      },
      pathRightUp: function (e) {
        return t(e, !1, !0);
      },
    };
  }),
  (Blockly.zelos.ConstantProvider.prototype.shapeFor = function (t) {
    var e = t.getCheck();
    switch (
      (!e && t.targetConnection && (e = t.targetConnection.getCheck()), t.type)
    ) {
      case Blockly.INPUT_VALUE:
      case Blockly.OUTPUT_VALUE:
        if (null != (t = t.getSourceBlock().getOutputShape()))
          switch (t) {
            case this.SHAPES.HEXAGONAL:
              return this.HEXAGONAL;
            case this.SHAPES.ROUND:
              return this.ROUNDED;
            case this.SHAPES.SQUARE:
              return this.SQUARED;
          }
        return e && -1 != e.indexOf("Boolean")
          ? this.HEXAGONAL
          : ((e && -1 != e.indexOf("Number")) || (e && e.indexOf("String")),
            this.ROUNDED);
      case Blockly.PREVIOUS_STATEMENT:
      case Blockly.NEXT_STATEMENT:
        return this.NOTCH;
      default:
        throw Error("Unknown type");
    }
  }),
  (Blockly.zelos.ConstantProvider.prototype.makeNotch = function () {
    function t(t) {
      return (
        Blockly.utils.svgPaths.curve("c", [
          Blockly.utils.svgPaths.point((t * n) / 2, 0),
          Blockly.utils.svgPaths.point((t * n * 3) / 4, r / 2),
          Blockly.utils.svgPaths.point(t * n, r),
        ]) +
        Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(t * n, l)]) +
        Blockly.utils.svgPaths.curve("c", [
          Blockly.utils.svgPaths.point((t * n) / 4, r / 2),
          Blockly.utils.svgPaths.point((t * n) / 2, r),
          Blockly.utils.svgPaths.point(t * n, r),
        ]) +
        Blockly.utils.svgPaths.lineOnAxis("h", t * i) +
        Blockly.utils.svgPaths.curve("c", [
          Blockly.utils.svgPaths.point((t * n) / 2, 0),
          Blockly.utils.svgPaths.point((t * n * 3) / 4, -r / 2),
          Blockly.utils.svgPaths.point(t * n, -r),
        ]) +
        Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(t * n, -l)]) +
        Blockly.utils.svgPaths.curve("c", [
          Blockly.utils.svgPaths.point((t * n) / 4, -r / 2),
          Blockly.utils.svgPaths.point((t * n) / 2, -r),
          Blockly.utils.svgPaths.point(t * n, -r),
        ])
      );
    }
    var e = this.NOTCH_WIDTH,
      o = this.NOTCH_HEIGHT,
      i = e / 3,
      n = i / 3,
      l = o / 2,
      r = l / 2,
      s = t(1),
      a = t(-1);
    return {
      type: this.SHAPES.NOTCH,
      width: e,
      height: o,
      pathLeft: s,
      pathRight: a,
    };
  }),
  (Blockly.zelos.ConstantProvider.prototype.makeInsideCorners = function () {
    var t = this.CORNER_RADIUS,
      e = Blockly.utils.svgPaths.arc(
        "a",
        "0 0,0",
        t,
        Blockly.utils.svgPaths.point(-t, t)
      ),
      o = Blockly.utils.svgPaths.arc(
        "a",
        "0 0,1",
        t,
        Blockly.utils.svgPaths.point(-t, t)
      );
    return {
      width: t,
      height: t,
      pathTop: e,
      pathBottom: Blockly.utils.svgPaths.arc(
        "a",
        "0 0,0",
        t,
        Blockly.utils.svgPaths.point(t, t)
      ),
      rightWidth: t,
      rightHeight: t,
      pathTopRight: o,
      pathBottomRight: Blockly.utils.svgPaths.arc(
        "a",
        "0 0,1",
        t,
        Blockly.utils.svgPaths.point(t, t)
      ),
    };
  }),
  (Blockly.zelos.ConstantProvider.prototype.generateSecondaryColour_ =
    function (t) {
      return Blockly.utils.colour.blend("#000", t, 0.15) || t;
    }),
  (Blockly.zelos.ConstantProvider.prototype.generateTertiaryColour_ = function (
    t
  ) {
    return Blockly.utils.colour.blend("#000", t, 0.25) || t;
  }),
  (Blockly.zelos.ConstantProvider.prototype.createDom = function (t) {
    Blockly.zelos.ConstantProvider.superClass_.createDom.call(this, t),
      (t = Blockly.utils.dom.createSvgElement("defs", {}, t));
    var e = Blockly.utils.dom.createSvgElement(
      "filter",
      {
        id: "blocklySelectedGlowFilter" + this.randomIdentifier_,
        height: "160%",
        width: "180%",
        y: "-30%",
        x: "-40%",
      },
      t
    );
    Blockly.utils.dom.createSvgElement(
      "feGaussianBlur",
      { in: "SourceGraphic", stdDeviation: Blockly.Colours.selectedGlowSize },
      e
    );
    var o = Blockly.utils.dom.createSvgElement(
      "feComponentTransfer",
      { result: "outBlur" },
      e
    );
    Blockly.utils.dom.createSvgElement(
      "feFuncA",
      { type: "table", tableValues: "0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1" },
      o
    ),
      Blockly.utils.dom.createSvgElement(
        "feFlood",
        {
          "flood-color": Blockly.Colours.selectedGlow,
          "flood-opacity": 1,
          result: "outColor",
        },
        e
      ),
      Blockly.utils.dom.createSvgElement(
        "feComposite",
        { in: "outColor", in2: "outBlur", operator: "in", result: "outGlow" },
        e
      ),
      (this.selectedGlowFilterId = e.id),
      (this.selectedGlowFilter_ = e),
      (t = Blockly.utils.dom.createSvgElement(
        "filter",
        {
          id: "blocklyReplacementGlowFilter" + this.randomIdentifier_,
          height: "160%",
          width: "180%",
          y: "-30%",
          x: "-40%",
        },
        t
      )),
      Blockly.utils.dom.createSvgElement(
        "feGaussianBlur",
        { in: "SourceGraphic", stdDeviation: 2 },
        t
      ),
      (e = Blockly.utils.dom.createSvgElement(
        "feComponentTransfer",
        { result: "outBlur" },
        t
      )),
      Blockly.utils.dom.createSvgElement(
        "feFuncA",
        { type: "table", tableValues: "0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1" },
        e
      ),
      Blockly.utils.dom.createSvgElement(
        "feFlood",
        { "flood-color": "#fff200", "flood-opacity": 1, result: "outColor" },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "feComposite",
        { in: "outColor", in2: "outBlur", operator: "in", result: "outGlow" },
        t
      ),
      Blockly.utils.dom.createSvgElement(
        "feComposite",
        { in: "SourceGraphic", in2: "outGlow", operator: "over" },
        t
      ),
      (this.replacementGlowFilterId = t.id),
      (this.replacementGlowFilter_ = t);
  }),
  (Blockly.zelos.ConstantProvider.prototype.getCSS_ = function (t) {
    return [
      (t = "." + t + "-renderer") + " .blocklyText {",
      "cursor: default;",
      "fill: #fff;",
      "font-family: " + this.FIELD_TEXT_FONTFAMILY + ";",
      "font-size: " + this.FIELD_TEXT_FONTSIZE + "pt;",
      "font-weight: " + this.FIELD_TEXT_FONTWEIGHT + ";",
      "}",
      t + " .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",
      t + " .blocklyEditableText>rect:not(.blocklyDropdownRect) {",
      "fill: " + this.FIELD_BORDER_RECT_COLOUR + ";",
      "}",
      t + " .blocklyNonEditableText>text,",
      t + " .blocklyEditableText>text,",
      t + " .blocklyNonEditableText>g>text,",
      t + " .blocklyEditableText>g>text {",
      "fill: #575E75;",
      "}",
      t + " .blocklyDraggable:not(.blocklyDisabled)",
      " .blocklyEditableText:not(.editing):hover>rect ,",
      t + " .blocklyDraggable:not(.blocklyDisabled)",
      " .blocklyEditableText:not(.editing):hover>.blocklyPath {",
      "stroke: #fff;",
      "stroke-width: 2;",
      "}",
      t + " .blocklyHtmlInput {",
      "font-family: " + this.FIELD_TEXT_FONTFAMILY + ";",
      "font-weight: " + this.FIELD_TEXT_FONTWEIGHT + ";",
      "color: #575E75;",
      "}",
      t + " .blocklyDropdownText {",
      "fill: #fff !important;",
      "}",
      t + ".blocklyWidgetDiv .goog-menuitem,",
      t + ".blocklyDropDownDiv .goog-menuitem {",
      "font-family: " + this.FIELD_TEXT_FONTFAMILY + ";",
      "}",
      t + ".blocklyDropDownDiv .goog-menuitem-content {",
      "color: #fff;",
      "}",
      t + " .blocklyHighlightedConnectionPath {",
      "stroke: #fff200;",
      "}",
      t + " .blocklyDisabled > .blocklyOutlinePath {",
      "fill: url(#blocklyDisabledPattern" + this.randomIdentifier_ + ")",
      "}",
    ];
  }),
  (Blockly.zelos.TopRow = function (t) {
    Blockly.zelos.TopRow.superClass_.constructor.call(this, t);
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.TopRow,
    Blockly.blockRendering.TopRow
  ),
  (Blockly.zelos.TopRow.prototype.endsWithElemSpacer = function () {
    return !1;
  }),
  (Blockly.zelos.TopRow.prototype.hasLeftSquareCorner = function (t) {
    var e =
      (void 0 !== t.hat ? "cap" === t.hat : this.constants_.ADD_START_HATS) &&
      !t.outputConnection &&
      !t.previousConnection;
    return !!t.outputConnection || e;
  }),
  (Blockly.zelos.TopRow.prototype.hasRightSquareCorner = function (t) {
    return !!t.outputConnection;
  }),
  (Blockly.zelos.BottomRow = function (t) {
    Blockly.zelos.BottomRow.superClass_.constructor.call(this, t);
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.BottomRow,
    Blockly.blockRendering.BottomRow
  ),
  (Blockly.zelos.BottomRow.prototype.endsWithElemSpacer = function () {
    return !1;
  }),
  (Blockly.zelos.BottomRow.prototype.hasLeftSquareCorner = function (t) {
    return !!t.outputConnection;
  }),
  (Blockly.zelos.BottomRow.prototype.hasRightSquareCorner = function (t) {
    return !!t.outputConnection;
  }),
  (Blockly.zelos.RightConnectionShape = function (t) {
    Blockly.zelos.RightConnectionShape.superClass_.constructor.call(this, t),
      (this.type |= Blockly.blockRendering.Types.getType("RIGHT_CONNECTION")),
      (this.width = this.height = 0);
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.RightConnectionShape,
    Blockly.blockRendering.Measurable
  ),
  (Blockly.zelos.StatementInput = function (t, e) {
    if (
      (Blockly.zelos.StatementInput.superClass_.constructor.call(this, t, e),
      this.connectedBlock)
    ) {
      for (t = this.connectedBlock; t.getNextBlock(); ) t = t.getNextBlock();
      t.nextConnection ||
        ((this.height = this.connectedBlockHeight),
        (this.connectedBottomNextConnection = !0));
    }
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.StatementInput,
    Blockly.blockRendering.StatementInput
  ),
  (Blockly.zelos.RenderInfo = function (t, e) {
    Blockly.zelos.RenderInfo.superClass_.constructor.call(this, t, e),
      (this.topRow = new Blockly.zelos.TopRow(this.constants_)),
      (this.bottomRow = new Blockly.zelos.BottomRow(this.constants_)),
      (this.isInline = !0),
      (this.isMultiRow = !e.getInputsInline() || e.isCollapsed()),
      (this.rightSide = this.outputConnection
        ? new Blockly.zelos.RightConnectionShape(this.constants_)
        : null);
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.RenderInfo,
    Blockly.blockRendering.RenderInfo
  ),
  (Blockly.zelos.RenderInfo.prototype.getRenderer = function () {
    return this.renderer_;
  }),
  (Blockly.zelos.RenderInfo.prototype.measure = function () {
    this.createRows_(),
      this.addElemSpacing_(),
      this.addRowSpacing_(),
      this.adjustXPosition_(),
      this.computeBounds_(),
      this.alignRowElements_(),
      this.finalize_();
  }),
  (Blockly.zelos.RenderInfo.prototype.shouldStartNewRow_ = function (t, e) {
    return (
      !!e &&
      (t.type == Blockly.NEXT_STATEMENT ||
        e.type == Blockly.NEXT_STATEMENT ||
        ((t.type == Blockly.INPUT_VALUE || t.type == Blockly.DUMMY_INPUT) &&
          (!this.isInline || this.isMultiRow)))
    );
  }),
  (Blockly.zelos.RenderInfo.prototype.getDesiredRowWidth_ = function (t) {
    return t.hasStatement
      ? this.width -
          this.startX -
          (this.constants_.INSIDE_CORNERS.rightWidth || 0)
      : Blockly.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this, t);
  }),
  (Blockly.zelos.RenderInfo.prototype.getInRowSpacing_ = function (t, e) {
    return (t && e) ||
      !this.outputConnection ||
      !this.outputConnection.isDynamicShape
      ? !t && e && Blockly.blockRendering.Types.isStatementInput(e)
        ? this.constants_.STATEMENT_INPUT_PADDING_LEFT
        : t &&
          Blockly.blockRendering.Types.isLeftRoundedCorner(t) &&
          e &&
          (Blockly.blockRendering.Types.isPreviousConnection(e) ||
            Blockly.blockRendering.Types.isNextConnection(e))
        ? e.notchOffset - this.constants_.CORNER_RADIUS
        : t &&
          Blockly.blockRendering.Types.isLeftSquareCorner(t) &&
          e &&
          Blockly.blockRendering.Types.isHat(e)
        ? this.constants_.NO_PADDING
        : this.constants_.MEDIUM_PADDING
      : this.constants_.NO_PADDING;
  }),
  (Blockly.zelos.RenderInfo.prototype.getSpacerRowHeight_ = function (t, e) {
    if (
      Blockly.blockRendering.Types.isTopRow(t) &&
      Blockly.blockRendering.Types.isBottomRow(e)
    )
      return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;
    var o = Blockly.blockRendering.Types.isInputRow(t) && t.hasStatement,
      i = Blockly.blockRendering.Types.isInputRow(e) && e.hasStatement;
    return i
      ? ((t = Math.max(
          this.constants_.MEDIUM_PADDING,
          Math.max(
            this.constants_.NOTCH_HEIGHT,
            this.constants_.INSIDE_CORNERS.rightHeight || 0
          )
        )),
        i && o ? Math.max(t, this.constants_.DUMMY_INPUT_MIN_HEIGHT) : t)
      : o
      ? 15
      : Blockly.blockRendering.Types.isTopRow(t)
      ? (!t.hasPreviousConnection && !this.outputConnection) ||
        (t.hasPreviousConnection && !this.outputConnection)
        ? this.constants_.SMALL_PADDING
        : this.constants_.NO_PADDING
      : Blockly.blockRendering.Types.isBottomRow(e)
      ? this.outputConnection
        ? this.constants_.NO_PADDING
        : this.constants_.SMALL_PADDING
      : this.constants_.MEDIUM_PADDING;
  }),
  (Blockly.zelos.RenderInfo.prototype.getSpacerRowWidth_ = function (t, e) {
    var o = this.width - this.startX;
    return (Blockly.blockRendering.Types.isInputRow(t) && t.hasStatement) ||
      (Blockly.blockRendering.Types.isInputRow(e) && e.hasStatement)
      ? Math.max(o, this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH)
      : o;
  }),
  (Blockly.zelos.RenderInfo.prototype.getElemCenterline_ = function (t, e) {
    return t.hasStatement && !Blockly.blockRendering.Types.isSpacer(e)
      ? t.yPos + this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT / 2
      : Blockly.zelos.RenderInfo.superClass_.getElemCenterline_.call(
          this,
          t,
          e
        );
  }),
  (Blockly.zelos.RenderInfo.prototype.addInput_ = function (t, e) {
    t.type == Blockly.DUMMY_INPUT &&
      e.hasDummyInput &&
      e.align == Blockly.ALIGN_LEFT &&
      t.align == Blockly.ALIGN_RIGHT &&
      (e.rightAlignedDummyInput = t),
      this.isInline && t.type == Blockly.INPUT_VALUE
        ? (e.elements.push(
            new Blockly.blockRendering.InlineInput(this.constants_, t)
          ),
          (e.hasInlineInput = !0))
        : t.type == Blockly.NEXT_STATEMENT
        ? (e.elements.push(
            new Blockly.zelos.StatementInput(this.constants_, t)
          ),
          (e.hasStatement = !0))
        : t.type == Blockly.INPUT_VALUE
        ? (e.elements.push(
            new Blockly.blockRendering.ExternalValueInput(this.constants_, t)
          ),
          (e.hasExternalInput = !0))
        : t.type == Blockly.DUMMY_INPUT &&
          ((e.minHeight = Math.max(
            e.minHeight,
            t.getSourceBlock() && t.getSourceBlock().isShadow()
              ? this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT
              : this.constants_.DUMMY_INPUT_MIN_HEIGHT
          )),
          (e.hasDummyInput = !0)),
      null == e.align && (e.align = t.align);
  }),
  (Blockly.zelos.RenderInfo.prototype.addAlignmentPadding_ = function (t, e) {
    if (t.rightAlignedDummyInput) {
      for (
        var o, i, n = 0;
        (i = t.elements[n]) &&
        (Blockly.blockRendering.Types.isSpacer(i) && (o = i),
        !Blockly.blockRendering.Types.isField(i) ||
          i.parentInput != t.rightAlignedDummyInput);
        n++
      );
      if (o) return (o.width += e), void (t.width += e);
    }
    Blockly.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this, t, e);
  }),
  (Blockly.zelos.RenderInfo.prototype.adjustXPosition_ = function () {
    for (var t = 5, e = 2; e < this.rows.length - 1; e += 2) {
      var o = this.rows[e - 1],
        i = this.rows[e],
        n = this.rows[e + 1];
      if (
        ((o =
          2 == e ? !!this.topRow.hasPreviousConnection : !!o.followsStatement),
        (n =
          e + 2 >= this.rows.length - 1
            ? !!this.bottomRow.hasNextConnection
            : !!n.precedesStatement),
        Blockly.blockRendering.Types.isInputRow(i) && i.hasStatement)
      )
        i.measure(), (t = i.width - i.getLastInput().width + 5);
      else if (
        o &&
        (2 == e || n) &&
        Blockly.blockRendering.Types.isInputRow(i) &&
        !i.hasStatement
      ) {
        (n = i.xPos), (o = null);
        for (var l, r = 0; (l = i.elements[r]); r++)
          Blockly.blockRendering.Types.isSpacer(l) && (o = l),
            !(
              o &&
              (Blockly.blockRendering.Types.isField(l) ||
                Blockly.blockRendering.Types.isInput(l)) &&
              n < t
            ) ||
              (Blockly.blockRendering.Types.isField(l) &&
                (l.field instanceof Blockly.FieldLabel ||
                  l.field instanceof Blockly.FieldImage)) ||
              (o.width += t - n),
            (n += l.width);
      }
    }
  }),
  (Blockly.zelos.RenderInfo.prototype.finalizeOutputConnection_ = function () {
    if (this.outputConnection && this.outputConnection.isDynamicShape) {
      for (var t, e = 0, o = 0; (t = this.rows[o]); o++)
        (t.yPos = e), (e += t.height);
      (this.height = e),
        (o = this.outputConnection.shape.height(e)),
        (e = this.outputConnection.shape.width(e)),
        (this.outputConnection.height = o),
        (this.outputConnection.width = e),
        (this.outputConnection.startX = e),
        (this.outputConnection.connectionOffsetY =
          this.outputConnection.shape.connectionOffsetY(o)),
        (this.outputConnection.connectionOffsetX =
          this.outputConnection.shape.connectionOffsetX(e)),
        (this.rightSide.height = o),
        (this.rightSide.width = e),
        (this.rightSide.centerline = o / 2),
        (this.rightSide.xPos = this.width + e),
        (this.startX = e),
        (this.width += 2 * e),
        (this.widthWithChildren += 2 * e);
    }
  }),
  (Blockly.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_ =
    function () {
      if (this.outputConnection) {
        for (var t, e = 0, o = 0; (t = this.rows[o]); o++)
          if (Blockly.blockRendering.Types.isInputRow(t)) {
            e = t.elements[t.elements.length - 2];
            var i = this.getNegativeSpacing_(t.elements[1]),
              n = this.getNegativeSpacing_(e);
            e = i + n;
            var l =
              this.constants_.MIN_BLOCK_WIDTH + 2 * this.outputConnection.width;
            this.width - e < l && ((i = (e = this.width - l) / 2), (n = e / 2)),
              t.elements.unshift(
                new Blockly.blockRendering.InRowSpacer(this.constants_, -i)
              ),
              t.elements.push(
                new Blockly.blockRendering.InRowSpacer(this.constants_, -n)
              );
          }
        if (e)
          for (
            this.width -= e,
              this.widthWithChildren -= e,
              this.rightSide.xPos -= e,
              o = 0;
            (t = this.rows[o]);
            o++
          )
            (Blockly.blockRendering.Types.isTopRow(t) ||
              Blockly.blockRendering.Types.isBottomRow(t)) &&
              (t.elements[1].width -= e),
              (t.width -= e),
              (t.widthWithConnectedBlocks -= e);
      }
    }),
  (Blockly.zelos.RenderInfo.prototype.getNegativeSpacing_ = function (t) {
    if (!t) return 0;
    var e = this.outputConnection.width,
      o = this.outputConnection.shape.type,
      i = this.constants_;
    if (this.isMultiRow && 1 < this.inputRowNum_)
      switch (o) {
        case i.SHAPES.ROUND:
          return (
            e -
            (o = this.height / 2) *
              (1 - Math.sin(Math.acos((o - this.constants_.SMALL_PADDING) / o)))
          );
        default:
          return 0;
      }
    return Blockly.blockRendering.Types.isInlineInput(t)
      ? ((t = t.connectedBlock
          ? t.connectedBlock.pathObject.outputShapeType
          : t.shape.type),
        o == i.SHAPES.HEXAGONAL && o != t
          ? 0
          : e - this.constants_.SHAPE_IN_SHAPE_PADDING[o][t])
      : Blockly.blockRendering.Types.isField(t)
      ? o == i.SHAPES.ROUND && t.field instanceof Blockly.FieldTextInput
        ? e - 2.75 * i.GRID_UNIT
        : e - this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]
      : Blockly.blockRendering.Types.isIcon(t)
      ? this.constants_.SMALL_PADDING
      : 0;
  }),
  (Blockly.zelos.RenderInfo.prototype.finalizeVerticalAlignment_ = function () {
    if (!this.outputConnection)
      for (var t = 2; t < this.rows.length - 1; t += 2) {
        var e = this.rows[t - 1],
          o = this.rows[t],
          i = this.rows[t + 1],
          n = 2 == t,
          l =
            t + 2 >= this.rows.length - 1
              ? !!this.bottomRow.hasNextConnection
              : !!i.precedesStatement;
        if (n ? this.topRow.hasPreviousConnection : e.followsStatement) {
          var r =
            3 == o.elements.length &&
            (o.elements[1].field instanceof Blockly.FieldLabel ||
              o.elements[1].field instanceof Blockly.FieldImage);
          if (!n && r)
            (e.height -= this.constants_.SMALL_PADDING),
              (i.height -= this.constants_.SMALL_PADDING),
              (o.height -= this.constants_.MEDIUM_PADDING);
          else if (n || l) {
            if (l) {
              for (n = !1, l = 0; (r = o.elements[l]); l++)
                if (
                  Blockly.blockRendering.Types.isInlineInput(r) &&
                  r.connectedBlock &&
                  !r.connectedBlock.isShadow() &&
                  40 <= r.connectedBlock.getHeightWidth().height
                ) {
                  n = !0;
                  break;
                }
              n &&
                ((e.height -= this.constants_.SMALL_PADDING),
                (i.height -= this.constants_.SMALL_PADDING));
            }
          } else e.height += this.constants_.SMALL_PADDING;
        }
      }
  }),
  (Blockly.zelos.RenderInfo.prototype.finalize_ = function () {
    this.finalizeOutputConnection_(),
      this.finalizeHorizontalAlignment_(),
      this.finalizeVerticalAlignment_(),
      Blockly.zelos.RenderInfo.superClass_.finalize_.call(this);
  }),
  (Blockly.zelos.Drawer = function (t, e) {
    Blockly.zelos.Drawer.superClass_.constructor.call(this, t, e);
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.Drawer,
    Blockly.blockRendering.Drawer
  ),
  (Blockly.zelos.Drawer.prototype.draw = function () {
    var t = this.block_.pathObject;
    t.beginDrawing(),
      this.hideHiddenIcons_(),
      this.drawOutline_(),
      this.drawInternals_(),
      t.setPath(this.outlinePath_ + "\n" + this.inlinePath_),
      this.info_.RTL && t.flipRTL(),
      Blockly.blockRendering.useDebugger &&
        this.block_.renderingDebugger.drawDebug(this.block_, this.info_),
      this.recordSizeOnBlock_(),
      this.info_.outputConnection &&
        (t.outputShapeType = this.info_.outputConnection.shape.type),
      t.endDrawing();
  }),
  (Blockly.zelos.Drawer.prototype.drawOutline_ = function () {
    this.info_.outputConnection && this.info_.outputConnection.isDynamicShape
      ? (this.drawFlatTop_(),
        this.drawRightDynamicConnection_(),
        this.drawFlatBottom_(),
        this.drawLeftDynamicConnection_())
      : Blockly.zelos.Drawer.superClass_.drawOutline_.call(this);
  }),
  (Blockly.zelos.Drawer.prototype.drawRightSideRow_ = function (t) {
    if (!(0 >= t.height))
      if (t.precedesStatement || t.followsStatement) {
        var e = this.constants_.INSIDE_CORNERS.rightHeight;
        (e = t.height - (t.precedesStatement ? e : 0)),
          (this.outlinePath_ +=
            (t.followsStatement
              ? this.constants_.INSIDE_CORNERS.pathBottomRight
              : "") +
            (0 < e ? Blockly.utils.svgPaths.lineOnAxis("V", t.yPos + e) : "") +
            (t.precedesStatement
              ? this.constants_.INSIDE_CORNERS.pathTopRight
              : ""));
      } else
        this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis(
          "V",
          t.yPos + t.height
        );
  }),
  (Blockly.zelos.Drawer.prototype.drawRightDynamicConnection_ = function () {
    this.outlinePath_ += this.info_.outputConnection.shape.pathRightDown(
      this.info_.outputConnection.height
    );
  }),
  (Blockly.zelos.Drawer.prototype.drawLeftDynamicConnection_ = function () {
    this.positionOutputConnection_(),
      (this.outlinePath_ += this.info_.outputConnection.shape.pathUp(
        this.info_.outputConnection.height
      )),
      (this.outlinePath_ += "z");
  }),
  (Blockly.zelos.Drawer.prototype.drawFlatTop_ = function () {
    var t = this.info_.topRow;
    this.positionPreviousConnection_(),
      (this.outlinePath_ += Blockly.utils.svgPaths.moveBy(
        t.xPos,
        this.info_.startY
      )),
      (this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis("h", t.width));
  }),
  (Blockly.zelos.Drawer.prototype.drawFlatBottom_ = function () {
    var t = this.info_.bottomRow;
    this.positionNextConnection_(),
      (this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis("V", t.baseline)),
      (this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis("h", -t.width));
  }),
  (Blockly.zelos.Drawer.prototype.drawInlineInput_ = function (t) {
    this.positionInlineInputConnection_(t);
    var e = t.input.name;
    if (!t.connectedBlock && !this.info_.isInsertionMarker) {
      var o = t.width - 2 * t.connectionWidth;
      (t =
        Blockly.utils.svgPaths.moveTo(
          t.xPos + t.connectionWidth,
          t.centerline - t.height / 2
        ) +
        Blockly.utils.svgPaths.lineOnAxis("h", o) +
        t.shape.pathRightDown(t.height) +
        Blockly.utils.svgPaths.lineOnAxis("h", -o) +
        t.shape.pathUp(t.height) +
        "z"),
        this.block_.pathObject.setOutlinePath(e, t);
    }
  }),
  (Blockly.zelos.Drawer.prototype.drawStatementInput_ = function (t) {
    var e = t.getLastInput(),
      o = e.xPos + e.notchOffset + e.shape.width,
      i =
        e.shape.pathRight +
        Blockly.utils.svgPaths.lineOnAxis(
          "h",
          -(e.notchOffset - this.constants_.INSIDE_CORNERS.width)
        ) +
        this.constants_.INSIDE_CORNERS.pathTop,
      n = t.height - 2 * this.constants_.INSIDE_CORNERS.height;
    (e =
      this.constants_.INSIDE_CORNERS.pathBottom +
      Blockly.utils.svgPaths.lineOnAxis(
        "h",
        e.notchOffset - this.constants_.INSIDE_CORNERS.width
      ) +
      (e.connectedBottomNextConnection ? "" : e.shape.pathLeft)),
      (this.outlinePath_ +=
        Blockly.utils.svgPaths.lineOnAxis("H", o) +
        i +
        Blockly.utils.svgPaths.lineOnAxis("v", n) +
        e +
        Blockly.utils.svgPaths.lineOnAxis("H", t.xPos + t.width)),
      this.positionStatementInputConnection_(t);
  }),
  (Blockly.zelos.PathObject = function (t, e, o) {
    Blockly.zelos.PathObject.superClass_.constructor.call(this, t, e, o),
      (this.constants_ = o),
      (this.svgPathSelected_ = null),
      (this.outlines_ = {}),
      (this.outputShapeType = this.remainingOutlines_ = null);
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.PathObject,
    Blockly.blockRendering.PathObject
  ),
  (Blockly.zelos.PathObject.prototype.setPath = function (t) {
    Blockly.zelos.PathObject.superClass_.setPath.call(this, t),
      this.svgPathSelected_ && this.svgPathSelected_.setAttribute("d", t);
  }),
  (Blockly.zelos.PathObject.prototype.applyColour = function (t) {
    Blockly.zelos.PathObject.superClass_.applyColour.call(this, t),
      t.isShadow() &&
        t.getParent() &&
        this.svgPath.setAttribute("stroke", t.getParent().style.colourTertiary),
      (t = 0);
    for (var e, o = Object.keys(this.outlines_); (e = o[t]); t++)
      this.outlines_[e].setAttribute("fill", this.style.colourTertiary);
  }),
  (Blockly.zelos.PathObject.prototype.flipRTL = function () {
    Blockly.zelos.PathObject.superClass_.flipRTL.call(this);
    for (var t, e = 0, o = Object.keys(this.outlines_); (t = o[e]); e++)
      this.outlines_[t].setAttribute("transform", "scale(-1 1)");
  }),
  (Blockly.zelos.PathObject.prototype.updateSelected = function (t) {
    this.setClass_("blocklySelected", t),
      t
        ? this.svgPathSelected_ ||
          ((this.svgPathSelected_ = this.svgPath.cloneNode(!0)),
          this.svgPathSelected_.setAttribute("fill", "none"),
          this.svgPathSelected_.setAttribute(
            "filter",
            "url(#" + this.constants_.selectedGlowFilterId + ")"
          ),
          this.svgRoot.appendChild(this.svgPathSelected_))
        : this.svgPathSelected_ &&
          (this.svgRoot.removeChild(this.svgPathSelected_),
          (this.svgPathSelected_ = null));
  }),
  (Blockly.zelos.PathObject.prototype.updateReplacementHighlight = function (
    t
  ) {
    this.setClass_("blocklyReplaceable", t),
      t
        ? this.svgPath.setAttribute(
            "filter",
            "url(#" + this.constants_.replacementGlowFilterId + ")"
          )
        : this.svgPath.removeAttribute("filter");
  }),
  (Blockly.zelos.PathObject.prototype.updateShapeForInputHighlight = function (
    t,
    e
  ) {
    (t = t.getParentInput().name),
      (t = this.getOutlinePath_(t)) &&
        (e
          ? t.setAttribute(
              "filter",
              "url(#" + this.constants_.replacementGlowFilterId + ")"
            )
          : t.removeAttribute("filter"));
  }),
  (Blockly.zelos.PathObject.prototype.beginDrawing = function () {
    this.remainingOutlines_ = {};
    for (var t, e = 0, o = Object.keys(this.outlines_); (t = o[e]); e++)
      this.remainingOutlines_[t] = 1;
  }),
  (Blockly.zelos.PathObject.prototype.endDrawing = function () {
    if (this.remainingOutlines_)
      for (
        var t, e = 0, o = Object.keys(this.remainingOutlines_);
        (t = o[e]);
        e++
      )
        this.removeOutlinePath_(t);
    this.remainingOutlines_ = null;
  }),
  (Blockly.zelos.PathObject.prototype.setOutlinePath = function (t, e) {
    (t = this.getOutlinePath_(t)).setAttribute("d", e),
      t.setAttribute("fill", this.style.colourTertiary);
  }),
  (Blockly.zelos.PathObject.prototype.getOutlinePath_ = function (t) {
    return (
      this.outlines_[t] ||
        (this.outlines_[t] = Blockly.utils.dom.createSvgElement(
          "path",
          { class: "blocklyOutlinePath", d: "" },
          this.svgRoot
        )),
      this.remainingOutlines_ && delete this.remainingOutlines_[t],
      this.outlines_[t]
    );
  }),
  (Blockly.zelos.PathObject.prototype.removeOutlinePath_ = function (t) {
    this.outlines_[t].parentNode.removeChild(this.outlines_[t]),
      delete this.outlines_[t];
  }),
  (Blockly.zelos.MarkerSvg = function (t, e, o) {
    Blockly.zelos.MarkerSvg.superClass_.constructor.call(this, t, e, o);
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.MarkerSvg,
    Blockly.blockRendering.MarkerSvg
  ),
  (Blockly.zelos.MarkerSvg.prototype.showWithInput_ = function (t) {
    var e = t.getSourceBlock();
    (t = t.getLocation().getOffsetInBlock()),
      this.positionCircle_(t.x, t.y + this.constants_.CURSOR_RADIUS),
      this.setParent_(e),
      this.showCurrent_();
  }),
  (Blockly.zelos.MarkerSvg.prototype.showWithBlock_ = function (t) {
    var e = (t = t.getLocation()).getHeightWidth();
    this.positionRect_(0, 0, e.width, e.height),
      this.setParent_(t),
      this.showCurrent_();
  }),
  (Blockly.zelos.MarkerSvg.prototype.positionCircle_ = function (t, e) {
    this.markerCircle_.setAttribute("cx", t),
      this.markerCircle_.setAttribute("cy", e),
      (this.currentMarkerSvg = this.markerCircle_);
  }),
  (Blockly.zelos.MarkerSvg.prototype.showAtLocation_ = function (t) {
    var e = !1;
    t.getType() == Blockly.ASTNode.types.OUTPUT
      ? (this.showWithInput_(t), (e = !0))
      : t.getType() == Blockly.ASTNode.types.BLOCK &&
        (this.showWithBlock_(t), (e = !0)),
      e || Blockly.zelos.MarkerSvg.superClass_.showAtLocation_.call(this, t);
  }),
  (Blockly.zelos.MarkerSvg.prototype.hide = function () {
    Blockly.zelos.MarkerSvg.superClass_.hide.call(this),
      (this.markerCircle_.style.display = "none");
  }),
  (Blockly.zelos.MarkerSvg.prototype.createDomInternal_ = function () {
    if (
      (Blockly.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),
      (this.markerCircle_ = Blockly.utils.dom.createSvgElement(
        "circle",
        {
          r: this.constants_.CURSOR_RADIUS,
          style: "display: none",
          fill: this.colour_,
          stroke: this.colour_,
          "stroke-width": this.constants_.CURSOR_STROKE_WIDTH,
        },
        this.markerSvg_
      )),
      this.isCursor())
    ) {
      var t = this.getBlinkProperties_();
      Blockly.utils.dom.createSvgElement("animate", t, this.markerCircle_);
    }
    return this.markerSvg_;
  }),
  (Blockly.zelos.Renderer = function (t) {
    Blockly.zelos.Renderer.superClass_.constructor.call(this, t);
  }),
  Blockly.utils.object.inherits(
    Blockly.zelos.Renderer,
    Blockly.blockRendering.Renderer
  ),
  (Blockly.zelos.Renderer.prototype.makeConstants_ = function () {
    return new Blockly.zelos.ConstantProvider();
  }),
  (Blockly.zelos.Renderer.prototype.makeRenderInfo_ = function (t) {
    return new Blockly.zelos.RenderInfo(this, t);
  }),
  (Blockly.zelos.Renderer.prototype.makeDrawer_ = function (t, e) {
    return new Blockly.zelos.Drawer(t, e);
  }),
  (Blockly.zelos.Renderer.prototype.makeMarkerDrawer = function (t, e) {
    return new Blockly.zelos.MarkerSvg(t, this.getConstants(), e);
  }),
  (Blockly.zelos.Renderer.prototype.makePathObject = function (t, e) {
    return new Blockly.zelos.PathObject(t, e, this.getConstants());
  }),
  (Blockly.zelos.Renderer.prototype.shouldHighlightConnection = function (t) {
    return t.type != Blockly.INPUT_VALUE && t.type !== Blockly.OUTPUT_VALUE;
  }),
  (Blockly.zelos.Renderer.prototype.shouldInsertDraggedBlock = function (t, e) {
    return !1;
  }),
  Blockly.blockRendering.register("zelos", Blockly.zelos.Renderer),
  (Blockly.pxt = {}),
  (Blockly.pxt.ConstantProvider = function () {
    Blockly.pxt.ConstantProvider.superClass_.constructor.call(this),
      (this.FIELD_TEXT_FONTWEIGHT = "600"),
      (this.ICON_SEPARATOR_HEIGHT = 8 * this.GRID_UNIT),
      (this.ELLIPSES_RADIUS = 6),
      (this.ELLIPSES_SPACING = 8),
      (this.COLLAPSE_IMAGE_DATAURI =
        "data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg enable-background='new 0 0 24 24' version='1.1' viewBox='0 0 24 24' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23CF8B17;%7D .st1%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Ctitle%3Erepeat%3C/title%3E%3Ccircle cx='12' cy='12' r='10.503' fill='none' stroke='%23fff' stroke-linecap='square' stroke-linejoin='round' stroke-width='2'/%3E%3Cg transform='matrix(.0086269 0 0 -.0086269 4.8224 17.354)'%3E%3Cpath d='m1611 367.42q0 53-37 90l-651 651q-38 38-91 38-54 0-90-38l-651-651q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l486 486 486-486q37-37 90-37 52 0 91 37l75 75q37 39 37 91z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E%0A"),
      (this.EXPAND_IMAGE_DATAURI =
        "data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg enable-background='new 0 0 24 24' version='1.1' viewBox='0 0 24 24' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23CF8B17;%7D .st1%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Ctitle%3Erepeat%3C/title%3E%3Ccircle cx='12' cy='12' r='10.503' fill='none' stroke='%23fff' stroke-linecap='square' stroke-linejoin='round' stroke-width='2'/%3E%3Cg transform='matrix(.0086269 0 0 -.0086269 4.8224 17.654)'%3E%3Cpath d='m1611 832q0-53-37-90l-651-651q-38-38-91-38-54 0-90 38l-651 651q-38 36-38 90 0 53 38 91l74 75q39 37 91 37 53 0 90-37l486-486 486 486q37 37 90 37 52 0 91-37l75-75q37-39 37-91z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E%0A"),
      (this.highlightedGlowFilterId = ""),
      (this.highlightedGlowFilter_ = null),
      (this.warningGlowFilterId = ""),
      (this.warningGlowFilter_ = null);
  }),
  Blockly.utils.object.inherits(
    Blockly.pxt.ConstantProvider,
    Blockly.zelos.ConstantProvider
  ),
  (Blockly.pxt.ConstantProvider.prototype.init = function () {
    Blockly.pxt.ConstantProvider.superClass_.init.call(this),
      (this.ELLIPSES = this.makeEllipses());
  }),
  (Blockly.pxt.ConstantProvider.prototype.createDom = function (t) {
    Blockly.pxt.ConstantProvider.superClass_.createDom.call(this, t),
      (t = Blockly.utils.dom.createSvgElement("defs", {}, t));
    var e = Blockly.utils.dom.createSvgElement(
      "filter",
      {
        id: "blocklyHighlightGlowFilter" + this.randomIdentifier_,
        height: "160%",
        width: "180%",
        y: "-30%",
        x: "-40%",
      },
      t
    );
    Blockly.utils.dom.createSvgElement(
      "feGaussianBlur",
      { in: "SourceGraphic", stdDeviation: Blockly.Colours.highlightGlowSize },
      e
    );
    var o = Blockly.utils.dom.createSvgElement(
      "feComponentTransfer",
      { result: "outBlur" },
      e
    );
    Blockly.utils.dom.createSvgElement(
      "feFuncA",
      { type: "table", tableValues: "0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1" },
      o
    ),
      Blockly.utils.dom.createSvgElement(
        "feFlood",
        {
          "flood-color": Blockly.Colours.highlightGlow,
          "flood-opacity": Blockly.Colours.highlightGlowOpacity,
          result: "outColor",
        },
        e
      ),
      Blockly.utils.dom.createSvgElement(
        "feComposite",
        { in: "outColor", in2: "outBlur", operator: "in", result: "outGlow" },
        e
      ),
      (this.highlightedGlowFilterId = e.id),
      (this.highlightedGlowFilter_ = e),
      (e = Blockly.utils.dom.createSvgElement(
        "filter",
        {
          id: "blocklyHighlightWarningFilter" + this.randomIdentifier_,
          height: "160%",
          width: "180%",
          y: "-30%",
          x: "-40%",
        },
        t
      )),
      Blockly.utils.dom.createSvgElement(
        "feGaussianBlur",
        { in: "SourceGraphic", stdDeviation: Blockly.Colours.warningGlowSize },
        e
      ),
      (o = Blockly.utils.dom.createSvgElement(
        "feComponentTransfer",
        { result: "outBlur" },
        e
      )),
      Blockly.utils.dom.createSvgElement(
        "feFuncA",
        { type: "table", tableValues: "0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1" },
        o
      ),
      Blockly.utils.dom.createSvgElement(
        "feFlood",
        {
          "flood-color": Blockly.Colours.warningGlow,
          "flood-opacity": Blockly.Colours.warningGlowOpacity,
          result: "outColor",
        },
        e
      ),
      Blockly.utils.dom.createSvgElement(
        "feComposite",
        { in: "outColor", in2: "outBlur", operator: "in", result: "outGlow" },
        e
      ),
      (this.warningGlowFilterId = e.id),
      (this.warningGlowFilter_ = e),
      (e = this.FIELD_DROPDOWN_SVG_ARROW_SIZE),
      Blockly.utils.dom
        .createSvgElement(
          "image",
          { id: "blocklyDropdownArrowSvg", height: e + "px", width: e + "px" },
          t
        )
        .setAttributeNS(
          "http://www.w3.org/1999/xlink",
          "xlink:href",
          this.FIELD_DROPDOWN_SVG_ARROW_DATAURI
        );
  }),
  (Blockly.pxt.ConstantProvider.prototype.makeEllipses = function () {
    for (
      var t = this.ELLIPSES_RADIUS, e = this.ELLIPSES_SPACING, o = "", i = 0;
      3 > i;
      i++
    )
      o +=
        Blockly.utils.svgPaths.moveBy(e, 0) +
        Blockly.utils.svgPaths.arc(
          "a",
          "180 1,1",
          t,
          Blockly.utils.svgPaths.point(2 * t, 0)
        );
    for (i = 0; 3 > i; i++)
      o +=
        Blockly.utils.svgPaths.arc(
          "a",
          "180 1,1",
          t,
          Blockly.utils.svgPaths.point(2 * -t, 0)
        ) + Blockly.utils.svgPaths.moveBy(-e, 0);
    return o;
  }),
  (Blockly.pxt.ConstantProvider.prototype.getCSS_ = function (t) {
    var e = "." + t + "-renderer";
    return Blockly.pxt.ConstantProvider.superClass_.getCSS_
      .call(this, t)
      .concat([
        e +
          " .blocklyConnectionIndicator, " +
          e +
          " .blocklyInputConnectionIndicator {",
        "fill: #ff0000;",
        "fill-opacity: 0.9;",
        "stroke: #ffff00;",
        "stroke-width: 3px;",
        "}",
        e + " .blocklyConnectionIndicator {",
        "display: none;",
        "}",
        e +
          " .blocklyBlockDragSurface > g > .blocklyDraggable > .blocklyConnectionIndicator {",
        "display: block;",
        "}",
        e + " .blocklyConnectionLine {",
        "stroke: #ffff00;",
        "stroke-width: 4px;",
        "}",
        e + " .blocklyConnectionLine.hidden {",
        "display: none;",
        "}",
      ]);
  }),
  (Blockly.pxt.PathObject = function (t, e, o) {
    Blockly.pxt.PathObject.superClass_.constructor.call(this, t, e, o),
      (this.svgOutputConnectionIndicator_ =
        this.svgPathHighlightedWarning_ =
        this.svgPathHighlighted_ =
          null),
      Blockly.utils.dom.addClass(this.svgPath, "blocklyBlockBackground");
  }),
  Blockly.utils.object.inherits(
    Blockly.pxt.PathObject,
    Blockly.zelos.PathObject
  ),
  (Blockly.pxt.PathObject.prototype.setPath = function (t) {
    Blockly.pxt.PathObject.superClass_.setPath.call(this, t),
      this.svgPathHighlighted_ && this.svgPathHighlighted_.setAttribute("d", t),
      this.svgPathHighlightedWarning_ &&
        this.svgPathHighlightedWarning_.setAttribute("d", t);
  }),
  (Blockly.pxt.PathObject.prototype.applyColour = function (t) {
    if (
      (Blockly.pxt.PathObject.superClass_.applyColour.call(this, t),
      t.isShadow() && t.getParent())
    ) {
      t = t.getParent().style.colourTertiary;
      var e = Blockly.utils.colour.hexToRgb(t);
      0.15 > Blockly.utils.colour.luminance(e) &&
        this.svgPath.setAttribute(
          "stroke",
          Blockly.utils.colour.lighten(t, 0.3)
        );
    }
  }),
  (Blockly.pxt.PathObject.prototype.updateHighlighted = function (t) {
    this.setClass_("blocklyHighlighted", t),
      t
        ? this.svgPathHighlighted_ ||
          ((this.svgPathHighlighted_ = this.svgPath.cloneNode(!0)),
          this.svgPathHighlighted_.setAttribute("fill", "none"),
          this.svgPathHighlighted_.setAttribute(
            "filter",
            "url(#" + this.constants_.highlightedGlowFilterId + ")"
          ),
          this.svgRoot.appendChild(this.svgPathHighlighted_))
        : this.svgPathHighlighted_ &&
          (this.svgRoot.removeChild(this.svgPathHighlighted_),
          (this.svgPathHighlighted_ = null));
  }),
  (Blockly.pxt.PathObject.prototype.updateHighlightedWarning = function (t) {
    this.setClass_("blocklyHighlightedWarning", t),
      t
        ? this.svgPathHighlightedWarning_ ||
          ((this.svgPathHighlightedWarning_ = this.svgPath.cloneNode(!0)),
          this.svgPathHighlightedWarning_.setAttribute("fill", "none"),
          this.svgPathHighlightedWarning_.setAttribute(
            "filter",
            "url(#" + this.constants_.warningGlowFilterId + ")"
          ),
          this.svgRoot.appendChild(this.svgPathHighlightedWarning_))
        : this.svgPathHighlightedWarning_ &&
          (this.svgRoot.removeChild(this.svgPathHighlightedWarning_),
          (this.svgPathHighlightedWarning_ = null));
  }),
  (Blockly.pxt.PathObject.prototype.updateSelected = function (t) {
    Blockly.pxt.PathObject.superClass_.updateSelected.call(this, t),
      t &&
        this.svgOutputConnectionIndicator_ &&
        (this.svgRoot.removeChild(this.svgOutputConnectionIndicator_),
        this.svgRoot.appendChild(this.svgOutputConnectionIndicator_));
  }),
  (Blockly.pxt.PathObject.prototype.positionConnectionIndicator = function (
    t,
    e
  ) {
    this.svgOutputConnectionIndicator_ ||
      ((this.svgOutputConnectionIndicator_ = Blockly.utils.dom.createSvgElement(
        "g",
        { class: "blocklyConnectionIndicator" }
      )),
      this.svgRoot.appendChild(this.svgOutputConnectionIndicator_),
      Blockly.utils.dom.createSvgElement(
        "circle",
        { r: Blockly.CONNECTION_INDICATOR_RADIUS },
        this.svgOutputConnectionIndicator_
      )),
      this.svgOutputConnectionIndicator_.setAttribute(
        "transform",
        "translate(" + t + "," + e + ")"
      );
  }),
  (Blockly.pxt.Drawer = function (t, e) {
    Blockly.pxt.Drawer.superClass_.constructor.call(this, t, e);
  }),
  Blockly.utils.object.inherits(Blockly.pxt.Drawer, Blockly.zelos.Drawer),
  (Blockly.pxt.Drawer.prototype.drawCollapsedStack_ = function (t) {
    var e =
        this.constants_.STATEMENT_INPUT_NOTCH_OFFSET +
        this.constants_.INSIDE_CORNERS.width,
      o =
        this.constants_.STATEMENT_INPUT_PADDING_LEFT +
        2 * this.constants_.INSIDE_CORNERS.width +
        Blockly.utils.svgPaths.lineOnAxis(
          "h",
          -this.constants_.INSIDE_CORNERS.width
        ) +
        this.constants_.INSIDE_CORNERS.pathTop,
      i = t.height - 2 * this.constants_.INSIDE_CORNERS.height,
      n =
        this.constants_.INSIDE_CORNERS.pathBottom +
        Blockly.utils.svgPaths.lineOnAxis(
          "h",
          this.constants_.INSIDE_CORNERS.width
        ),
      l = this.constants_.ELLIPSES;
    this.outlinePath_ +=
      this.constants_.OUTSIDE_CORNERS.bottomRight +
      Blockly.utils.svgPaths.lineOnAxis("H", e) +
      o +
      Blockly.utils.svgPaths.lineOnAxis("v", i / 2) +
      l +
      Blockly.utils.svgPaths.lineOnAxis("v", i / 2) +
      n +
      Blockly.utils.svgPaths.lineOnAxis(
        "H",
        t.xPos + t.width - this.constants_.OUTSIDE_CORNERS.rightHeight
      ) +
      this.constants_.OUTSIDE_CORNERS.topRight;
  }),
  (Blockly.pxt.Drawer.prototype.drawLeft_ = function () {
    if (
      (Blockly.pxt.Drawer.superClass_.drawLeft_.call(this),
      this.info_.rows.find(function (t) {
        return t.isCollapsedStack;
      }))
    ) {
      var t = this.info_.startY;
      Blockly.blockRendering.Types.isLeftRoundedCorner(
        this.info_.topRow.elements[0]
      ) && (t += this.constants_.OUTSIDE_CORNERS.rightHeight),
        (this.outlinePath_ = this.outlinePath_.slice(0, -1)),
        (this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis("V", t));
    }
  }),
  (Blockly.pxt.Drawer.prototype.drawLeftDynamicConnection_ = function () {
    Blockly.pxt.Drawer.superClass_.drawLeftDynamicConnection_.call(this),
      this.block_.pathObject.positionConnectionIndicator(
        this.block_.outputConnection.getOffsetInBlock().x,
        this.block_.outputConnection.getOffsetInBlock().y
      );
  }),
  (Blockly.pxt.CollapsedInputRow = function (t) {
    Blockly.pxt.CollapsedInputRow.superClass_.constructor.call(this, t),
      (this.type |= Blockly.blockRendering.Types.INPUT_ROW);
  }),
  Blockly.utils.object.inherits(
    Blockly.pxt.CollapsedInputRow,
    Blockly.blockRendering.Row
  ),
  (Blockly.pxt.CollapsedInputRow.prototype.measure = function () {
    (this.width = this.minWidth),
      (this.height = this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT);
  }),
  (Blockly.pxt.RenderInfo = function (t, e) {
    Blockly.pxt.RenderInfo.superClass_.constructor.call(this, t, e);
  }),
  Blockly.utils.object.inherits(
    Blockly.pxt.RenderInfo,
    Blockly.zelos.RenderInfo
  ),
  (Blockly.pxt.RenderInfo.prototype.addCollapsedRow_ = function (t) {
    return (
      this.rows.push(t),
      (t = new Blockly.pxt.CollapsedInputRow(this.constants_)),
      this.inputRowNum_++,
      (t.isCollapsedStack = !0),
      (t.hasDummyInput = !0),
      t
    );
  }),
  (Blockly.pxt.Renderer = function (t) {
    Blockly.zelos.Renderer.superClass_.constructor.call(this, t);
  }),
  Blockly.utils.object.inherits(Blockly.pxt.Renderer, Blockly.zelos.Renderer),
  (Blockly.pxt.Renderer.prototype.makePathObject = function (t, e) {
    return new Blockly.pxt.PathObject(t, e, this.getConstants());
  }),
  (Blockly.pxt.Renderer.prototype.makeRenderInfo_ = function (t) {
    return new Blockly.pxt.RenderInfo(this, t);
  }),
  (Blockly.pxt.Renderer.prototype.makeDrawer_ = function (t, e) {
    return new Blockly.pxt.Drawer(t, e);
  }),
  (Blockly.pxt.Renderer.prototype.makeConstants_ = function () {
    return new Blockly.pxt.ConstantProvider();
  }),
  Blockly.blockRendering.register("pxt", Blockly.pxt.Renderer),
  (Blockly.Themes.Dark = {}),
  (Blockly.Themes.Dark.defaultBlockStyles = {
    colour_blocks: {
      colourPrimary: "#a5745b",
      colourSecondary: "#dbc7bd",
      colourTertiary: "#845d49",
    },
    list_blocks: {
      colourPrimary: "#745ba5",
      colourSecondary: "#c7bddb",
      colourTertiary: "#5d4984",
    },
    logic_blocks: {
      colourPrimary: "#5b80a5",
      colourSecondary: "#bdccdb",
      colourTertiary: "#496684",
    },
    loop_blocks: {
      colourPrimary: "#5ba55b",
      colourSecondary: "#bddbbd",
      colourTertiary: "#498449",
    },
    math_blocks: {
      colourPrimary: "#5b67a5",
      colourSecondary: "#bdc2db",
      colourTertiary: "#495284",
    },
    procedure_blocks: {
      colourPrimary: "#995ba5",
      colourSecondary: "#d6bddb",
      colourTertiary: "#7a4984",
    },
    text_blocks: {
      colourPrimary: "#5ba58c",
      colourSecondary: "#bddbd1",
      colourTertiary: "#498470",
    },
    variable_blocks: {
      colourPrimary: "#a55b99",
      colourSecondary: "#dbbdd6",
      colourTertiary: "#84497a",
    },
    variable_dynamic_blocks: {
      colourPrimary: "#a55b99",
      colourSecondary: "#dbbdd6",
      colourTertiary: "#84497a",
    },
    hat_blocks: {
      colourPrimary: "#a55b99",
      colourSecondary: "#dbbdd6",
      colourTertiary: "#84497a",
      hat: "cap",
    },
  }),
  (Blockly.Themes.Dark.categoryStyles = {
    colour_category: { colour: "#a5745b" },
    list_category: { colour: "#745ba5" },
    logic_category: { colour: "#5b80a5" },
    loop_category: { colour: "#5ba55b" },
    math_category: { colour: "#5b67a5" },
    procedure_category: { colour: "#995ba5" },
    text_category: { colour: "#5ba58c" },
    variable_category: { colour: "#a55b99" },
    variable_dynamic_category: { colour: "#a55b99" },
  }),
  (Blockly.Themes.Dark = new Blockly.Theme(
    "dark",
    Blockly.Themes.Dark.defaultBlockStyles,
    Blockly.Themes.Dark.categoryStyles
  )),
  Blockly.Themes.Dark.setComponentStyle("workspaceBackgroundColour", "#1e1e1e"),
  Blockly.Themes.Dark.setComponentStyle("toolboxBackgroundColour", "#333"),
  Blockly.Themes.Dark.setComponentStyle("toolboxForegroundColour", "#fff"),
  Blockly.Themes.Dark.setComponentStyle("flyoutBackgroundColour", "#252526"),
  Blockly.Themes.Dark.setComponentStyle("flyoutForegroundColour", "#ccc"),
  Blockly.Themes.Dark.setComponentStyle("flyoutOpacity", 1),
  Blockly.Themes.Dark.setComponentStyle("scrollbarColour", "#797979"),
  Blockly.Themes.Dark.setComponentStyle("scrollbarOpacity", 0.4),
  Blockly.Css.register([
    ".dark-theme .blocklyTreeRow:not(.blocklyTreeSelected):hover {",
    "background-color: #2a2d2e;",
    "}",
    ".dark-theme.blocklyWidgetDiv .goog-menu, ",
    ".dark-theme.blocklyDropDownDiv {",
    "background-color: #3c3c3c;",
    "}",
    ".dark-theme.blocklyDropDownDiv {",
    "border-color: #565656;",
    "}",
    ".dark-theme.blocklyWidgetDiv .goog-menuitem-content, ",
    ".dark-theme.blocklyDropDownDiv .goog-menuitem-content {",
    "color: #f0f0f0;",
    "}",
    ".dark-theme.blocklyWidgetDiv .goog-menuitem-disabled",
    " .goog-menuitem-content,",
    ".dark-theme.blocklyDropDownDiv .goog-menuitem-disabled",
    " .goog-menuitem-content {",
    "color: #8a8a8a !important;",
    "}",
  ]),
  (Blockly.Themes.Deuteranopia = {}),
  (Blockly.Themes.Deuteranopia.defaultBlockStyles = {
    colour_blocks: {
      colourPrimary: "#f2a72c",
      colourSecondary: "#f1c172",
      colourTertiary: "#da921c",
    },
    list_blocks: {
      colourPrimary: "#7d65ab",
      colourSecondary: "#a88be0",
      colourTertiary: "#66518e",
    },
    logic_blocks: {
      colourPrimary: "#9fd2f1",
      colourSecondary: "#c0e0f4",
      colourTertiary: "#74bae5",
    },
    loop_blocks: {
      colourPrimary: "#795a07",
      colourSecondary: "#ac8726",
      colourTertiary: "#c4a03f",
    },
    math_blocks: {
      colourPrimary: "#e6da39",
      colourSecondary: "#f3ec8e",
      colourTertiary: "#f2eeb7",
    },
    procedure_blocks: {
      colourPrimary: "#590721",
      colourSecondary: "#8c475d",
      colourTertiary: "#885464",
    },
    text_blocks: {
      colourPrimary: "#058863",
      colourSecondary: "#5ecfaf",
      colourTertiary: "#04684c",
    },
    variable_blocks: {
      colourPrimary: "#47025a",
      colourSecondary: "#820fa1",
      colourTertiary: "#8e579d",
    },
    variable_dynamic_blocks: {
      colourPrimary: "#47025a",
      colourSecondary: "#820fa1",
      colourTertiary: "#8e579d",
    },
  }),
  (Blockly.Themes.Deuteranopia.categoryStyles = {
    colour_category: { colour: "#f2a72c" },
    list_category: { colour: "#7d65ab" },
    logic_category: { colour: "#9fd2f1" },
    loop_category: { colour: "#795a07" },
    math_category: { colour: "#e6da39" },
    procedure_category: { colour: "#590721" },
    text_category: { colour: "#058863" },
    variable_category: { colour: "#47025a" },
    variable_dynamic_category: { colour: "#47025a" },
  }),
  (Blockly.Themes.Deuteranopia = new Blockly.Theme(
    "deuteranopia",
    Blockly.Themes.Deuteranopia.defaultBlockStyles,
    Blockly.Themes.Deuteranopia.categoryStyles
  )),
  (Blockly.Themes.HighContrast = {}),
  (Blockly.Themes.HighContrast.defaultBlockStyles = {
    colour_blocks: {
      colourPrimary: "#a52714",
      colourSecondary: "#FB9B8C",
      colourTertiary: "#FBE1DD",
    },
    list_blocks: {
      colourPrimary: "#4a148c",
      colourSecondary: "#AD7BE9",
      colourTertiary: "#CDB6E9",
    },
    logic_blocks: {
      colourPrimary: "#01579b",
      colourSecondary: "#64C7FF",
      colourTertiary: "#C5EAFF",
    },
    loop_blocks: {
      colourPrimary: "#33691e",
      colourSecondary: "#9AFF78",
      colourTertiary: "#E1FFD7",
    },
    math_blocks: {
      colourPrimary: "#1a237e",
      colourSecondary: "#8A9EFF",
      colourTertiary: "#DCE2FF",
    },
    procedure_blocks: {
      colourPrimary: "#006064",
      colourSecondary: "#77E6EE",
      colourTertiary: "#CFECEE",
    },
    text_blocks: {
      colourPrimary: "#004d40",
      colourSecondary: "#5ae27c",
      colourTertiary: "#D2FFDD",
    },
    variable_blocks: {
      colourPrimary: "#880e4f",
      colourSecondary: "#FF73BE",
      colourTertiary: "#FFD4EB",
    },
    variable_dynamic_blocks: {
      colourPrimary: "#880e4f",
      colourSecondary: "#FF73BE",
      colourTertiary: "#FFD4EB",
    },
    hat_blocks: {
      colourPrimary: "#880e4f",
      colourSecondary: "#FF73BE",
      colourTertiary: "#FFD4EB",
      hat: "cap",
    },
  }),
  (Blockly.Themes.HighContrast.categoryStyles = {
    colour_category: { colour: "#a52714" },
    list_category: { colour: "#4a148c" },
    logic_category: { colour: "#01579b" },
    loop_category: { colour: "#33691e" },
    math_category: { colour: "#1a237e" },
    procedure_category: { colour: "#006064" },
    text_category: { colour: "#004d40" },
    variable_category: { colour: "#880e4f" },
    variable_dynamic_category: { colour: "#880e4f" },
  }),
  (Blockly.Themes.HighContrast = new Blockly.Theme(
    "highcontrast",
    Blockly.Themes.HighContrast.defaultBlockStyles,
    Blockly.Themes.HighContrast.categoryStyles
  )),
  (Blockly.Themes.Tritanopia = {}),
  (Blockly.Themes.Tritanopia.defaultBlockStyles = {
    colour_blocks: {
      colourPrimary: "#05427f",
      colourSecondary: "#2974c0",
      colourTertiary: "#2d74bb",
    },
    list_blocks: {
      colourPrimary: "#b69ce8",
      colourSecondary: "#ccbaef",
      colourTertiary: "#9176c5",
    },
    logic_blocks: {
      colourPrimary: "#9fd2f1",
      colourSecondary: "#c0e0f4",
      colourTertiary: "#74bae5",
    },
    loop_blocks: {
      colourPrimary: "#aa1846",
      colourSecondary: "#d36185",
      colourTertiary: "#7c1636",
    },
    math_blocks: {
      colourPrimary: "#e6da39",
      colourSecondary: "#f3ec8e",
      colourTertiary: "#f2eeb7",
    },
    procedure_blocks: {
      colourPrimary: "#590721",
      colourSecondary: "#8c475d",
      colourTertiary: "#885464",
    },
    text_blocks: {
      colourPrimary: "#058863",
      colourSecondary: "#5ecfaf",
      colourTertiary: "#04684c",
    },
    variable_blocks: {
      colourPrimary: "#4b2d84",
      colourSecondary: "#816ea7",
      colourTertiary: "#83759e",
    },
    variable_dynamic_blocks: {
      colourPrimary: "#4b2d84",
      colourSecondary: "#816ea7",
      colourTertiary: "#83759e",
    },
  }),
  (Blockly.Themes.Tritanopia.categoryStyles = {
    colour_category: { colour: "#05427f" },
    list_category: { colour: "#b69ce8" },
    logic_category: { colour: "#9fd2f1" },
    loop_category: { colour: "#aa1846" },
    math_category: { colour: "#e6da39" },
    procedure_category: { colour: "#590721" },
    text_category: { colour: "#058863" },
    variable_category: { colour: "#4b2d84" },
    variable_dynamic_category: { colour: "#4b2d84" },
  }),
  (Blockly.Themes.Tritanopia = new Blockly.Theme(
    "tritanopia",
    Blockly.Themes.Tritanopia.defaultBlockStyles,
    Blockly.Themes.Tritanopia.categoryStyles
  )),
  (Blockly.requires = {});
